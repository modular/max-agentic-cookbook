"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@ai-sdk+openai@2.0.44_zod@3.25.76";
exports.ids = ["vendor-chunks/@ai-sdk+openai@2.0.44_zod@3.25.76"];
exports.modules = {

/***/ "(instrument)/../../node_modules/.pnpm/@ai-sdk+openai@2.0.44_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs":
/*!*************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@ai-sdk+openai@2.0.44_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VERSION: () => (/* binding */ VERSION),\n/* harmony export */   createOpenAI: () => (/* binding */ createOpenAI),\n/* harmony export */   openai: () => (/* binding */ openai)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ai-sdk/provider-utils */ \"(instrument)/../../node_modules/.pnpm/@ai-sdk+provider-utils@3.0.10_zod@3.25.76/node_modules/@ai-sdk/provider-utils/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/provider */ \"(instrument)/../../node_modules/.pnpm/@ai-sdk+provider@2.0.0/node_modules/@ai-sdk/provider/dist/index.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4 */ \"(instrument)/../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4 */ \"(instrument)/../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/classic/coerce.js\");\n// src/openai-provider.ts\n\n\n// src/chat/openai-chat-language-model.ts\n\n\n\n\n// src/openai-error.ts\n\n\nvar openaiErrorDataSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    // The additional information below is handled loosely to support\n    // OpenAI-compatible providers that have slightly different error\n    // responses:\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.any().nullish(),\n    code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).nullish()\n  })\n});\nvar openaiFailedResponseHandler = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n  errorSchema: openaiErrorDataSchema,\n  errorToMessage: (data) => data.error.message\n});\n\n// src/chat/convert-to-openai-chat-messages.ts\n\n\nfunction convertToOpenAIChatMessages({\n  prompt,\n  systemMessageMode = \"system\"\n}) {\n  const messages = [];\n  const warnings = [];\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        switch (systemMessageMode) {\n          case \"system\": {\n            messages.push({ role: \"system\", content });\n            break;\n          }\n          case \"developer\": {\n            messages.push({ role: \"developer\", content });\n            break;\n          }\n          case \"remove\": {\n            warnings.push({\n              type: \"other\",\n              message: \"system messages are removed for this model\"\n            });\n            break;\n          }\n          default: {\n            const _exhaustiveCheck = systemMessageMode;\n            throw new Error(\n              `Unsupported system message mode: ${_exhaustiveCheck}`\n            );\n          }\n        }\n        break;\n      }\n      case \"user\": {\n        if (content.length === 1 && content[0].type === \"text\") {\n          messages.push({ role: \"user\", content: content[0].text });\n          break;\n        }\n        messages.push({\n          role: \"user\",\n          content: content.map((part, index) => {\n            var _a, _b, _c;\n            switch (part.type) {\n              case \"text\": {\n                return { type: \"text\", text: part.text };\n              }\n              case \"file\": {\n                if (part.mediaType.startsWith(\"image/\")) {\n                  const mediaType = part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType;\n                  return {\n                    type: \"image_url\",\n                    image_url: {\n                      url: part.data instanceof URL ? part.data.toString() : `data:${mediaType};base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`,\n                      // OpenAI specific extension: image detail\n                      detail: (_b = (_a = part.providerOptions) == null ? void 0 : _a.openai) == null ? void 0 : _b.imageDetail\n                    }\n                  };\n                } else if (part.mediaType.startsWith(\"audio/\")) {\n                  if (part.data instanceof URL) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                      functionality: \"audio file parts with URLs\"\n                    });\n                  }\n                  switch (part.mediaType) {\n                    case \"audio/wav\": {\n                      return {\n                        type: \"input_audio\",\n                        input_audio: {\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data),\n                          format: \"wav\"\n                        }\n                      };\n                    }\n                    case \"audio/mp3\":\n                    case \"audio/mpeg\": {\n                      return {\n                        type: \"input_audio\",\n                        input_audio: {\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data),\n                          format: \"mp3\"\n                        }\n                      };\n                    }\n                    default: {\n                      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                        functionality: `audio content parts with media type ${part.mediaType}`\n                      });\n                    }\n                  }\n                } else if (part.mediaType === \"application/pdf\") {\n                  if (part.data instanceof URL) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                      functionality: \"PDF file parts with URLs\"\n                    });\n                  }\n                  return {\n                    type: \"file\",\n                    file: typeof part.data === \"string\" && part.data.startsWith(\"file-\") ? { file_id: part.data } : {\n                      filename: (_c = part.filename) != null ? _c : `part-${index}.pdf`,\n                      file_data: `data:application/pdf;base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    }\n                  };\n                } else {\n                  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                    functionality: `file part media type ${part.mediaType}`\n                  });\n                }\n              }\n            }\n          })\n        });\n        break;\n      }\n      case \"assistant\": {\n        let text = \"\";\n        const toolCalls = [];\n        for (const part of content) {\n          switch (part.type) {\n            case \"text\": {\n              text += part.text;\n              break;\n            }\n            case \"tool-call\": {\n              toolCalls.push({\n                id: part.toolCallId,\n                type: \"function\",\n                function: {\n                  name: part.toolName,\n                  arguments: JSON.stringify(part.input)\n                }\n              });\n              break;\n            }\n          }\n        }\n        messages.push({\n          role: \"assistant\",\n          content: text,\n          tool_calls: toolCalls.length > 0 ? toolCalls : void 0\n        });\n        break;\n      }\n      case \"tool\": {\n        for (const toolResponse of content) {\n          const output = toolResponse.output;\n          let contentValue;\n          switch (output.type) {\n            case \"text\":\n            case \"error-text\":\n              contentValue = output.value;\n              break;\n            case \"content\":\n            case \"json\":\n            case \"error-json\":\n              contentValue = JSON.stringify(output.value);\n              break;\n          }\n          messages.push({\n            role: \"tool\",\n            tool_call_id: toolResponse.toolCallId,\n            content: contentValue\n          });\n        }\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return { messages, warnings };\n}\n\n// src/chat/get-response-metadata.ts\nfunction getResponseMetadata({\n  id,\n  model,\n  created\n}) {\n  return {\n    id: id != null ? id : void 0,\n    modelId: model != null ? model : void 0,\n    timestamp: created != null ? new Date(created * 1e3) : void 0\n  };\n}\n\n// src/chat/map-openai-finish-reason.ts\nfunction mapOpenAIFinishReason(finishReason) {\n  switch (finishReason) {\n    case \"stop\":\n      return \"stop\";\n    case \"length\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    case \"function_call\":\n    case \"tool_calls\":\n      return \"tool-calls\";\n    default:\n      return \"unknown\";\n  }\n}\n\n// src/chat/openai-chat-options.ts\n\nvar openaiChatLanguageModelOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Modify the likelihood of specified tokens appearing in the completion.\n   *\n   * Accepts a JSON object that maps tokens (specified by their token ID in\n   * the GPT tokenizer) to an associated bias value from -100 to 100.\n   */\n  logitBias: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_3__.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()).optional(),\n  /**\n   * Return the log probabilities of the tokens.\n   *\n   * Setting to true will return the log probabilities of the tokens that\n   * were generated.\n   *\n   * Setting to a number will return the log probabilities of the top n\n   * tokens that were generated.\n   */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).optional(),\n  /**\n   * Whether to enable parallel function calling during tool use. Default to true.\n   */\n  parallelToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * A unique identifier representing your end-user, which can help OpenAI to\n   * monitor and detect abuse.\n   */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * Reasoning effort for reasoning models. Defaults to `medium`.\n   */\n  reasoningEffort: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"minimal\", \"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * Maximum number of completion tokens to generate. Useful for reasoning models.\n   */\n  maxCompletionTokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  /**\n   * Whether to enable persistence in responses API.\n   */\n  store: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Metadata to associate with the request.\n   */\n  metadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().max(64), zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().max(512)).optional(),\n  /**\n   * Parameters for prediction mode.\n   */\n  prediction: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.any()).optional(),\n  /**\n   * Whether to use structured outputs.\n   *\n   * @default true\n   */\n  structuredOutputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Service tier for the request.\n   * - 'auto': Default service tier\n   * - 'flex': 50% cheaper processing at the cost of increased latency. Only available for o3 and o4-mini models.\n   * - 'priority': Higher-speed processing with predictably low latency at premium cost. Available for Enterprise customers.\n   *\n   * @default 'auto'\n   */\n  serviceTier: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"flex\", \"priority\"]).optional(),\n  /**\n   * Whether to use strict JSON schema validation.\n   *\n   * @default false\n   */\n  strictJsonSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Controls the verbosity of the model's responses.\n   * Lower values will result in more concise responses, while higher values will result in more verbose responses.\n   */\n  textVerbosity: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * A cache key for prompt caching. Allows manual control over prompt caching behavior.\n   * Useful for improving cache hit rates and working around automatic caching issues.\n   */\n  promptCacheKey: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * A stable identifier used to help detect users of your application\n   * that may be violating OpenAI's usage policies. The IDs should be a\n   * string that uniquely identifies each user. We recommend hashing their\n   * username or email address, in order to avoid sending us any identifying\n   * information.\n   */\n  safetyIdentifier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n// src/chat/openai-chat-prepare-tools.ts\n\nfunction prepareChatTools({\n  tools,\n  toolChoice,\n  structuredOutputs,\n  strictJsonSchema\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings };\n  }\n  const openaiTools2 = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case \"function\":\n        openaiTools2.push({\n          type: \"function\",\n          function: {\n            name: tool.name,\n            description: tool.description,\n            parameters: tool.inputSchema,\n            strict: structuredOutputs ? strictJsonSchema : void 0\n          }\n        });\n        break;\n      default:\n        toolWarnings.push({ type: \"unsupported-tool\", tool });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return { tools: openaiTools2, toolChoice: void 0, toolWarnings };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n    case \"none\":\n    case \"required\":\n      return { tools: openaiTools2, toolChoice: type, toolWarnings };\n    case \"tool\":\n      return {\n        tools: openaiTools2,\n        toolChoice: {\n          type: \"function\",\n          function: {\n            name: toolChoice.toolName\n          }\n        },\n        toolWarnings\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/chat/openai-chat-language-model.ts\nvar OpenAIChatLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      \"image/*\": [/^https?:\\/\\/.*$/]\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences,\n    responseFormat,\n    seed,\n    tools,\n    toolChoice,\n    providerOptions\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    const openaiOptions = (_a = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiChatLanguageModelOptions\n    })) != null ? _a : {};\n    const structuredOutputs = (_b = openaiOptions.structuredOutputs) != null ? _b : true;\n    if (topK != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"topK\"\n      });\n    }\n    if ((responseFormat == null ? void 0 : responseFormat.type) === \"json\" && responseFormat.schema != null && !structuredOutputs) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"responseFormat\",\n        details: \"JSON response format schema is only supported with structuredOutputs\"\n      });\n    }\n    const { messages, warnings: messageWarnings } = convertToOpenAIChatMessages(\n      {\n        prompt,\n        systemMessageMode: getSystemMessageMode(this.modelId)\n      }\n    );\n    warnings.push(...messageWarnings);\n    const strictJsonSchema = (_c = openaiOptions.strictJsonSchema) != null ? _c : false;\n    const baseArgs = {\n      // model id:\n      model: this.modelId,\n      // model specific settings:\n      logit_bias: openaiOptions.logitBias,\n      logprobs: openaiOptions.logprobs === true || typeof openaiOptions.logprobs === \"number\" ? true : void 0,\n      top_logprobs: typeof openaiOptions.logprobs === \"number\" ? openaiOptions.logprobs : typeof openaiOptions.logprobs === \"boolean\" ? openaiOptions.logprobs ? 0 : void 0 : void 0,\n      user: openaiOptions.user,\n      parallel_tool_calls: openaiOptions.parallelToolCalls,\n      // standardized settings:\n      max_tokens: maxOutputTokens,\n      temperature,\n      top_p: topP,\n      frequency_penalty: frequencyPenalty,\n      presence_penalty: presencePenalty,\n      response_format: (responseFormat == null ? void 0 : responseFormat.type) === \"json\" ? structuredOutputs && responseFormat.schema != null ? {\n        type: \"json_schema\",\n        json_schema: {\n          schema: responseFormat.schema,\n          strict: strictJsonSchema,\n          name: (_d = responseFormat.name) != null ? _d : \"response\",\n          description: responseFormat.description\n        }\n      } : { type: \"json_object\" } : void 0,\n      stop: stopSequences,\n      seed,\n      verbosity: openaiOptions.textVerbosity,\n      // openai specific settings:\n      // TODO AI SDK 6: remove, we auto-map maxOutputTokens now\n      max_completion_tokens: openaiOptions.maxCompletionTokens,\n      store: openaiOptions.store,\n      metadata: openaiOptions.metadata,\n      prediction: openaiOptions.prediction,\n      reasoning_effort: openaiOptions.reasoningEffort,\n      service_tier: openaiOptions.serviceTier,\n      prompt_cache_key: openaiOptions.promptCacheKey,\n      safety_identifier: openaiOptions.safetyIdentifier,\n      // messages:\n      messages\n    };\n    if (isReasoningModel(this.modelId)) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_p != null) {\n        baseArgs.top_p = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topP\",\n          details: \"topP is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.frequency_penalty != null) {\n        baseArgs.frequency_penalty = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"frequencyPenalty\",\n          details: \"frequencyPenalty is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.presence_penalty != null) {\n        baseArgs.presence_penalty = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"presencePenalty\",\n          details: \"presencePenalty is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.logit_bias != null) {\n        baseArgs.logit_bias = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"logitBias is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.logprobs != null) {\n        baseArgs.logprobs = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"logprobs is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_logprobs != null) {\n        baseArgs.top_logprobs = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"topLogprobs is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.max_tokens != null) {\n        if (baseArgs.max_completion_tokens == null) {\n          baseArgs.max_completion_tokens = baseArgs.max_tokens;\n        }\n        baseArgs.max_tokens = void 0;\n      }\n    } else if (this.modelId.startsWith(\"gpt-4o-search-preview\") || this.modelId.startsWith(\"gpt-4o-mini-search-preview\")) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for the search preview models and has been removed.\"\n        });\n      }\n    }\n    if (openaiOptions.serviceTier === \"flex\" && !supportsFlexProcessing(this.modelId)) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"flex processing is only available for o3, o4-mini, and gpt-5 models\"\n      });\n      baseArgs.service_tier = void 0;\n    }\n    if (openaiOptions.serviceTier === \"priority\" && !supportsPriorityProcessing(this.modelId)) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported\"\n      });\n      baseArgs.service_tier = void 0;\n    }\n    const {\n      tools: openaiTools2,\n      toolChoice: openaiToolChoice,\n      toolWarnings\n    } = prepareChatTools({\n      tools,\n      toolChoice,\n      structuredOutputs,\n      strictJsonSchema\n    });\n    return {\n      args: {\n        ...baseArgs,\n        tools: openaiTools2,\n        tool_choice: openaiToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings]\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n    const { args: body, warnings } = await this.getArgs(options);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/chat/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiChatResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const choice = response.choices[0];\n    const content = [];\n    const text = choice.message.content;\n    if (text != null && text.length > 0) {\n      content.push({ type: \"text\", text });\n    }\n    for (const toolCall of (_a = choice.message.tool_calls) != null ? _a : []) {\n      content.push({\n        type: \"tool-call\",\n        toolCallId: (_b = toolCall.id) != null ? _b : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n        toolName: toolCall.function.name,\n        input: toolCall.function.arguments\n      });\n    }\n    for (const annotation of (_c = choice.message.annotations) != null ? _c : []) {\n      content.push({\n        type: \"source\",\n        sourceType: \"url\",\n        id: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n        url: annotation.url,\n        title: annotation.title\n      });\n    }\n    const completionTokenDetails = (_d = response.usage) == null ? void 0 : _d.completion_tokens_details;\n    const promptTokenDetails = (_e = response.usage) == null ? void 0 : _e.prompt_tokens_details;\n    const providerMetadata = { openai: {} };\n    if ((completionTokenDetails == null ? void 0 : completionTokenDetails.accepted_prediction_tokens) != null) {\n      providerMetadata.openai.acceptedPredictionTokens = completionTokenDetails == null ? void 0 : completionTokenDetails.accepted_prediction_tokens;\n    }\n    if ((completionTokenDetails == null ? void 0 : completionTokenDetails.rejected_prediction_tokens) != null) {\n      providerMetadata.openai.rejectedPredictionTokens = completionTokenDetails == null ? void 0 : completionTokenDetails.rejected_prediction_tokens;\n    }\n    if (((_f = choice.logprobs) == null ? void 0 : _f.content) != null) {\n      providerMetadata.openai.logprobs = choice.logprobs.content;\n    }\n    return {\n      content,\n      finishReason: mapOpenAIFinishReason(choice.finish_reason),\n      usage: {\n        inputTokens: (_h = (_g = response.usage) == null ? void 0 : _g.prompt_tokens) != null ? _h : void 0,\n        outputTokens: (_j = (_i = response.usage) == null ? void 0 : _i.completion_tokens) != null ? _j : void 0,\n        totalTokens: (_l = (_k = response.usage) == null ? void 0 : _k.total_tokens) != null ? _l : void 0,\n        reasoningTokens: (_m = completionTokenDetails == null ? void 0 : completionTokenDetails.reasoning_tokens) != null ? _m : void 0,\n        cachedInputTokens: (_n = promptTokenDetails == null ? void 0 : promptTokenDetails.cached_tokens) != null ? _n : void 0\n      },\n      request: { body },\n      response: {\n        ...getResponseMetadata(response),\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      warnings,\n      providerMetadata\n    };\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const body = {\n      ...args,\n      stream: true,\n      stream_options: {\n        include_usage: true\n      }\n    };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/chat/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiChatChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const toolCalls = [];\n    let finishReason = \"unknown\";\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    let isFirstChunk = true;\n    let isActiveText = false;\n    const providerMetadata = { openai: {} };\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (\"error\" in value) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: value.error });\n              return;\n            }\n            if (isFirstChunk) {\n              isFirstChunk = false;\n              controller.enqueue({\n                type: \"response-metadata\",\n                ...getResponseMetadata(value)\n              });\n            }\n            if (value.usage != null) {\n              usage.inputTokens = (_a = value.usage.prompt_tokens) != null ? _a : void 0;\n              usage.outputTokens = (_b = value.usage.completion_tokens) != null ? _b : void 0;\n              usage.totalTokens = (_c = value.usage.total_tokens) != null ? _c : void 0;\n              usage.reasoningTokens = (_e = (_d = value.usage.completion_tokens_details) == null ? void 0 : _d.reasoning_tokens) != null ? _e : void 0;\n              usage.cachedInputTokens = (_g = (_f = value.usage.prompt_tokens_details) == null ? void 0 : _f.cached_tokens) != null ? _g : void 0;\n              if (((_h = value.usage.completion_tokens_details) == null ? void 0 : _h.accepted_prediction_tokens) != null) {\n                providerMetadata.openai.acceptedPredictionTokens = (_i = value.usage.completion_tokens_details) == null ? void 0 : _i.accepted_prediction_tokens;\n              }\n              if (((_j = value.usage.completion_tokens_details) == null ? void 0 : _j.rejected_prediction_tokens) != null) {\n                providerMetadata.openai.rejectedPredictionTokens = (_k = value.usage.completion_tokens_details) == null ? void 0 : _k.rejected_prediction_tokens;\n              }\n            }\n            const choice = value.choices[0];\n            if ((choice == null ? void 0 : choice.finish_reason) != null) {\n              finishReason = mapOpenAIFinishReason(choice.finish_reason);\n            }\n            if (((_l = choice == null ? void 0 : choice.logprobs) == null ? void 0 : _l.content) != null) {\n              providerMetadata.openai.logprobs = choice.logprobs.content;\n            }\n            if ((choice == null ? void 0 : choice.delta) == null) {\n              return;\n            }\n            const delta = choice.delta;\n            if (delta.content != null) {\n              if (!isActiveText) {\n                controller.enqueue({ type: \"text-start\", id: \"0\" });\n                isActiveText = true;\n              }\n              controller.enqueue({\n                type: \"text-delta\",\n                id: \"0\",\n                delta: delta.content\n              });\n            }\n            if (delta.tool_calls != null) {\n              for (const toolCallDelta of delta.tool_calls) {\n                const index = toolCallDelta.index;\n                if (toolCalls[index] == null) {\n                  if (toolCallDelta.type !== \"function\") {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'function' type.`\n                    });\n                  }\n                  if (toolCallDelta.id == null) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'id' to be a string.`\n                    });\n                  }\n                  if (((_m = toolCallDelta.function) == null ? void 0 : _m.name) == null) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'function.name' to be a string.`\n                    });\n                  }\n                  controller.enqueue({\n                    type: \"tool-input-start\",\n                    id: toolCallDelta.id,\n                    toolName: toolCallDelta.function.name\n                  });\n                  toolCalls[index] = {\n                    id: toolCallDelta.id,\n                    type: \"function\",\n                    function: {\n                      name: toolCallDelta.function.name,\n                      arguments: (_n = toolCallDelta.function.arguments) != null ? _n : \"\"\n                    },\n                    hasFinished: false\n                  };\n                  const toolCall2 = toolCalls[index];\n                  if (((_o = toolCall2.function) == null ? void 0 : _o.name) != null && ((_p = toolCall2.function) == null ? void 0 : _p.arguments) != null) {\n                    if (toolCall2.function.arguments.length > 0) {\n                      controller.enqueue({\n                        type: \"tool-input-delta\",\n                        id: toolCall2.id,\n                        delta: toolCall2.function.arguments\n                      });\n                    }\n                    if ((0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isParsableJson)(toolCall2.function.arguments)) {\n                      controller.enqueue({\n                        type: \"tool-input-end\",\n                        id: toolCall2.id\n                      });\n                      controller.enqueue({\n                        type: \"tool-call\",\n                        toolCallId: (_q = toolCall2.id) != null ? _q : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                        toolName: toolCall2.function.name,\n                        input: toolCall2.function.arguments\n                      });\n                      toolCall2.hasFinished = true;\n                    }\n                  }\n                  continue;\n                }\n                const toolCall = toolCalls[index];\n                if (toolCall.hasFinished) {\n                  continue;\n                }\n                if (((_r = toolCallDelta.function) == null ? void 0 : _r.arguments) != null) {\n                  toolCall.function.arguments += (_t = (_s = toolCallDelta.function) == null ? void 0 : _s.arguments) != null ? _t : \"\";\n                }\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.id,\n                  delta: (_u = toolCallDelta.function.arguments) != null ? _u : \"\"\n                });\n                if (((_v = toolCall.function) == null ? void 0 : _v.name) != null && ((_w = toolCall.function) == null ? void 0 : _w.arguments) != null && (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isParsableJson)(toolCall.function.arguments)) {\n                  controller.enqueue({\n                    type: \"tool-input-end\",\n                    id: toolCall.id\n                  });\n                  controller.enqueue({\n                    type: \"tool-call\",\n                    toolCallId: (_x = toolCall.id) != null ? _x : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                    toolName: toolCall.function.name,\n                    input: toolCall.function.arguments\n                  });\n                  toolCall.hasFinished = true;\n                }\n              }\n            }\n            if (delta.annotations != null) {\n              for (const annotation of delta.annotations) {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: annotation.url,\n                  title: annotation.title\n                });\n              }\n            }\n          },\n          flush(controller) {\n            if (isActiveText) {\n              controller.enqueue({ type: \"text-end\", id: \"0\" });\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              usage,\n              ...providerMetadata != null ? { providerMetadata } : {}\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar openaiTokenUsageSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  prompt_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n  }).nullish(),\n  completion_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    accepted_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    rejected_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n  }).nullish()\n}).nullish();\nvar openaiChatResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\").nullish(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        tool_calls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\"),\n            function: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n            })\n          })\n        ).nullish(),\n        annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n            start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ).nullish()\n      }),\n      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n              })\n            )\n          })\n        ).nullish()\n      }).nullish(),\n      finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    })\n  ),\n  usage: openaiTokenUsageSchema\n});\nvar openaiChatChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          role: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"assistant\"]).nullish(),\n          content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n          tool_calls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\").nullish(),\n              function: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n              })\n            })\n          ).nullish(),\n          annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n              start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n            })\n          ).nullish()\n        }).nullish(),\n        logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                  token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                  logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n                })\n              )\n            })\n          ).nullish()\n        }).nullish(),\n        finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n      })\n    ),\n    usage: openaiTokenUsageSchema\n  }),\n  openaiErrorDataSchema\n]);\nfunction isReasoningModel(modelId) {\n  return (modelId.startsWith(\"o\") || modelId.startsWith(\"gpt-5\")) && !modelId.startsWith(\"gpt-5-chat\");\n}\nfunction supportsFlexProcessing(modelId) {\n  return modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-chat\");\n}\nfunction supportsPriorityProcessing(modelId) {\n  return modelId.startsWith(\"gpt-4\") || modelId.startsWith(\"gpt-5-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-nano\") && !modelId.startsWith(\"gpt-5-chat\") || modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\");\n}\nfunction getSystemMessageMode(modelId) {\n  var _a, _b;\n  if (!isReasoningModel(modelId)) {\n    return \"system\";\n  }\n  return (_b = (_a = reasoningModels[modelId]) == null ? void 0 : _a.systemMessageMode) != null ? _b : \"developer\";\n}\nvar reasoningModels = {\n  \"o1-mini\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-mini-2024-09-12\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-preview\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-preview-2024-09-12\": {\n    systemMessageMode: \"remove\"\n  },\n  o3: {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-2025-04-16\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-mini\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-mini-2025-01-31\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o4-mini\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o4-mini-2025-04-16\": {\n    systemMessageMode: \"developer\"\n  }\n};\n\n// src/completion/openai-completion-language-model.ts\n\n\n\n// src/completion/convert-to-openai-completion-prompt.ts\n\nfunction convertToOpenAICompletionPrompt({\n  prompt,\n  user = \"user\",\n  assistant = \"assistant\"\n}) {\n  let text = \"\";\n  if (prompt[0].role === \"system\") {\n    text += `${prompt[0].content}\n\n`;\n    prompt = prompt.slice(1);\n  }\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidPromptError({\n          message: \"Unexpected system message in prompt: ${content}\",\n          prompt\n        });\n      }\n      case \"user\": {\n        const userMessage = content.map((part) => {\n          switch (part.type) {\n            case \"text\": {\n              return part.text;\n            }\n          }\n        }).filter(Boolean).join(\"\");\n        text += `${user}:\n${userMessage}\n\n`;\n        break;\n      }\n      case \"assistant\": {\n        const assistantMessage = content.map((part) => {\n          switch (part.type) {\n            case \"text\": {\n              return part.text;\n            }\n            case \"tool-call\": {\n              throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                functionality: \"tool-call messages\"\n              });\n            }\n          }\n        }).join(\"\");\n        text += `${assistant}:\n${assistantMessage}\n\n`;\n        break;\n      }\n      case \"tool\": {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n          functionality: \"tool messages\"\n        });\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  text += `${assistant}:\n`;\n  return {\n    prompt: text,\n    stopSequences: [`\n${user}:`]\n  };\n}\n\n// src/completion/get-response-metadata.ts\nfunction getResponseMetadata2({\n  id,\n  model,\n  created\n}) {\n  return {\n    id: id != null ? id : void 0,\n    modelId: model != null ? model : void 0,\n    timestamp: created != null ? new Date(created * 1e3) : void 0\n  };\n}\n\n// src/completion/map-openai-finish-reason.ts\nfunction mapOpenAIFinishReason2(finishReason) {\n  switch (finishReason) {\n    case \"stop\":\n      return \"stop\";\n    case \"length\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    case \"function_call\":\n    case \"tool_calls\":\n      return \"tool-calls\";\n    default:\n      return \"unknown\";\n  }\n}\n\n// src/completion/openai-completion-options.ts\n\nvar openaiCompletionProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n  Echo back the prompt in addition to the completion.\n     */\n  echo: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n  Modify the likelihood of specified tokens appearing in the completion.\n  \n  Accepts a JSON object that maps tokens (specified by their token ID in\n  the GPT tokenizer) to an associated bias value from -100 to 100. You\n  can use this tokenizer tool to convert text to token IDs. Mathematically,\n  the bias is added to the logits generated by the model prior to sampling.\n  The exact effect will vary per model, but values between -1 and 1 should\n  decrease or increase likelihood of selection; values like -100 or 100\n  should result in a ban or exclusive selection of the relevant token.\n  \n  As an example, you can pass {\"50256\": -100} to prevent the <|endoftext|>\n  token from being generated.\n   */\n  logitBias: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()).optional(),\n  /**\n  The suffix that comes after a completion of inserted text.\n   */\n  suffix: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n  A unique identifier representing your end-user, which can help OpenAI to\n  monitor and detect abuse. Learn more.\n   */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n  Return the log probabilities of the tokens. Including logprobs will increase\n  the response size and can slow down response times. However, it can\n  be useful to better understand how the model is behaving.\n  Setting to true will return the log probabilities of the tokens that\n  were generated.\n  Setting to a number will return the log probabilities of the top n\n  tokens that were generated.\n     */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).optional()\n});\n\n// src/completion/openai-completion-language-model.ts\nvar OpenAICompletionLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      // No URLs are supported for completion models.\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get providerOptionsName() {\n    return this.config.provider.split(\".\")[0].trim();\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences: userStopSequences,\n    responseFormat,\n    tools,\n    toolChoice,\n    seed,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openaiOptions = {\n      ...await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: \"openai\",\n        providerOptions,\n        schema: openaiCompletionProviderOptions\n      }),\n      ...await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: this.providerOptionsName,\n        providerOptions,\n        schema: openaiCompletionProviderOptions\n      })\n    };\n    if (topK != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"topK\" });\n    }\n    if (tools == null ? void 0 : tools.length) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"tools\" });\n    }\n    if (toolChoice != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"toolChoice\" });\n    }\n    if (responseFormat != null && responseFormat.type !== \"text\") {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"responseFormat\",\n        details: \"JSON response format is not supported.\"\n      });\n    }\n    const { prompt: completionPrompt, stopSequences } = convertToOpenAICompletionPrompt({ prompt });\n    const stop = [...stopSequences != null ? stopSequences : [], ...userStopSequences != null ? userStopSequences : []];\n    return {\n      args: {\n        // model id:\n        model: this.modelId,\n        // model specific settings:\n        echo: openaiOptions.echo,\n        logit_bias: openaiOptions.logitBias,\n        logprobs: (openaiOptions == null ? void 0 : openaiOptions.logprobs) === true ? 0 : (openaiOptions == null ? void 0 : openaiOptions.logprobs) === false ? void 0 : openaiOptions == null ? void 0 : openaiOptions.logprobs,\n        suffix: openaiOptions.suffix,\n        user: openaiOptions.user,\n        // standardized settings:\n        max_tokens: maxOutputTokens,\n        temperature,\n        top_p: topP,\n        frequency_penalty: frequencyPenalty,\n        presence_penalty: presencePenalty,\n        seed,\n        // prompt:\n        prompt: completionPrompt,\n        // stop sequences:\n        stop: stop.length > 0 ? stop : void 0\n      },\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c;\n    const { args, warnings } = await this.getArgs(options);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: args,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiCompletionResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const choice = response.choices[0];\n    const providerMetadata = { openai: {} };\n    if (choice.logprobs != null) {\n      providerMetadata.openai.logprobs = choice.logprobs;\n    }\n    return {\n      content: [{ type: \"text\", text: choice.text }],\n      usage: {\n        inputTokens: (_a = response.usage) == null ? void 0 : _a.prompt_tokens,\n        outputTokens: (_b = response.usage) == null ? void 0 : _b.completion_tokens,\n        totalTokens: (_c = response.usage) == null ? void 0 : _c.total_tokens\n      },\n      finishReason: mapOpenAIFinishReason2(choice.finish_reason),\n      request: { body: args },\n      response: {\n        ...getResponseMetadata2(response),\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      providerMetadata,\n      warnings\n    };\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const body = {\n      ...args,\n      stream: true,\n      stream_options: {\n        include_usage: true\n      }\n    };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiCompletionChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    let finishReason = \"unknown\";\n    const providerMetadata = { openai: {} };\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    let isFirstChunk = true;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (\"error\" in value) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: value.error });\n              return;\n            }\n            if (isFirstChunk) {\n              isFirstChunk = false;\n              controller.enqueue({\n                type: \"response-metadata\",\n                ...getResponseMetadata2(value)\n              });\n              controller.enqueue({ type: \"text-start\", id: \"0\" });\n            }\n            if (value.usage != null) {\n              usage.inputTokens = value.usage.prompt_tokens;\n              usage.outputTokens = value.usage.completion_tokens;\n              usage.totalTokens = value.usage.total_tokens;\n            }\n            const choice = value.choices[0];\n            if ((choice == null ? void 0 : choice.finish_reason) != null) {\n              finishReason = mapOpenAIFinishReason2(choice.finish_reason);\n            }\n            if ((choice == null ? void 0 : choice.logprobs) != null) {\n              providerMetadata.openai.logprobs = choice.logprobs;\n            }\n            if ((choice == null ? void 0 : choice.text) != null && choice.text.length > 0) {\n              controller.enqueue({\n                type: \"text-delta\",\n                id: \"0\",\n                delta: choice.text\n              });\n            }\n          },\n          flush(controller) {\n            if (!isFirstChunk) {\n              controller.enqueue({ type: \"text-end\", id: \"0\" });\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              providerMetadata,\n              usage\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar usageSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar openaiCompletionResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n        token_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n        top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number())).nullish()\n      }).nullish()\n    })\n  ),\n  usage: usageSchema.nullish()\n});\nvar openaiCompletionChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n        logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n          token_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n          top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number())).nullish()\n        }).nullish()\n      })\n    ),\n    usage: usageSchema.nullish()\n  }),\n  openaiErrorDataSchema\n]);\n\n// src/embedding/openai-embedding-model.ts\n\n\n\n\n// src/embedding/openai-embedding-options.ts\n\nvar openaiEmbeddingProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n  The number of dimensions the resulting output embeddings should have.\n  Only supported in text-embedding-3 and later models.\n     */\n  dimensions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  /**\n  A unique identifier representing your end-user, which can help OpenAI to\n  monitor and detect abuse. Learn more.\n  */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n// src/embedding/openai-embedding-model.ts\nvar OpenAIEmbeddingModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.maxEmbeddingsPerCall = 2048;\n    this.supportsParallelCalls = true;\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doEmbed({\n    values,\n    headers,\n    abortSignal,\n    providerOptions\n  }) {\n    var _a;\n    if (values.length > this.maxEmbeddingsPerCall) {\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.TooManyEmbeddingValuesForCallError({\n        provider: this.provider,\n        modelId: this.modelId,\n        maxEmbeddingsPerCall: this.maxEmbeddingsPerCall,\n        values\n      });\n    }\n    const openaiOptions = (_a = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiEmbeddingProviderOptions\n    })) != null ? _a : {};\n    const {\n      responseHeaders,\n      value: response,\n      rawValue\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/embeddings\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n      body: {\n        model: this.modelId,\n        input: values,\n        encoding_format: \"float\",\n        dimensions: openaiOptions.dimensions,\n        user: openaiOptions.user\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiTextEmbeddingResponseSchema\n      ),\n      abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      embeddings: response.data.map((item) => item.embedding),\n      usage: response.usage ? { tokens: response.usage.prompt_tokens } : void 0,\n      response: { headers: responseHeaders, body: rawValue }\n    };\n  }\n};\nvar openaiTextEmbeddingResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ embedding: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()) })),\n  usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number() }).nullish()\n});\n\n// src/image/openai-image-model.ts\n\n\n\n// src/image/openai-image-options.ts\nvar modelMaxImagesPerCall = {\n  \"dall-e-3\": 1,\n  \"dall-e-2\": 10,\n  \"gpt-image-1\": 10,\n  \"gpt-image-1-mini\": 10\n};\nvar hasDefaultResponseFormat = /* @__PURE__ */ new Set([\n  \"gpt-image-1\",\n  \"gpt-image-1-mini\"\n]);\n\n// src/image/openai-image-model.ts\nvar OpenAIImageModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get maxImagesPerCall() {\n    var _a;\n    return (_a = modelMaxImagesPerCall[this.modelId]) != null ? _a : 1;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doGenerate({\n    prompt,\n    n,\n    size,\n    aspectRatio,\n    seed,\n    providerOptions,\n    headers,\n    abortSignal\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    if (aspectRatio != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"aspectRatio\",\n        details: \"This model does not support aspect ratio. Use `size` instead.\"\n      });\n    }\n    if (seed != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"seed\" });\n    }\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { value: response, responseHeaders } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/images/generations\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n      body: {\n        model: this.modelId,\n        prompt,\n        n,\n        size,\n        ...(_d = providerOptions.openai) != null ? _d : {},\n        ...!hasDefaultResponseFormat.has(this.modelId) ? { response_format: \"b64_json\" } : {}\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiImageResponseSchema\n      ),\n      abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      images: response.data.map((item) => item.b64_json),\n      warnings,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders\n      },\n      providerMetadata: {\n        openai: {\n          images: response.data.map(\n            (item) => item.revised_prompt ? {\n              revisedPrompt: item.revised_prompt\n            } : null\n          )\n        }\n      }\n    };\n  }\n};\nvar openaiImageResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ b64_json: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), revised_prompt: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional() })\n  )\n});\n\n// src/tool/code-interpreter.ts\n\n\nvar codeInterpreterInputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  containerId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar codeInterpreterOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() })\n    ])\n  ).nullish()\n});\nvar codeInterpreterArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  container: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      fileIds: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n    })\n  ]).optional()\n});\nvar codeInterpreterToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.code_interpreter\",\n  name: \"code_interpreter\",\n  inputSchema: codeInterpreterInputSchema,\n  outputSchema: codeInterpreterOutputSchema\n});\nvar codeInterpreter = (args = {}) => {\n  return codeInterpreterToolFactory(args);\n};\n\n// src/tool/file-search.ts\n\n\nvar comparisonFilterSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  key: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"eq\", \"ne\", \"gt\", \"gte\", \"lt\", \"lte\"]),\n  value: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean()])\n});\nvar compoundFilterSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"and\", \"or\"]),\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([comparisonFilterSchema, zod_v4__WEBPACK_IMPORTED_MODULE_0__.lazy(() => compoundFilterSchema)])\n  )\n});\nvar fileSearchArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  vectorStoreIds: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n  maxNumResults: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  ranking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    ranker: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    scoreThreshold: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n  }).optional(),\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([comparisonFilterSchema, compoundFilterSchema]).optional()\n});\nvar fileSearchOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n  results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()),\n      fileId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ).nullable()\n});\nvar fileSearch = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.file_search\",\n  name: \"file_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({}),\n  outputSchema: fileSearchOutputSchema\n});\n\n// src/tool/image-generation.ts\n\n\nvar imageGenerationArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  background: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"opaque\", \"transparent\"]).optional(),\n  inputFidelity: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"high\"]).optional(),\n  inputImageMask: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    fileId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    imageUrl: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  moderation: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\"]).optional(),\n  outputCompression: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int().min(0).max(100).optional(),\n  outputFormat: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"png\", \"jpeg\", \"webp\"]).optional(),\n  quality: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"low\", \"medium\", \"high\"]).optional(),\n  size: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"1024x1024\", \"1024x1536\", \"1536x1024\", \"auto\"]).optional()\n}).strict();\nvar imageGenerationOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  result: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar imageGenerationToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.image_generation\",\n  name: \"image_generation\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({}),\n  outputSchema: imageGenerationOutputSchema\n});\nvar imageGeneration = (args = {}) => {\n  return imageGenerationToolFactory(args);\n};\n\n// src/tool/local-shell.ts\n\n\nvar localShellInputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"exec\"),\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n    timeoutMs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    workingDirectory: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    env: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n  })\n});\nvar localShellOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar localShell = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.local_shell\",\n  name: \"local_shell\",\n  inputSchema: localShellInputSchema,\n  outputSchema: localShellOutputSchema\n});\n\n// src/tool/web-search.ts\n\n\nvar webSearchArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    allowedDomains: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n  }).optional(),\n  searchContextSize: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"approximate\"),\n    country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional()\n});\nvar webSearchToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"openai.web_search\",\n  name: \"web_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      })\n    ]).nullish()\n  })\n});\nvar webSearch = (args = {}) => {\n  return webSearchToolFactory(args);\n};\n\n// src/tool/web-search-preview.ts\n\n\nvar webSearchPreviewArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Search context size to use for the web search.\n   * - high: Most comprehensive context, highest cost, slower response\n   * - medium: Balanced context, cost, and latency (default)\n   * - low: Least context, lowest cost, fastest response\n   */\n  searchContextSize: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * User location information to provide geographically relevant search results.\n   */\n  userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    /**\n     * Type of location (always 'approximate')\n     */\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"approximate\"),\n    /**\n     * Two-letter ISO country code (e.g., 'US', 'GB')\n     */\n    country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * City name (free text, e.g., 'Minneapolis')\n     */\n    city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * Region name (free text, e.g., 'Minnesota')\n     */\n    region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * IANA timezone (e.g., 'America/Chicago')\n     */\n    timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional()\n});\nvar webSearchPreview = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"openai.web_search_preview\",\n  name: \"web_search_preview\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      })\n    ]).nullish()\n  })\n});\n\n// src/openai-tools.ts\nvar openaiTools = {\n  /**\n   * The Code Interpreter tool allows models to write and run Python code in a\n   * sandboxed environment to solve complex problems in domains like data analysis,\n   * coding, and math.\n   *\n   * @param container - The container to use for the code interpreter.\n   *\n   * Must have name `code_interpreter`.\n   */\n  codeInterpreter,\n  /**\n   * File search is a tool available in the Responses API. It enables models to\n   * retrieve information in a knowledge base of previously uploaded files through\n   * semantic and keyword search.\n   *\n   * Must have name `file_search`.\n   *\n   * @param vectorStoreIds - The vector store IDs to use for the file search.\n   * @param maxNumResults - The maximum number of results to return.\n   * @param ranking - The ranking options to use for the file search.\n   * @param filters - The filters to use for the file search.\n   */\n  fileSearch,\n  /**\n   * The image generation tool allows you to generate images using a text prompt,\n   * and optionally image inputs. It leverages the GPT Image model,\n   * and automatically optimizes text inputs for improved performance.\n   *\n   * Must have name `image_generation`.\n   *\n   * @param size - Image dimensions (e.g., 1024x1024, 1024x1536)\n   * @param quality - Rendering quality (e.g. low, medium, high)\n   * @param format - File output format\n   * @param compression - Compression level (0-100%) for JPEG and WebP formats\n   * @param background - Transparent or opaque\n   */\n  imageGeneration,\n  /**\n   * Local shell is a tool that allows agents to run shell commands locally\n   * on a machine you or the user provides.\n   *\n   * Supported models: `gpt-5-codex` and `codex-mini-latest`\n   *\n   * Must have name `local_shell`.\n   */\n  localShell,\n  /**\n   * Web search allows models to access up-to-date information from the internet\n   * and provide answers with sourced citations.\n   *\n   * Must have name `web_search_preview`.\n   *\n   * @param searchContextSize - The search context size to use for the web search.\n   * @param userLocation - The user location to use for the web search.\n   *\n   * @deprecated Use `webSearch` instead.\n   */\n  webSearchPreview,\n  /**\n   * Web search allows models to access up-to-date information from the internet\n   * and provide answers with sourced citations.\n   *\n   * Must have name `web_search`.\n   *\n   * @param filters - The filters to use for the web search.\n   * @param searchContextSize - The search context size to use for the web search.\n   * @param userLocation - The user location to use for the web search.\n   */\n  webSearch\n};\n\n// src/responses/openai-responses-language-model.ts\n\n\n\n\n// src/responses/convert-to-openai-responses-input.ts\n\n\n\nfunction isFileId(data, prefixes) {\n  if (!prefixes) return false;\n  return prefixes.some((prefix) => data.startsWith(prefix));\n}\nasync function convertToOpenAIResponsesInput({\n  prompt,\n  systemMessageMode,\n  fileIdPrefixes,\n  store,\n  hasLocalShellTool = false\n}) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n  const input = [];\n  const warnings = [];\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        switch (systemMessageMode) {\n          case \"system\": {\n            input.push({ role: \"system\", content });\n            break;\n          }\n          case \"developer\": {\n            input.push({ role: \"developer\", content });\n            break;\n          }\n          case \"remove\": {\n            warnings.push({\n              type: \"other\",\n              message: \"system messages are removed for this model\"\n            });\n            break;\n          }\n          default: {\n            const _exhaustiveCheck = systemMessageMode;\n            throw new Error(\n              `Unsupported system message mode: ${_exhaustiveCheck}`\n            );\n          }\n        }\n        break;\n      }\n      case \"user\": {\n        input.push({\n          role: \"user\",\n          content: content.map((part, index) => {\n            var _a2, _b2, _c2;\n            switch (part.type) {\n              case \"text\": {\n                return { type: \"input_text\", text: part.text };\n              }\n              case \"file\": {\n                if (part.mediaType.startsWith(\"image/\")) {\n                  const mediaType = part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType;\n                  return {\n                    type: \"input_image\",\n                    ...part.data instanceof URL ? { image_url: part.data.toString() } : typeof part.data === \"string\" && isFileId(part.data, fileIdPrefixes) ? { file_id: part.data } : {\n                      image_url: `data:${mediaType};base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    },\n                    detail: (_b2 = (_a2 = part.providerOptions) == null ? void 0 : _a2.openai) == null ? void 0 : _b2.imageDetail\n                  };\n                } else if (part.mediaType === \"application/pdf\") {\n                  if (part.data instanceof URL) {\n                    return {\n                      type: \"input_file\",\n                      file_url: part.data.toString()\n                    };\n                  }\n                  return {\n                    type: \"input_file\",\n                    ...typeof part.data === \"string\" && isFileId(part.data, fileIdPrefixes) ? { file_id: part.data } : {\n                      filename: (_c2 = part.filename) != null ? _c2 : `part-${index}.pdf`,\n                      file_data: `data:application/pdf;base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    }\n                  };\n                } else {\n                  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                    functionality: `file part media type ${part.mediaType}`\n                  });\n                }\n              }\n            }\n          })\n        });\n        break;\n      }\n      case \"assistant\": {\n        const reasoningMessages = {};\n        const toolCallParts = {};\n        for (const part of content) {\n          switch (part.type) {\n            case \"text\": {\n              input.push({\n                role: \"assistant\",\n                content: [{ type: \"output_text\", text: part.text }],\n                id: (_c = (_b = (_a = part.providerOptions) == null ? void 0 : _a.openai) == null ? void 0 : _b.itemId) != null ? _c : void 0\n              });\n              break;\n            }\n            case \"tool-call\": {\n              toolCallParts[part.toolCallId] = part;\n              if (part.providerExecuted) {\n                break;\n              }\n              if (hasLocalShellTool && part.toolName === \"local_shell\") {\n                const parsedInput = localShellInputSchema.parse(part.input);\n                input.push({\n                  type: \"local_shell_call\",\n                  call_id: part.toolCallId,\n                  id: (_f = (_e = (_d = part.providerOptions) == null ? void 0 : _d.openai) == null ? void 0 : _e.itemId) != null ? _f : void 0,\n                  action: {\n                    type: \"exec\",\n                    command: parsedInput.action.command,\n                    timeout_ms: parsedInput.action.timeoutMs,\n                    user: parsedInput.action.user,\n                    working_directory: parsedInput.action.workingDirectory,\n                    env: parsedInput.action.env\n                  }\n                });\n                break;\n              }\n              input.push({\n                type: \"function_call\",\n                call_id: part.toolCallId,\n                name: part.toolName,\n                arguments: JSON.stringify(part.input),\n                id: (_i = (_h = (_g = part.providerOptions) == null ? void 0 : _g.openai) == null ? void 0 : _h.itemId) != null ? _i : void 0\n              });\n              break;\n            }\n            // assistant tool result parts are from provider-executed tools:\n            case \"tool-result\": {\n              if (store) {\n                input.push({ type: \"item_reference\", id: part.toolCallId });\n              } else {\n                warnings.push({\n                  type: \"other\",\n                  message: `Results for OpenAI tool ${part.toolName} are not sent to the API when store is false`\n                });\n              }\n              break;\n            }\n            case \"reasoning\": {\n              const providerOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n                provider: \"openai\",\n                providerOptions: part.providerOptions,\n                schema: openaiResponsesReasoningProviderOptionsSchema\n              });\n              const reasoningId = providerOptions == null ? void 0 : providerOptions.itemId;\n              if (reasoningId != null) {\n                const reasoningMessage = reasoningMessages[reasoningId];\n                if (store) {\n                  if (reasoningMessage === void 0) {\n                    input.push({ type: \"item_reference\", id: reasoningId });\n                    reasoningMessages[reasoningId] = {\n                      type: \"reasoning\",\n                      id: reasoningId,\n                      summary: []\n                    };\n                  }\n                } else {\n                  const summaryParts = [];\n                  if (part.text.length > 0) {\n                    summaryParts.push({\n                      type: \"summary_text\",\n                      text: part.text\n                    });\n                  } else if (reasoningMessage !== void 0) {\n                    warnings.push({\n                      type: \"other\",\n                      message: `Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(part)}.`\n                    });\n                  }\n                  if (reasoningMessage === void 0) {\n                    reasoningMessages[reasoningId] = {\n                      type: \"reasoning\",\n                      id: reasoningId,\n                      encrypted_content: providerOptions == null ? void 0 : providerOptions.reasoningEncryptedContent,\n                      summary: summaryParts\n                    };\n                    input.push(reasoningMessages[reasoningId]);\n                  } else {\n                    reasoningMessage.summary.push(...summaryParts);\n                  }\n                }\n              } else {\n                warnings.push({\n                  type: \"other\",\n                  message: `Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(part)}.`\n                });\n              }\n              break;\n            }\n          }\n        }\n        break;\n      }\n      case \"tool\": {\n        for (const part of content) {\n          const output = part.output;\n          if (hasLocalShellTool && part.toolName === \"local_shell\" && output.type === \"json\") {\n            input.push({\n              type: \"local_shell_call_output\",\n              call_id: part.toolCallId,\n              output: localShellOutputSchema.parse(output.value).output\n            });\n            break;\n          }\n          let contentValue;\n          switch (output.type) {\n            case \"text\":\n            case \"error-text\":\n              contentValue = output.value;\n              break;\n            case \"content\":\n            case \"json\":\n            case \"error-json\":\n              contentValue = JSON.stringify(output.value);\n              break;\n          }\n          input.push({\n            type: \"function_call_output\",\n            call_id: part.toolCallId,\n            output: contentValue\n          });\n        }\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return { input, warnings };\n}\nvar openaiResponsesReasoningProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  itemId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningEncryptedContent: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n});\n\n// src/responses/map-openai-responses-finish-reason.ts\nfunction mapOpenAIResponseFinishReason({\n  finishReason,\n  hasFunctionCall\n}) {\n  switch (finishReason) {\n    case void 0:\n    case null:\n      return hasFunctionCall ? \"tool-calls\" : \"stop\";\n    case \"max_output_tokens\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    default:\n      return hasFunctionCall ? \"tool-calls\" : \"unknown\";\n  }\n}\n\n// src/responses/openai-responses-prepare-tools.ts\n\nfunction prepareResponsesTools({\n  tools,\n  toolChoice,\n  strictJsonSchema\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings };\n  }\n  const openaiTools2 = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case \"function\":\n        openaiTools2.push({\n          type: \"function\",\n          name: tool.name,\n          description: tool.description,\n          parameters: tool.inputSchema,\n          strict: strictJsonSchema\n        });\n        break;\n      case \"provider-defined\": {\n        switch (tool.id) {\n          case \"openai.file_search\": {\n            const args = fileSearchArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"file_search\",\n              vector_store_ids: args.vectorStoreIds,\n              max_num_results: args.maxNumResults,\n              ranking_options: args.ranking ? {\n                ranker: args.ranking.ranker,\n                score_threshold: args.ranking.scoreThreshold\n              } : void 0,\n              filters: args.filters\n            });\n            break;\n          }\n          case \"openai.local_shell\": {\n            openaiTools2.push({\n              type: \"local_shell\"\n            });\n            break;\n          }\n          case \"openai.web_search_preview\": {\n            const args = webSearchPreviewArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"web_search_preview\",\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"openai.web_search\": {\n            const args = webSearchArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"web_search\",\n              filters: args.filters != null ? { allowed_domains: args.filters.allowedDomains } : void 0,\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"openai.code_interpreter\": {\n            const args = codeInterpreterArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"code_interpreter\",\n              container: args.container == null ? { type: \"auto\", file_ids: void 0 } : typeof args.container === \"string\" ? args.container : { type: \"auto\", file_ids: args.container.fileIds }\n            });\n            break;\n          }\n          case \"openai.image_generation\": {\n            const args = imageGenerationArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"image_generation\",\n              background: args.background,\n              input_fidelity: args.inputFidelity,\n              input_image_mask: args.inputImageMask ? {\n                file_id: args.inputImageMask.fileId,\n                image_url: args.inputImageMask.imageUrl\n              } : void 0,\n              model: args.model,\n              size: args.size,\n              quality: args.quality,\n              moderation: args.moderation,\n              output_format: args.outputFormat,\n              output_compression: args.outputCompression\n            });\n            break;\n          }\n        }\n        break;\n      }\n      default:\n        toolWarnings.push({ type: \"unsupported-tool\", tool });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return { tools: openaiTools2, toolChoice: void 0, toolWarnings };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n    case \"none\":\n    case \"required\":\n      return { tools: openaiTools2, toolChoice: type, toolWarnings };\n    case \"tool\":\n      return {\n        tools: openaiTools2,\n        toolChoice: toolChoice.toolName === \"code_interpreter\" || toolChoice.toolName === \"file_search\" || toolChoice.toolName === \"image_generation\" || toolChoice.toolName === \"web_search_preview\" || toolChoice.toolName === \"web_search\" ? { type: toolChoice.toolName } : { type: \"function\", name: toolChoice.toolName },\n        toolWarnings\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/responses/openai-responses-language-model.ts\nvar webSearchCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n      query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ]).nullish()\n});\nvar fileSearchCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_search_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n  results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()),\n      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ).nullish()\n});\nvar codeInterpreterCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_interpreter_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n  container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() })\n    ])\n  ).nullable()\n});\nvar localShellCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"local_shell_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"exec\"),\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n    timeout_ms: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    working_directory: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    env: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n  })\n});\nvar imageGenerationCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image_generation_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  result: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar TOP_LOGPROBS_MAX = 20;\nvar LOGPROBS_SCHEMA = zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n      })\n    )\n  })\n);\nvar OpenAIResponsesLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      \"image/*\": [/^https?:\\/\\/.*$/],\n      \"application/pdf\": [/^https?:\\/\\/.*$/]\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    maxOutputTokens,\n    temperature,\n    stopSequences,\n    topP,\n    topK,\n    presencePenalty,\n    frequencyPenalty,\n    seed,\n    prompt,\n    providerOptions,\n    tools,\n    toolChoice,\n    responseFormat\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    const modelConfig = getResponsesModelConfig(this.modelId);\n    if (topK != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"topK\" });\n    }\n    if (seed != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"seed\" });\n    }\n    if (presencePenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"presencePenalty\"\n      });\n    }\n    if (frequencyPenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"frequencyPenalty\"\n      });\n    }\n    if (stopSequences != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"stopSequences\" });\n    }\n    const openaiOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiResponsesProviderOptionsSchema\n    });\n    const { input, warnings: inputWarnings } = await convertToOpenAIResponsesInput({\n      prompt,\n      systemMessageMode: modelConfig.systemMessageMode,\n      fileIdPrefixes: this.config.fileIdPrefixes,\n      store: (_a = openaiOptions == null ? void 0 : openaiOptions.store) != null ? _a : true,\n      hasLocalShellTool: hasOpenAITool(\"openai.local_shell\")\n    });\n    warnings.push(...inputWarnings);\n    const strictJsonSchema = (_b = openaiOptions == null ? void 0 : openaiOptions.strictJsonSchema) != null ? _b : false;\n    let include = openaiOptions == null ? void 0 : openaiOptions.include;\n    function addInclude(key) {\n      include = include != null ? [...include, key] : [key];\n    }\n    function hasOpenAITool(id) {\n      return (tools == null ? void 0 : tools.find(\n        (tool) => tool.type === \"provider-defined\" && tool.id === id\n      )) != null;\n    }\n    const topLogprobs = typeof (openaiOptions == null ? void 0 : openaiOptions.logprobs) === \"number\" ? openaiOptions == null ? void 0 : openaiOptions.logprobs : (openaiOptions == null ? void 0 : openaiOptions.logprobs) === true ? TOP_LOGPROBS_MAX : void 0;\n    if (topLogprobs) {\n      addInclude(\"message.output_text.logprobs\");\n    }\n    const webSearchToolName = (_c = tools == null ? void 0 : tools.find(\n      (tool) => tool.type === \"provider-defined\" && (tool.id === \"openai.web_search\" || tool.id === \"openai.web_search_preview\")\n    )) == null ? void 0 : _c.name;\n    if (webSearchToolName) {\n      addInclude(\"web_search_call.action.sources\");\n    }\n    if (hasOpenAITool(\"openai.code_interpreter\")) {\n      addInclude(\"code_interpreter_call.outputs\");\n    }\n    const baseArgs = {\n      model: this.modelId,\n      input,\n      temperature,\n      top_p: topP,\n      max_output_tokens: maxOutputTokens,\n      ...((responseFormat == null ? void 0 : responseFormat.type) === \"json\" || (openaiOptions == null ? void 0 : openaiOptions.textVerbosity)) && {\n        text: {\n          ...(responseFormat == null ? void 0 : responseFormat.type) === \"json\" && {\n            format: responseFormat.schema != null ? {\n              type: \"json_schema\",\n              strict: strictJsonSchema,\n              name: (_d = responseFormat.name) != null ? _d : \"response\",\n              description: responseFormat.description,\n              schema: responseFormat.schema\n            } : { type: \"json_object\" }\n          },\n          ...(openaiOptions == null ? void 0 : openaiOptions.textVerbosity) && {\n            verbosity: openaiOptions.textVerbosity\n          }\n        }\n      },\n      // provider options:\n      max_tool_calls: openaiOptions == null ? void 0 : openaiOptions.maxToolCalls,\n      metadata: openaiOptions == null ? void 0 : openaiOptions.metadata,\n      parallel_tool_calls: openaiOptions == null ? void 0 : openaiOptions.parallelToolCalls,\n      previous_response_id: openaiOptions == null ? void 0 : openaiOptions.previousResponseId,\n      store: openaiOptions == null ? void 0 : openaiOptions.store,\n      user: openaiOptions == null ? void 0 : openaiOptions.user,\n      instructions: openaiOptions == null ? void 0 : openaiOptions.instructions,\n      service_tier: openaiOptions == null ? void 0 : openaiOptions.serviceTier,\n      include,\n      prompt_cache_key: openaiOptions == null ? void 0 : openaiOptions.promptCacheKey,\n      safety_identifier: openaiOptions == null ? void 0 : openaiOptions.safetyIdentifier,\n      top_logprobs: topLogprobs,\n      // model-specific settings:\n      ...modelConfig.isReasoningModel && ((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null || (openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null) && {\n        reasoning: {\n          ...(openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null && {\n            effort: openaiOptions.reasoningEffort\n          },\n          ...(openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null && {\n            summary: openaiOptions.reasoningSummary\n          }\n        }\n      },\n      ...modelConfig.requiredAutoTruncation && {\n        truncation: \"auto\"\n      }\n    };\n    if (modelConfig.isReasoningModel) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_p != null) {\n        baseArgs.top_p = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topP\",\n          details: \"topP is not supported for reasoning models\"\n        });\n      }\n    } else {\n      if ((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"reasoningEffort\",\n          details: \"reasoningEffort is not supported for non-reasoning models\"\n        });\n      }\n      if ((openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"reasoningSummary\",\n          details: \"reasoningSummary is not supported for non-reasoning models\"\n        });\n      }\n    }\n    if ((openaiOptions == null ? void 0 : openaiOptions.serviceTier) === \"flex\" && !modelConfig.supportsFlexProcessing) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"flex processing is only available for o3, o4-mini, and gpt-5 models\"\n      });\n      delete baseArgs.service_tier;\n    }\n    if ((openaiOptions == null ? void 0 : openaiOptions.serviceTier) === \"priority\" && !modelConfig.supportsPriorityProcessing) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported\"\n      });\n      delete baseArgs.service_tier;\n    }\n    const {\n      tools: openaiTools2,\n      toolChoice: openaiToolChoice,\n      toolWarnings\n    } = prepareResponsesTools({\n      tools,\n      toolChoice,\n      strictJsonSchema\n    });\n    return {\n      webSearchToolName,\n      args: {\n        ...baseArgs,\n        tools: openaiTools2,\n        tool_choice: openaiToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings]\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;\n    const {\n      args: body,\n      warnings,\n      webSearchToolName\n    } = await this.getArgs(options);\n    const url = this.config.url({\n      path: \"/responses\",\n      modelId: this.modelId\n    });\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url,\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n          created_at: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n          error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          }).nullish(),\n          model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n          output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n                role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"output_text\"),\n                    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                    logprobs: LOGPROBS_SCHEMA.nullish(),\n                    annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                      zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n                          start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n                          end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n                          url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                          title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n                        }),\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_citation\"),\n                          file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                          filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                          index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          quote: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n                        }),\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"container_file_citation\")\n                        })\n                      ])\n                    )\n                  })\n                )\n              }),\n              webSearchCallItem,\n              fileSearchCallItem,\n              codeInterpreterCallItem,\n              imageGenerationCallItem,\n              localShellCallItem,\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n                call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                summary: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"summary_text\"),\n                    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n                  })\n                )\n              })\n            ])\n          ),\n          service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n          incomplete_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).nullish(),\n          usage: usageSchema2\n        })\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    if (response.error) {\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.APICallError({\n        message: response.error.message,\n        url,\n        requestBodyValues: body,\n        statusCode: 400,\n        responseHeaders,\n        responseBody: rawResponse,\n        isRetryable: false\n      });\n    }\n    const content = [];\n    const logprobs = [];\n    let hasFunctionCall = false;\n    for (const part of response.output) {\n      switch (part.type) {\n        case \"reasoning\": {\n          if (part.summary.length === 0) {\n            part.summary.push({ type: \"summary_text\", text: \"\" });\n          }\n          for (const summary of part.summary) {\n            content.push({\n              type: \"reasoning\",\n              text: summary.text,\n              providerMetadata: {\n                openai: {\n                  itemId: part.id,\n                  reasoningEncryptedContent: (_a = part.encrypted_content) != null ? _a : null\n                }\n              }\n            });\n          }\n          break;\n        }\n        case \"image_generation_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"image_generation\",\n            input: \"{}\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"image_generation\",\n            result: {\n              result: part.result\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"local_shell_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: \"local_shell\",\n            input: JSON.stringify({ action: part.action }),\n            providerMetadata: {\n              openai: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"message\": {\n          for (const contentPart of part.content) {\n            if (((_c = (_b = options.providerOptions) == null ? void 0 : _b.openai) == null ? void 0 : _c.logprobs) && contentPart.logprobs) {\n              logprobs.push(contentPart.logprobs);\n            }\n            content.push({\n              type: \"text\",\n              text: contentPart.text,\n              providerMetadata: {\n                openai: {\n                  itemId: part.id\n                }\n              }\n            });\n            for (const annotation of contentPart.annotations) {\n              if (annotation.type === \"url_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (_f = (_e = (_d = this.config).generateId) == null ? void 0 : _e.call(_d)) != null ? _f : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: annotation.url,\n                  title: annotation.title\n                });\n              } else if (annotation.type === \"file_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_i = (_h = (_g = this.config).generateId) == null ? void 0 : _h.call(_g)) != null ? _i : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_k = (_j = annotation.quote) != null ? _j : annotation.filename) != null ? _k : \"Document\",\n                  filename: (_l = annotation.filename) != null ? _l : annotation.file_id\n                });\n              }\n            }\n          }\n          break;\n        }\n        case \"function_call\": {\n          hasFunctionCall = true;\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: part.name,\n            input: part.arguments,\n            providerMetadata: {\n              openai: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"web_search_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n            input: JSON.stringify({ action: part.action }),\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n            result: { status: part.status },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"computer_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"computer_use\",\n            input: \"\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"computer_use\",\n            result: {\n              type: \"computer_use_tool_result\",\n              status: part.status || \"completed\"\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"file_search_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"file_search\",\n            input: \"{}\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"file_search\",\n            result: {\n              queries: part.queries,\n              results: (_n = (_m = part.results) == null ? void 0 : _m.map((result) => ({\n                attributes: result.attributes,\n                fileId: result.file_id,\n                filename: result.filename,\n                score: result.score,\n                text: result.text\n              }))) != null ? _n : null\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"code_interpreter_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"code_interpreter\",\n            input: JSON.stringify({\n              code: part.code,\n              containerId: part.container_id\n            }),\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"code_interpreter\",\n            result: {\n              outputs: part.outputs\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n      }\n    }\n    const providerMetadata = {\n      openai: { responseId: response.id }\n    };\n    if (logprobs.length > 0) {\n      providerMetadata.openai.logprobs = logprobs;\n    }\n    if (typeof response.service_tier === \"string\") {\n      providerMetadata.openai.serviceTier = response.service_tier;\n    }\n    return {\n      content,\n      finishReason: mapOpenAIResponseFinishReason({\n        finishReason: (_o = response.incomplete_details) == null ? void 0 : _o.reason,\n        hasFunctionCall\n      }),\n      usage: {\n        inputTokens: response.usage.input_tokens,\n        outputTokens: response.usage.output_tokens,\n        totalTokens: response.usage.input_tokens + response.usage.output_tokens,\n        reasoningTokens: (_q = (_p = response.usage.output_tokens_details) == null ? void 0 : _p.reasoning_tokens) != null ? _q : void 0,\n        cachedInputTokens: (_s = (_r = response.usage.input_tokens_details) == null ? void 0 : _r.cached_tokens) != null ? _s : void 0\n      },\n      request: { body },\n      response: {\n        id: response.id,\n        timestamp: new Date(response.created_at * 1e3),\n        modelId: response.model,\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      providerMetadata,\n      warnings\n    };\n  }\n  async doStream(options) {\n    const {\n      args: body,\n      warnings,\n      webSearchToolName\n    } = await this.getArgs(options);\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/responses\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: {\n        ...body,\n        stream: true\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiResponsesChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const self = this;\n    let finishReason = \"unknown\";\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    const logprobs = [];\n    let responseId = null;\n    const ongoingToolCalls = {};\n    let hasFunctionCall = false;\n    const activeReasoning = {};\n    let serviceTier;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (isResponseOutputItemAddedChunk(value)) {\n              if (value.item.type === \"function_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: value.item.name,\n                  toolCallId: value.item.call_id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.call_id,\n                  toolName: value.item.name\n                });\n              } else if (value.item.type === \"web_search_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"computer_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: \"computer_use\",\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: \"computer_use\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"code_interpreter_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: \"code_interpreter\",\n                  toolCallId: value.item.id,\n                  codeInterpreter: {\n                    containerId: value.item.container_id\n                  }\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: \"code_interpreter\",\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: value.item.id,\n                  delta: `{\"containerId\":\"${value.item.container_id}\",\"code\":\"`\n                });\n              } else if (value.item.type === \"file_search_call\") {\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"file_search\",\n                  input: \"{}\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"image_generation_call\") {\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"image_generation\",\n                  input: \"{}\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"message\") {\n                controller.enqueue({\n                  type: \"text-start\",\n                  id: value.item.id,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (isResponseOutputItemAddedReasoningChunk(value)) {\n                activeReasoning[value.item.id] = {\n                  encryptedContent: value.item.encrypted_content,\n                  summaryParts: [0]\n                };\n                controller.enqueue({\n                  type: \"reasoning-start\",\n                  id: `${value.item.id}:0`,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id,\n                      reasoningEncryptedContent: (_a = value.item.encrypted_content) != null ? _a : null\n                    }\n                  }\n                });\n              }\n            } else if (isResponseOutputItemDoneChunk(value)) {\n              if (value.item.type === \"function_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                hasFunctionCall = true;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.call_id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.call_id,\n                  toolName: value.item.name,\n                  input: value.item.arguments,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (value.item.type === \"web_search_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"web_search\",\n                  input: JSON.stringify({ action: value.item.action }),\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"web_search\",\n                  result: { status: value.item.status },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"computer_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"computer_use\",\n                  input: \"\",\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"computer_use\",\n                  result: {\n                    type: \"computer_use_tool_result\",\n                    status: value.item.status || \"completed\"\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"file_search_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"file_search\",\n                  result: {\n                    queries: value.item.queries,\n                    results: (_c = (_b = value.item.results) == null ? void 0 : _b.map((result) => ({\n                      attributes: result.attributes,\n                      fileId: result.file_id,\n                      filename: result.filename,\n                      score: result.score,\n                      text: result.text\n                    }))) != null ? _c : null\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"code_interpreter_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"code_interpreter\",\n                  result: {\n                    outputs: value.item.outputs\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"image_generation_call\") {\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"image_generation\",\n                  result: {\n                    result: value.item.result\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"local_shell_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.call_id,\n                  toolName: \"local_shell\",\n                  input: JSON.stringify({\n                    action: {\n                      type: \"exec\",\n                      command: value.item.action.command,\n                      timeoutMs: value.item.action.timeout_ms,\n                      user: value.item.action.user,\n                      workingDirectory: value.item.action.working_directory,\n                      env: value.item.action.env\n                    }\n                  }),\n                  providerMetadata: {\n                    openai: { itemId: value.item.id }\n                  }\n                });\n              } else if (value.item.type === \"message\") {\n                controller.enqueue({\n                  type: \"text-end\",\n                  id: value.item.id\n                });\n              } else if (isResponseOutputItemDoneReasoningChunk(value)) {\n                const activeReasoningPart = activeReasoning[value.item.id];\n                for (const summaryIndex of activeReasoningPart.summaryParts) {\n                  controller.enqueue({\n                    type: \"reasoning-end\",\n                    id: `${value.item.id}:${summaryIndex}`,\n                    providerMetadata: {\n                      openai: {\n                        itemId: value.item.id,\n                        reasoningEncryptedContent: (_d = value.item.encrypted_content) != null ? _d : null\n                      }\n                    }\n                  });\n                }\n                delete activeReasoning[value.item.id];\n              }\n            } else if (isResponseFunctionCallArgumentsDeltaChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: value.delta\n                });\n              }\n            } else if (isResponseCodeInterpreterCallCodeDeltaChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  // The delta is code, which is embedding in a JSON string.\n                  // To escape it, we use JSON.stringify and slice to remove the outer quotes.\n                  delta: JSON.stringify(value.delta).slice(1, -1)\n                });\n              }\n            } else if (isResponseCodeInterpreterCallCodeDoneChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: '\"}'\n                });\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: toolCall.toolCallId\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: toolCall.toolCallId,\n                  toolName: \"code_interpreter\",\n                  input: JSON.stringify({\n                    code: value.code,\n                    containerId: toolCall.codeInterpreter.containerId\n                  }),\n                  providerExecuted: true\n                });\n              }\n            } else if (isResponseCreatedChunk(value)) {\n              responseId = value.response.id;\n              controller.enqueue({\n                type: \"response-metadata\",\n                id: value.response.id,\n                timestamp: new Date(value.response.created_at * 1e3),\n                modelId: value.response.model\n              });\n            } else if (isTextDeltaChunk(value)) {\n              controller.enqueue({\n                type: \"text-delta\",\n                id: value.item_id,\n                delta: value.delta\n              });\n              if (((_f = (_e = options.providerOptions) == null ? void 0 : _e.openai) == null ? void 0 : _f.logprobs) && value.logprobs) {\n                logprobs.push(value.logprobs);\n              }\n            } else if (isResponseReasoningSummaryPartAddedChunk(value)) {\n              if (value.summary_index > 0) {\n                (_g = activeReasoning[value.item_id]) == null ? void 0 : _g.summaryParts.push(\n                  value.summary_index\n                );\n                controller.enqueue({\n                  type: \"reasoning-start\",\n                  id: `${value.item_id}:${value.summary_index}`,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item_id,\n                      reasoningEncryptedContent: (_i = (_h = activeReasoning[value.item_id]) == null ? void 0 : _h.encryptedContent) != null ? _i : null\n                    }\n                  }\n                });\n              }\n            } else if (isResponseReasoningSummaryTextDeltaChunk(value)) {\n              controller.enqueue({\n                type: \"reasoning-delta\",\n                id: `${value.item_id}:${value.summary_index}`,\n                delta: value.delta,\n                providerMetadata: {\n                  openai: {\n                    itemId: value.item_id\n                  }\n                }\n              });\n            } else if (isResponseFinishedChunk(value)) {\n              finishReason = mapOpenAIResponseFinishReason({\n                finishReason: (_j = value.response.incomplete_details) == null ? void 0 : _j.reason,\n                hasFunctionCall\n              });\n              usage.inputTokens = value.response.usage.input_tokens;\n              usage.outputTokens = value.response.usage.output_tokens;\n              usage.totalTokens = value.response.usage.input_tokens + value.response.usage.output_tokens;\n              usage.reasoningTokens = (_l = (_k = value.response.usage.output_tokens_details) == null ? void 0 : _k.reasoning_tokens) != null ? _l : void 0;\n              usage.cachedInputTokens = (_n = (_m = value.response.usage.input_tokens_details) == null ? void 0 : _m.cached_tokens) != null ? _n : void 0;\n              if (typeof value.response.service_tier === \"string\") {\n                serviceTier = value.response.service_tier;\n              }\n            } else if (isResponseAnnotationAddedChunk(value)) {\n              if (value.annotation.type === \"url_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (_q = (_p = (_o = self.config).generateId) == null ? void 0 : _p.call(_o)) != null ? _q : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: value.annotation.url,\n                  title: value.annotation.title\n                });\n              } else if (value.annotation.type === \"file_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_t = (_s = (_r = self.config).generateId) == null ? void 0 : _s.call(_r)) != null ? _t : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_v = (_u = value.annotation.quote) != null ? _u : value.annotation.filename) != null ? _v : \"Document\",\n                  filename: (_w = value.annotation.filename) != null ? _w : value.annotation.file_id\n                });\n              }\n            } else if (isErrorChunk(value)) {\n              controller.enqueue({ type: \"error\", error: value });\n            }\n          },\n          flush(controller) {\n            const providerMetadata = {\n              openai: {\n                responseId\n              }\n            };\n            if (logprobs.length > 0) {\n              providerMetadata.openai.logprobs = logprobs;\n            }\n            if (serviceTier !== void 0) {\n              providerMetadata.openai.serviceTier = serviceTier;\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              usage,\n              providerMetadata\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar usageSchema2 = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  input_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish() }).nullish(),\n  output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  output_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish() }).nullish()\n});\nvar textDeltaChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_text.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  logprobs: LOGPROBS_SCHEMA.nullish()\n});\nvar errorChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\"),\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  sequence_number: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar responseFinishedChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"response.completed\", \"response.incomplete\"]),\n  response: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    incomplete_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).nullish(),\n    usage: usageSchema2,\n    service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n  })\n});\nvar responseCreatedChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.created\"),\n  response: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    created_at: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n  })\n});\nvar responseOutputItemAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_item.added\"),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  item: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n      }).nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_search_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image_generation_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_interpreter_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n      outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() })\n        ])\n      ).nullable(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ])\n});\nvar responseOutputItemDoneSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_item.done\"),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  item: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"completed\")\n    }),\n    codeInterpreterCallItem,\n    imageGenerationCallItem,\n    webSearchCallItem,\n    fileSearchCallItem,\n    localShellCallItem,\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"completed\")\n    })\n  ])\n});\nvar responseFunctionCallArgumentsDeltaSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.function_call_arguments.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar responseCodeInterpreterCallCodeDeltaSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.code_interpreter_call_code.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar responseCodeInterpreterCallCodeDoneSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.code_interpreter_call_code.done\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar responseAnnotationAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_text.annotation.added\"),\n  annotation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_citation\"),\n      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      quote: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    })\n  ])\n});\nvar responseReasoningSummaryPartAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.reasoning_summary_part.added\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar responseReasoningSummaryTextDeltaSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.reasoning_summary_text.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar openaiResponsesChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  textDeltaChunkSchema,\n  responseFinishedChunkSchema,\n  responseCreatedChunkSchema,\n  responseOutputItemAddedSchema,\n  responseOutputItemDoneSchema,\n  responseFunctionCallArgumentsDeltaSchema,\n  responseCodeInterpreterCallCodeDeltaSchema,\n  responseCodeInterpreterCallCodeDoneSchema,\n  responseAnnotationAddedSchema,\n  responseReasoningSummaryPartAddedSchema,\n  responseReasoningSummaryTextDeltaSchema,\n  errorChunkSchema,\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).loose()\n  // fallback for unknown chunks\n]);\nfunction isTextDeltaChunk(chunk) {\n  return chunk.type === \"response.output_text.delta\";\n}\nfunction isResponseOutputItemDoneChunk(chunk) {\n  return chunk.type === \"response.output_item.done\";\n}\nfunction isResponseOutputItemDoneReasoningChunk(chunk) {\n  return isResponseOutputItemDoneChunk(chunk) && chunk.item.type === \"reasoning\";\n}\nfunction isResponseFinishedChunk(chunk) {\n  return chunk.type === \"response.completed\" || chunk.type === \"response.incomplete\";\n}\nfunction isResponseCreatedChunk(chunk) {\n  return chunk.type === \"response.created\";\n}\nfunction isResponseFunctionCallArgumentsDeltaChunk(chunk) {\n  return chunk.type === \"response.function_call_arguments.delta\";\n}\nfunction isResponseCodeInterpreterCallCodeDeltaChunk(chunk) {\n  return chunk.type === \"response.code_interpreter_call_code.delta\";\n}\nfunction isResponseCodeInterpreterCallCodeDoneChunk(chunk) {\n  return chunk.type === \"response.code_interpreter_call_code.done\";\n}\nfunction isResponseOutputItemAddedChunk(chunk) {\n  return chunk.type === \"response.output_item.added\";\n}\nfunction isResponseOutputItemAddedReasoningChunk(chunk) {\n  return isResponseOutputItemAddedChunk(chunk) && chunk.item.type === \"reasoning\";\n}\nfunction isResponseAnnotationAddedChunk(chunk) {\n  return chunk.type === \"response.output_text.annotation.added\";\n}\nfunction isResponseReasoningSummaryPartAddedChunk(chunk) {\n  return chunk.type === \"response.reasoning_summary_part.added\";\n}\nfunction isResponseReasoningSummaryTextDeltaChunk(chunk) {\n  return chunk.type === \"response.reasoning_summary_text.delta\";\n}\nfunction isErrorChunk(chunk) {\n  return chunk.type === \"error\";\n}\nfunction getResponsesModelConfig(modelId) {\n  const supportsFlexProcessing2 = modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-chat\");\n  const supportsPriorityProcessing2 = modelId.startsWith(\"gpt-4\") || modelId.startsWith(\"gpt-5-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-nano\") && !modelId.startsWith(\"gpt-5-chat\") || modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\");\n  const defaults = {\n    requiredAutoTruncation: false,\n    systemMessageMode: \"system\",\n    supportsFlexProcessing: supportsFlexProcessing2,\n    supportsPriorityProcessing: supportsPriorityProcessing2\n  };\n  if (modelId.startsWith(\"gpt-5-chat\")) {\n    return {\n      ...defaults,\n      isReasoningModel: false\n    };\n  }\n  if (modelId.startsWith(\"o\") || modelId.startsWith(\"gpt-5\") || modelId.startsWith(\"codex-\") || modelId.startsWith(\"computer-use\")) {\n    if (modelId.startsWith(\"o1-mini\") || modelId.startsWith(\"o1-preview\")) {\n      return {\n        ...defaults,\n        isReasoningModel: true,\n        systemMessageMode: \"remove\"\n      };\n    }\n    return {\n      ...defaults,\n      isReasoningModel: true,\n      systemMessageMode: \"developer\"\n    };\n  }\n  return {\n    ...defaults,\n    isReasoningModel: false\n  };\n}\nvar openaiResponsesProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  include: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n      \"reasoning.encrypted_content\",\n      \"file_search_call.results\",\n      \"message.output_text.logprobs\"\n    ])\n  ).nullish(),\n  instructions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  /**\n   * Return the log probabilities of the tokens.\n   *\n   * Setting to true will return the log probabilities of the tokens that\n   * were generated.\n   *\n   * Setting to a number will return the log probabilities of the top n\n   * tokens that were generated.\n   *\n   * @see https://platform.openai.com/docs/api-reference/responses/create\n   * @see https://cookbook.openai.com/examples/using_logprobs\n   */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(1).max(TOP_LOGPROBS_MAX)]).optional(),\n  /**\n   * The maximum number of total calls to built-in tools that can be processed in a response.\n   * This maximum number applies across all built-in tool calls, not per individual tool.\n   * Any further attempts to call a tool by the model will be ignored.\n   */\n  maxToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  metadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.any().nullish(),\n  parallelToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  previousResponseId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  promptCacheKey: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningEffort: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningSummary: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  safetyIdentifier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  serviceTier: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"flex\", \"priority\"]).nullish(),\n  store: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  strictJsonSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  textVerbosity: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).nullish(),\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n});\n\n// src/speech/openai-speech-model.ts\n\n\nvar OpenAIProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  instructions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  speed: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(0.25).max(4).default(1).nullish()\n});\nvar OpenAISpeechModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    text,\n    voice = \"alloy\",\n    outputFormat = \"mp3\",\n    speed,\n    instructions,\n    language,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openAIOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: OpenAIProviderOptionsSchema\n    });\n    const requestBody = {\n      model: this.modelId,\n      input: text,\n      voice,\n      response_format: \"mp3\",\n      speed,\n      instructions\n    };\n    if (outputFormat) {\n      if ([\"mp3\", \"opus\", \"aac\", \"flac\", \"wav\", \"pcm\"].includes(outputFormat)) {\n        requestBody.response_format = outputFormat;\n      } else {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"outputFormat\",\n          details: `Unsupported output format: ${outputFormat}. Using mp3 instead.`\n        });\n      }\n    }\n    if (openAIOptions) {\n      const speechModelOptions = {};\n      for (const key in speechModelOptions) {\n        const value = speechModelOptions[key];\n        if (value !== void 0) {\n          requestBody[key] = value;\n        }\n      }\n    }\n    if (language) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"language\",\n        details: `OpenAI speech models do not support language selection. Language parameter \"${language}\" was ignored.`\n      });\n    }\n    return {\n      requestBody,\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c;\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { requestBody, warnings } = await this.getArgs(options);\n    const {\n      value: audio,\n      responseHeaders,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/audio/speech\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: requestBody,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createBinaryResponseHandler)(),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      audio,\n      warnings,\n      request: {\n        body: JSON.stringify(requestBody)\n      },\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n        body: rawResponse\n      }\n    };\n  }\n};\n\n// src/transcription/openai-transcription-model.ts\n\n\n\n// src/transcription/openai-transcription-options.ts\n\nvar openAITranscriptionProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Additional information to include in the transcription response.\n   */\n  include: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n  /**\n   * The language of the input audio in ISO-639-1 format.\n   */\n  language: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * An optional text to guide the model's style or continue a previous audio segment.\n   */\n  prompt: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * The sampling temperature, between 0 and 1.\n   * @default 0\n   */\n  temperature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(0).max(1).default(0).optional(),\n  /**\n   * The timestamp granularities to populate for this transcription.\n   * @default ['segment']\n   */\n  timestampGranularities: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"word\", \"segment\"])).default([\"segment\"]).optional()\n});\n\n// src/transcription/openai-transcription-model.ts\nvar languageMap = {\n  afrikaans: \"af\",\n  arabic: \"ar\",\n  armenian: \"hy\",\n  azerbaijani: \"az\",\n  belarusian: \"be\",\n  bosnian: \"bs\",\n  bulgarian: \"bg\",\n  catalan: \"ca\",\n  chinese: \"zh\",\n  croatian: \"hr\",\n  czech: \"cs\",\n  danish: \"da\",\n  dutch: \"nl\",\n  english: \"en\",\n  estonian: \"et\",\n  finnish: \"fi\",\n  french: \"fr\",\n  galician: \"gl\",\n  german: \"de\",\n  greek: \"el\",\n  hebrew: \"he\",\n  hindi: \"hi\",\n  hungarian: \"hu\",\n  icelandic: \"is\",\n  indonesian: \"id\",\n  italian: \"it\",\n  japanese: \"ja\",\n  kannada: \"kn\",\n  kazakh: \"kk\",\n  korean: \"ko\",\n  latvian: \"lv\",\n  lithuanian: \"lt\",\n  macedonian: \"mk\",\n  malay: \"ms\",\n  marathi: \"mr\",\n  maori: \"mi\",\n  nepali: \"ne\",\n  norwegian: \"no\",\n  persian: \"fa\",\n  polish: \"pl\",\n  portuguese: \"pt\",\n  romanian: \"ro\",\n  russian: \"ru\",\n  serbian: \"sr\",\n  slovak: \"sk\",\n  slovenian: \"sl\",\n  spanish: \"es\",\n  swahili: \"sw\",\n  swedish: \"sv\",\n  tagalog: \"tl\",\n  tamil: \"ta\",\n  thai: \"th\",\n  turkish: \"tr\",\n  ukrainian: \"uk\",\n  urdu: \"ur\",\n  vietnamese: \"vi\",\n  welsh: \"cy\"\n};\nvar OpenAITranscriptionModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    audio,\n    mediaType,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openAIOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openAITranscriptionProviderOptions\n    });\n    const formData = new FormData();\n    const blob = audio instanceof Uint8Array ? new Blob([audio]) : new Blob([(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertBase64ToUint8Array)(audio)]);\n    formData.append(\"model\", this.modelId);\n    const fileExtension = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.mediaTypeToExtension)(mediaType);\n    formData.append(\n      \"file\",\n      new File([blob], \"audio\", { type: mediaType }),\n      `audio.${fileExtension}`\n    );\n    if (openAIOptions) {\n      const transcriptionModelOptions = {\n        include: openAIOptions.include,\n        language: openAIOptions.language,\n        prompt: openAIOptions.prompt,\n        // https://platform.openai.com/docs/api-reference/audio/createTranscription#audio_createtranscription-response_format\n        // prefer verbose_json to get segments for models that support it\n        response_format: [\n          \"gpt-4o-transcribe\",\n          \"gpt-4o-mini-transcribe\"\n        ].includes(this.modelId) ? \"json\" : \"verbose_json\",\n        temperature: openAIOptions.temperature,\n        timestamp_granularities: openAIOptions.timestampGranularities\n      };\n      for (const [key, value] of Object.entries(transcriptionModelOptions)) {\n        if (value != null) {\n          if (Array.isArray(value)) {\n            for (const item of value) {\n              formData.append(`${key}[]`, String(item));\n            }\n          } else {\n            formData.append(key, String(value));\n          }\n        }\n      }\n    }\n    return {\n      formData,\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { formData, warnings } = await this.getArgs(options);\n    const {\n      value: response,\n      responseHeaders,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postFormDataToApi)({\n      url: this.config.url({\n        path: \"/audio/transcriptions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      formData,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiTranscriptionResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const language = response.language != null && response.language in languageMap ? languageMap[response.language] : void 0;\n    return {\n      text: response.text,\n      segments: (_g = (_f = (_d = response.segments) == null ? void 0 : _d.map((segment) => ({\n        text: segment.text,\n        startSecond: segment.start,\n        endSecond: segment.end\n      }))) != null ? _f : (_e = response.words) == null ? void 0 : _e.map((word) => ({\n        text: word.word,\n        startSecond: word.start,\n        endSecond: word.end\n      }))) != null ? _g : [],\n      language,\n      durationInSeconds: (_h = response.duration) != null ? _h : void 0,\n      warnings,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n        body: rawResponse\n      }\n    };\n  }\n};\nvar openaiTranscriptionResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  language: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  duration: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  words: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      word: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      start: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      end: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n    })\n  ).nullish(),\n  segments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      seek: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      start: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      end: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n      temperature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      avg_logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      compression_ratio: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      no_speech_prob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n    })\n  ).nullish()\n});\n\n// src/version.ts\nvar VERSION =  true ? \"2.0.44\" : 0;\n\n// src/openai-provider.ts\nfunction createOpenAI(options = {}) {\n  var _a, _b;\n  const baseURL = (_a = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withoutTrailingSlash)(\n    (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadOptionalSetting)({\n      settingValue: options.baseURL,\n      environmentVariableName: \"OPENAI_BASE_URL\"\n    })\n  )) != null ? _a : \"https://api.openai.com/v1\";\n  const providerName = (_b = options.name) != null ? _b : \"openai\";\n  const getHeaders = () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withUserAgentSuffix)(\n    {\n      Authorization: `Bearer ${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadApiKey)({\n        apiKey: options.apiKey,\n        environmentVariableName: \"OPENAI_API_KEY\",\n        description: \"OpenAI\"\n      })}`,\n      \"OpenAI-Organization\": options.organization,\n      \"OpenAI-Project\": options.project,\n      ...options.headers\n    },\n    `ai-sdk/openai/${VERSION}`\n  );\n  const createChatModel = (modelId) => new OpenAIChatLanguageModel(modelId, {\n    provider: `${providerName}.chat`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createCompletionModel = (modelId) => new OpenAICompletionLanguageModel(modelId, {\n    provider: `${providerName}.completion`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createEmbeddingModel = (modelId) => new OpenAIEmbeddingModel(modelId, {\n    provider: `${providerName}.embedding`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createImageModel = (modelId) => new OpenAIImageModel(modelId, {\n    provider: `${providerName}.image`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createTranscriptionModel = (modelId) => new OpenAITranscriptionModel(modelId, {\n    provider: `${providerName}.transcription`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createSpeechModel = (modelId) => new OpenAISpeechModel(modelId, {\n    provider: `${providerName}.speech`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createLanguageModel = (modelId) => {\n    if (new.target) {\n      throw new Error(\n        \"The OpenAI model function cannot be called with the new keyword.\"\n      );\n    }\n    return createResponsesModel(modelId);\n  };\n  const createResponsesModel = (modelId) => {\n    return new OpenAIResponsesLanguageModel(modelId, {\n      provider: `${providerName}.responses`,\n      url: ({ path }) => `${baseURL}${path}`,\n      headers: getHeaders,\n      fetch: options.fetch,\n      fileIdPrefixes: [\"file-\"]\n    });\n  };\n  const provider = function(modelId) {\n    return createLanguageModel(modelId);\n  };\n  provider.languageModel = createLanguageModel;\n  provider.chat = createChatModel;\n  provider.completion = createCompletionModel;\n  provider.responses = createResponsesModel;\n  provider.embedding = createEmbeddingModel;\n  provider.textEmbedding = createEmbeddingModel;\n  provider.textEmbeddingModel = createEmbeddingModel;\n  provider.image = createImageModel;\n  provider.imageModel = createImageModel;\n  provider.transcription = createTranscriptionModel;\n  provider.transcriptionModel = createTranscriptionModel;\n  provider.speech = createSpeechModel;\n  provider.speechModel = createSpeechModel;\n  provider.tools = openaiTools;\n  return provider;\n}\nvar openai = createOpenAI();\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGluc3RydW1lbnQpLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AYWktc2RrK29wZW5haUAyLjAuNDRfem9kQDMuMjUuNzYvbm9kZV9tb2R1bGVzL0BhaS1zZGsvb3BlbmFpL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQU1nQzs7QUFFaEM7QUFHMEI7QUFTTTtBQUNDOztBQUVqQztBQUMyQjtBQUM2QztBQUN4RSw0QkFBNEIsMENBQVE7QUFDcEMsU0FBUywwQ0FBUTtBQUNqQixhQUFhLDBDQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMENBQVE7QUFDbEIsV0FBVyx1Q0FBSztBQUNoQixVQUFVLHlDQUFPLEVBQUUsMENBQVEsSUFBSSwwQ0FBUTtBQUN2QyxHQUFHO0FBQ0gsQ0FBQztBQUNELGtDQUFrQyxzRkFBOEI7QUFDaEU7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFHMEI7QUFDK0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix5QkFBeUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRCQUE0QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxpQkFBaUI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsd0NBQXdDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRkFBcUYsV0FBVyxTQUFTLHVFQUFlLFlBQVk7QUFDcEk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSw4QkFBOEIsMkVBQTZCO0FBQzNEO0FBQ0EscUJBQXFCO0FB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LGlDQUFpQztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsSUFBSTtBQUNsQixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEtBQUs7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TUFBTSxRQUFRLFFBQVEsRUFBRSxLQUFLO0FBQ3pDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsYUFBYTtBQUM5QixZQUFZLE1BQU0sUUFBUSxRQUFRLEVBQUUsS0FBSztBQUN6QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsaUJBQWlCLGFBQWE7QUFDOUIsWUFBWSxNQUFNLFFBQVEsUUFBUSxFQUFFLEtBQUs7QUFDekM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDLGNBQWMsTUFBTSxRQUFRLFFBQVEsRUFBRSxLQUFLO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG1vZHVsYXIvY29va2Jvb2svLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhaS1zZGsrb3BlbmFpQDIuMC40NF96b2RAMy4yNS43Ni9ub2RlX21vZHVsZXMvQGFpLXNkay9vcGVuYWkvZGlzdC9pbmRleC5tanM/ZWEzYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvb3BlbmFpLXByb3ZpZGVyLnRzXG5pbXBvcnQge1xuICBsb2FkQXBpS2V5LFxuICBsb2FkT3B0aW9uYWxTZXR0aW5nLFxuICB3aXRob3V0VHJhaWxpbmdTbGFzaCxcbiAgd2l0aFVzZXJBZ2VudFN1ZmZpeFxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuXG4vLyBzcmMvY2hhdC9vcGVuYWktY2hhdC1sYW5ndWFnZS1tb2RlbC50c1xuaW1wb3J0IHtcbiAgSW52YWxpZFJlc3BvbnNlRGF0YUVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyxcbiAgY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIsXG4gIGdlbmVyYXRlSWQsXG4gIGlzUGFyc2FibGVKc29uLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyxcbiAgcG9zdEpzb25Ub0FwaVxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MyB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL29wZW5haS1lcnJvci50c1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2QvdjRcIjtcbmltcG9ydCB7IGNyZWF0ZUpzb25FcnJvclJlc3BvbnNlSGFuZGxlciB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG52YXIgb3BlbmFpRXJyb3JEYXRhU2NoZW1hID0gei5vYmplY3Qoe1xuICBlcnJvcjogei5vYmplY3Qoe1xuICAgIG1lc3NhZ2U6IHouc3RyaW5nKCksXG4gICAgLy8gVGhlIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYmVsb3cgaXMgaGFuZGxlZCBsb29zZWx5IHRvIHN1cHBvcnRcbiAgICAvLyBPcGVuQUktY29tcGF0aWJsZSBwcm92aWRlcnMgdGhhdCBoYXZlIHNsaWdodGx5IGRpZmZlcmVudCBlcnJvclxuICAgIC8vIHJlc3BvbnNlczpcbiAgICB0eXBlOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgICBwYXJhbTogei5hbnkoKS5udWxsaXNoKCksXG4gICAgY29kZTogei51bmlvbihbei5zdHJpbmcoKSwgei5udW1iZXIoKV0pLm51bGxpc2goKVxuICB9KVxufSk7XG52YXIgb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyID0gY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyKHtcbiAgZXJyb3JTY2hlbWE6IG9wZW5haUVycm9yRGF0YVNjaGVtYSxcbiAgZXJyb3JUb01lc3NhZ2U6IChkYXRhKSA9PiBkYXRhLmVycm9yLm1lc3NhZ2Vcbn0pO1xuXG4vLyBzcmMvY2hhdC9jb252ZXJ0LXRvLW9wZW5haS1jaGF0LW1lc3NhZ2VzLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvclxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHsgY29udmVydFRvQmFzZTY0IH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSUNoYXRNZXNzYWdlcyh7XG4gIHByb21wdCxcbiAgc3lzdGVtTWVzc2FnZU1vZGUgPSBcInN5c3RlbVwiXG59KSB7XG4gIGNvbnN0IG1lc3NhZ2VzID0gW107XG4gIGNvbnN0IHdhcm5pbmdzID0gW107XG4gIGZvciAoY29uc3QgeyByb2xlLCBjb250ZW50IH0gb2YgcHJvbXB0KSB7XG4gICAgc3dpdGNoIChyb2xlKSB7XG4gICAgICBjYXNlIFwic3lzdGVtXCI6IHtcbiAgICAgICAgc3dpdGNoIChzeXN0ZW1NZXNzYWdlTW9kZSkge1xuICAgICAgICAgIGNhc2UgXCJzeXN0ZW1cIjoge1xuICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImRldmVsb3BlclwiOiB7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogXCJkZXZlbG9wZXJcIiwgY29udGVudCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicmVtb3ZlXCI6IHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwic3lzdGVtIG1lc3NhZ2VzIGFyZSByZW1vdmVkIGZvciB0aGlzIG1vZGVsXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSBzeXN0ZW1NZXNzYWdlTW9kZTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFVuc3VwcG9ydGVkIHN5c3RlbSBtZXNzYWdlIG1vZGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ1c2VyXCI6IHtcbiAgICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoID09PSAxICYmIGNvbnRlbnRbMF0udHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGNvbnRlbnRbMF0udGV4dCB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBtZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiBjb250ZW50Lm1hcCgocGFydCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBwYXJ0LnRleHQgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlIFwiZmlsZVwiOiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQubWVkaWFUeXBlLnN0YXJ0c1dpdGgoXCJpbWFnZS9cIikpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhVHlwZSA9IHBhcnQubWVkaWFUeXBlID09PSBcImltYWdlLypcIiA/IFwiaW1hZ2UvanBlZ1wiIDogcGFydC5tZWRpYVR5cGU7XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcnQuZGF0YSBpbnN0YW5jZW9mIFVSTCA/IHBhcnQuZGF0YS50b1N0cmluZygpIDogYGRhdGE6JHttZWRpYVR5cGV9O2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NChwYXJ0LmRhdGEpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgLy8gT3BlbkFJIHNwZWNpZmljIGV4dGVuc2lvbjogaW1hZ2UgZGV0YWlsXG4gICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiAoX2IgPSAoX2EgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLm9wZW5haSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmltYWdlRGV0YWlsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0Lm1lZGlhVHlwZS5zdGFydHNXaXRoKFwiYXVkaW8vXCIpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAocGFydC5kYXRhIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogXCJhdWRpbyBmaWxlIHBhcnRzIHdpdGggVVJMc1wiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYXJ0Lm1lZGlhVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXVkaW8vd2F2XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9hdWRpb1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfYXVkaW86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY29udmVydFRvQmFzZTY0KHBhcnQuZGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJ3YXZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImF1ZGlvL21wM1wiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXVkaW8vbXBlZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5wdXRfYXVkaW9cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0X2F1ZGlvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNvbnZlcnRUb0Jhc2U2NChwYXJ0LmRhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IFwibXAzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogYGF1ZGlvIGNvbnRlbnQgcGFydHMgd2l0aCBtZWRpYSB0eXBlICR7cGFydC5tZWRpYVR5cGV9YFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0Lm1lZGlhVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9wZGZcIikge1xuICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuZGF0YSBpbnN0YW5jZW9mIFVSTCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IFwiUERGIGZpbGUgcGFydHMgd2l0aCBVUkxzXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImZpbGVcIixcbiAgICAgICAgICAgICAgICAgICAgZmlsZTogdHlwZW9mIHBhcnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJiBwYXJ0LmRhdGEuc3RhcnRzV2l0aChcImZpbGUtXCIpID8geyBmaWxlX2lkOiBwYXJ0LmRhdGEgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogKF9jID0gcGFydC5maWxlbmFtZSkgIT0gbnVsbCA/IF9jIDogYHBhcnQtJHtpbmRleH0ucGRmYCxcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlX2RhdGE6IGBkYXRhOmFwcGxpY2F0aW9uL3BkZjtiYXNlNjQsJHtjb252ZXJ0VG9CYXNlNjQocGFydC5kYXRhKX1gXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IGBmaWxlIHBhcnQgbWVkaWEgdHlwZSAke3BhcnQubWVkaWFUeXBlfWBcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJhc3Npc3RhbnRcIjoge1xuICAgICAgICBsZXQgdGV4dCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgY29udGVudCkge1xuICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgIHRleHQgKz0gcGFydC50ZXh0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJ0b29sLWNhbGxcIjoge1xuICAgICAgICAgICAgICB0b29sQ2FsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnQudG9vbE5hbWUsXG4gICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IEpTT04uc3RyaW5naWZ5KHBhcnQuaW5wdXQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgY29udGVudDogdGV4dCxcbiAgICAgICAgICB0b29sX2NhbGxzOiB0b29sQ2FsbHMubGVuZ3RoID4gMCA/IHRvb2xDYWxscyA6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwidG9vbFwiOiB7XG4gICAgICAgIGZvciAoY29uc3QgdG9vbFJlc3BvbnNlIG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICBjb25zdCBvdXRwdXQgPSB0b29sUmVzcG9uc2Uub3V0cHV0O1xuICAgICAgICAgIGxldCBjb250ZW50VmFsdWU7XG4gICAgICAgICAgc3dpdGNoIChvdXRwdXQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci10ZXh0XCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IG91dHB1dC52YWx1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY29udGVudFwiOlxuICAgICAgICAgICAgY2FzZSBcImpzb25cIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci1qc29uXCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KG91dHB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgIHJvbGU6IFwidG9vbFwiLFxuICAgICAgICAgICAgdG9vbF9jYWxsX2lkOiB0b29sUmVzcG9uc2UudG9vbENhbGxJZCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRWYWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gcm9sZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCByb2xlOiAke19leGhhdXN0aXZlQ2hlY2t9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB7IG1lc3NhZ2VzLCB3YXJuaW5ncyB9O1xufVxuXG4vLyBzcmMvY2hhdC9nZXQtcmVzcG9uc2UtbWV0YWRhdGEudHNcbmZ1bmN0aW9uIGdldFJlc3BvbnNlTWV0YWRhdGEoe1xuICBpZCxcbiAgbW9kZWwsXG4gIGNyZWF0ZWRcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogaWQgIT0gbnVsbCA/IGlkIDogdm9pZCAwLFxuICAgIG1vZGVsSWQ6IG1vZGVsICE9IG51bGwgPyBtb2RlbCA6IHZvaWQgMCxcbiAgICB0aW1lc3RhbXA6IGNyZWF0ZWQgIT0gbnVsbCA/IG5ldyBEYXRlKGNyZWF0ZWQgKiAxZTMpIDogdm9pZCAwXG4gIH07XG59XG5cbi8vIHNyYy9jaGF0L21hcC1vcGVuYWktZmluaXNoLXJlYXNvbi50c1xuZnVuY3Rpb24gbWFwT3BlbkFJRmluaXNoUmVhc29uKGZpbmlzaFJlYXNvbikge1xuICBzd2l0Y2ggKGZpbmlzaFJlYXNvbikge1xuICAgIGNhc2UgXCJzdG9wXCI6XG4gICAgICByZXR1cm4gXCJzdG9wXCI7XG4gICAgY2FzZSBcImxlbmd0aFwiOlxuICAgICAgcmV0dXJuIFwibGVuZ3RoXCI7XG4gICAgY2FzZSBcImNvbnRlbnRfZmlsdGVyXCI6XG4gICAgICByZXR1cm4gXCJjb250ZW50LWZpbHRlclwiO1xuICAgIGNhc2UgXCJmdW5jdGlvbl9jYWxsXCI6XG4gICAgY2FzZSBcInRvb2xfY2FsbHNcIjpcbiAgICAgIHJldHVybiBcInRvb2wtY2FsbHNcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwidW5rbm93blwiO1xuICB9XG59XG5cbi8vIHNyYy9jaGF0L29wZW5haS1jaGF0LW9wdGlvbnMudHNcbmltcG9ydCB7IHogYXMgejIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgb3BlbmFpQ2hhdExhbmd1YWdlTW9kZWxPcHRpb25zID0gejIub2JqZWN0KHtcbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgbGlrZWxpaG9vZCBvZiBzcGVjaWZpZWQgdG9rZW5zIGFwcGVhcmluZyBpbiB0aGUgY29tcGxldGlvbi5cbiAgICpcbiAgICogQWNjZXB0cyBhIEpTT04gb2JqZWN0IHRoYXQgbWFwcyB0b2tlbnMgKHNwZWNpZmllZCBieSB0aGVpciB0b2tlbiBJRCBpblxuICAgKiB0aGUgR1BUIHRva2VuaXplcikgdG8gYW4gYXNzb2NpYXRlZCBiaWFzIHZhbHVlIGZyb20gLTEwMCB0byAxMDAuXG4gICAqL1xuICBsb2dpdEJpYXM6IHoyLnJlY29yZCh6Mi5jb2VyY2UubnVtYmVyKCksIHoyLm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9rZW5zLlxuICAgKlxuICAgKiBTZXR0aW5nIHRvIHRydWUgd2lsbCByZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMgdGhhdFxuICAgKiB3ZXJlIGdlbmVyYXRlZC5cbiAgICpcbiAgICogU2V0dGluZyB0byBhIG51bWJlciB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRvcCBuXG4gICAqIHRva2VucyB0aGF0IHdlcmUgZ2VuZXJhdGVkLlxuICAgKi9cbiAgbG9ncHJvYnM6IHoyLnVuaW9uKFt6Mi5ib29sZWFuKCksIHoyLm51bWJlcigpXSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIHBhcmFsbGVsIGZ1bmN0aW9uIGNhbGxpbmcgZHVyaW5nIHRvb2wgdXNlLiBEZWZhdWx0IHRvIHRydWUuXG4gICAqL1xuICBwYXJhbGxlbFRvb2xDYWxsczogejIuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG9cbiAgICogbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLlxuICAgKi9cbiAgdXNlcjogejIuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFJlYXNvbmluZyBlZmZvcnQgZm9yIHJlYXNvbmluZyBtb2RlbHMuIERlZmF1bHRzIHRvIGBtZWRpdW1gLlxuICAgKi9cbiAgcmVhc29uaW5nRWZmb3J0OiB6Mi5lbnVtKFtcIm1pbmltYWxcIiwgXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogTWF4aW11bSBudW1iZXIgb2YgY29tcGxldGlvbiB0b2tlbnMgdG8gZ2VuZXJhdGUuIFVzZWZ1bCBmb3IgcmVhc29uaW5nIG1vZGVscy5cbiAgICovXG4gIG1heENvbXBsZXRpb25Ub2tlbnM6IHoyLm51bWJlcigpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBpbiByZXNwb25zZXMgQVBJLlxuICAgKi9cbiAgc3RvcmU6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogTWV0YWRhdGEgdG8gYXNzb2NpYXRlIHdpdGggdGhlIHJlcXVlc3QuXG4gICAqL1xuICBtZXRhZGF0YTogejIucmVjb3JkKHoyLnN0cmluZygpLm1heCg2NCksIHoyLnN0cmluZygpLm1heCg1MTIpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogUGFyYW1ldGVycyBmb3IgcHJlZGljdGlvbiBtb2RlLlxuICAgKi9cbiAgcHJlZGljdGlvbjogejIucmVjb3JkKHoyLnN0cmluZygpLCB6Mi5hbnkoKSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gdXNlIHN0cnVjdHVyZWQgb3V0cHV0cy5cbiAgICpcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgc3RydWN0dXJlZE91dHB1dHM6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogU2VydmljZSB0aWVyIGZvciB0aGUgcmVxdWVzdC5cbiAgICogLSAnYXV0byc6IERlZmF1bHQgc2VydmljZSB0aWVyXG4gICAqIC0gJ2ZsZXgnOiA1MCUgY2hlYXBlciBwcm9jZXNzaW5nIGF0IHRoZSBjb3N0IG9mIGluY3JlYXNlZCBsYXRlbmN5LiBPbmx5IGF2YWlsYWJsZSBmb3IgbzMgYW5kIG80LW1pbmkgbW9kZWxzLlxuICAgKiAtICdwcmlvcml0eSc6IEhpZ2hlci1zcGVlZCBwcm9jZXNzaW5nIHdpdGggcHJlZGljdGFibHkgbG93IGxhdGVuY3kgYXQgcHJlbWl1bSBjb3N0LiBBdmFpbGFibGUgZm9yIEVudGVycHJpc2UgY3VzdG9tZXJzLlxuICAgKlxuICAgKiBAZGVmYXVsdCAnYXV0bydcbiAgICovXG4gIHNlcnZpY2VUaWVyOiB6Mi5lbnVtKFtcImF1dG9cIiwgXCJmbGV4XCIsIFwicHJpb3JpdHlcIl0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHVzZSBzdHJpY3QgSlNPTiBzY2hlbWEgdmFsaWRhdGlvbi5cbiAgICpcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIHN0cmljdEpzb25TY2hlbWE6IHoyLmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogQ29udHJvbHMgdGhlIHZlcmJvc2l0eSBvZiB0aGUgbW9kZWwncyByZXNwb25zZXMuXG4gICAqIExvd2VyIHZhbHVlcyB3aWxsIHJlc3VsdCBpbiBtb3JlIGNvbmNpc2UgcmVzcG9uc2VzLCB3aGlsZSBoaWdoZXIgdmFsdWVzIHdpbGwgcmVzdWx0IGluIG1vcmUgdmVyYm9zZSByZXNwb25zZXMuXG4gICAqL1xuICB0ZXh0VmVyYm9zaXR5OiB6Mi5lbnVtKFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBBIGNhY2hlIGtleSBmb3IgcHJvbXB0IGNhY2hpbmcuIEFsbG93cyBtYW51YWwgY29udHJvbCBvdmVyIHByb21wdCBjYWNoaW5nIGJlaGF2aW9yLlxuICAgKiBVc2VmdWwgZm9yIGltcHJvdmluZyBjYWNoZSBoaXQgcmF0ZXMgYW5kIHdvcmtpbmcgYXJvdW5kIGF1dG9tYXRpYyBjYWNoaW5nIGlzc3Vlcy5cbiAgICovXG4gIHByb21wdENhY2hlS2V5OiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogQSBzdGFibGUgaWRlbnRpZmllciB1c2VkIHRvIGhlbHAgZGV0ZWN0IHVzZXJzIG9mIHlvdXIgYXBwbGljYXRpb25cbiAgICogdGhhdCBtYXkgYmUgdmlvbGF0aW5nIE9wZW5BSSdzIHVzYWdlIHBvbGljaWVzLiBUaGUgSURzIHNob3VsZCBiZSBhXG4gICAqIHN0cmluZyB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgZWFjaCB1c2VyLiBXZSByZWNvbW1lbmQgaGFzaGluZyB0aGVpclxuICAgKiB1c2VybmFtZSBvciBlbWFpbCBhZGRyZXNzLCBpbiBvcmRlciB0byBhdm9pZCBzZW5kaW5nIHVzIGFueSBpZGVudGlmeWluZ1xuICAgKiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIHNhZmV0eUlkZW50aWZpZXI6IHoyLnN0cmluZygpLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBzcmMvY2hhdC9vcGVuYWktY2hhdC1wcmVwYXJlLXRvb2xzLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjJcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmZ1bmN0aW9uIHByZXBhcmVDaGF0VG9vbHMoe1xuICB0b29scyxcbiAgdG9vbENob2ljZSxcbiAgc3RydWN0dXJlZE91dHB1dHMsXG4gIHN0cmljdEpzb25TY2hlbWFcbn0pIHtcbiAgdG9vbHMgPSAodG9vbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xzLmxlbmd0aCkgPyB0b29scyA6IHZvaWQgMDtcbiAgY29uc3QgdG9vbFdhcm5pbmdzID0gW107XG4gIGlmICh0b29scyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgdG9vbHM6IHZvaWQgMCwgdG9vbENob2ljZTogdm9pZCAwLCB0b29sV2FybmluZ3MgfTtcbiAgfVxuICBjb25zdCBvcGVuYWlUb29sczIgPSBbXTtcbiAgZm9yIChjb25zdCB0b29sIG9mIHRvb2xzKSB7XG4gICAgc3dpdGNoICh0b29sLnR5cGUpIHtcbiAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRvb2wuaW5wdXRTY2hlbWEsXG4gICAgICAgICAgICBzdHJpY3Q6IHN0cnVjdHVyZWRPdXRwdXRzID8gc3RyaWN0SnNvblNjaGVtYSA6IHZvaWQgMFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdG9vbFdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXRvb2xcIiwgdG9vbCB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmICh0b29sQ2hvaWNlID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogb3BlbmFpVG9vbHMyLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncyB9O1xuICB9XG4gIGNvbnN0IHR5cGUgPSB0b29sQ2hvaWNlLnR5cGU7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJhdXRvXCI6XG4gICAgY2FzZSBcIm5vbmVcIjpcbiAgICBjYXNlIFwicmVxdWlyZWRcIjpcbiAgICAgIHJldHVybiB7IHRvb2xzOiBvcGVuYWlUb29sczIsIHRvb2xDaG9pY2U6IHR5cGUsIHRvb2xXYXJuaW5ncyB9O1xuICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b29sczogb3BlbmFpVG9vbHMyLFxuICAgICAgICB0b29sQ2hvaWNlOiB7XG4gICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICBuYW1lOiB0b29sQ2hvaWNlLnRvb2xOYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0b29sV2FybmluZ3NcbiAgICAgIH07XG4gICAgZGVmYXVsdDoge1xuICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHR5cGU7XG4gICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IyKHtcbiAgICAgICAgZnVuY3Rpb25hbGl0eTogYHRvb2wgY2hvaWNlIHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL2NoYXQvb3BlbmFpLWNoYXQtbGFuZ3VhZ2UtbW9kZWwudHNcbnZhciBPcGVuQUlDaGF0TGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgICB0aGlzLnN1cHBvcnRlZFVybHMgPSB7XG4gICAgICBcImltYWdlLypcIjogWy9eaHR0cHM/OlxcL1xcLy4qJC9dXG4gICAgfTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgcHJvbXB0LFxuICAgIG1heE91dHB1dFRva2VucyxcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICB0b3BQLFxuICAgIHRvcEssXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgc3RvcFNlcXVlbmNlcyxcbiAgICByZXNwb25zZUZvcm1hdCxcbiAgICBzZWVkLFxuICAgIHRvb2xzLFxuICAgIHRvb2xDaG9pY2UsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBjb25zdCBvcGVuYWlPcHRpb25zID0gKF9hID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMoe1xuICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IG9wZW5haUNoYXRMYW5ndWFnZU1vZGVsT3B0aW9uc1xuICAgIH0pKSAhPSBudWxsID8gX2EgOiB7fTtcbiAgICBjb25zdCBzdHJ1Y3R1cmVkT3V0cHV0cyA9IChfYiA9IG9wZW5haU9wdGlvbnMuc3RydWN0dXJlZE91dHB1dHMpICE9IG51bGwgPyBfYiA6IHRydWU7XG4gICAgaWYgKHRvcEsgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInRvcEtcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICgocmVzcG9uc2VGb3JtYXQgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3BvbnNlRm9ybWF0LnR5cGUpID09PSBcImpzb25cIiAmJiByZXNwb25zZUZvcm1hdC5zY2hlbWEgIT0gbnVsbCAmJiAhc3RydWN0dXJlZE91dHB1dHMpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJyZXNwb25zZUZvcm1hdFwiLFxuICAgICAgICBkZXRhaWxzOiBcIkpTT04gcmVzcG9uc2UgZm9ybWF0IHNjaGVtYSBpcyBvbmx5IHN1cHBvcnRlZCB3aXRoIHN0cnVjdHVyZWRPdXRwdXRzXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCB7IG1lc3NhZ2VzLCB3YXJuaW5nczogbWVzc2FnZVdhcm5pbmdzIH0gPSBjb252ZXJ0VG9PcGVuQUlDaGF0TWVzc2FnZXMoXG4gICAgICB7XG4gICAgICAgIHByb21wdCxcbiAgICAgICAgc3lzdGVtTWVzc2FnZU1vZGU6IGdldFN5c3RlbU1lc3NhZ2VNb2RlKHRoaXMubW9kZWxJZClcbiAgICAgIH1cbiAgICApO1xuICAgIHdhcm5pbmdzLnB1c2goLi4ubWVzc2FnZVdhcm5pbmdzKTtcbiAgICBjb25zdCBzdHJpY3RKc29uU2NoZW1hID0gKF9jID0gb3BlbmFpT3B0aW9ucy5zdHJpY3RKc29uU2NoZW1hKSAhPSBudWxsID8gX2MgOiBmYWxzZTtcbiAgICBjb25zdCBiYXNlQXJncyA9IHtcbiAgICAgIC8vIG1vZGVsIGlkOlxuICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgIC8vIG1vZGVsIHNwZWNpZmljIHNldHRpbmdzOlxuICAgICAgbG9naXRfYmlhczogb3BlbmFpT3B0aW9ucy5sb2dpdEJpYXMsXG4gICAgICBsb2dwcm9iczogb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA9PT0gdHJ1ZSB8fCB0eXBlb2Ygb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA9PT0gXCJudW1iZXJcIiA/IHRydWUgOiB2b2lkIDAsXG4gICAgICB0b3BfbG9ncHJvYnM6IHR5cGVvZiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzID09PSBcIm51bWJlclwiID8gb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA6IHR5cGVvZiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzID09PSBcImJvb2xlYW5cIiA/IG9wZW5haU9wdGlvbnMubG9ncHJvYnMgPyAwIDogdm9pZCAwIDogdm9pZCAwLFxuICAgICAgdXNlcjogb3BlbmFpT3B0aW9ucy51c2VyLFxuICAgICAgcGFyYWxsZWxfdG9vbF9jYWxsczogb3BlbmFpT3B0aW9ucy5wYXJhbGxlbFRvb2xDYWxscyxcbiAgICAgIC8vIHN0YW5kYXJkaXplZCBzZXR0aW5nczpcbiAgICAgIG1heF90b2tlbnM6IG1heE91dHB1dFRva2VucyxcbiAgICAgIHRlbXBlcmF0dXJlLFxuICAgICAgdG9wX3A6IHRvcFAsXG4gICAgICBmcmVxdWVuY3lfcGVuYWx0eTogZnJlcXVlbmN5UGVuYWx0eSxcbiAgICAgIHByZXNlbmNlX3BlbmFsdHk6IHByZXNlbmNlUGVuYWx0eSxcbiAgICAgIHJlc3BvbnNlX2Zvcm1hdDogKHJlc3BvbnNlRm9ybWF0ID09IG51bGwgPyB2b2lkIDAgOiByZXNwb25zZUZvcm1hdC50eXBlKSA9PT0gXCJqc29uXCIgPyBzdHJ1Y3R1cmVkT3V0cHV0cyAmJiByZXNwb25zZUZvcm1hdC5zY2hlbWEgIT0gbnVsbCA/IHtcbiAgICAgICAgdHlwZTogXCJqc29uX3NjaGVtYVwiLFxuICAgICAgICBqc29uX3NjaGVtYToge1xuICAgICAgICAgIHNjaGVtYTogcmVzcG9uc2VGb3JtYXQuc2NoZW1hLFxuICAgICAgICAgIHN0cmljdDogc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgICBuYW1lOiAoX2QgPSByZXNwb25zZUZvcm1hdC5uYW1lKSAhPSBudWxsID8gX2QgOiBcInJlc3BvbnNlXCIsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHJlc3BvbnNlRm9ybWF0LmRlc2NyaXB0aW9uXG4gICAgICAgIH1cbiAgICAgIH0gOiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9IDogdm9pZCAwLFxuICAgICAgc3RvcDogc3RvcFNlcXVlbmNlcyxcbiAgICAgIHNlZWQsXG4gICAgICB2ZXJib3NpdHk6IG9wZW5haU9wdGlvbnMudGV4dFZlcmJvc2l0eSxcbiAgICAgIC8vIG9wZW5haSBzcGVjaWZpYyBzZXR0aW5nczpcbiAgICAgIC8vIFRPRE8gQUkgU0RLIDY6IHJlbW92ZSwgd2UgYXV0by1tYXAgbWF4T3V0cHV0VG9rZW5zIG5vd1xuICAgICAgbWF4X2NvbXBsZXRpb25fdG9rZW5zOiBvcGVuYWlPcHRpb25zLm1heENvbXBsZXRpb25Ub2tlbnMsXG4gICAgICBzdG9yZTogb3BlbmFpT3B0aW9ucy5zdG9yZSxcbiAgICAgIG1ldGFkYXRhOiBvcGVuYWlPcHRpb25zLm1ldGFkYXRhLFxuICAgICAgcHJlZGljdGlvbjogb3BlbmFpT3B0aW9ucy5wcmVkaWN0aW9uLFxuICAgICAgcmVhc29uaW5nX2VmZm9ydDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdFZmZvcnQsXG4gICAgICBzZXJ2aWNlX3RpZXI6IG9wZW5haU9wdGlvbnMuc2VydmljZVRpZXIsXG4gICAgICBwcm9tcHRfY2FjaGVfa2V5OiBvcGVuYWlPcHRpb25zLnByb21wdENhY2hlS2V5LFxuICAgICAgc2FmZXR5X2lkZW50aWZpZXI6IG9wZW5haU9wdGlvbnMuc2FmZXR5SWRlbnRpZmllcixcbiAgICAgIC8vIG1lc3NhZ2VzOlxuICAgICAgbWVzc2FnZXNcbiAgICB9O1xuICAgIGlmIChpc1JlYXNvbmluZ01vZGVsKHRoaXMubW9kZWxJZCkpIHtcbiAgICAgIGlmIChiYXNlQXJncy50ZW1wZXJhdHVyZSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRlbXBlcmF0dXJlID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRlbXBlcmF0dXJlXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0ZW1wZXJhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFyZ3MudG9wX3AgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy50b3BfcCA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgICAgc2V0dGluZzogXCJ0b3BQXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0b3BQIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5mcmVxdWVuY3lfcGVuYWx0eSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLmZyZXF1ZW5jeV9wZW5hbHR5ID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcImZyZXF1ZW5jeVBlbmFsdHlcIixcbiAgICAgICAgICBkZXRhaWxzOiBcImZyZXF1ZW5jeVBlbmFsdHkgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VBcmdzLnByZXNlbmNlX3BlbmFsdHkgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy5wcmVzZW5jZV9wZW5hbHR5ID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInByZXNlbmNlUGVuYWx0eVwiLFxuICAgICAgICAgIGRldGFpbHM6IFwicHJlc2VuY2VQZW5hbHR5IGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5sb2dpdF9iaWFzICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MubG9naXRfYmlhcyA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwibG9naXRCaWFzIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5sb2dwcm9icyAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLmxvZ3Byb2JzID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJsb2dwcm9icyBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFyZ3MudG9wX2xvZ3Byb2JzICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MudG9wX2xvZ3Byb2JzID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJ0b3BMb2dwcm9icyBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFyZ3MubWF4X3Rva2VucyAhPSBudWxsKSB7XG4gICAgICAgIGlmIChiYXNlQXJncy5tYXhfY29tcGxldGlvbl90b2tlbnMgPT0gbnVsbCkge1xuICAgICAgICAgIGJhc2VBcmdzLm1heF9jb21wbGV0aW9uX3Rva2VucyA9IGJhc2VBcmdzLm1heF90b2tlbnM7XG4gICAgICAgIH1cbiAgICAgICAgYmFzZUFyZ3MubWF4X3Rva2VucyA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMubW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTRvLXNlYXJjaC1wcmV2aWV3XCIpIHx8IHRoaXMubW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTRvLW1pbmktc2VhcmNoLXByZXZpZXdcIikpIHtcbiAgICAgIGlmIChiYXNlQXJncy50ZW1wZXJhdHVyZSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRlbXBlcmF0dXJlID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRlbXBlcmF0dXJlXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0ZW1wZXJhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGUgc2VhcmNoIHByZXZpZXcgbW9kZWxzIGFuZCBoYXMgYmVlbiByZW1vdmVkLlwiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3BlbmFpT3B0aW9ucy5zZXJ2aWNlVGllciA9PT0gXCJmbGV4XCIgJiYgIXN1cHBvcnRzRmxleFByb2Nlc3NpbmcodGhpcy5tb2RlbElkKSkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInNlcnZpY2VUaWVyXCIsXG4gICAgICAgIGRldGFpbHM6IFwiZmxleCBwcm9jZXNzaW5nIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBvMywgbzQtbWluaSwgYW5kIGdwdC01IG1vZGVsc1wiXG4gICAgICB9KTtcbiAgICAgIGJhc2VBcmdzLnNlcnZpY2VfdGllciA9IHZvaWQgMDtcbiAgICB9XG4gICAgaWYgKG9wZW5haU9wdGlvbnMuc2VydmljZVRpZXIgPT09IFwicHJpb3JpdHlcIiAmJiAhc3VwcG9ydHNQcmlvcml0eVByb2Nlc3NpbmcodGhpcy5tb2RlbElkKSkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInNlcnZpY2VUaWVyXCIsXG4gICAgICAgIGRldGFpbHM6IFwicHJpb3JpdHkgcHJvY2Vzc2luZyBpcyBvbmx5IGF2YWlsYWJsZSBmb3Igc3VwcG9ydGVkIG1vZGVscyAoZ3B0LTQsIGdwdC01LCBncHQtNS1taW5pLCBvMywgbzQtbWluaSkgYW5kIHJlcXVpcmVzIEVudGVycHJpc2UgYWNjZXNzLiBncHQtNS1uYW5vIGlzIG5vdCBzdXBwb3J0ZWRcIlxuICAgICAgfSk7XG4gICAgICBiYXNlQXJncy5zZXJ2aWNlX3RpZXIgPSB2b2lkIDA7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICB0b29sQ2hvaWNlOiBvcGVuYWlUb29sQ2hvaWNlLFxuICAgICAgdG9vbFdhcm5pbmdzXG4gICAgfSA9IHByZXBhcmVDaGF0VG9vbHMoe1xuICAgICAgdG9vbHMsXG4gICAgICB0b29sQ2hvaWNlLFxuICAgICAgc3RydWN0dXJlZE91dHB1dHMsXG4gICAgICBzdHJpY3RKc29uU2NoZW1hXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLi4uYmFzZUFyZ3MsXG4gICAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICAgIHRvb2xfY2hvaWNlOiBvcGVuYWlUb29sQ2hvaWNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3M6IFsuLi53YXJuaW5ncywgLi4udG9vbFdhcm5pbmdzXVxuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qLCBfaywgX2wsIF9tLCBfbjtcbiAgICBjb25zdCB7IGFyZ3M6IGJvZHksIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGkoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9jaGF0L2NvbXBsZXRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVycyh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICBvcGVuYWlDaGF0UmVzcG9uc2VTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGNvbnN0IGNob2ljZSA9IHJlc3BvbnNlLmNob2ljZXNbMF07XG4gICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgIGNvbnN0IHRleHQgPSBjaG9pY2UubWVzc2FnZS5jb250ZW50O1xuICAgIGlmICh0ZXh0ICE9IG51bGwgJiYgdGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICBjb250ZW50LnB1c2goeyB0eXBlOiBcInRleHRcIiwgdGV4dCB9KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiAoX2EgPSBjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzKSAhPSBudWxsID8gX2EgOiBbXSkge1xuICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgdG9vbENhbGxJZDogKF9iID0gdG9vbENhbGwuaWQpICE9IG51bGwgPyBfYiA6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgdG9vbE5hbWU6IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgIGlucHV0OiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGFubm90YXRpb24gb2YgKF9jID0gY2hvaWNlLm1lc3NhZ2UuYW5ub3RhdGlvbnMpICE9IG51bGwgPyBfYyA6IFtdKSB7XG4gICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICB1cmw6IGFubm90YXRpb24udXJsLFxuICAgICAgICB0aXRsZTogYW5ub3RhdGlvbi50aXRsZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbXBsZXRpb25Ub2tlbkRldGFpbHMgPSAoX2QgPSByZXNwb25zZS51c2FnZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHM7XG4gICAgY29uc3QgcHJvbXB0VG9rZW5EZXRhaWxzID0gKF9lID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfZS5wcm9tcHRfdG9rZW5zX2RldGFpbHM7XG4gICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHsgb3BlbmFpOiB7fSB9O1xuICAgIGlmICgoY29tcGxldGlvblRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogY29tcGxldGlvblRva2VuRGV0YWlscy5hY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VucykgIT0gbnVsbCkge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkuYWNjZXB0ZWRQcmVkaWN0aW9uVG9rZW5zID0gY29tcGxldGlvblRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogY29tcGxldGlvblRva2VuRGV0YWlscy5hY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VucztcbiAgICB9XG4gICAgaWYgKChjb21wbGV0aW9uVG9rZW5EZXRhaWxzID09IG51bGwgPyB2b2lkIDAgOiBjb21wbGV0aW9uVG9rZW5EZXRhaWxzLnJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zKSAhPSBudWxsKSB7XG4gICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5yZWplY3RlZFByZWRpY3Rpb25Ub2tlbnMgPSBjb21wbGV0aW9uVG9rZW5EZXRhaWxzID09IG51bGwgPyB2b2lkIDAgOiBjb21wbGV0aW9uVG9rZW5EZXRhaWxzLnJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zO1xuICAgIH1cbiAgICBpZiAoKChfZiA9IGNob2ljZS5sb2dwcm9icykgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLmNvbnRlbnQpICE9IG51bGwpIHtcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLmxvZ3Byb2JzID0gY2hvaWNlLmxvZ3Byb2JzLmNvbnRlbnQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50LFxuICAgICAgZmluaXNoUmVhc29uOiBtYXBPcGVuQUlGaW5pc2hSZWFzb24oY2hvaWNlLmZpbmlzaF9yZWFzb24pLFxuICAgICAgdXNhZ2U6IHtcbiAgICAgICAgaW5wdXRUb2tlbnM6IChfaCA9IChfZyA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2cucHJvbXB0X3Rva2VucykgIT0gbnVsbCA/IF9oIDogdm9pZCAwLFxuICAgICAgICBvdXRwdXRUb2tlbnM6IChfaiA9IChfaSA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2kuY29tcGxldGlvbl90b2tlbnMpICE9IG51bGwgPyBfaiA6IHZvaWQgMCxcbiAgICAgICAgdG90YWxUb2tlbnM6IChfbCA9IChfayA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2sudG90YWxfdG9rZW5zKSAhPSBudWxsID8gX2wgOiB2b2lkIDAsXG4gICAgICAgIHJlYXNvbmluZ1Rva2VuczogKF9tID0gY29tcGxldGlvblRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogY29tcGxldGlvblRva2VuRGV0YWlscy5yZWFzb25pbmdfdG9rZW5zKSAhPSBudWxsID8gX20gOiB2b2lkIDAsXG4gICAgICAgIGNhY2hlZElucHV0VG9rZW5zOiAoX24gPSBwcm9tcHRUb2tlbkRldGFpbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb21wdFRva2VuRGV0YWlscy5jYWNoZWRfdG9rZW5zKSAhPSBudWxsID8gX24gOiB2b2lkIDBcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEocmVzcG9uc2UpLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGJvZHk6IHJhd1Jlc3BvbnNlXG4gICAgICB9LFxuICAgICAgd2FybmluZ3MsXG4gICAgICBwcm92aWRlck1ldGFkYXRhXG4gICAgfTtcbiAgfVxuICBhc3luYyBkb1N0cmVhbShvcHRpb25zKSB7XG4gICAgY29uc3QgeyBhcmdzLCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICAuLi5hcmdzLFxuICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgc3RyZWFtX29wdGlvbnM6IHtcbiAgICAgICAgaW5jbHVkZV91c2FnZTogdHJ1ZVxuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgeyByZXNwb25zZUhlYWRlcnMsIHZhbHVlOiByZXNwb25zZSB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaSh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NoYXQvY29tcGxldGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzKHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHksXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyKFxuICAgICAgICBvcGVuYWlDaGF0Q2h1bmtTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGNvbnN0IHRvb2xDYWxscyA9IFtdO1xuICAgIGxldCBmaW5pc2hSZWFzb24gPSBcInVua25vd25cIjtcbiAgICBjb25zdCB1c2FnZSA9IHtcbiAgICAgIGlucHV0VG9rZW5zOiB2b2lkIDAsXG4gICAgICBvdXRwdXRUb2tlbnM6IHZvaWQgMCxcbiAgICAgIHRvdGFsVG9rZW5zOiB2b2lkIDBcbiAgICB9O1xuICAgIGxldCBpc0ZpcnN0Q2h1bmsgPSB0cnVlO1xuICAgIGxldCBpc0FjdGl2ZVRleHQgPSBmYWxzZTtcbiAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0geyBvcGVuYWk6IHt9IH07XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0cmVhbTogcmVzcG9uc2UucGlwZVRocm91Z2goXG4gICAgICAgIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwic3RyZWFtLXN0YXJ0XCIsIHdhcm5pbmdzIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdSwgX3YsIF93LCBfeDtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogY2h1bmsuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2h1bmsudmFsdWU7XG4gICAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogdmFsdWUuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0ZpcnN0Q2h1bmspIHtcbiAgICAgICAgICAgICAgaXNGaXJzdENodW5rID0gZmFsc2U7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJyZXNwb25zZS1tZXRhZGF0YVwiLFxuICAgICAgICAgICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEodmFsdWUpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLnVzYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSAoX2EgPSB2YWx1ZS51c2FnZS5wcm9tcHRfdG9rZW5zKSAhPSBudWxsID8gX2EgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLm91dHB1dFRva2VucyA9IChfYiA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zKSAhPSBudWxsID8gX2IgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLnRvdGFsVG9rZW5zID0gKF9jID0gdmFsdWUudXNhZ2UudG90YWxfdG9rZW5zKSAhPSBudWxsID8gX2MgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLnJlYXNvbmluZ1Rva2VucyA9IChfZSA9IChfZCA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfZC5yZWFzb25pbmdfdG9rZW5zKSAhPSBudWxsID8gX2UgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLmNhY2hlZElucHV0VG9rZW5zID0gKF9nID0gKF9mID0gdmFsdWUudXNhZ2UucHJvbXB0X3Rva2Vuc19kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX2YuY2FjaGVkX3Rva2VucykgIT0gbnVsbCA/IF9nIDogdm9pZCAwO1xuICAgICAgICAgICAgICBpZiAoKChfaCA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfaC5hY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VucykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLmFjY2VwdGVkUHJlZGljdGlvblRva2VucyA9IChfaSA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfaS5hY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VucztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoKChfaiA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfai5yZWplY3RlZF9wcmVkaWN0aW9uX3Rva2VucykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLnJlamVjdGVkUHJlZGljdGlvblRva2VucyA9IChfayA9IHZhbHVlLnVzYWdlLmNvbXBsZXRpb25fdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfay5yZWplY3RlZF9wcmVkaWN0aW9uX3Rva2VucztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hvaWNlID0gdmFsdWUuY2hvaWNlc1swXTtcbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UuZmluaXNoX3JlYXNvbikgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSBtYXBPcGVuQUlGaW5pc2hSZWFzb24oY2hvaWNlLmZpbmlzaF9yZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgoX2wgPSBjaG9pY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNob2ljZS5sb2dwcm9icykgPT0gbnVsbCA/IHZvaWQgMCA6IF9sLmNvbnRlbnQpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBjaG9pY2UubG9ncHJvYnMuY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UuZGVsdGEpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBjaG9pY2UuZGVsdGE7XG4gICAgICAgICAgICBpZiAoZGVsdGEuY29udGVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmICghaXNBY3RpdmVUZXh0KSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJ0ZXh0LXN0YXJ0XCIsIGlkOiBcIjBcIiB9KTtcbiAgICAgICAgICAgICAgICBpc0FjdGl2ZVRleHQgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgIGRlbHRhOiBkZWx0YS5jb250ZW50XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbHRhLnRvb2xfY2FsbHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRvb2xDYWxsRGVsdGEgb2YgZGVsdGEudG9vbF9jYWxscykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdG9vbENhbGxEZWx0YS5pbmRleDtcbiAgICAgICAgICAgICAgICBpZiAodG9vbENhbGxzW2luZGV4XSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICBpZiAodG9vbENhbGxEZWx0YS50eXBlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRSZXNwb25zZURhdGFFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YTogdG9vbENhbGxEZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXhwZWN0ZWQgJ2Z1bmN0aW9uJyB0eXBlLmBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAodG9vbENhbGxEZWx0YS5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkUmVzcG9uc2VEYXRhRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRvb2xDYWxsRGVsdGEsXG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEV4cGVjdGVkICdpZCcgdG8gYmUgYSBzdHJpbmcuYFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmICgoKF9tID0gdG9vbENhbGxEZWx0YS5mdW5jdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9tLm5hbWUpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRSZXNwb25zZURhdGFFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YTogdG9vbENhbGxEZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXhwZWN0ZWQgJ2Z1bmN0aW9uLm5hbWUnIHRvIGJlIGEgc3RyaW5nLmBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsRGVsdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdG9vbENhbGxzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsRGVsdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiAoX24gPSB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uLmFyZ3VtZW50cykgIT0gbnVsbCA/IF9uIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBoYXNGaW5pc2hlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbDIgPSB0b29sQ2FsbHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgaWYgKCgoX28gPSB0b29sQ2FsbDIuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfby5uYW1lKSAhPSBudWxsICYmICgoX3AgPSB0b29sQ2FsbDIuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfcC5hcmd1bWVudHMpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsMi5mdW5jdGlvbi5hcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbDIuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YTogdG9vbENhbGwyLmZ1bmN0aW9uLmFyZ3VtZW50c1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1BhcnNhYmxlSnNvbih0b29sQ2FsbDIuZnVuY3Rpb24uYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwyLmlkXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiAoX3EgPSB0b29sQ2FsbDIuaWQpICE9IG51bGwgPyBfcSA6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sQ2FsbDIuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB0b29sQ2FsbDIuZnVuY3Rpb24uYXJndW1lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwyLmhhc0ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gdG9vbENhbGxzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAodG9vbENhbGwuaGFzRmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKChfciA9IHRvb2xDYWxsRGVsdGEuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfci5hcmd1bWVudHMpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyArPSAoX3QgPSAoX3MgPSB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX3MuYXJndW1lbnRzKSAhPSBudWxsID8gX3QgOiBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWQsXG4gICAgICAgICAgICAgICAgICBkZWx0YTogKF91ID0gdG9vbENhbGxEZWx0YS5mdW5jdGlvbi5hcmd1bWVudHMpICE9IG51bGwgPyBfdSA6IFwiXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoKChfdiA9IHRvb2xDYWxsLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX3YubmFtZSkgIT0gbnVsbCAmJiAoKF93ID0gdG9vbENhbGwuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfdy5hcmd1bWVudHMpICE9IG51bGwgJiYgaXNQYXJzYWJsZUpzb24odG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKSkge1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwuaWRcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogKF94ID0gdG9vbENhbGwuaWQpICE9IG51bGwgPyBfeCA6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiB0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHNcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdG9vbENhbGwuaGFzRmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlbHRhLmFubm90YXRpb25zICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBhbm5vdGF0aW9uIG9mIGRlbHRhLmFubm90YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgICAgICAgIHVybDogYW5ub3RhdGlvbi51cmwsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogYW5ub3RhdGlvbi50aXRsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbHVzaChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBpZiAoaXNBY3RpdmVUZXh0KSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwidGV4dC1lbmRcIiwgaWQ6IFwiMFwiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJmaW5pc2hcIixcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uLFxuICAgICAgICAgICAgICB1c2FnZSxcbiAgICAgICAgICAgICAgLi4ucHJvdmlkZXJNZXRhZGF0YSAhPSBudWxsID8geyBwcm92aWRlck1ldGFkYXRhIH0gOiB7fVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIHJlcXVlc3Q6IHsgYm9keSB9LFxuICAgICAgcmVzcG9uc2U6IHsgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzIH1cbiAgICB9O1xuICB9XG59O1xudmFyIG9wZW5haVRva2VuVXNhZ2VTY2hlbWEgPSB6My5vYmplY3Qoe1xuICBwcm9tcHRfdG9rZW5zOiB6My5udW1iZXIoKS5udWxsaXNoKCksXG4gIGNvbXBsZXRpb25fdG9rZW5zOiB6My5udW1iZXIoKS5udWxsaXNoKCksXG4gIHRvdGFsX3Rva2VuczogejMubnVtYmVyKCkubnVsbGlzaCgpLFxuICBwcm9tcHRfdG9rZW5zX2RldGFpbHM6IHozLm9iamVjdCh7XG4gICAgY2FjaGVkX3Rva2VuczogejMubnVtYmVyKCkubnVsbGlzaCgpXG4gIH0pLm51bGxpc2goKSxcbiAgY29tcGxldGlvbl90b2tlbnNfZGV0YWlsczogejMub2JqZWN0KHtcbiAgICByZWFzb25pbmdfdG9rZW5zOiB6My5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgYWNjZXB0ZWRfcHJlZGljdGlvbl90b2tlbnM6IHozLm51bWJlcigpLm51bGxpc2goKSxcbiAgICByZWplY3RlZF9wcmVkaWN0aW9uX3Rva2VuczogejMubnVtYmVyKCkubnVsbGlzaCgpXG4gIH0pLm51bGxpc2goKVxufSkubnVsbGlzaCgpO1xudmFyIG9wZW5haUNoYXRSZXNwb25zZVNjaGVtYSA9IHozLm9iamVjdCh7XG4gIGlkOiB6My5zdHJpbmcoKS5udWxsaXNoKCksXG4gIGNyZWF0ZWQ6IHozLm51bWJlcigpLm51bGxpc2goKSxcbiAgbW9kZWw6IHozLnN0cmluZygpLm51bGxpc2goKSxcbiAgY2hvaWNlczogejMuYXJyYXkoXG4gICAgejMub2JqZWN0KHtcbiAgICAgIG1lc3NhZ2U6IHozLm9iamVjdCh7XG4gICAgICAgIHJvbGU6IHozLmxpdGVyYWwoXCJhc3Npc3RhbnRcIikubnVsbGlzaCgpLFxuICAgICAgICBjb250ZW50OiB6My5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIHRvb2xfY2FsbHM6IHozLmFycmF5KFxuICAgICAgICAgIHozLm9iamVjdCh7XG4gICAgICAgICAgICBpZDogejMuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgdHlwZTogejMubGl0ZXJhbChcImZ1bmN0aW9uXCIpLFxuICAgICAgICAgICAgZnVuY3Rpb246IHozLm9iamVjdCh7XG4gICAgICAgICAgICAgIG5hbWU6IHozLnN0cmluZygpLFxuICAgICAgICAgICAgICBhcmd1bWVudHM6IHozLnN0cmluZygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICAgICkubnVsbGlzaCgpLFxuICAgICAgICBhbm5vdGF0aW9uczogejMuYXJyYXkoXG4gICAgICAgICAgejMub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHozLmxpdGVyYWwoXCJ1cmxfY2l0YXRpb25cIiksXG4gICAgICAgICAgICBzdGFydF9pbmRleDogejMubnVtYmVyKCksXG4gICAgICAgICAgICBlbmRfaW5kZXg6IHozLm51bWJlcigpLFxuICAgICAgICAgICAgdXJsOiB6My5zdHJpbmcoKSxcbiAgICAgICAgICAgIHRpdGxlOiB6My5zdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgICkubnVsbGlzaCgpXG4gICAgICB9KSxcbiAgICAgIGluZGV4OiB6My5udW1iZXIoKSxcbiAgICAgIGxvZ3Byb2JzOiB6My5vYmplY3Qoe1xuICAgICAgICBjb250ZW50OiB6My5hcnJheShcbiAgICAgICAgICB6My5vYmplY3Qoe1xuICAgICAgICAgICAgdG9rZW46IHozLnN0cmluZygpLFxuICAgICAgICAgICAgbG9ncHJvYjogejMubnVtYmVyKCksXG4gICAgICAgICAgICB0b3BfbG9ncHJvYnM6IHozLmFycmF5KFxuICAgICAgICAgICAgICB6My5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHRva2VuOiB6My5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBsb2dwcm9iOiB6My5udW1iZXIoKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0pXG4gICAgICAgICkubnVsbGlzaCgpXG4gICAgICB9KS5udWxsaXNoKCksXG4gICAgICBmaW5pc2hfcmVhc29uOiB6My5zdHJpbmcoKS5udWxsaXNoKClcbiAgICB9KVxuICApLFxuICB1c2FnZTogb3BlbmFpVG9rZW5Vc2FnZVNjaGVtYVxufSk7XG52YXIgb3BlbmFpQ2hhdENodW5rU2NoZW1hID0gejMudW5pb24oW1xuICB6My5vYmplY3Qoe1xuICAgIGlkOiB6My5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgY3JlYXRlZDogejMubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgIG1vZGVsOiB6My5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgY2hvaWNlczogejMuYXJyYXkoXG4gICAgICB6My5vYmplY3Qoe1xuICAgICAgICBkZWx0YTogejMub2JqZWN0KHtcbiAgICAgICAgICByb2xlOiB6My5lbnVtKFtcImFzc2lzdGFudFwiXSkubnVsbGlzaCgpLFxuICAgICAgICAgIGNvbnRlbnQ6IHozLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICB0b29sX2NhbGxzOiB6My5hcnJheShcbiAgICAgICAgICAgIHozLm9iamVjdCh7XG4gICAgICAgICAgICAgIGluZGV4OiB6My5udW1iZXIoKSxcbiAgICAgICAgICAgICAgaWQ6IHozLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgdHlwZTogejMubGl0ZXJhbChcImZ1bmN0aW9uXCIpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgZnVuY3Rpb246IHozLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgbmFtZTogejMuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50czogejMuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICkubnVsbGlzaCgpLFxuICAgICAgICAgIGFubm90YXRpb25zOiB6My5hcnJheShcbiAgICAgICAgICAgIHozLm9iamVjdCh7XG4gICAgICAgICAgICAgIHR5cGU6IHozLmxpdGVyYWwoXCJ1cmxfY2l0YXRpb25cIiksXG4gICAgICAgICAgICAgIHN0YXJ0X2luZGV4OiB6My5udW1iZXIoKSxcbiAgICAgICAgICAgICAgZW5kX2luZGV4OiB6My5udW1iZXIoKSxcbiAgICAgICAgICAgICAgdXJsOiB6My5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGl0bGU6IHozLnN0cmluZygpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICkubnVsbGlzaCgpXG4gICAgICAgIH0pLm51bGxpc2goKSxcbiAgICAgICAgbG9ncHJvYnM6IHozLm9iamVjdCh7XG4gICAgICAgICAgY29udGVudDogejMuYXJyYXkoXG4gICAgICAgICAgICB6My5vYmplY3Qoe1xuICAgICAgICAgICAgICB0b2tlbjogejMuc3RyaW5nKCksXG4gICAgICAgICAgICAgIGxvZ3Byb2I6IHozLm51bWJlcigpLFxuICAgICAgICAgICAgICB0b3BfbG9ncHJvYnM6IHozLmFycmF5KFxuICAgICAgICAgICAgICAgIHozLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICB0b2tlbjogejMuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICBsb2dwcm9iOiB6My5udW1iZXIoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKS5udWxsaXNoKClcbiAgICAgICAgfSkubnVsbGlzaCgpLFxuICAgICAgICBmaW5pc2hfcmVhc29uOiB6My5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIGluZGV4OiB6My5udW1iZXIoKVxuICAgICAgfSlcbiAgICApLFxuICAgIHVzYWdlOiBvcGVuYWlUb2tlblVzYWdlU2NoZW1hXG4gIH0pLFxuICBvcGVuYWlFcnJvckRhdGFTY2hlbWFcbl0pO1xuZnVuY3Rpb24gaXNSZWFzb25pbmdNb2RlbChtb2RlbElkKSB7XG4gIHJldHVybiAobW9kZWxJZC5zdGFydHNXaXRoKFwib1wiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSkgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIik7XG59XG5mdW5jdGlvbiBzdXBwb3J0c0ZsZXhQcm9jZXNzaW5nKG1vZGVsSWQpIHtcbiAgcmV0dXJuIG1vZGVsSWQuc3RhcnRzV2l0aChcIm8zXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm80LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTVcIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIik7XG59XG5mdW5jdGlvbiBzdXBwb3J0c1ByaW9yaXR5UHJvY2Vzc2luZyhtb2RlbElkKSB7XG4gIHJldHVybiBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNFwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS1taW5pXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01XCIpICYmICFtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS1uYW5vXCIpICYmICFtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS1jaGF0XCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm8zXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm80LW1pbmlcIik7XG59XG5mdW5jdGlvbiBnZXRTeXN0ZW1NZXNzYWdlTW9kZShtb2RlbElkKSB7XG4gIHZhciBfYSwgX2I7XG4gIGlmICghaXNSZWFzb25pbmdNb2RlbChtb2RlbElkKSkge1xuICAgIHJldHVybiBcInN5c3RlbVwiO1xuICB9XG4gIHJldHVybiAoX2IgPSAoX2EgPSByZWFzb25pbmdNb2RlbHNbbW9kZWxJZF0pID09IG51bGwgPyB2b2lkIDAgOiBfYS5zeXN0ZW1NZXNzYWdlTW9kZSkgIT0gbnVsbCA/IF9iIDogXCJkZXZlbG9wZXJcIjtcbn1cbnZhciByZWFzb25pbmdNb2RlbHMgPSB7XG4gIFwibzEtbWluaVwiOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwicmVtb3ZlXCJcbiAgfSxcbiAgXCJvMS1taW5pLTIwMjQtMDktMTJcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcInJlbW92ZVwiXG4gIH0sXG4gIFwibzEtcHJldmlld1wiOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwicmVtb3ZlXCJcbiAgfSxcbiAgXCJvMS1wcmV2aWV3LTIwMjQtMDktMTJcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcInJlbW92ZVwiXG4gIH0sXG4gIG8zOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwiZGV2ZWxvcGVyXCJcbiAgfSxcbiAgXCJvMy0yMDI1LTA0LTE2XCI6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJkZXZlbG9wZXJcIlxuICB9LFxuICBcIm8zLW1pbmlcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcImRldmVsb3BlclwiXG4gIH0sXG4gIFwibzMtbWluaS0yMDI1LTAxLTMxXCI6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJkZXZlbG9wZXJcIlxuICB9LFxuICBcIm80LW1pbmlcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcImRldmVsb3BlclwiXG4gIH0sXG4gIFwibzQtbWluaS0yMDI1LTA0LTE2XCI6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJkZXZlbG9wZXJcIlxuICB9XG59O1xuXG4vLyBzcmMvY29tcGxldGlvbi9vcGVuYWktY29tcGxldGlvbi1sYW5ndWFnZS1tb2RlbC50c1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnMyLFxuICBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcjIsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjIsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zMixcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpMlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6NSB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL2NvbXBsZXRpb24vY29udmVydC10by1vcGVuYWktY29tcGxldGlvbi1wcm9tcHQudHNcbmltcG9ydCB7XG4gIEludmFsaWRQcm9tcHRFcnJvcixcbiAgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IgYXMgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IzXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5mdW5jdGlvbiBjb252ZXJ0VG9PcGVuQUlDb21wbGV0aW9uUHJvbXB0KHtcbiAgcHJvbXB0LFxuICB1c2VyID0gXCJ1c2VyXCIsXG4gIGFzc2lzdGFudCA9IFwiYXNzaXN0YW50XCJcbn0pIHtcbiAgbGV0IHRleHQgPSBcIlwiO1xuICBpZiAocHJvbXB0WzBdLnJvbGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICB0ZXh0ICs9IGAke3Byb21wdFswXS5jb250ZW50fVxuXG5gO1xuICAgIHByb21wdCA9IHByb21wdC5zbGljZSgxKTtcbiAgfVxuICBmb3IgKGNvbnN0IHsgcm9sZSwgY29udGVudCB9IG9mIHByb21wdCkge1xuICAgIHN3aXRjaCAocm9sZSkge1xuICAgICAgY2FzZSBcInN5c3RlbVwiOiB7XG4gICAgICAgIHRocm93IG5ldyBJbnZhbGlkUHJvbXB0RXJyb3Ioe1xuICAgICAgICAgIG1lc3NhZ2U6IFwiVW5leHBlY3RlZCBzeXN0ZW0gbWVzc2FnZSBpbiBwcm9tcHQ6ICR7Y29udGVudH1cIixcbiAgICAgICAgICBwcm9tcHRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjYXNlIFwidXNlclwiOiB7XG4gICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gY29udGVudC5tYXAoKHBhcnQpID0+IHtcbiAgICAgICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICByZXR1cm4gcGFydC50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcIik7XG4gICAgICAgIHRleHQgKz0gYCR7dXNlcn06XG4ke3VzZXJNZXNzYWdlfVxuXG5gO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJhc3Npc3RhbnRcIjoge1xuICAgICAgICBjb25zdCBhc3Npc3RhbnRNZXNzYWdlID0gY29udGVudC5tYXAoKHBhcnQpID0+IHtcbiAgICAgICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjoge1xuICAgICAgICAgICAgICByZXR1cm4gcGFydC50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInRvb2wtY2FsbFwiOiB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjMoe1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IFwidG9vbC1jYWxsIG1lc3NhZ2VzXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgICB0ZXh0ICs9IGAke2Fzc2lzdGFudH06XG4ke2Fzc2lzdGFudE1lc3NhZ2V9XG5cbmA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInRvb2xcIjoge1xuICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IzKHtcbiAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBcInRvb2wgbWVzc2FnZXNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHJvbGU7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcm9sZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB0ZXh0ICs9IGAke2Fzc2lzdGFudH06XG5gO1xuICByZXR1cm4ge1xuICAgIHByb21wdDogdGV4dCxcbiAgICBzdG9wU2VxdWVuY2VzOiBbYFxuJHt1c2VyfTpgXVxuICB9O1xufVxuXG4vLyBzcmMvY29tcGxldGlvbi9nZXQtcmVzcG9uc2UtbWV0YWRhdGEudHNcbmZ1bmN0aW9uIGdldFJlc3BvbnNlTWV0YWRhdGEyKHtcbiAgaWQsXG4gIG1vZGVsLFxuICBjcmVhdGVkXG59KSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGlkICE9IG51bGwgPyBpZCA6IHZvaWQgMCxcbiAgICBtb2RlbElkOiBtb2RlbCAhPSBudWxsID8gbW9kZWwgOiB2b2lkIDAsXG4gICAgdGltZXN0YW1wOiBjcmVhdGVkICE9IG51bGwgPyBuZXcgRGF0ZShjcmVhdGVkICogMWUzKSA6IHZvaWQgMFxuICB9O1xufVxuXG4vLyBzcmMvY29tcGxldGlvbi9tYXAtb3BlbmFpLWZpbmlzaC1yZWFzb24udHNcbmZ1bmN0aW9uIG1hcE9wZW5BSUZpbmlzaFJlYXNvbjIoZmluaXNoUmVhc29uKSB7XG4gIHN3aXRjaCAoZmluaXNoUmVhc29uKSB7XG4gICAgY2FzZSBcInN0b3BcIjpcbiAgICAgIHJldHVybiBcInN0b3BcIjtcbiAgICBjYXNlIFwibGVuZ3RoXCI6XG4gICAgICByZXR1cm4gXCJsZW5ndGhcIjtcbiAgICBjYXNlIFwiY29udGVudF9maWx0ZXJcIjpcbiAgICAgIHJldHVybiBcImNvbnRlbnQtZmlsdGVyXCI7XG4gICAgY2FzZSBcImZ1bmN0aW9uX2NhbGxcIjpcbiAgICBjYXNlIFwidG9vbF9jYWxsc1wiOlxuICAgICAgcmV0dXJuIFwidG9vbC1jYWxsc1wiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJ1bmtub3duXCI7XG4gIH1cbn1cblxuLy8gc3JjL2NvbXBsZXRpb24vb3BlbmFpLWNvbXBsZXRpb24tb3B0aW9ucy50c1xuaW1wb3J0IHsgeiBhcyB6NCB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlDb21wbGV0aW9uUHJvdmlkZXJPcHRpb25zID0gejQub2JqZWN0KHtcbiAgLyoqXG4gIEVjaG8gYmFjayB0aGUgcHJvbXB0IGluIGFkZGl0aW9uIHRvIHRoZSBjb21wbGV0aW9uLlxuICAgICAqL1xuICBlY2hvOiB6NC5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gIE1vZGlmeSB0aGUgbGlrZWxpaG9vZCBvZiBzcGVjaWZpZWQgdG9rZW5zIGFwcGVhcmluZyBpbiB0aGUgY29tcGxldGlvbi5cbiAgXG4gIEFjY2VwdHMgYSBKU09OIG9iamVjdCB0aGF0IG1hcHMgdG9rZW5zIChzcGVjaWZpZWQgYnkgdGhlaXIgdG9rZW4gSUQgaW5cbiAgdGhlIEdQVCB0b2tlbml6ZXIpIHRvIGFuIGFzc29jaWF0ZWQgYmlhcyB2YWx1ZSBmcm9tIC0xMDAgdG8gMTAwLiBZb3VcbiAgY2FuIHVzZSB0aGlzIHRva2VuaXplciB0b29sIHRvIGNvbnZlcnQgdGV4dCB0byB0b2tlbiBJRHMuIE1hdGhlbWF0aWNhbGx5LFxuICB0aGUgYmlhcyBpcyBhZGRlZCB0byB0aGUgbG9naXRzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgcHJpb3IgdG8gc2FtcGxpbmcuXG4gIFRoZSBleGFjdCBlZmZlY3Qgd2lsbCB2YXJ5IHBlciBtb2RlbCwgYnV0IHZhbHVlcyBiZXR3ZWVuIC0xIGFuZCAxIHNob3VsZFxuICBkZWNyZWFzZSBvciBpbmNyZWFzZSBsaWtlbGlob29kIG9mIHNlbGVjdGlvbjsgdmFsdWVzIGxpa2UgLTEwMCBvciAxMDBcbiAgc2hvdWxkIHJlc3VsdCBpbiBhIGJhbiBvciBleGNsdXNpdmUgc2VsZWN0aW9uIG9mIHRoZSByZWxldmFudCB0b2tlbi5cbiAgXG4gIEFzIGFuIGV4YW1wbGUsIHlvdSBjYW4gcGFzcyB7XCI1MDI1NlwiOiAtMTAwfSB0byBwcmV2ZW50IHRoZSA8fGVuZG9mdGV4dHw+XG4gIHRva2VuIGZyb20gYmVpbmcgZ2VuZXJhdGVkLlxuICAgKi9cbiAgbG9naXRCaWFzOiB6NC5yZWNvcmQoejQuc3RyaW5nKCksIHo0Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgVGhlIHN1ZmZpeCB0aGF0IGNvbWVzIGFmdGVyIGEgY29tcGxldGlvbiBvZiBpbnNlcnRlZCB0ZXh0LlxuICAgKi9cbiAgc3VmZml4OiB6NC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvXG4gIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gTGVhcm4gbW9yZS5cbiAgICovXG4gIHVzZXI6IHo0LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICBSZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMuIEluY2x1ZGluZyBsb2dwcm9icyB3aWxsIGluY3JlYXNlXG4gIHRoZSByZXNwb25zZSBzaXplIGFuZCBjYW4gc2xvdyBkb3duIHJlc3BvbnNlIHRpbWVzLiBIb3dldmVyLCBpdCBjYW5cbiAgYmUgdXNlZnVsIHRvIGJldHRlciB1bmRlcnN0YW5kIGhvdyB0aGUgbW9kZWwgaXMgYmVoYXZpbmcuXG4gIFNldHRpbmcgdG8gdHJ1ZSB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRva2VucyB0aGF0XG4gIHdlcmUgZ2VuZXJhdGVkLlxuICBTZXR0aW5nIHRvIGEgbnVtYmVyIHdpbGwgcmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9wIG5cbiAgdG9rZW5zIHRoYXQgd2VyZSBnZW5lcmF0ZWQuXG4gICAgICovXG4gIGxvZ3Byb2JzOiB6NC51bmlvbihbejQuYm9vbGVhbigpLCB6NC5udW1iZXIoKV0pLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBzcmMvY29tcGxldGlvbi9vcGVuYWktY29tcGxldGlvbi1sYW5ndWFnZS1tb2RlbC50c1xudmFyIE9wZW5BSUNvbXBsZXRpb25MYW5ndWFnZU1vZGVsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihtb2RlbElkLCBjb25maWcpIHtcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2MlwiO1xuICAgIHRoaXMuc3VwcG9ydGVkVXJscyA9IHtcbiAgICAgIC8vIE5vIFVSTHMgYXJlIHN1cHBvcnRlZCBmb3IgY29tcGxldGlvbiBtb2RlbHMuXG4gICAgfTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlck9wdGlvbnNOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlci5zcGxpdChcIi5cIilbMF0udHJpbSgpO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgcHJvbXB0LFxuICAgIG1heE91dHB1dFRva2VucyxcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICB0b3BQLFxuICAgIHRvcEssXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgc3RvcFNlcXVlbmNlczogdXNlclN0b3BTZXF1ZW5jZXMsXG4gICAgcmVzcG9uc2VGb3JtYXQsXG4gICAgdG9vbHMsXG4gICAgdG9vbENob2ljZSxcbiAgICBzZWVkLFxuICAgIHByb3ZpZGVyT3B0aW9uc1xuICB9KSB7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBjb25zdCBvcGVuYWlPcHRpb25zID0ge1xuICAgICAgLi4uYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMyKHtcbiAgICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgICAgc2NoZW1hOiBvcGVuYWlDb21wbGV0aW9uUHJvdmlkZXJPcHRpb25zXG4gICAgICB9KSxcbiAgICAgIC4uLmF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zMih7XG4gICAgICAgIHByb3ZpZGVyOiB0aGlzLnByb3ZpZGVyT3B0aW9uc05hbWUsXG4gICAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgICAgc2NoZW1hOiBvcGVuYWlDb21wbGV0aW9uUHJvdmlkZXJPcHRpb25zXG4gICAgICB9KVxuICAgIH07XG4gICAgaWYgKHRvcEsgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLCBzZXR0aW5nOiBcInRvcEtcIiB9KTtcbiAgICB9XG4gICAgaWYgKHRvb2xzID09IG51bGwgPyB2b2lkIDAgOiB0b29scy5sZW5ndGgpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJ0b29sc1wiIH0pO1xuICAgIH1cbiAgICBpZiAodG9vbENob2ljZSAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsIHNldHRpbmc6IFwidG9vbENob2ljZVwiIH0pO1xuICAgIH1cbiAgICBpZiAocmVzcG9uc2VGb3JtYXQgIT0gbnVsbCAmJiByZXNwb25zZUZvcm1hdC50eXBlICE9PSBcInRleHRcIikge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInJlc3BvbnNlRm9ybWF0XCIsXG4gICAgICAgIGRldGFpbHM6IFwiSlNPTiByZXNwb25zZSBmb3JtYXQgaXMgbm90IHN1cHBvcnRlZC5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgcHJvbXB0OiBjb21wbGV0aW9uUHJvbXB0LCBzdG9wU2VxdWVuY2VzIH0gPSBjb252ZXJ0VG9PcGVuQUlDb21wbGV0aW9uUHJvbXB0KHsgcHJvbXB0IH0pO1xuICAgIGNvbnN0IHN0b3AgPSBbLi4uc3RvcFNlcXVlbmNlcyAhPSBudWxsID8gc3RvcFNlcXVlbmNlcyA6IFtdLCAuLi51c2VyU3RvcFNlcXVlbmNlcyAhPSBudWxsID8gdXNlclN0b3BTZXF1ZW5jZXMgOiBbXV07XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLy8gbW9kZWwgaWQ6XG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIC8vIG1vZGVsIHNwZWNpZmljIHNldHRpbmdzOlxuICAgICAgICBlY2hvOiBvcGVuYWlPcHRpb25zLmVjaG8sXG4gICAgICAgIGxvZ2l0X2JpYXM6IG9wZW5haU9wdGlvbnMubG9naXRCaWFzLFxuICAgICAgICBsb2dwcm9iczogKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMpID09PSB0cnVlID8gMCA6IChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzKSA9PT0gZmFsc2UgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzLFxuICAgICAgICBzdWZmaXg6IG9wZW5haU9wdGlvbnMuc3VmZml4LFxuICAgICAgICB1c2VyOiBvcGVuYWlPcHRpb25zLnVzZXIsXG4gICAgICAgIC8vIHN0YW5kYXJkaXplZCBzZXR0aW5nczpcbiAgICAgICAgbWF4X3Rva2VuczogbWF4T3V0cHV0VG9rZW5zLFxuICAgICAgICB0ZW1wZXJhdHVyZSxcbiAgICAgICAgdG9wX3A6IHRvcFAsXG4gICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiBmcmVxdWVuY3lQZW5hbHR5LFxuICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiBwcmVzZW5jZVBlbmFsdHksXG4gICAgICAgIHNlZWQsXG4gICAgICAgIC8vIHByb21wdDpcbiAgICAgICAgcHJvbXB0OiBjb21wbGV0aW9uUHJvbXB0LFxuICAgICAgICAvLyBzdG9wIHNlcXVlbmNlczpcbiAgICAgICAgc3RvcDogc3RvcC5sZW5ndGggPiAwID8gc3RvcCA6IHZvaWQgMFxuICAgICAgfSxcbiAgICAgIHdhcm5pbmdzXG4gICAgfTtcbiAgfVxuICBhc3luYyBkb0dlbmVyYXRlKG9wdGlvbnMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBjb25zdCB7IGFyZ3MsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGkyKHtcbiAgICAgIHVybDogdGhpcy5jb25maWcudXJsKHtcbiAgICAgICAgcGF0aDogXCIvY29tcGxldGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzMih0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5OiBhcmdzLFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyMihcbiAgICAgICAgb3BlbmFpQ29tcGxldGlvblJlc3BvbnNlU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWw6IG9wdGlvbnMuYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICBjb25zdCBjaG9pY2UgPSByZXNwb25zZS5jaG9pY2VzWzBdO1xuICAgIGNvbnN0IHByb3ZpZGVyTWV0YWRhdGEgPSB7IG9wZW5haToge30gfTtcbiAgICBpZiAoY2hvaWNlLmxvZ3Byb2JzICE9IG51bGwpIHtcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLmxvZ3Byb2JzID0gY2hvaWNlLmxvZ3Byb2JzO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudDogW3sgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IGNob2ljZS50ZXh0IH1dLFxuICAgICAgdXNhZ2U6IHtcbiAgICAgICAgaW5wdXRUb2tlbnM6IChfYSA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2EucHJvbXB0X3Rva2VucyxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiAoX2IgPSByZXNwb25zZS51c2FnZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNvbXBsZXRpb25fdG9rZW5zLFxuICAgICAgICB0b3RhbFRva2VuczogKF9jID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfYy50b3RhbF90b2tlbnNcbiAgICAgIH0sXG4gICAgICBmaW5pc2hSZWFzb246IG1hcE9wZW5BSUZpbmlzaFJlYXNvbjIoY2hvaWNlLmZpbmlzaF9yZWFzb24pLFxuICAgICAgcmVxdWVzdDogeyBib2R5OiBhcmdzIH0sXG4gICAgICByZXNwb25zZToge1xuICAgICAgICAuLi5nZXRSZXNwb25zZU1ldGFkYXRhMihyZXNwb25zZSksXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgYm9keTogcmF3UmVzcG9uc2VcbiAgICAgIH0sXG4gICAgICBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvU3RyZWFtKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFyZ3MsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIC4uLmFyZ3MsXG4gICAgICBzdHJlYW06IHRydWUsXG4gICAgICBzdHJlYW1fb3B0aW9uczoge1xuICAgICAgICBpbmNsdWRlX3VzYWdlOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB7IHJlc3BvbnNlSGVhZGVycywgdmFsdWU6IHJlc3BvbnNlIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpMih7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NvbXBsZXRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczIodGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgYm9keSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIyKFxuICAgICAgICBvcGVuYWlDb21wbGV0aW9uQ2h1bmtTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGxldCBmaW5pc2hSZWFzb24gPSBcInVua25vd25cIjtcbiAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0geyBvcGVuYWk6IHt9IH07XG4gICAgY29uc3QgdXNhZ2UgPSB7XG4gICAgICBpbnB1dFRva2Vuczogdm9pZCAwLFxuICAgICAgb3V0cHV0VG9rZW5zOiB2b2lkIDAsXG4gICAgICB0b3RhbFRva2Vuczogdm9pZCAwXG4gICAgfTtcbiAgICBsZXQgaXNGaXJzdENodW5rID0gdHJ1ZTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZWFtOiByZXNwb25zZS5waXBlVGhyb3VnaChcbiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJzdHJlYW0tc3RhcnRcIiwgd2FybmluZ3MgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmluY2x1ZGVSYXdDaHVua3MpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJyYXdcIiwgcmF3VmFsdWU6IGNodW5rLnJhd1ZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaHVuay5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogY2h1bmsuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY2h1bmsudmFsdWU7XG4gICAgICAgICAgICBpZiAoXCJlcnJvclwiIGluIHZhbHVlKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogdmFsdWUuZXJyb3IgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0ZpcnN0Q2h1bmspIHtcbiAgICAgICAgICAgICAgaXNGaXJzdENodW5rID0gZmFsc2U7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJyZXNwb25zZS1tZXRhZGF0YVwiLFxuICAgICAgICAgICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEyKHZhbHVlKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJ0ZXh0LXN0YXJ0XCIsIGlkOiBcIjBcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZS51c2FnZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHVzYWdlLmlucHV0VG9rZW5zID0gdmFsdWUudXNhZ2UucHJvbXB0X3Rva2VucztcbiAgICAgICAgICAgICAgdXNhZ2Uub3V0cHV0VG9rZW5zID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnM7XG4gICAgICAgICAgICAgIHVzYWdlLnRvdGFsVG9rZW5zID0gdmFsdWUudXNhZ2UudG90YWxfdG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hvaWNlID0gdmFsdWUuY2hvaWNlc1swXTtcbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UuZmluaXNoX3JlYXNvbikgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSBtYXBPcGVuQUlGaW5pc2hSZWFzb24yKGNob2ljZS5maW5pc2hfcmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UubG9ncHJvYnMpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBjaG9pY2UubG9ncHJvYnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNob2ljZSA9PSBudWxsID8gdm9pZCAwIDogY2hvaWNlLnRleHQpICE9IG51bGwgJiYgY2hvaWNlLnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dC1kZWx0YVwiLFxuICAgICAgICAgICAgICAgIGlkOiBcIjBcIixcbiAgICAgICAgICAgICAgICBkZWx0YTogY2hvaWNlLnRleHRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbHVzaChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBpZiAoIWlzRmlyc3RDaHVuaykge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInRleHQtZW5kXCIsIGlkOiBcIjBcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZmluaXNoXCIsXG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbixcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YSxcbiAgICAgICAgICAgICAgdXNhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgfTtcbiAgfVxufTtcbnZhciB1c2FnZVNjaGVtYSA9IHo1Lm9iamVjdCh7XG4gIHByb21wdF90b2tlbnM6IHo1Lm51bWJlcigpLFxuICBjb21wbGV0aW9uX3Rva2VuczogejUubnVtYmVyKCksXG4gIHRvdGFsX3Rva2VuczogejUubnVtYmVyKClcbn0pO1xudmFyIG9wZW5haUNvbXBsZXRpb25SZXNwb25zZVNjaGVtYSA9IHo1Lm9iamVjdCh7XG4gIGlkOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIGNyZWF0ZWQ6IHo1Lm51bWJlcigpLm51bGxpc2goKSxcbiAgbW9kZWw6IHo1LnN0cmluZygpLm51bGxpc2goKSxcbiAgY2hvaWNlczogejUuYXJyYXkoXG4gICAgejUub2JqZWN0KHtcbiAgICAgIHRleHQ6IHo1LnN0cmluZygpLFxuICAgICAgZmluaXNoX3JlYXNvbjogejUuc3RyaW5nKCksXG4gICAgICBsb2dwcm9iczogejUub2JqZWN0KHtcbiAgICAgICAgdG9rZW5zOiB6NS5hcnJheSh6NS5zdHJpbmcoKSksXG4gICAgICAgIHRva2VuX2xvZ3Byb2JzOiB6NS5hcnJheSh6NS5udW1iZXIoKSksXG4gICAgICAgIHRvcF9sb2dwcm9iczogejUuYXJyYXkoejUucmVjb3JkKHo1LnN0cmluZygpLCB6NS5udW1iZXIoKSkpLm51bGxpc2goKVxuICAgICAgfSkubnVsbGlzaCgpXG4gICAgfSlcbiAgKSxcbiAgdXNhZ2U6IHVzYWdlU2NoZW1hLm51bGxpc2goKVxufSk7XG52YXIgb3BlbmFpQ29tcGxldGlvbkNodW5rU2NoZW1hID0gejUudW5pb24oW1xuICB6NS5vYmplY3Qoe1xuICAgIGlkOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgY3JlYXRlZDogejUubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgIG1vZGVsOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgY2hvaWNlczogejUuYXJyYXkoXG4gICAgICB6NS5vYmplY3Qoe1xuICAgICAgICB0ZXh0OiB6NS5zdHJpbmcoKSxcbiAgICAgICAgZmluaXNoX3JlYXNvbjogejUuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICBpbmRleDogejUubnVtYmVyKCksXG4gICAgICAgIGxvZ3Byb2JzOiB6NS5vYmplY3Qoe1xuICAgICAgICAgIHRva2VuczogejUuYXJyYXkoejUuc3RyaW5nKCkpLFxuICAgICAgICAgIHRva2VuX2xvZ3Byb2JzOiB6NS5hcnJheSh6NS5udW1iZXIoKSksXG4gICAgICAgICAgdG9wX2xvZ3Byb2JzOiB6NS5hcnJheSh6NS5yZWNvcmQoejUuc3RyaW5nKCksIHo1Lm51bWJlcigpKSkubnVsbGlzaCgpXG4gICAgICAgIH0pLm51bGxpc2goKVxuICAgICAgfSlcbiAgICApLFxuICAgIHVzYWdlOiB1c2FnZVNjaGVtYS5udWxsaXNoKClcbiAgfSksXG4gIG9wZW5haUVycm9yRGF0YVNjaGVtYVxuXSk7XG5cbi8vIHNyYy9lbWJlZGRpbmcvb3BlbmFpLWVtYmVkZGluZy1tb2RlbC50c1xuaW1wb3J0IHtcbiAgVG9vTWFueUVtYmVkZGluZ1ZhbHVlc0ZvckNhbGxFcnJvclxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnMzLFxuICBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIzLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczMsXG4gIHBvc3RKc29uVG9BcGkgYXMgcG9zdEpzb25Ub0FwaTNcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejcgfSBmcm9tIFwiem9kL3Y0XCI7XG5cbi8vIHNyYy9lbWJlZGRpbmcvb3BlbmFpLWVtYmVkZGluZy1vcHRpb25zLnRzXG5pbXBvcnQgeyB6IGFzIHo2IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIG9wZW5haUVtYmVkZGluZ1Byb3ZpZGVyT3B0aW9ucyA9IHo2Lm9iamVjdCh7XG4gIC8qKlxuICBUaGUgbnVtYmVyIG9mIGRpbWVuc2lvbnMgdGhlIHJlc3VsdGluZyBvdXRwdXQgZW1iZWRkaW5ncyBzaG91bGQgaGF2ZS5cbiAgT25seSBzdXBwb3J0ZWQgaW4gdGV4dC1lbWJlZGRpbmctMyBhbmQgbGF0ZXIgbW9kZWxzLlxuICAgICAqL1xuICBkaW1lbnNpb25zOiB6Ni5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvXG4gIG1vbml0b3IgYW5kIGRldGVjdCBhYnVzZS4gTGVhcm4gbW9yZS5cbiAgKi9cbiAgdXNlcjogejYuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5cbi8vIHNyYy9lbWJlZGRpbmcvb3BlbmFpLWVtYmVkZGluZy1tb2RlbC50c1xudmFyIE9wZW5BSUVtYmVkZGluZ01vZGVsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihtb2RlbElkLCBjb25maWcpIHtcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2MlwiO1xuICAgIHRoaXMubWF4RW1iZWRkaW5nc1BlckNhbGwgPSAyMDQ4O1xuICAgIHRoaXMuc3VwcG9ydHNQYXJhbGxlbENhbGxzID0gdHJ1ZTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZG9FbWJlZCh7XG4gICAgdmFsdWVzLFxuICAgIGhlYWRlcnMsXG4gICAgYWJvcnRTaWduYWwsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHZhbHVlcy5sZW5ndGggPiB0aGlzLm1heEVtYmVkZGluZ3NQZXJDYWxsKSB7XG4gICAgICB0aHJvdyBuZXcgVG9vTWFueUVtYmVkZGluZ1ZhbHVlc0ZvckNhbGxFcnJvcih7XG4gICAgICAgIHByb3ZpZGVyOiB0aGlzLnByb3ZpZGVyLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIG1heEVtYmVkZGluZ3NQZXJDYWxsOiB0aGlzLm1heEVtYmVkZGluZ3NQZXJDYWxsLFxuICAgICAgICB2YWx1ZXNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBvcGVuYWlPcHRpb25zID0gKF9hID0gYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMzKHtcbiAgICAgIHByb3ZpZGVyOiBcIm9wZW5haVwiLFxuICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgc2NoZW1hOiBvcGVuYWlFbWJlZGRpbmdQcm92aWRlck9wdGlvbnNcbiAgICB9KSkgIT0gbnVsbCA/IF9hIDoge307XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWVcbiAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTMoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9lbWJlZGRpbmdzXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczModGhpcy5jb25maWcuaGVhZGVycygpLCBoZWFkZXJzKSxcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaW5wdXQ6IHZhbHVlcyxcbiAgICAgICAgZW5jb2RpbmdfZm9ybWF0OiBcImZsb2F0XCIsXG4gICAgICAgIGRpbWVuc2lvbnM6IG9wZW5haU9wdGlvbnMuZGltZW5zaW9ucyxcbiAgICAgICAgdXNlcjogb3BlbmFpT3B0aW9ucy51c2VyXG4gICAgICB9LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyMyhcbiAgICAgICAgb3BlbmFpVGV4dEVtYmVkZGluZ1Jlc3BvbnNlU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgZW1iZWRkaW5nczogcmVzcG9uc2UuZGF0YS5tYXAoKGl0ZW0pID0+IGl0ZW0uZW1iZWRkaW5nKSxcbiAgICAgIHVzYWdlOiByZXNwb25zZS51c2FnZSA/IHsgdG9rZW5zOiByZXNwb25zZS51c2FnZS5wcm9tcHRfdG9rZW5zIH0gOiB2b2lkIDAsXG4gICAgICByZXNwb25zZTogeyBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsIGJvZHk6IHJhd1ZhbHVlIH1cbiAgICB9O1xuICB9XG59O1xudmFyIG9wZW5haVRleHRFbWJlZGRpbmdSZXNwb25zZVNjaGVtYSA9IHo3Lm9iamVjdCh7XG4gIGRhdGE6IHo3LmFycmF5KHo3Lm9iamVjdCh7IGVtYmVkZGluZzogejcuYXJyYXkoejcubnVtYmVyKCkpIH0pKSxcbiAgdXNhZ2U6IHo3Lm9iamVjdCh7IHByb21wdF90b2tlbnM6IHo3Lm51bWJlcigpIH0pLm51bGxpc2goKVxufSk7XG5cbi8vIHNyYy9pbWFnZS9vcGVuYWktaW1hZ2UtbW9kZWwudHNcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzIGFzIGNvbWJpbmVIZWFkZXJzNCxcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyNCxcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpNFxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6OCB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL2ltYWdlL29wZW5haS1pbWFnZS1vcHRpb25zLnRzXG52YXIgbW9kZWxNYXhJbWFnZXNQZXJDYWxsID0ge1xuICBcImRhbGwtZS0zXCI6IDEsXG4gIFwiZGFsbC1lLTJcIjogMTAsXG4gIFwiZ3B0LWltYWdlLTFcIjogMTAsXG4gIFwiZ3B0LWltYWdlLTEtbWluaVwiOiAxMFxufTtcbnZhciBoYXNEZWZhdWx0UmVzcG9uc2VGb3JtYXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwiZ3B0LWltYWdlLTFcIixcbiAgXCJncHQtaW1hZ2UtMS1taW5pXCJcbl0pO1xuXG4vLyBzcmMvaW1hZ2Uvb3BlbmFpLWltYWdlLW1vZGVsLnRzXG52YXIgT3BlbkFJSW1hZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2MlwiO1xuICB9XG4gIGdldCBtYXhJbWFnZXNQZXJDYWxsKCkge1xuICAgIHZhciBfYTtcbiAgICByZXR1cm4gKF9hID0gbW9kZWxNYXhJbWFnZXNQZXJDYWxsW3RoaXMubW9kZWxJZF0pICE9IG51bGwgPyBfYSA6IDE7XG4gIH1cbiAgZ2V0IHByb3ZpZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlcjtcbiAgfVxuICBhc3luYyBkb0dlbmVyYXRlKHtcbiAgICBwcm9tcHQsXG4gICAgbixcbiAgICBzaXplLFxuICAgIGFzcGVjdFJhdGlvLFxuICAgIHNlZWQsXG4gICAgcHJvdmlkZXJPcHRpb25zLFxuICAgIGhlYWRlcnMsXG4gICAgYWJvcnRTaWduYWxcbiAgfSkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGlmIChhc3BlY3RSYXRpbyAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwiYXNwZWN0UmF0aW9cIixcbiAgICAgICAgZGV0YWlsczogXCJUaGlzIG1vZGVsIGRvZXMgbm90IHN1cHBvcnQgYXNwZWN0IHJhdGlvLiBVc2UgYHNpemVgIGluc3RlYWQuXCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoc2VlZCAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsIHNldHRpbmc6IFwic2VlZFwiIH0pO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IChfYyA9IChfYiA9IChfYSA9IHRoaXMuY29uZmlnLl9pbnRlcm5hbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmN1cnJlbnREYXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSkpICE9IG51bGwgPyBfYyA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHsgdmFsdWU6IHJlc3BvbnNlLCByZXNwb25zZUhlYWRlcnMgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGk0KHtcbiAgICAgIHVybDogdGhpcy5jb25maWcudXJsKHtcbiAgICAgICAgcGF0aDogXCIvaW1hZ2VzL2dlbmVyYXRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczQodGhpcy5jb25maWcuaGVhZGVycygpLCBoZWFkZXJzKSxcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgcHJvbXB0LFxuICAgICAgICBuLFxuICAgICAgICBzaXplLFxuICAgICAgICAuLi4oX2QgPSBwcm92aWRlck9wdGlvbnMub3BlbmFpKSAhPSBudWxsID8gX2QgOiB7fSxcbiAgICAgICAgLi4uIWhhc0RlZmF1bHRSZXNwb25zZUZvcm1hdC5oYXModGhpcy5tb2RlbElkKSA/IHsgcmVzcG9uc2VfZm9ybWF0OiBcImI2NF9qc29uXCIgfSA6IHt9XG4gICAgICB9LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyNChcbiAgICAgICAgb3BlbmFpSW1hZ2VSZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGltYWdlczogcmVzcG9uc2UuZGF0YS5tYXAoKGl0ZW0pID0+IGl0ZW0uYjY0X2pzb24pLFxuICAgICAgd2FybmluZ3MsXG4gICAgICByZXNwb25zZToge1xuICAgICAgICB0aW1lc3RhbXA6IGN1cnJlbnREYXRlLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVyc1xuICAgICAgfSxcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgaW1hZ2VzOiByZXNwb25zZS5kYXRhLm1hcChcbiAgICAgICAgICAgIChpdGVtKSA9PiBpdGVtLnJldmlzZWRfcHJvbXB0ID8ge1xuICAgICAgICAgICAgICByZXZpc2VkUHJvbXB0OiBpdGVtLnJldmlzZWRfcHJvbXB0XG4gICAgICAgICAgICB9IDogbnVsbFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG52YXIgb3BlbmFpSW1hZ2VSZXNwb25zZVNjaGVtYSA9IHo4Lm9iamVjdCh7XG4gIGRhdGE6IHo4LmFycmF5KFxuICAgIHo4Lm9iamVjdCh7IGI2NF9qc29uOiB6OC5zdHJpbmcoKSwgcmV2aXNlZF9wcm9tcHQ6IHo4LnN0cmluZygpLm9wdGlvbmFsKCkgfSlcbiAgKVxufSk7XG5cbi8vIHNyYy90b29sL2NvZGUtaW50ZXJwcmV0ZXIudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo5IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIGNvZGVJbnRlcnByZXRlcklucHV0U2NoZW1hID0gejkub2JqZWN0KHtcbiAgY29kZTogejkuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBjb250YWluZXJJZDogejkuc3RyaW5nKClcbn0pO1xudmFyIGNvZGVJbnRlcnByZXRlck91dHB1dFNjaGVtYSA9IHo5Lm9iamVjdCh7XG4gIG91dHB1dHM6IHo5LmFycmF5KFxuICAgIHo5LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgejkub2JqZWN0KHsgdHlwZTogejkubGl0ZXJhbChcImxvZ3NcIiksIGxvZ3M6IHo5LnN0cmluZygpIH0pLFxuICAgICAgejkub2JqZWN0KHsgdHlwZTogejkubGl0ZXJhbChcImltYWdlXCIpLCB1cmw6IHo5LnN0cmluZygpIH0pXG4gICAgXSlcbiAgKS5udWxsaXNoKClcbn0pO1xudmFyIGNvZGVJbnRlcnByZXRlckFyZ3NTY2hlbWEgPSB6OS5vYmplY3Qoe1xuICBjb250YWluZXI6IHo5LnVuaW9uKFtcbiAgICB6OS5zdHJpbmcoKSxcbiAgICB6OS5vYmplY3Qoe1xuICAgICAgZmlsZUlkczogejkuYXJyYXkoejkuc3RyaW5nKCkpLm9wdGlvbmFsKClcbiAgICB9KVxuICBdKS5vcHRpb25hbCgpXG59KTtcbnZhciBjb2RlSW50ZXJwcmV0ZXJUb29sRmFjdG9yeSA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSh7XG4gIGlkOiBcIm9wZW5haS5jb2RlX2ludGVycHJldGVyXCIsXG4gIG5hbWU6IFwiY29kZV9pbnRlcnByZXRlclwiLFxuICBpbnB1dFNjaGVtYTogY29kZUludGVycHJldGVySW5wdXRTY2hlbWEsXG4gIG91dHB1dFNjaGVtYTogY29kZUludGVycHJldGVyT3V0cHV0U2NoZW1hXG59KTtcbnZhciBjb2RlSW50ZXJwcmV0ZXIgPSAoYXJncyA9IHt9KSA9PiB7XG4gIHJldHVybiBjb2RlSW50ZXJwcmV0ZXJUb29sRmFjdG9yeShhcmdzKTtcbn07XG5cbi8vIHNyYy90b29sL2ZpbGUtc2VhcmNoLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgYXMgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hMiB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxMCB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBjb21wYXJpc29uRmlsdGVyU2NoZW1hID0gejEwLm9iamVjdCh7XG4gIGtleTogejEwLnN0cmluZygpLFxuICB0eXBlOiB6MTAuZW51bShbXCJlcVwiLCBcIm5lXCIsIFwiZ3RcIiwgXCJndGVcIiwgXCJsdFwiLCBcImx0ZVwiXSksXG4gIHZhbHVlOiB6MTAudW5pb24oW3oxMC5zdHJpbmcoKSwgejEwLm51bWJlcigpLCB6MTAuYm9vbGVhbigpXSlcbn0pO1xudmFyIGNvbXBvdW5kRmlsdGVyU2NoZW1hID0gejEwLm9iamVjdCh7XG4gIHR5cGU6IHoxMC5lbnVtKFtcImFuZFwiLCBcIm9yXCJdKSxcbiAgZmlsdGVyczogejEwLmFycmF5KFxuICAgIHoxMC51bmlvbihbY29tcGFyaXNvbkZpbHRlclNjaGVtYSwgejEwLmxhenkoKCkgPT4gY29tcG91bmRGaWx0ZXJTY2hlbWEpXSlcbiAgKVxufSk7XG52YXIgZmlsZVNlYXJjaEFyZ3NTY2hlbWEgPSB6MTAub2JqZWN0KHtcbiAgdmVjdG9yU3RvcmVJZHM6IHoxMC5hcnJheSh6MTAuc3RyaW5nKCkpLFxuICBtYXhOdW1SZXN1bHRzOiB6MTAubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgcmFua2luZzogejEwLm9iamVjdCh7XG4gICAgcmFua2VyOiB6MTAuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzY29yZVRocmVzaG9sZDogejEwLm51bWJlcigpLm9wdGlvbmFsKClcbiAgfSkub3B0aW9uYWwoKSxcbiAgZmlsdGVyczogejEwLnVuaW9uKFtjb21wYXJpc29uRmlsdGVyU2NoZW1hLCBjb21wb3VuZEZpbHRlclNjaGVtYV0pLm9wdGlvbmFsKClcbn0pO1xudmFyIGZpbGVTZWFyY2hPdXRwdXRTY2hlbWEgPSB6MTAub2JqZWN0KHtcbiAgcXVlcmllczogejEwLmFycmF5KHoxMC5zdHJpbmcoKSksXG4gIHJlc3VsdHM6IHoxMC5hcnJheShcbiAgICB6MTAub2JqZWN0KHtcbiAgICAgIGF0dHJpYnV0ZXM6IHoxMC5yZWNvcmQoejEwLnN0cmluZygpLCB6MTAudW5rbm93bigpKSxcbiAgICAgIGZpbGVJZDogejEwLnN0cmluZygpLFxuICAgICAgZmlsZW5hbWU6IHoxMC5zdHJpbmcoKSxcbiAgICAgIHNjb3JlOiB6MTAubnVtYmVyKCksXG4gICAgICB0ZXh0OiB6MTAuc3RyaW5nKClcbiAgICB9KVxuICApLm51bGxhYmxlKClcbn0pO1xudmFyIGZpbGVTZWFyY2ggPSBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEyKHtcbiAgaWQ6IFwib3BlbmFpLmZpbGVfc2VhcmNoXCIsXG4gIG5hbWU6IFwiZmlsZV9zZWFyY2hcIixcbiAgaW5wdXRTY2hlbWE6IHoxMC5vYmplY3Qoe30pLFxuICBvdXRwdXRTY2hlbWE6IGZpbGVTZWFyY2hPdXRwdXRTY2hlbWFcbn0pO1xuXG4vLyBzcmMvdG9vbC9pbWFnZS1nZW5lcmF0aW9uLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEgYXMgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hMyB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxMSB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBpbWFnZUdlbmVyYXRpb25BcmdzU2NoZW1hID0gejExLm9iamVjdCh7XG4gIGJhY2tncm91bmQ6IHoxMS5lbnVtKFtcImF1dG9cIiwgXCJvcGFxdWVcIiwgXCJ0cmFuc3BhcmVudFwiXSkub3B0aW9uYWwoKSxcbiAgaW5wdXRGaWRlbGl0eTogejExLmVudW0oW1wibG93XCIsIFwiaGlnaFwiXSkub3B0aW9uYWwoKSxcbiAgaW5wdXRJbWFnZU1hc2s6IHoxMS5vYmplY3Qoe1xuICAgIGZpbGVJZDogejExLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaW1hZ2VVcmw6IHoxMS5zdHJpbmcoKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKCksXG4gIG1vZGVsOiB6MTEuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbW9kZXJhdGlvbjogejExLmVudW0oW1wiYXV0b1wiXSkub3B0aW9uYWwoKSxcbiAgb3V0cHV0Q29tcHJlc3Npb246IHoxMS5udW1iZXIoKS5pbnQoKS5taW4oMCkubWF4KDEwMCkub3B0aW9uYWwoKSxcbiAgb3V0cHV0Rm9ybWF0OiB6MTEuZW51bShbXCJwbmdcIiwgXCJqcGVnXCIsIFwid2VicFwiXSkub3B0aW9uYWwoKSxcbiAgcXVhbGl0eTogejExLmVudW0oW1wiYXV0b1wiLCBcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gIHNpemU6IHoxMS5lbnVtKFtcIjEwMjR4MTAyNFwiLCBcIjEwMjR4MTUzNlwiLCBcIjE1MzZ4MTAyNFwiLCBcImF1dG9cIl0pLm9wdGlvbmFsKClcbn0pLnN0cmljdCgpO1xudmFyIGltYWdlR2VuZXJhdGlvbk91dHB1dFNjaGVtYSA9IHoxMS5vYmplY3Qoe1xuICByZXN1bHQ6IHoxMS5zdHJpbmcoKVxufSk7XG52YXIgaW1hZ2VHZW5lcmF0aW9uVG9vbEZhY3RvcnkgPSBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEzKHtcbiAgaWQ6IFwib3BlbmFpLmltYWdlX2dlbmVyYXRpb25cIixcbiAgbmFtZTogXCJpbWFnZV9nZW5lcmF0aW9uXCIsXG4gIGlucHV0U2NoZW1hOiB6MTEub2JqZWN0KHt9KSxcbiAgb3V0cHV0U2NoZW1hOiBpbWFnZUdlbmVyYXRpb25PdXRwdXRTY2hlbWFcbn0pO1xudmFyIGltYWdlR2VuZXJhdGlvbiA9IChhcmdzID0ge30pID0+IHtcbiAgcmV0dXJuIGltYWdlR2VuZXJhdGlvblRvb2xGYWN0b3J5KGFyZ3MpO1xufTtcblxuLy8gc3JjL3Rvb2wvbG9jYWwtc2hlbGwudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWE0IH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejEyIH0gZnJvbSBcInpvZC92NFwiO1xudmFyIGxvY2FsU2hlbGxJbnB1dFNjaGVtYSA9IHoxMi5vYmplY3Qoe1xuICBhY3Rpb246IHoxMi5vYmplY3Qoe1xuICAgIHR5cGU6IHoxMi5saXRlcmFsKFwiZXhlY1wiKSxcbiAgICBjb21tYW5kOiB6MTIuYXJyYXkoejEyLnN0cmluZygpKSxcbiAgICB0aW1lb3V0TXM6IHoxMi5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIHVzZXI6IHoxMi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHdvcmtpbmdEaXJlY3Rvcnk6IHoxMi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVudjogejEyLnJlY29yZCh6MTIuc3RyaW5nKCksIHoxMi5zdHJpbmcoKSkub3B0aW9uYWwoKVxuICB9KVxufSk7XG52YXIgbG9jYWxTaGVsbE91dHB1dFNjaGVtYSA9IHoxMi5vYmplY3Qoe1xuICBvdXRwdXQ6IHoxMi5zdHJpbmcoKVxufSk7XG52YXIgbG9jYWxTaGVsbCA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYTQoe1xuICBpZDogXCJvcGVuYWkubG9jYWxfc2hlbGxcIixcbiAgbmFtZTogXCJsb2NhbF9zaGVsbFwiLFxuICBpbnB1dFNjaGVtYTogbG9jYWxTaGVsbElucHV0U2NoZW1hLFxuICBvdXRwdXRTY2hlbWE6IGxvY2FsU2hlbGxPdXRwdXRTY2hlbWFcbn0pO1xuXG4vLyBzcmMvdG9vbC93ZWItc2VhcmNoLnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxMyB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciB3ZWJTZWFyY2hBcmdzU2NoZW1hID0gejEzLm9iamVjdCh7XG4gIGZpbHRlcnM6IHoxMy5vYmplY3Qoe1xuICAgIGFsbG93ZWREb21haW5zOiB6MTMuYXJyYXkoejEzLnN0cmluZygpKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKCksXG4gIHNlYXJjaENvbnRleHRTaXplOiB6MTMuZW51bShbXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdKS5vcHRpb25hbCgpLFxuICB1c2VyTG9jYXRpb246IHoxMy5vYmplY3Qoe1xuICAgIHR5cGU6IHoxMy5saXRlcmFsKFwiYXBwcm94aW1hdGVcIiksXG4gICAgY291bnRyeTogejEzLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY2l0eTogejEzLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVnaW9uOiB6MTMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB0aW1lem9uZTogejEzLnN0cmluZygpLm9wdGlvbmFsKClcbiAgfSkub3B0aW9uYWwoKVxufSk7XG52YXIgd2ViU2VhcmNoVG9vbEZhY3RvcnkgPSBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSh7XG4gIGlkOiBcIm9wZW5haS53ZWJfc2VhcmNoXCIsXG4gIG5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICBpbnB1dFNjaGVtYTogejEzLm9iamVjdCh7XG4gICAgYWN0aW9uOiB6MTMuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICB6MTMub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejEzLmxpdGVyYWwoXCJzZWFyY2hcIiksXG4gICAgICAgIHF1ZXJ5OiB6MTMuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICB9KSxcbiAgICAgIHoxMy5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTMubGl0ZXJhbChcIm9wZW5fcGFnZVwiKSxcbiAgICAgICAgdXJsOiB6MTMuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejEzLm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxMy5saXRlcmFsKFwiZmluZFwiKSxcbiAgICAgICAgdXJsOiB6MTMuc3RyaW5nKCksXG4gICAgICAgIHBhdHRlcm46IHoxMy5zdHJpbmcoKVxuICAgICAgfSlcbiAgICBdKS5udWxsaXNoKClcbiAgfSlcbn0pO1xudmFyIHdlYlNlYXJjaCA9IChhcmdzID0ge30pID0+IHtcbiAgcmV0dXJuIHdlYlNlYXJjaFRvb2xGYWN0b3J5KGFyZ3MpO1xufTtcblxuLy8gc3JjL3Rvb2wvd2ViLXNlYXJjaC1wcmV2aWV3LnRzXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTIgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTQgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgd2ViU2VhcmNoUHJldmlld0FyZ3NTY2hlbWEgPSB6MTQub2JqZWN0KHtcbiAgLyoqXG4gICAqIFNlYXJjaCBjb250ZXh0IHNpemUgdG8gdXNlIGZvciB0aGUgd2ViIHNlYXJjaC5cbiAgICogLSBoaWdoOiBNb3N0IGNvbXByZWhlbnNpdmUgY29udGV4dCwgaGlnaGVzdCBjb3N0LCBzbG93ZXIgcmVzcG9uc2VcbiAgICogLSBtZWRpdW06IEJhbGFuY2VkIGNvbnRleHQsIGNvc3QsIGFuZCBsYXRlbmN5IChkZWZhdWx0KVxuICAgKiAtIGxvdzogTGVhc3QgY29udGV4dCwgbG93ZXN0IGNvc3QsIGZhc3Rlc3QgcmVzcG9uc2VcbiAgICovXG4gIHNlYXJjaENvbnRleHRTaXplOiB6MTQuZW51bShbXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogVXNlciBsb2NhdGlvbiBpbmZvcm1hdGlvbiB0byBwcm92aWRlIGdlb2dyYXBoaWNhbGx5IHJlbGV2YW50IHNlYXJjaCByZXN1bHRzLlxuICAgKi9cbiAgdXNlckxvY2F0aW9uOiB6MTQub2JqZWN0KHtcbiAgICAvKipcbiAgICAgKiBUeXBlIG9mIGxvY2F0aW9uIChhbHdheXMgJ2FwcHJveGltYXRlJylcbiAgICAgKi9cbiAgICB0eXBlOiB6MTQubGl0ZXJhbChcImFwcHJveGltYXRlXCIpLFxuICAgIC8qKlxuICAgICAqIFR3by1sZXR0ZXIgSVNPIGNvdW50cnkgY29kZSAoZS5nLiwgJ1VTJywgJ0dCJylcbiAgICAgKi9cbiAgICBjb3VudHJ5OiB6MTQuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBDaXR5IG5hbWUgKGZyZWUgdGV4dCwgZS5nLiwgJ01pbm5lYXBvbGlzJylcbiAgICAgKi9cbiAgICBjaXR5OiB6MTQuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBSZWdpb24gbmFtZSAoZnJlZSB0ZXh0LCBlLmcuLCAnTWlubmVzb3RhJylcbiAgICAgKi9cbiAgICByZWdpb246IHoxNC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIElBTkEgdGltZXpvbmUgKGUuZy4sICdBbWVyaWNhL0NoaWNhZ28nKVxuICAgICAqL1xuICAgIHRpbWV6b25lOiB6MTQuc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciB3ZWJTZWFyY2hQcmV2aWV3ID0gY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnkyKHtcbiAgaWQ6IFwib3BlbmFpLndlYl9zZWFyY2hfcHJldmlld1wiLFxuICBuYW1lOiBcIndlYl9zZWFyY2hfcHJldmlld1wiLFxuICBpbnB1dFNjaGVtYTogejE0Lm9iamVjdCh7XG4gICAgYWN0aW9uOiB6MTQuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICB6MTQub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJzZWFyY2hcIiksXG4gICAgICAgIHF1ZXJ5OiB6MTQuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgICB9KSxcbiAgICAgIHoxNC5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTQubGl0ZXJhbChcIm9wZW5fcGFnZVwiKSxcbiAgICAgICAgdXJsOiB6MTQuc3RyaW5nKClcbiAgICAgIH0pLFxuICAgICAgejE0Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwiZmluZFwiKSxcbiAgICAgICAgdXJsOiB6MTQuc3RyaW5nKCksXG4gICAgICAgIHBhdHRlcm46IHoxNC5zdHJpbmcoKVxuICAgICAgfSlcbiAgICBdKS5udWxsaXNoKClcbiAgfSlcbn0pO1xuXG4vLyBzcmMvb3BlbmFpLXRvb2xzLnRzXG52YXIgb3BlbmFpVG9vbHMgPSB7XG4gIC8qKlxuICAgKiBUaGUgQ29kZSBJbnRlcnByZXRlciB0b29sIGFsbG93cyBtb2RlbHMgdG8gd3JpdGUgYW5kIHJ1biBQeXRob24gY29kZSBpbiBhXG4gICAqIHNhbmRib3hlZCBlbnZpcm9ubWVudCB0byBzb2x2ZSBjb21wbGV4IHByb2JsZW1zIGluIGRvbWFpbnMgbGlrZSBkYXRhIGFuYWx5c2lzLFxuICAgKiBjb2RpbmcsIGFuZCBtYXRoLlxuICAgKlxuICAgKiBAcGFyYW0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciB0byB1c2UgZm9yIHRoZSBjb2RlIGludGVycHJldGVyLlxuICAgKlxuICAgKiBNdXN0IGhhdmUgbmFtZSBgY29kZV9pbnRlcnByZXRlcmAuXG4gICAqL1xuICBjb2RlSW50ZXJwcmV0ZXIsXG4gIC8qKlxuICAgKiBGaWxlIHNlYXJjaCBpcyBhIHRvb2wgYXZhaWxhYmxlIGluIHRoZSBSZXNwb25zZXMgQVBJLiBJdCBlbmFibGVzIG1vZGVscyB0b1xuICAgKiByZXRyaWV2ZSBpbmZvcm1hdGlvbiBpbiBhIGtub3dsZWRnZSBiYXNlIG9mIHByZXZpb3VzbHkgdXBsb2FkZWQgZmlsZXMgdGhyb3VnaFxuICAgKiBzZW1hbnRpYyBhbmQga2V5d29yZCBzZWFyY2guXG4gICAqXG4gICAqIE11c3QgaGF2ZSBuYW1lIGBmaWxlX3NlYXJjaGAuXG4gICAqXG4gICAqIEBwYXJhbSB2ZWN0b3JTdG9yZUlkcyAtIFRoZSB2ZWN0b3Igc3RvcmUgSURzIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKiBAcGFyYW0gbWF4TnVtUmVzdWx0cyAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiAgICogQHBhcmFtIHJhbmtpbmcgLSBUaGUgcmFua2luZyBvcHRpb25zIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKiBAcGFyYW0gZmlsdGVycyAtIFRoZSBmaWx0ZXJzIHRvIHVzZSBmb3IgdGhlIGZpbGUgc2VhcmNoLlxuICAgKi9cbiAgZmlsZVNlYXJjaCxcbiAgLyoqXG4gICAqIFRoZSBpbWFnZSBnZW5lcmF0aW9uIHRvb2wgYWxsb3dzIHlvdSB0byBnZW5lcmF0ZSBpbWFnZXMgdXNpbmcgYSB0ZXh0IHByb21wdCxcbiAgICogYW5kIG9wdGlvbmFsbHkgaW1hZ2UgaW5wdXRzLiBJdCBsZXZlcmFnZXMgdGhlIEdQVCBJbWFnZSBtb2RlbCxcbiAgICogYW5kIGF1dG9tYXRpY2FsbHkgb3B0aW1pemVzIHRleHQgaW5wdXRzIGZvciBpbXByb3ZlZCBwZXJmb3JtYW5jZS5cbiAgICpcbiAgICogTXVzdCBoYXZlIG5hbWUgYGltYWdlX2dlbmVyYXRpb25gLlxuICAgKlxuICAgKiBAcGFyYW0gc2l6ZSAtIEltYWdlIGRpbWVuc2lvbnMgKGUuZy4sIDEwMjR4MTAyNCwgMTAyNHgxNTM2KVxuICAgKiBAcGFyYW0gcXVhbGl0eSAtIFJlbmRlcmluZyBxdWFsaXR5IChlLmcuIGxvdywgbWVkaXVtLCBoaWdoKVxuICAgKiBAcGFyYW0gZm9ybWF0IC0gRmlsZSBvdXRwdXQgZm9ybWF0XG4gICAqIEBwYXJhbSBjb21wcmVzc2lvbiAtIENvbXByZXNzaW9uIGxldmVsICgwLTEwMCUpIGZvciBKUEVHIGFuZCBXZWJQIGZvcm1hdHNcbiAgICogQHBhcmFtIGJhY2tncm91bmQgLSBUcmFuc3BhcmVudCBvciBvcGFxdWVcbiAgICovXG4gIGltYWdlR2VuZXJhdGlvbixcbiAgLyoqXG4gICAqIExvY2FsIHNoZWxsIGlzIGEgdG9vbCB0aGF0IGFsbG93cyBhZ2VudHMgdG8gcnVuIHNoZWxsIGNvbW1hbmRzIGxvY2FsbHlcbiAgICogb24gYSBtYWNoaW5lIHlvdSBvciB0aGUgdXNlciBwcm92aWRlcy5cbiAgICpcbiAgICogU3VwcG9ydGVkIG1vZGVsczogYGdwdC01LWNvZGV4YCBhbmQgYGNvZGV4LW1pbmktbGF0ZXN0YFxuICAgKlxuICAgKiBNdXN0IGhhdmUgbmFtZSBgbG9jYWxfc2hlbGxgLlxuICAgKi9cbiAgbG9jYWxTaGVsbCxcbiAgLyoqXG4gICAqIFdlYiBzZWFyY2ggYWxsb3dzIG1vZGVscyB0byBhY2Nlc3MgdXAtdG8tZGF0ZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBpbnRlcm5ldFxuICAgKiBhbmQgcHJvdmlkZSBhbnN3ZXJzIHdpdGggc291cmNlZCBjaXRhdGlvbnMuXG4gICAqXG4gICAqIE11c3QgaGF2ZSBuYW1lIGB3ZWJfc2VhcmNoX3ByZXZpZXdgLlxuICAgKlxuICAgKiBAcGFyYW0gc2VhcmNoQ29udGV4dFNpemUgLSBUaGUgc2VhcmNoIGNvbnRleHQgc2l6ZSB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKiBAcGFyYW0gdXNlckxvY2F0aW9uIC0gVGhlIHVzZXIgbG9jYXRpb24gdG8gdXNlIGZvciB0aGUgd2ViIHNlYXJjaC5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGB3ZWJTZWFyY2hgIGluc3RlYWQuXG4gICAqL1xuICB3ZWJTZWFyY2hQcmV2aWV3LFxuICAvKipcbiAgICogV2ViIHNlYXJjaCBhbGxvd3MgbW9kZWxzIHRvIGFjY2VzcyB1cC10by1kYXRlIGluZm9ybWF0aW9uIGZyb20gdGhlIGludGVybmV0XG4gICAqIGFuZCBwcm92aWRlIGFuc3dlcnMgd2l0aCBzb3VyY2VkIGNpdGF0aW9ucy5cbiAgICpcbiAgICogTXVzdCBoYXZlIG5hbWUgYHdlYl9zZWFyY2hgLlxuICAgKlxuICAgKiBAcGFyYW0gZmlsdGVycyAtIFRoZSBmaWx0ZXJzIHRvIHVzZSBmb3IgdGhlIHdlYiBzZWFyY2guXG4gICAqIEBwYXJhbSBzZWFyY2hDb250ZXh0U2l6ZSAtIFRoZSBzZWFyY2ggY29udGV4dCBzaXplIHRvIHVzZSBmb3IgdGhlIHdlYiBzZWFyY2guXG4gICAqIEBwYXJhbSB1c2VyTG9jYXRpb24gLSBUaGUgdXNlciBsb2NhdGlvbiB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKi9cbiAgd2ViU2VhcmNoXG59O1xuXG4vLyBzcmMvcmVzcG9uc2VzL29wZW5haS1yZXNwb25zZXMtbGFuZ3VhZ2UtbW9kZWwudHNcbmltcG9ydCB7XG4gIEFQSUNhbGxFcnJvclxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnM1LFxuICBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcjMsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjUsXG4gIGdlbmVyYXRlSWQgYXMgZ2VuZXJhdGVJZDIsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zNSxcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpNVxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTYgfSBmcm9tIFwiem9kL3Y0XCI7XG5cbi8vIHNyYy9yZXNwb25zZXMvY29udmVydC10by1vcGVuYWktcmVzcG9uc2VzLWlucHV0LnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjRcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmltcG9ydCB7IGNvbnZlcnRUb0Jhc2U2NCBhcyBjb252ZXJ0VG9CYXNlNjQyLCBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczQgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTUgfSBmcm9tIFwiem9kL3Y0XCI7XG5mdW5jdGlvbiBpc0ZpbGVJZChkYXRhLCBwcmVmaXhlcykge1xuICBpZiAoIXByZWZpeGVzKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBwcmVmaXhlcy5zb21lKChwcmVmaXgpID0+IGRhdGEuc3RhcnRzV2l0aChwcmVmaXgpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSVJlc3BvbnNlc0lucHV0KHtcbiAgcHJvbXB0LFxuICBzeXN0ZW1NZXNzYWdlTW9kZSxcbiAgZmlsZUlkUHJlZml4ZXMsXG4gIHN0b3JlLFxuICBoYXNMb2NhbFNoZWxsVG9vbCA9IGZhbHNlXG59KSB7XG4gIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pO1xuICBjb25zdCBpbnB1dCA9IFtdO1xuICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICBmb3IgKGNvbnN0IHsgcm9sZSwgY29udGVudCB9IG9mIHByb21wdCkge1xuICAgIHN3aXRjaCAocm9sZSkge1xuICAgICAgY2FzZSBcInN5c3RlbVwiOiB7XG4gICAgICAgIHN3aXRjaCAoc3lzdGVtTWVzc2FnZU1vZGUpIHtcbiAgICAgICAgICBjYXNlIFwic3lzdGVtXCI6IHtcbiAgICAgICAgICAgIGlucHV0LnB1c2goeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50IH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJkZXZlbG9wZXJcIjoge1xuICAgICAgICAgICAgaW5wdXQucHVzaCh7IHJvbGU6IFwiZGV2ZWxvcGVyXCIsIGNvbnRlbnQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcInJlbW92ZVwiOiB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcInN5c3RlbSBtZXNzYWdlcyBhcmUgcmVtb3ZlZCBmb3IgdGhpcyBtb2RlbFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gc3lzdGVtTWVzc2FnZU1vZGU7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBVbnN1cHBvcnRlZCBzeXN0ZW0gbWVzc2FnZSBtb2RlOiAke19leGhhdXN0aXZlQ2hlY2t9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwidXNlclwiOiB7XG4gICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQubWFwKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hMiwgX2IyLCBfYzI7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJpbnB1dF90ZXh0XCIsIHRleHQ6IHBhcnQudGV4dCB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhc2UgXCJmaWxlXCI6IHtcbiAgICAgICAgICAgICAgICBpZiAocGFydC5tZWRpYVR5cGUuc3RhcnRzV2l0aChcImltYWdlL1wiKSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUeXBlID0gcGFydC5tZWRpYVR5cGUgPT09IFwiaW1hZ2UvKlwiID8gXCJpbWFnZS9qcGVnXCIgOiBwYXJ0Lm1lZGlhVHlwZTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5wdXRfaW1hZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFydC5kYXRhIGluc3RhbmNlb2YgVVJMID8geyBpbWFnZV91cmw6IHBhcnQuZGF0YS50b1N0cmluZygpIH0gOiB0eXBlb2YgcGFydC5kYXRhID09PSBcInN0cmluZ1wiICYmIGlzRmlsZUlkKHBhcnQuZGF0YSwgZmlsZUlkUHJlZml4ZXMpID8geyBmaWxlX2lkOiBwYXJ0LmRhdGEgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGBkYXRhOiR7bWVkaWFUeXBlfTtiYXNlNjQsJHtjb252ZXJ0VG9CYXNlNjQyKHBhcnQuZGF0YSl9YFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IChfYjIgPSAoX2EyID0gcGFydC5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYTIub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2IyLmltYWdlRGV0YWlsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydC5tZWRpYVR5cGUgPT09IFwiYXBwbGljYXRpb24vcGRmXCIpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmRhdGEgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImlucHV0X2ZpbGVcIixcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlX3VybDogcGFydC5kYXRhLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5wdXRfZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICAuLi50eXBlb2YgcGFydC5kYXRhID09PSBcInN0cmluZ1wiICYmIGlzRmlsZUlkKHBhcnQuZGF0YSwgZmlsZUlkUHJlZml4ZXMpID8geyBmaWxlX2lkOiBwYXJ0LmRhdGEgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogKF9jMiA9IHBhcnQuZmlsZW5hbWUpICE9IG51bGwgPyBfYzIgOiBgcGFydC0ke2luZGV4fS5wZGZgLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVfZGF0YTogYGRhdGE6YXBwbGljYXRpb24vcGRmO2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NDIocGFydC5kYXRhKX1gXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjQoe1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBgZmlsZSBwYXJ0IG1lZGlhIHR5cGUgJHtwYXJ0Lm1lZGlhVHlwZX1gXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwiYXNzaXN0YW50XCI6IHtcbiAgICAgICAgY29uc3QgcmVhc29uaW5nTWVzc2FnZXMgPSB7fTtcbiAgICAgICAgY29uc3QgdG9vbENhbGxQYXJ0cyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgY29udGVudCkge1xuICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICAgICAgY29udGVudDogW3sgdHlwZTogXCJvdXRwdXRfdGV4dFwiLCB0ZXh0OiBwYXJ0LnRleHQgfV0sXG4gICAgICAgICAgICAgICAgaWQ6IChfYyA9IChfYiA9IChfYSA9IHBhcnQucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2Eub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaXRlbUlkKSAhPSBudWxsID8gX2MgOiB2b2lkIDBcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInRvb2wtY2FsbFwiOiB7XG4gICAgICAgICAgICAgIHRvb2xDYWxsUGFydHNbcGFydC50b29sQ2FsbElkXSA9IHBhcnQ7XG4gICAgICAgICAgICAgIGlmIChwYXJ0LnByb3ZpZGVyRXhlY3V0ZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaGFzTG9jYWxTaGVsbFRvb2wgJiYgcGFydC50b29sTmFtZSA9PT0gXCJsb2NhbF9zaGVsbFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkSW5wdXQgPSBsb2NhbFNoZWxsSW5wdXRTY2hlbWEucGFyc2UocGFydC5pbnB1dCk7XG4gICAgICAgICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcImxvY2FsX3NoZWxsX2NhbGxcIixcbiAgICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgIGlkOiAoX2YgPSAoX2UgPSAoX2QgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLm9wZW5haSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLml0ZW1JZCkgIT0gbnVsbCA/IF9mIDogdm9pZCAwLFxuICAgICAgICAgICAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZXhlY1wiLFxuICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBwYXJzZWRJbnB1dC5hY3Rpb24uY29tbWFuZCxcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dF9tczogcGFyc2VkSW5wdXQuYWN0aW9uLnRpbWVvdXRNcyxcbiAgICAgICAgICAgICAgICAgICAgdXNlcjogcGFyc2VkSW5wdXQuYWN0aW9uLnVzZXIsXG4gICAgICAgICAgICAgICAgICAgIHdvcmtpbmdfZGlyZWN0b3J5OiBwYXJzZWRJbnB1dC5hY3Rpb24ud29ya2luZ0RpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgZW52OiBwYXJzZWRJbnB1dC5hY3Rpb24uZW52XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvbl9jYWxsXCIsXG4gICAgICAgICAgICAgICAgY2FsbF9pZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHBhcnQudG9vbE5hbWUsXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiBKU09OLnN0cmluZ2lmeShwYXJ0LmlucHV0KSxcbiAgICAgICAgICAgICAgICBpZDogKF9pID0gKF9oID0gKF9nID0gcGFydC5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfZy5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfaC5pdGVtSWQpICE9IG51bGwgPyBfaSA6IHZvaWQgMFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhc3Npc3RhbnQgdG9vbCByZXN1bHQgcGFydHMgYXJlIGZyb20gcHJvdmlkZXItZXhlY3V0ZWQgdG9vbHM6XG4gICAgICAgICAgICBjYXNlIFwidG9vbC1yZXN1bHRcIjoge1xuICAgICAgICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5wdXNoKHsgdHlwZTogXCJpdGVtX3JlZmVyZW5jZVwiLCBpZDogcGFydC50b29sQ2FsbElkIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYFJlc3VsdHMgZm9yIE9wZW5BSSB0b29sICR7cGFydC50b29sTmFtZX0gYXJlIG5vdCBzZW50IHRvIHRoZSBBUEkgd2hlbiBzdG9yZSBpcyBmYWxzZWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJyZWFzb25pbmdcIjoge1xuICAgICAgICAgICAgICBjb25zdCBwcm92aWRlck9wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczQoe1xuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBcIm9wZW5haVwiLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyT3B0aW9uczogcGFydC5wcm92aWRlck9wdGlvbnMsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiBvcGVuYWlSZXNwb25zZXNSZWFzb25pbmdQcm92aWRlck9wdGlvbnNTY2hlbWFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGNvbnN0IHJlYXNvbmluZ0lkID0gcHJvdmlkZXJPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBwcm92aWRlck9wdGlvbnMuaXRlbUlkO1xuICAgICAgICAgICAgICBpZiAocmVhc29uaW5nSWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlYXNvbmluZ01lc3NhZ2UgPSByZWFzb25pbmdNZXNzYWdlc1tyZWFzb25pbmdJZF07XG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICBpZiAocmVhc29uaW5nTWVzc2FnZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnB1c2goeyB0eXBlOiBcIml0ZW1fcmVmZXJlbmNlXCIsIGlkOiByZWFzb25pbmdJZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nTWVzc2FnZXNbcmVhc29uaW5nSWRdID0ge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgaWQ6IHJlYXNvbmluZ0lkLFxuICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlQYXJ0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgaWYgKHBhcnQudGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnlQYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN1bW1hcnlfdGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHBhcnQudGV4dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVhc29uaW5nTWVzc2FnZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgQ2Fubm90IGFwcGVuZCBlbXB0eSByZWFzb25pbmcgcGFydCB0byBleGlzdGluZyByZWFzb25pbmcgc2VxdWVuY2UuIFNraXBwaW5nIHJlYXNvbmluZyBwYXJ0OiAke0pTT04uc3RyaW5naWZ5KHBhcnQpfS5gXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbmluZ01lc3NhZ2UgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICByZWFzb25pbmdNZXNzYWdlc1tyZWFzb25pbmdJZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogcmVhc29uaW5nSWQsXG4gICAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkX2NvbnRlbnQ6IHByb3ZpZGVyT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogcHJvdmlkZXJPcHRpb25zLnJlYXNvbmluZ0VuY3J5cHRlZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogc3VtbWFyeVBhcnRzXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlucHV0LnB1c2gocmVhc29uaW5nTWVzc2FnZXNbcmVhc29uaW5nSWRdKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ01lc3NhZ2Uuc3VtbWFyeS5wdXNoKC4uLnN1bW1hcnlQYXJ0cyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYE5vbi1PcGVuQUkgcmVhc29uaW5nIHBhcnRzIGFyZSBub3Qgc3VwcG9ydGVkLiBTa2lwcGluZyByZWFzb25pbmcgcGFydDogJHtKU09OLnN0cmluZ2lmeShwYXJ0KX0uYFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ0b29sXCI6IHtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICBjb25zdCBvdXRwdXQgPSBwYXJ0Lm91dHB1dDtcbiAgICAgICAgICBpZiAoaGFzTG9jYWxTaGVsbFRvb2wgJiYgcGFydC50b29sTmFtZSA9PT0gXCJsb2NhbF9zaGVsbFwiICYmIG91dHB1dC50eXBlID09PSBcImpzb25cIikge1xuICAgICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwibG9jYWxfc2hlbGxfY2FsbF9vdXRwdXRcIixcbiAgICAgICAgICAgICAgY2FsbF9pZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICBvdXRwdXQ6IGxvY2FsU2hlbGxPdXRwdXRTY2hlbWEucGFyc2Uob3V0cHV0LnZhbHVlKS5vdXRwdXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBjb250ZW50VmFsdWU7XG4gICAgICAgICAgc3dpdGNoIChvdXRwdXQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci10ZXh0XCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IG91dHB1dC52YWx1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY29udGVudFwiOlxuICAgICAgICAgICAgY2FzZSBcImpzb25cIjpcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvci1qc29uXCI6XG4gICAgICAgICAgICAgIGNvbnRlbnRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KG91dHB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbnB1dC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25fY2FsbF9vdXRwdXRcIixcbiAgICAgICAgICAgIGNhbGxfaWQ6IHBhcnQudG9vbENhbGxJZCxcbiAgICAgICAgICAgIG91dHB1dDogY29udGVudFZhbHVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSByb2xlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHJvbGU6ICR7X2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgaW5wdXQsIHdhcm5pbmdzIH07XG59XG52YXIgb3BlbmFpUmVzcG9uc2VzUmVhc29uaW5nUHJvdmlkZXJPcHRpb25zU2NoZW1hID0gejE1Lm9iamVjdCh7XG4gIGl0ZW1JZDogejE1LnN0cmluZygpLm51bGxpc2goKSxcbiAgcmVhc29uaW5nRW5jcnlwdGVkQ29udGVudDogejE1LnN0cmluZygpLm51bGxpc2goKVxufSk7XG5cbi8vIHNyYy9yZXNwb25zZXMvbWFwLW9wZW5haS1yZXNwb25zZXMtZmluaXNoLXJlYXNvbi50c1xuZnVuY3Rpb24gbWFwT3BlbkFJUmVzcG9uc2VGaW5pc2hSZWFzb24oe1xuICBmaW5pc2hSZWFzb24sXG4gIGhhc0Z1bmN0aW9uQ2FsbFxufSkge1xuICBzd2l0Y2ggKGZpbmlzaFJlYXNvbikge1xuICAgIGNhc2Ugdm9pZCAwOlxuICAgIGNhc2UgbnVsbDpcbiAgICAgIHJldHVybiBoYXNGdW5jdGlvbkNhbGwgPyBcInRvb2wtY2FsbHNcIiA6IFwic3RvcFwiO1xuICAgIGNhc2UgXCJtYXhfb3V0cHV0X3Rva2Vuc1wiOlxuICAgICAgcmV0dXJuIFwibGVuZ3RoXCI7XG4gICAgY2FzZSBcImNvbnRlbnRfZmlsdGVyXCI6XG4gICAgICByZXR1cm4gXCJjb250ZW50LWZpbHRlclwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gaGFzRnVuY3Rpb25DYWxsID8gXCJ0b29sLWNhbGxzXCIgOiBcInVua25vd25cIjtcbiAgfVxufVxuXG4vLyBzcmMvcmVzcG9uc2VzL29wZW5haS1yZXNwb25zZXMtcHJlcGFyZS10b29scy50c1xuaW1wb3J0IHtcbiAgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3IgYXMgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3I1XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5mdW5jdGlvbiBwcmVwYXJlUmVzcG9uc2VzVG9vbHMoe1xuICB0b29scyxcbiAgdG9vbENob2ljZSxcbiAgc3RyaWN0SnNvblNjaGVtYVxufSkge1xuICB0b29scyA9ICh0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMubGVuZ3RoKSA/IHRvb2xzIDogdm9pZCAwO1xuICBjb25zdCB0b29sV2FybmluZ3MgPSBbXTtcbiAgaWYgKHRvb2xzID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogdm9pZCAwLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncyB9O1xuICB9XG4gIGNvbnN0IG9wZW5haVRvb2xzMiA9IFtdO1xuICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMpIHtcbiAgICBzd2l0Y2ggKHRvb2wudHlwZSkge1xuICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHBhcmFtZXRlcnM6IHRvb2wuaW5wdXRTY2hlbWEsXG4gICAgICAgICAgc3RyaWN0OiBzdHJpY3RKc29uU2NoZW1hXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJwcm92aWRlci1kZWZpbmVkXCI6IHtcbiAgICAgICAgc3dpdGNoICh0b29sLmlkKSB7XG4gICAgICAgICAgY2FzZSBcIm9wZW5haS5maWxlX3NlYXJjaFwiOiB7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gZmlsZVNlYXJjaEFyZ3NTY2hlbWEucGFyc2UodG9vbC5hcmdzKTtcbiAgICAgICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJmaWxlX3NlYXJjaFwiLFxuICAgICAgICAgICAgICB2ZWN0b3Jfc3RvcmVfaWRzOiBhcmdzLnZlY3RvclN0b3JlSWRzLFxuICAgICAgICAgICAgICBtYXhfbnVtX3Jlc3VsdHM6IGFyZ3MubWF4TnVtUmVzdWx0cyxcbiAgICAgICAgICAgICAgcmFua2luZ19vcHRpb25zOiBhcmdzLnJhbmtpbmcgPyB7XG4gICAgICAgICAgICAgICAgcmFua2VyOiBhcmdzLnJhbmtpbmcucmFua2VyLFxuICAgICAgICAgICAgICAgIHNjb3JlX3RocmVzaG9sZDogYXJncy5yYW5raW5nLnNjb3JlVGhyZXNob2xkXG4gICAgICAgICAgICAgIH0gOiB2b2lkIDAsXG4gICAgICAgICAgICAgIGZpbHRlcnM6IGFyZ3MuZmlsdGVyc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcIm9wZW5haS5sb2NhbF9zaGVsbFwiOiB7XG4gICAgICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwibG9jYWxfc2hlbGxcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcIm9wZW5haS53ZWJfc2VhcmNoX3ByZXZpZXdcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IHdlYlNlYXJjaFByZXZpZXdBcmdzU2NoZW1hLnBhcnNlKHRvb2wuYXJncyk7XG4gICAgICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwid2ViX3NlYXJjaF9wcmV2aWV3XCIsXG4gICAgICAgICAgICAgIHNlYXJjaF9jb250ZXh0X3NpemU6IGFyZ3Muc2VhcmNoQ29udGV4dFNpemUsXG4gICAgICAgICAgICAgIHVzZXJfbG9jYXRpb246IGFyZ3MudXNlckxvY2F0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwib3BlbmFpLndlYl9zZWFyY2hcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IHdlYlNlYXJjaEFyZ3NTY2hlbWEucGFyc2UodG9vbC5hcmdzKTtcbiAgICAgICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICAgIGZpbHRlcnM6IGFyZ3MuZmlsdGVycyAhPSBudWxsID8geyBhbGxvd2VkX2RvbWFpbnM6IGFyZ3MuZmlsdGVycy5hbGxvd2VkRG9tYWlucyB9IDogdm9pZCAwLFxuICAgICAgICAgICAgICBzZWFyY2hfY29udGV4dF9zaXplOiBhcmdzLnNlYXJjaENvbnRleHRTaXplLFxuICAgICAgICAgICAgICB1c2VyX2xvY2F0aW9uOiBhcmdzLnVzZXJMb2NhdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcIm9wZW5haS5jb2RlX2ludGVycHJldGVyXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBjb2RlSW50ZXJwcmV0ZXJBcmdzU2NoZW1hLnBhcnNlKHRvb2wuYXJncyk7XG4gICAgICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiY29kZV9pbnRlcnByZXRlclwiLFxuICAgICAgICAgICAgICBjb250YWluZXI6IGFyZ3MuY29udGFpbmVyID09IG51bGwgPyB7IHR5cGU6IFwiYXV0b1wiLCBmaWxlX2lkczogdm9pZCAwIH0gOiB0eXBlb2YgYXJncy5jb250YWluZXIgPT09IFwic3RyaW5nXCIgPyBhcmdzLmNvbnRhaW5lciA6IHsgdHlwZTogXCJhdXRvXCIsIGZpbGVfaWRzOiBhcmdzLmNvbnRhaW5lci5maWxlSWRzIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkuaW1hZ2VfZ2VuZXJhdGlvblwiOiB7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gaW1hZ2VHZW5lcmF0aW9uQXJnc1NjaGVtYS5wYXJzZSh0b29sLmFyZ3MpO1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX2dlbmVyYXRpb25cIixcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogYXJncy5iYWNrZ3JvdW5kLFxuICAgICAgICAgICAgICBpbnB1dF9maWRlbGl0eTogYXJncy5pbnB1dEZpZGVsaXR5LFxuICAgICAgICAgICAgICBpbnB1dF9pbWFnZV9tYXNrOiBhcmdzLmlucHV0SW1hZ2VNYXNrID8ge1xuICAgICAgICAgICAgICAgIGZpbGVfaWQ6IGFyZ3MuaW5wdXRJbWFnZU1hc2suZmlsZUlkLFxuICAgICAgICAgICAgICAgIGltYWdlX3VybDogYXJncy5pbnB1dEltYWdlTWFzay5pbWFnZVVybFxuICAgICAgICAgICAgICB9IDogdm9pZCAwLFxuICAgICAgICAgICAgICBtb2RlbDogYXJncy5tb2RlbCxcbiAgICAgICAgICAgICAgc2l6ZTogYXJncy5zaXplLFxuICAgICAgICAgICAgICBxdWFsaXR5OiBhcmdzLnF1YWxpdHksXG4gICAgICAgICAgICAgIG1vZGVyYXRpb246IGFyZ3MubW9kZXJhdGlvbixcbiAgICAgICAgICAgICAgb3V0cHV0X2Zvcm1hdDogYXJncy5vdXRwdXRGb3JtYXQsXG4gICAgICAgICAgICAgIG91dHB1dF9jb21wcmVzc2lvbjogYXJncy5vdXRwdXRDb21wcmVzc2lvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0b29sV2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtdG9vbFwiLCB0b29sIH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKHRvb2xDaG9pY2UgPT0gbnVsbCkge1xuICAgIHJldHVybiB7IHRvb2xzOiBvcGVuYWlUb29sczIsIHRvb2xDaG9pY2U6IHZvaWQgMCwgdG9vbFdhcm5pbmdzIH07XG4gIH1cbiAgY29uc3QgdHlwZSA9IHRvb2xDaG9pY2UudHlwZTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcImF1dG9cIjpcbiAgICBjYXNlIFwibm9uZVwiOlxuICAgIGNhc2UgXCJyZXF1aXJlZFwiOlxuICAgICAgcmV0dXJuIHsgdG9vbHM6IG9wZW5haVRvb2xzMiwgdG9vbENob2ljZTogdHlwZSwgdG9vbFdhcm5pbmdzIH07XG4gICAgY2FzZSBcInRvb2xcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICAgIHRvb2xDaG9pY2U6IHRvb2xDaG9pY2UudG9vbE5hbWUgPT09IFwiY29kZV9pbnRlcnByZXRlclwiIHx8IHRvb2xDaG9pY2UudG9vbE5hbWUgPT09IFwiZmlsZV9zZWFyY2hcIiB8fCB0b29sQ2hvaWNlLnRvb2xOYW1lID09PSBcImltYWdlX2dlbmVyYXRpb25cIiB8fCB0b29sQ2hvaWNlLnRvb2xOYW1lID09PSBcIndlYl9zZWFyY2hfcHJldmlld1wiIHx8IHRvb2xDaG9pY2UudG9vbE5hbWUgPT09IFwid2ViX3NlYXJjaFwiID8geyB0eXBlOiB0b29sQ2hvaWNlLnRvb2xOYW1lIH0gOiB7IHR5cGU6IFwiZnVuY3Rpb25cIiwgbmFtZTogdG9vbENob2ljZS50b29sTmFtZSB9LFxuICAgICAgICB0b29sV2FybmluZ3NcbiAgICAgIH07XG4gICAgZGVmYXVsdDoge1xuICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHR5cGU7XG4gICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRGdW5jdGlvbmFsaXR5RXJyb3I1KHtcbiAgICAgICAgZnVuY3Rpb25hbGl0eTogYHRvb2wgY2hvaWNlIHR5cGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL3Jlc3BvbnNlcy9vcGVuYWktcmVzcG9uc2VzLWxhbmd1YWdlLW1vZGVsLnRzXG52YXIgd2ViU2VhcmNoQ2FsbEl0ZW0gPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJ3ZWJfc2VhcmNoX2NhbGxcIiksXG4gIGlkOiB6MTYuc3RyaW5nKCksXG4gIHN0YXR1czogejE2LnN0cmluZygpLFxuICBhY3Rpb246IHoxNi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwic2VhcmNoXCIpLFxuICAgICAgcXVlcnk6IHoxNi5zdHJpbmcoKS5udWxsaXNoKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwib3Blbl9wYWdlXCIpLFxuICAgICAgdXJsOiB6MTYuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiZmluZFwiKSxcbiAgICAgIHVybDogejE2LnN0cmluZygpLFxuICAgICAgcGF0dGVybjogejE2LnN0cmluZygpXG4gICAgfSlcbiAgXSkubnVsbGlzaCgpXG59KTtcbnZhciBmaWxlU2VhcmNoQ2FsbEl0ZW0gPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJmaWxlX3NlYXJjaF9jYWxsXCIpLFxuICBpZDogejE2LnN0cmluZygpLFxuICBxdWVyaWVzOiB6MTYuYXJyYXkoejE2LnN0cmluZygpKSxcbiAgcmVzdWx0czogejE2LmFycmF5KFxuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgYXR0cmlidXRlczogejE2LnJlY29yZCh6MTYuc3RyaW5nKCksIHoxNi51bmtub3duKCkpLFxuICAgICAgZmlsZV9pZDogejE2LnN0cmluZygpLFxuICAgICAgZmlsZW5hbWU6IHoxNi5zdHJpbmcoKSxcbiAgICAgIHNjb3JlOiB6MTYubnVtYmVyKCksXG4gICAgICB0ZXh0OiB6MTYuc3RyaW5nKClcbiAgICB9KVxuICApLm51bGxpc2goKVxufSk7XG52YXIgY29kZUludGVycHJldGVyQ2FsbEl0ZW0gPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIiksXG4gIGlkOiB6MTYuc3RyaW5nKCksXG4gIGNvZGU6IHoxNi5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBjb250YWluZXJfaWQ6IHoxNi5zdHJpbmcoKSxcbiAgb3V0cHV0czogejE2LmFycmF5KFxuICAgIHoxNi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgIHoxNi5vYmplY3QoeyB0eXBlOiB6MTYubGl0ZXJhbChcImxvZ3NcIiksIGxvZ3M6IHoxNi5zdHJpbmcoKSB9KSxcbiAgICAgIHoxNi5vYmplY3QoeyB0eXBlOiB6MTYubGl0ZXJhbChcImltYWdlXCIpLCB1cmw6IHoxNi5zdHJpbmcoKSB9KVxuICAgIF0pXG4gICkubnVsbGFibGUoKVxufSk7XG52YXIgbG9jYWxTaGVsbENhbGxJdGVtID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwibG9jYWxfc2hlbGxfY2FsbFwiKSxcbiAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgY2FsbF9pZDogejE2LnN0cmluZygpLFxuICBhY3Rpb246IHoxNi5vYmplY3Qoe1xuICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiZXhlY1wiKSxcbiAgICBjb21tYW5kOiB6MTYuYXJyYXkoejE2LnN0cmluZygpKSxcbiAgICB0aW1lb3V0X21zOiB6MTYubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICB1c2VyOiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB3b3JraW5nX2RpcmVjdG9yeTogejE2LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZW52OiB6MTYucmVjb3JkKHoxNi5zdHJpbmcoKSwgejE2LnN0cmluZygpKS5vcHRpb25hbCgpXG4gIH0pXG59KTtcbnZhciBpbWFnZUdlbmVyYXRpb25DYWxsSXRlbSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcImltYWdlX2dlbmVyYXRpb25fY2FsbFwiKSxcbiAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgcmVzdWx0OiB6MTYuc3RyaW5nKClcbn0pO1xudmFyIFRPUF9MT0dQUk9CU19NQVggPSAyMDtcbnZhciBMT0dQUk9CU19TQ0hFTUEgPSB6MTYuYXJyYXkoXG4gIHoxNi5vYmplY3Qoe1xuICAgIHRva2VuOiB6MTYuc3RyaW5nKCksXG4gICAgbG9ncHJvYjogejE2Lm51bWJlcigpLFxuICAgIHRvcF9sb2dwcm9iczogejE2LmFycmF5KFxuICAgICAgejE2Lm9iamVjdCh7XG4gICAgICAgIHRva2VuOiB6MTYuc3RyaW5nKCksXG4gICAgICAgIGxvZ3Byb2I6IHoxNi5udW1iZXIoKVxuICAgICAgfSlcbiAgICApXG4gIH0pXG4pO1xudmFyIE9wZW5BSVJlc3BvbnNlc0xhbmd1YWdlTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMuc3BlY2lmaWNhdGlvblZlcnNpb24gPSBcInYyXCI7XG4gICAgdGhpcy5zdXBwb3J0ZWRVcmxzID0ge1xuICAgICAgXCJpbWFnZS8qXCI6IFsvXmh0dHBzPzpcXC9cXC8uKiQvXSxcbiAgICAgIFwiYXBwbGljYXRpb24vcGRmXCI6IFsvXmh0dHBzPzpcXC9cXC8uKiQvXVxuICAgIH07XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGdldEFyZ3Moe1xuICAgIG1heE91dHB1dFRva2VucyxcbiAgICB0ZW1wZXJhdHVyZSxcbiAgICBzdG9wU2VxdWVuY2VzLFxuICAgIHRvcFAsXG4gICAgdG9wSyxcbiAgICBwcmVzZW5jZVBlbmFsdHksXG4gICAgZnJlcXVlbmN5UGVuYWx0eSxcbiAgICBzZWVkLFxuICAgIHByb21wdCxcbiAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgdG9vbHMsXG4gICAgdG9vbENob2ljZSxcbiAgICByZXNwb25zZUZvcm1hdFxuICB9KSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgY29uc3QgbW9kZWxDb25maWcgPSBnZXRSZXNwb25zZXNNb2RlbENvbmZpZyh0aGlzLm1vZGVsSWQpO1xuICAgIGlmICh0b3BLICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJ0b3BLXCIgfSk7XG4gICAgfVxuICAgIGlmIChzZWVkICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJzZWVkXCIgfSk7XG4gICAgfVxuICAgIGlmIChwcmVzZW5jZVBlbmFsdHkgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInByZXNlbmNlUGVuYWx0eVwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZyZXF1ZW5jeVBlbmFsdHkgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcImZyZXF1ZW5jeVBlbmFsdHlcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzdG9wU2VxdWVuY2VzICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJzdG9wU2VxdWVuY2VzXCIgfSk7XG4gICAgfVxuICAgIGNvbnN0IG9wZW5haU9wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczUoe1xuICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IG9wZW5haVJlc3BvbnNlc1Byb3ZpZGVyT3B0aW9uc1NjaGVtYVxuICAgIH0pO1xuICAgIGNvbnN0IHsgaW5wdXQsIHdhcm5pbmdzOiBpbnB1dFdhcm5pbmdzIH0gPSBhd2FpdCBjb252ZXJ0VG9PcGVuQUlSZXNwb25zZXNJbnB1dCh7XG4gICAgICBwcm9tcHQsXG4gICAgICBzeXN0ZW1NZXNzYWdlTW9kZTogbW9kZWxDb25maWcuc3lzdGVtTWVzc2FnZU1vZGUsXG4gICAgICBmaWxlSWRQcmVmaXhlczogdGhpcy5jb25maWcuZmlsZUlkUHJlZml4ZXMsXG4gICAgICBzdG9yZTogKF9hID0gb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zdG9yZSkgIT0gbnVsbCA/IF9hIDogdHJ1ZSxcbiAgICAgIGhhc0xvY2FsU2hlbGxUb29sOiBoYXNPcGVuQUlUb29sKFwib3BlbmFpLmxvY2FsX3NoZWxsXCIpXG4gICAgfSk7XG4gICAgd2FybmluZ3MucHVzaCguLi5pbnB1dFdhcm5pbmdzKTtcbiAgICBjb25zdCBzdHJpY3RKc29uU2NoZW1hID0gKF9iID0gb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zdHJpY3RKc29uU2NoZW1hKSAhPSBudWxsID8gX2IgOiBmYWxzZTtcbiAgICBsZXQgaW5jbHVkZSA9IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuaW5jbHVkZTtcbiAgICBmdW5jdGlvbiBhZGRJbmNsdWRlKGtleSkge1xuICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgIT0gbnVsbCA/IFsuLi5pbmNsdWRlLCBrZXldIDogW2tleV07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGhhc09wZW5BSVRvb2woaWQpIHtcbiAgICAgIHJldHVybiAodG9vbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xzLmZpbmQoXG4gICAgICAgICh0b29sKSA9PiB0b29sLnR5cGUgPT09IFwicHJvdmlkZXItZGVmaW5lZFwiICYmIHRvb2wuaWQgPT09IGlkXG4gICAgICApKSAhPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0b3BMb2dwcm9icyA9IHR5cGVvZiAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5sb2dwcm9icykgPT09IFwibnVtYmVyXCIgPyBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzIDogKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMpID09PSB0cnVlID8gVE9QX0xPR1BST0JTX01BWCA6IHZvaWQgMDtcbiAgICBpZiAodG9wTG9ncHJvYnMpIHtcbiAgICAgIGFkZEluY2x1ZGUoXCJtZXNzYWdlLm91dHB1dF90ZXh0LmxvZ3Byb2JzXCIpO1xuICAgIH1cbiAgICBjb25zdCB3ZWJTZWFyY2hUb29sTmFtZSA9IChfYyA9IHRvb2xzID09IG51bGwgPyB2b2lkIDAgOiB0b29scy5maW5kKFxuICAgICAgKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gXCJwcm92aWRlci1kZWZpbmVkXCIgJiYgKHRvb2wuaWQgPT09IFwib3BlbmFpLndlYl9zZWFyY2hcIiB8fCB0b29sLmlkID09PSBcIm9wZW5haS53ZWJfc2VhcmNoX3ByZXZpZXdcIilcbiAgICApKSA9PSBudWxsID8gdm9pZCAwIDogX2MubmFtZTtcbiAgICBpZiAod2ViU2VhcmNoVG9vbE5hbWUpIHtcbiAgICAgIGFkZEluY2x1ZGUoXCJ3ZWJfc2VhcmNoX2NhbGwuYWN0aW9uLnNvdXJjZXNcIik7XG4gICAgfVxuICAgIGlmIChoYXNPcGVuQUlUb29sKFwib3BlbmFpLmNvZGVfaW50ZXJwcmV0ZXJcIikpIHtcbiAgICAgIGFkZEluY2x1ZGUoXCJjb2RlX2ludGVycHJldGVyX2NhbGwub3V0cHV0c1wiKTtcbiAgICB9XG4gICAgY29uc3QgYmFzZUFyZ3MgPSB7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbElkLFxuICAgICAgaW5wdXQsXG4gICAgICB0ZW1wZXJhdHVyZSxcbiAgICAgIHRvcF9wOiB0b3BQLFxuICAgICAgbWF4X291dHB1dF90b2tlbnM6IG1heE91dHB1dFRva2VucyxcbiAgICAgIC4uLigocmVzcG9uc2VGb3JtYXQgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3BvbnNlRm9ybWF0LnR5cGUpID09PSBcImpzb25cIiB8fCAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy50ZXh0VmVyYm9zaXR5KSkgJiYge1xuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgLi4uKHJlc3BvbnNlRm9ybWF0ID09IG51bGwgPyB2b2lkIDAgOiByZXNwb25zZUZvcm1hdC50eXBlKSA9PT0gXCJqc29uXCIgJiYge1xuICAgICAgICAgICAgZm9ybWF0OiByZXNwb25zZUZvcm1hdC5zY2hlbWEgIT0gbnVsbCA/IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJqc29uX3NjaGVtYVwiLFxuICAgICAgICAgICAgICBzdHJpY3Q6IHN0cmljdEpzb25TY2hlbWEsXG4gICAgICAgICAgICAgIG5hbWU6IChfZCA9IHJlc3BvbnNlRm9ybWF0Lm5hbWUpICE9IG51bGwgPyBfZCA6IFwicmVzcG9uc2VcIixcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHJlc3BvbnNlRm9ybWF0LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICBzY2hlbWE6IHJlc3BvbnNlRm9ybWF0LnNjaGVtYVxuICAgICAgICAgICAgfSA6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIC4uLihvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnRleHRWZXJib3NpdHkpICYmIHtcbiAgICAgICAgICAgIHZlcmJvc2l0eTogb3BlbmFpT3B0aW9ucy50ZXh0VmVyYm9zaXR5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gcHJvdmlkZXIgb3B0aW9uczpcbiAgICAgIG1heF90b29sX2NhbGxzOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLm1heFRvb2xDYWxscyxcbiAgICAgIG1ldGFkYXRhOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLm1ldGFkYXRhLFxuICAgICAgcGFyYWxsZWxfdG9vbF9jYWxsczogb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5wYXJhbGxlbFRvb2xDYWxscyxcbiAgICAgIHByZXZpb3VzX3Jlc3BvbnNlX2lkOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgIHN0b3JlOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnN0b3JlLFxuICAgICAgdXNlcjogb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy51c2VyLFxuICAgICAgaW5zdHJ1Y3Rpb25zOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmluc3RydWN0aW9ucyxcbiAgICAgIHNlcnZpY2VfdGllcjogb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zZXJ2aWNlVGllcixcbiAgICAgIGluY2x1ZGUsXG4gICAgICBwcm9tcHRfY2FjaGVfa2V5OiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnByb21wdENhY2hlS2V5LFxuICAgICAgc2FmZXR5X2lkZW50aWZpZXI6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuc2FmZXR5SWRlbnRpZmllcixcbiAgICAgIHRvcF9sb2dwcm9iczogdG9wTG9ncHJvYnMsXG4gICAgICAvLyBtb2RlbC1zcGVjaWZpYyBzZXR0aW5nczpcbiAgICAgIC4uLm1vZGVsQ29uZmlnLmlzUmVhc29uaW5nTW9kZWwgJiYgKChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ0VmZm9ydCkgIT0gbnVsbCB8fCAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5KSAhPSBudWxsKSAmJiB7XG4gICAgICAgIHJlYXNvbmluZzoge1xuICAgICAgICAgIC4uLihvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ0VmZm9ydCkgIT0gbnVsbCAmJiB7XG4gICAgICAgICAgICBlZmZvcnQ6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0XG4gICAgICAgICAgfSxcbiAgICAgICAgICAuLi4ob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5KSAhPSBudWxsICYmIHtcbiAgICAgICAgICAgIHN1bW1hcnk6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nU3VtbWFyeVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC4uLm1vZGVsQ29uZmlnLnJlcXVpcmVkQXV0b1RydW5jYXRpb24gJiYge1xuICAgICAgICB0cnVuY2F0aW9uOiBcImF1dG9cIlxuICAgICAgfVxuICAgIH07XG4gICAgaWYgKG1vZGVsQ29uZmlnLmlzUmVhc29uaW5nTW9kZWwpIHtcbiAgICAgIGlmIChiYXNlQXJncy50ZW1wZXJhdHVyZSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRlbXBlcmF0dXJlID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRlbXBlcmF0dXJlXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0ZW1wZXJhdHVyZSBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFyZ3MudG9wX3AgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy50b3BfcCA9IHZvaWQgMDtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgICAgc2V0dGluZzogXCJ0b3BQXCIsXG4gICAgICAgICAgZGV0YWlsczogXCJ0b3BQIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ0VmZm9ydCkgIT0gbnVsbCkge1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInJlYXNvbmluZ0VmZm9ydFwiLFxuICAgICAgICAgIGRldGFpbHM6IFwicmVhc29uaW5nRWZmb3J0IGlzIG5vdCBzdXBwb3J0ZWQgZm9yIG5vbi1yZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nU3VtbWFyeSkgIT0gbnVsbCkge1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInJlYXNvbmluZ1N1bW1hcnlcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInJlYXNvbmluZ1N1bW1hcnkgaXMgbm90IHN1cHBvcnRlZCBmb3Igbm9uLXJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyKSA9PT0gXCJmbGV4XCIgJiYgIW1vZGVsQ29uZmlnLnN1cHBvcnRzRmxleFByb2Nlc3NpbmcpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJzZXJ2aWNlVGllclwiLFxuICAgICAgICBkZXRhaWxzOiBcImZsZXggcHJvY2Vzc2luZyBpcyBvbmx5IGF2YWlsYWJsZSBmb3IgbzMsIG80LW1pbmksIGFuZCBncHQtNSBtb2RlbHNcIlxuICAgICAgfSk7XG4gICAgICBkZWxldGUgYmFzZUFyZ3Muc2VydmljZV90aWVyO1xuICAgIH1cbiAgICBpZiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuc2VydmljZVRpZXIpID09PSBcInByaW9yaXR5XCIgJiYgIW1vZGVsQ29uZmlnLnN1cHBvcnRzUHJpb3JpdHlQcm9jZXNzaW5nKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwic2VydmljZVRpZXJcIixcbiAgICAgICAgZGV0YWlsczogXCJwcmlvcml0eSBwcm9jZXNzaW5nIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBzdXBwb3J0ZWQgbW9kZWxzIChncHQtNCwgZ3B0LTUsIGdwdC01LW1pbmksIG8zLCBvNC1taW5pKSBhbmQgcmVxdWlyZXMgRW50ZXJwcmlzZSBhY2Nlc3MuIGdwdC01LW5hbm8gaXMgbm90IHN1cHBvcnRlZFwiXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBiYXNlQXJncy5zZXJ2aWNlX3RpZXI7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICB0b29sQ2hvaWNlOiBvcGVuYWlUb29sQ2hvaWNlLFxuICAgICAgdG9vbFdhcm5pbmdzXG4gICAgfSA9IHByZXBhcmVSZXNwb25zZXNUb29scyh7XG4gICAgICB0b29scyxcbiAgICAgIHRvb2xDaG9pY2UsXG4gICAgICBzdHJpY3RKc29uU2NoZW1hXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdlYlNlYXJjaFRvb2xOYW1lLFxuICAgICAgYXJnczoge1xuICAgICAgICAuLi5iYXNlQXJncyxcbiAgICAgICAgdG9vbHM6IG9wZW5haVRvb2xzMixcbiAgICAgICAgdG9vbF9jaG9pY2U6IG9wZW5haVRvb2xDaG9pY2VcbiAgICAgIH0sXG4gICAgICB3YXJuaW5nczogWy4uLndhcm5pbmdzLCAuLi50b29sV2FybmluZ3NdXG4gICAgfTtcbiAgfVxuICBhc3luYyBkb0dlbmVyYXRlKG9wdGlvbnMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xLCBfciwgX3M7XG4gICAgY29uc3Qge1xuICAgICAgYXJnczogYm9keSxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgd2ViU2VhcmNoVG9vbE5hbWVcbiAgICB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICBwYXRoOiBcIi9yZXNwb25zZXNcIixcbiAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgIH0pO1xuICAgIGNvbnN0IHtcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHZhbHVlOiByZXNwb25zZSxcbiAgICAgIHJhd1ZhbHVlOiByYXdSZXNwb25zZVxuICAgIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpNSh7XG4gICAgICB1cmwsXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczUodGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgYm9keSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjUoXG4gICAgICAgIHoxNi5vYmplY3Qoe1xuICAgICAgICAgIGlkOiB6MTYuc3RyaW5nKCksXG4gICAgICAgICAgY3JlYXRlZF9hdDogejE2Lm51bWJlcigpLFxuICAgICAgICAgIGVycm9yOiB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgIGNvZGU6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHoxNi5zdHJpbmcoKVxuICAgICAgICAgIH0pLm51bGxpc2goKSxcbiAgICAgICAgICBtb2RlbDogejE2LnN0cmluZygpLFxuICAgICAgICAgIG91dHB1dDogejE2LmFycmF5KFxuICAgICAgICAgICAgejE2LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcIm1lc3NhZ2VcIiksXG4gICAgICAgICAgICAgICAgcm9sZTogejE2LmxpdGVyYWwoXCJhc3Npc3RhbnRcIiksXG4gICAgICAgICAgICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB6MTYuYXJyYXkoXG4gICAgICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJvdXRwdXRfdGV4dFwiKSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogejE2LnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICBsb2dwcm9iczogTE9HUFJPQlNfU0NIRU1BLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbnM6IHoxNi5hcnJheShcbiAgICAgICAgICAgICAgICAgICAgICB6MTYuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJ1cmxfY2l0YXRpb25cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X2luZGV4OiB6MTYubnVtYmVyKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9pbmRleDogejE2Lm51bWJlcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHoxNi5zdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJmaWxlX2NpdGF0aW9uXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlX2lkOiB6MTYuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogejE2Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfaW5kZXg6IHoxNi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9pbmRleDogejE2Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcXVvdGU6IHoxNi5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgejE2Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiY29udGFpbmVyX2ZpbGVfY2l0YXRpb25cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB3ZWJTZWFyY2hDYWxsSXRlbSxcbiAgICAgICAgICAgICAgZmlsZVNlYXJjaENhbGxJdGVtLFxuICAgICAgICAgICAgICBjb2RlSW50ZXJwcmV0ZXJDYWxsSXRlbSxcbiAgICAgICAgICAgICAgaW1hZ2VHZW5lcmF0aW9uQ2FsbEl0ZW0sXG4gICAgICAgICAgICAgIGxvY2FsU2hlbGxDYWxsSXRlbSxcbiAgICAgICAgICAgICAgejE2Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJmdW5jdGlvbl9jYWxsXCIpLFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB6MTYuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiB6MTYuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgaWQ6IHoxNi5zdHJpbmcoKVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgejE2Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJjb21wdXRlcl9jYWxsXCIpLFxuICAgICAgICAgICAgICAgIGlkOiB6MTYuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgc3RhdHVzOiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgejE2Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJyZWFzb25pbmdcIiksXG4gICAgICAgICAgICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogejE2LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICBzdW1tYXJ5OiB6MTYuYXJyYXkoXG4gICAgICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJzdW1tYXJ5X3RleHRcIiksXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHoxNi5zdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdKVxuICAgICAgICAgICksXG4gICAgICAgICAgc2VydmljZV90aWVyOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgIGluY29tcGxldGVfZGV0YWlsczogejE2Lm9iamVjdCh7IHJlYXNvbjogejE2LnN0cmluZygpIH0pLm51bGxpc2goKSxcbiAgICAgICAgICB1c2FnZTogdXNhZ2VTY2hlbWEyXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWw6IG9wdGlvbnMuYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBBUElDYWxsRXJyb3Ioe1xuICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5lcnJvci5tZXNzYWdlLFxuICAgICAgICB1cmwsXG4gICAgICAgIHJlcXVlc3RCb2R5VmFsdWVzOiBib2R5LFxuICAgICAgICBzdGF0dXNDb2RlOiA0MDAsXG4gICAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgcmVzcG9uc2VCb2R5OiByYXdSZXNwb25zZSxcbiAgICAgICAgaXNSZXRyeWFibGU6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgIGNvbnN0IGxvZ3Byb2JzID0gW107XG4gICAgbGV0IGhhc0Z1bmN0aW9uQ2FsbCA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgcGFydCBvZiByZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJyZWFzb25pbmdcIjoge1xuICAgICAgICAgIGlmIChwYXJ0LnN1bW1hcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBwYXJ0LnN1bW1hcnkucHVzaCh7IHR5cGU6IFwic3VtbWFyeV90ZXh0XCIsIHRleHQ6IFwiXCIgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3Qgc3VtbWFyeSBvZiBwYXJ0LnN1bW1hcnkpIHtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nXCIsXG4gICAgICAgICAgICAgIHRleHQ6IHN1bW1hcnkudGV4dCxcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgICAgICAgcmVhc29uaW5nRW5jcnlwdGVkQ29udGVudDogKF9hID0gcGFydC5lbmNyeXB0ZWRfY29udGVudCkgIT0gbnVsbCA/IF9hIDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJpbWFnZV9nZW5lcmF0aW9uX2NhbGxcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImltYWdlX2dlbmVyYXRpb25cIixcbiAgICAgICAgICAgIGlucHV0OiBcInt9XCIsXG4gICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogXCJpbWFnZV9nZW5lcmF0aW9uXCIsXG4gICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgcmVzdWx0OiBwYXJ0LnJlc3VsdFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibG9jYWxfc2hlbGxfY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmNhbGxfaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogXCJsb2NhbF9zaGVsbFwiLFxuICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHsgYWN0aW9uOiBwYXJ0LmFjdGlvbiB9KSxcbiAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJ0LmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwibWVzc2FnZVwiOiB7XG4gICAgICAgICAgZm9yIChjb25zdCBjb250ZW50UGFydCBvZiBwYXJ0LmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmICgoKF9jID0gKF9iID0gb3B0aW9ucy5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfYy5sb2dwcm9icykgJiYgY29udGVudFBhcnQubG9ncHJvYnMpIHtcbiAgICAgICAgICAgICAgbG9ncHJvYnMucHVzaChjb250ZW50UGFydC5sb2dwcm9icyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgICAgdGV4dDogY29udGVudFBhcnQudGV4dCxcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJ0LmlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYW5ub3RhdGlvbiBvZiBjb250ZW50UGFydC5hbm5vdGF0aW9ucykge1xuICAgICAgICAgICAgICBpZiAoYW5ub3RhdGlvbi50eXBlID09PSBcInVybF9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfZiA9IChfZSA9IChfZCA9IHRoaXMuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX2UuY2FsbChfZCkpICE9IG51bGwgPyBfZiA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICB1cmw6IGFubm90YXRpb24udXJsLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IGFubm90YXRpb24udGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbm5vdGF0aW9uLnR5cGUgPT09IFwiZmlsZV9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcImRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgICBpZDogKF9pID0gKF9oID0gKF9nID0gdGhpcy5jb25maWcpLmdlbmVyYXRlSWQpID09IG51bGwgPyB2b2lkIDAgOiBfaC5jYWxsKF9nKSkgIT0gbnVsbCA/IF9pIDogZ2VuZXJhdGVJZDIoKSxcbiAgICAgICAgICAgICAgICAgIG1lZGlhVHlwZTogXCJ0ZXh0L3BsYWluXCIsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogKF9rID0gKF9qID0gYW5ub3RhdGlvbi5xdW90ZSkgIT0gbnVsbCA/IF9qIDogYW5ub3RhdGlvbi5maWxlbmFtZSkgIT0gbnVsbCA/IF9rIDogXCJEb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IChfbCA9IGFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfbCA6IGFubm90YXRpb24uZmlsZV9pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvbl9jYWxsXCI6IHtcbiAgICAgICAgICBoYXNGdW5jdGlvbkNhbGwgPSB0cnVlO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5jYWxsX2lkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHBhcnQubmFtZSxcbiAgICAgICAgICAgIGlucHV0OiBwYXJ0LmFyZ3VtZW50cyxcbiAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJ0LmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwid2ViX3NlYXJjaF9jYWxsXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogd2ViU2VhcmNoVG9vbE5hbWUgIT0gbnVsbCA/IHdlYlNlYXJjaFRvb2xOYW1lIDogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICBpbnB1dDogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246IHBhcnQuYWN0aW9uIH0pLFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IHdlYlNlYXJjaFRvb2xOYW1lICE9IG51bGwgPyB3ZWJTZWFyY2hUb29sTmFtZSA6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgcmVzdWx0OiB7IHN0YXR1czogcGFydC5zdGF0dXMgfSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiY29tcHV0ZXJfY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICBpbnB1dDogXCJcIixcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvbXB1dGVyX3VzZVwiLFxuICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiY29tcHV0ZXJfdXNlX3Rvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgIHN0YXR1czogcGFydC5zdGF0dXMgfHwgXCJjb21wbGV0ZWRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiZmlsZV9zZWFyY2hfY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgIGlucHV0OiBcInt9XCIsXG4gICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogXCJmaWxlX3NlYXJjaFwiLFxuICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgIHF1ZXJpZXM6IHBhcnQucXVlcmllcyxcbiAgICAgICAgICAgICAgcmVzdWx0czogKF9uID0gKF9tID0gcGFydC5yZXN1bHRzKSA9PSBudWxsID8gdm9pZCAwIDogX20ubWFwKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogcmVzdWx0LmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgZmlsZUlkOiByZXN1bHQuZmlsZV9pZCxcbiAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVzdWx0LmZpbGVuYW1lLFxuICAgICAgICAgICAgICAgIHNjb3JlOiByZXN1bHQuc2NvcmUsXG4gICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0LnRleHRcbiAgICAgICAgICAgICAgfSkpKSAhPSBudWxsID8gX24gOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIGNvZGU6IHBhcnQuY29kZSxcbiAgICAgICAgICAgICAgY29udGFpbmVySWQ6IHBhcnQuY29udGFpbmVyX2lkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICBvdXRwdXRzOiBwYXJ0Lm91dHB1dHNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHtcbiAgICAgIG9wZW5haTogeyByZXNwb25zZUlkOiByZXNwb25zZS5pZCB9XG4gICAgfTtcbiAgICBpZiAobG9ncHJvYnMubGVuZ3RoID4gMCkge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBsb2dwcm9icztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZXNwb25zZS5zZXJ2aWNlX3RpZXIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLnNlcnZpY2VUaWVyID0gcmVzcG9uc2Uuc2VydmljZV90aWVyO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudCxcbiAgICAgIGZpbmlzaFJlYXNvbjogbWFwT3BlbkFJUmVzcG9uc2VGaW5pc2hSZWFzb24oe1xuICAgICAgICBmaW5pc2hSZWFzb246IChfbyA9IHJlc3BvbnNlLmluY29tcGxldGVfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9vLnJlYXNvbixcbiAgICAgICAgaGFzRnVuY3Rpb25DYWxsXG4gICAgICB9KSxcbiAgICAgIHVzYWdlOiB7XG4gICAgICAgIGlucHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5pbnB1dF90b2tlbnMsXG4gICAgICAgIG91dHB1dFRva2VuczogcmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucyxcbiAgICAgICAgdG90YWxUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucyArIHJlc3BvbnNlLnVzYWdlLm91dHB1dF90b2tlbnMsXG4gICAgICAgIHJlYXNvbmluZ1Rva2VuczogKF9xID0gKF9wID0gcmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2Vuc19kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX3AucmVhc29uaW5nX3Rva2VucykgIT0gbnVsbCA/IF9xIDogdm9pZCAwLFxuICAgICAgICBjYWNoZWRJbnB1dFRva2VuczogKF9zID0gKF9yID0gcmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfci5jYWNoZWRfdG9rZW5zKSAhPSBudWxsID8gX3MgOiB2b2lkIDBcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIGlkOiByZXNwb25zZS5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShyZXNwb25zZS5jcmVhdGVkX2F0ICogMWUzKSxcbiAgICAgICAgbW9kZWxJZDogcmVzcG9uc2UubW9kZWwsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgYm9keTogcmF3UmVzcG9uc2VcbiAgICAgIH0sXG4gICAgICBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvU3RyZWFtKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7XG4gICAgICBhcmdzOiBib2R5LFxuICAgICAgd2FybmluZ3MsXG4gICAgICB3ZWJTZWFyY2hUb29sTmFtZVxuICAgIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgeyByZXNwb25zZUhlYWRlcnMsIHZhbHVlOiByZXNwb25zZSB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTUoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9yZXNwb25zZXNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzNSh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5OiB7XG4gICAgICAgIC4uLmJvZHksXG4gICAgICAgIHN0cmVhbTogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIzKFxuICAgICAgICBvcGVuYWlSZXNwb25zZXNDaHVua1NjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgbGV0IGZpbmlzaFJlYXNvbiA9IFwidW5rbm93blwiO1xuICAgIGNvbnN0IHVzYWdlID0ge1xuICAgICAgaW5wdXRUb2tlbnM6IHZvaWQgMCxcbiAgICAgIG91dHB1dFRva2Vuczogdm9pZCAwLFxuICAgICAgdG90YWxUb2tlbnM6IHZvaWQgMFxuICAgIH07XG4gICAgY29uc3QgbG9ncHJvYnMgPSBbXTtcbiAgICBsZXQgcmVzcG9uc2VJZCA9IG51bGw7XG4gICAgY29uc3Qgb25nb2luZ1Rvb2xDYWxscyA9IHt9O1xuICAgIGxldCBoYXNGdW5jdGlvbkNhbGwgPSBmYWxzZTtcbiAgICBjb25zdCBhY3RpdmVSZWFzb25pbmcgPSB7fTtcbiAgICBsZXQgc2VydmljZVRpZXI7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0cmVhbTogcmVzcG9uc2UucGlwZVRocm91Z2goXG4gICAgICAgIG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwic3RyZWFtLXN0YXJ0XCIsIHdhcm5pbmdzIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdSwgX3YsIF93O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZVJhd0NodW5rcykge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInJhd1wiLCByYXdWYWx1ZTogY2h1bmsucmF3VmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNodW5rLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0gXCJlcnJvclwiO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiBjaHVuay5lcnJvciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjaHVuay52YWx1ZTtcbiAgICAgICAgICAgIGlmIChpc1Jlc3BvbnNlT3V0cHV0SXRlbUFkZGVkQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiZnVuY3Rpb25fY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHZhbHVlLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uY2FsbF9pZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uY2FsbF9pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB2YWx1ZS5pdGVtLm5hbWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwid2ViX3NlYXJjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogd2ViU2VhcmNoVG9vbE5hbWUgIT0gbnVsbCA/IHdlYlNlYXJjaFRvb2xOYW1lIDogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB3ZWJTZWFyY2hUb29sTmFtZSAhPSBudWxsID8gd2ViU2VhcmNoVG9vbE5hbWUgOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiY29tcHV0ZXJfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvbXB1dGVyX3VzZVwiLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICBjb2RlSW50ZXJwcmV0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IHZhbHVlLml0ZW0uY29udGFpbmVyX2lkXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIGRlbHRhOiBge1wiY29udGFpbmVySWRcIjpcIiR7dmFsdWUuaXRlbS5jb250YWluZXJfaWR9XCIsXCJjb2RlXCI6XCJgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImZpbGVfc2VhcmNoX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImZpbGVfc2VhcmNoXCIsXG4gICAgICAgICAgICAgICAgICBpbnB1dDogXCJ7fVwiLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJpbWFnZV9nZW5lcmF0aW9uX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImltYWdlX2dlbmVyYXRpb25cIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBcInt9XCIsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcIm1lc3NhZ2VcIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRSZWFzb25pbmdDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVSZWFzb25pbmdbdmFsdWUuaXRlbS5pZF0gPSB7XG4gICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRDb250ZW50OiB2YWx1ZS5pdGVtLmVuY3J5cHRlZF9jb250ZW50LFxuICAgICAgICAgICAgICAgICAgc3VtbWFyeVBhcnRzOiBbMF1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IGAke3ZhbHVlLml0ZW0uaWR9OjBgLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nRW5jcnlwdGVkQ29udGVudDogKF9hID0gdmFsdWUuaXRlbS5lbmNyeXB0ZWRfY29udGVudCkgIT0gbnVsbCA/IF9hIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZU91dHB1dEl0ZW1Eb25lQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiZnVuY3Rpb25fY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGhhc0Z1bmN0aW9uQ2FsbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmNhbGxfaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uY2FsbF9pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB2YWx1ZS5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICBpbnB1dDogdmFsdWUuaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcIndlYl9zZWFyY2hfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogdmFsdWUuaXRlbS5hY3Rpb24gfSksXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICAgICAgICByZXN1bHQ6IHsgc3RhdHVzOiB2YWx1ZS5pdGVtLnN0YXR1cyB9LFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJjb21wdXRlcl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICAgICAgICBpbnB1dDogXCJcIixcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvbXB1dGVyX3VzZVwiLFxuICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY29tcHV0ZXJfdXNlX3Rvb2xfcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogdmFsdWUuaXRlbS5zdGF0dXMgfHwgXCJjb21wbGV0ZWRcIlxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiZmlsZV9zZWFyY2hfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICBxdWVyaWVzOiB2YWx1ZS5pdGVtLnF1ZXJpZXMsXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IChfYyA9IChfYiA9IHZhbHVlLml0ZW0ucmVzdWx0cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm1hcCgocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHJlc3VsdC5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVJZDogcmVzdWx0LmZpbGVfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHJlc3VsdC5maWxlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBzY29yZTogcmVzdWx0LnNjb3JlLFxuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlc3VsdC50ZXh0XG4gICAgICAgICAgICAgICAgICAgIH0pKSkgIT0gbnVsbCA/IF9jIDogbnVsbFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiY29kZV9pbnRlcnByZXRlcl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJjb2RlX2ludGVycHJldGVyXCIsXG4gICAgICAgICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0czogdmFsdWUuaXRlbS5vdXRwdXRzXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJpbWFnZV9nZW5lcmF0aW9uX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiaW1hZ2VfZ2VuZXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogdmFsdWUuaXRlbS5yZXN1bHRcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImxvY2FsX3NoZWxsX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uY2FsbF9pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImxvY2FsX3NoZWxsXCIsXG4gICAgICAgICAgICAgICAgICBpbnB1dDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImV4ZWNcIixcbiAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiB2YWx1ZS5pdGVtLmFjdGlvbi5jb21tYW5kLFxuICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXRNczogdmFsdWUuaXRlbS5hY3Rpb24udGltZW91dF9tcyxcbiAgICAgICAgICAgICAgICAgICAgICB1c2VyOiB2YWx1ZS5pdGVtLmFjdGlvbi51c2VyLFxuICAgICAgICAgICAgICAgICAgICAgIHdvcmtpbmdEaXJlY3Rvcnk6IHZhbHVlLml0ZW0uYWN0aW9uLndvcmtpbmdfZGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgIGVudjogdmFsdWUuaXRlbS5hY3Rpb24uZW52XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvcGVuYWk6IHsgaXRlbUlkOiB2YWx1ZS5pdGVtLmlkIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwibWVzc2FnZVwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZU91dHB1dEl0ZW1Eb25lUmVhc29uaW5nQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlUmVhc29uaW5nUGFydCA9IGFjdGl2ZVJlYXNvbmluZ1t2YWx1ZS5pdGVtLmlkXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN1bW1hcnlJbmRleCBvZiBhY3RpdmVSZWFzb25pbmdQYXJ0LnN1bW1hcnlQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmctZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBgJHt2YWx1ZS5pdGVtLmlkfToke3N1bW1hcnlJbmRleH1gLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50OiAoX2QgPSB2YWx1ZS5pdGVtLmVuY3J5cHRlZF9jb250ZW50KSAhPSBudWxsID8gX2QgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVsZXRlIGFjdGl2ZVJlYXNvbmluZ1t2YWx1ZS5pdGVtLmlkXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29uc3QgdG9vbENhbGwgPSBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF07XG4gICAgICAgICAgICAgIGlmICh0b29sQ2FsbCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsLnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgICBkZWx0YTogdmFsdWUuZGVsdGFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlQ29kZUludGVycHJldGVyQ2FsbENvZGVEZWx0YUNodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XTtcbiAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgIC8vIFRoZSBkZWx0YSBpcyBjb2RlLCB3aGljaCBpcyBlbWJlZGRpbmcgaW4gYSBKU09OIHN0cmluZy5cbiAgICAgICAgICAgICAgICAgIC8vIFRvIGVzY2FwZSBpdCwgd2UgdXNlIEpTT04uc3RyaW5naWZ5IGFuZCBzbGljZSB0byByZW1vdmUgdGhlIG91dGVyIHF1b3Rlcy5cbiAgICAgICAgICAgICAgICAgIGRlbHRhOiBKU09OLnN0cmluZ2lmeSh2YWx1ZS5kZWx0YSkuc2xpY2UoMSwgLTEpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUNvZGVJbnRlcnByZXRlckNhbGxDb2RlRG9uZUNodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XTtcbiAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgIGRlbHRhOiAnXCJ9J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwudG9vbENhbGxJZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdG9vbENhbGwudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHZhbHVlLmNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiB0b29sQ2FsbC5jb2RlSW50ZXJwcmV0ZXIuY29udGFpbmVySWRcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VDcmVhdGVkQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlSWQgPSB2YWx1ZS5yZXNwb25zZS5pZDtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlc3BvbnNlLW1ldGFkYXRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IHZhbHVlLnJlc3BvbnNlLmlkLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUodmFsdWUucmVzcG9uc2UuY3JlYXRlZF9hdCAqIDFlMyksXG4gICAgICAgICAgICAgICAgbW9kZWxJZDogdmFsdWUucmVzcG9uc2UubW9kZWxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzVGV4dERlbHRhQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgZGVsdGE6IHZhbHVlLmRlbHRhXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBpZiAoKChfZiA9IChfZSA9IG9wdGlvbnMucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2Uub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2YubG9ncHJvYnMpICYmIHZhbHVlLmxvZ3Byb2JzKSB7XG4gICAgICAgICAgICAgICAgbG9ncHJvYnMucHVzaCh2YWx1ZS5sb2dwcm9icyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlQYXJ0QWRkZWRDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLnN1bW1hcnlfaW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgKF9nID0gYWN0aXZlUmVhc29uaW5nW3ZhbHVlLml0ZW1faWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2cuc3VtbWFyeVBhcnRzLnB1c2goXG4gICAgICAgICAgICAgICAgICB2YWx1ZS5zdW1tYXJ5X2luZGV4XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmctc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiBgJHt2YWx1ZS5pdGVtX2lkfToke3ZhbHVlLnN1bW1hcnlfaW5kZXh9YCxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiB2YWx1ZS5pdGVtX2lkLFxuICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ0VuY3J5cHRlZENvbnRlbnQ6IChfaSA9IChfaCA9IGFjdGl2ZVJlYXNvbmluZ1t2YWx1ZS5pdGVtX2lkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9oLmVuY3J5cHRlZENvbnRlbnQpICE9IG51bGwgPyBfaSA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VSZWFzb25pbmdTdW1tYXJ5VGV4dERlbHRhQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmctZGVsdGFcIixcbiAgICAgICAgICAgICAgICBpZDogYCR7dmFsdWUuaXRlbV9pZH06JHt2YWx1ZS5zdW1tYXJ5X2luZGV4fWAsXG4gICAgICAgICAgICAgICAgZGVsdGE6IHZhbHVlLmRlbHRhLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW1faWRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlRmluaXNoZWRDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0gbWFwT3BlbkFJUmVzcG9uc2VGaW5pc2hSZWFzb24oe1xuICAgICAgICAgICAgICAgIGZpbmlzaFJlYXNvbjogKF9qID0gdmFsdWUucmVzcG9uc2UuaW5jb21wbGV0ZV9kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX2oucmVhc29uLFxuICAgICAgICAgICAgICAgIGhhc0Z1bmN0aW9uQ2FsbFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSB2YWx1ZS5yZXNwb25zZS51c2FnZS5pbnB1dF90b2tlbnM7XG4gICAgICAgICAgICAgIHVzYWdlLm91dHB1dFRva2VucyA9IHZhbHVlLnJlc3BvbnNlLnVzYWdlLm91dHB1dF90b2tlbnM7XG4gICAgICAgICAgICAgIHVzYWdlLnRvdGFsVG9rZW5zID0gdmFsdWUucmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zICsgdmFsdWUucmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucztcbiAgICAgICAgICAgICAgdXNhZ2UucmVhc29uaW5nVG9rZW5zID0gKF9sID0gKF9rID0gdmFsdWUucmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2Vuc19kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX2sucmVhc29uaW5nX3Rva2VucykgIT0gbnVsbCA/IF9sIDogdm9pZCAwO1xuICAgICAgICAgICAgICB1c2FnZS5jYWNoZWRJbnB1dFRva2VucyA9IChfbiA9IChfbSA9IHZhbHVlLnJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2Vuc19kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX20uY2FjaGVkX3Rva2VucykgIT0gbnVsbCA/IF9uIDogdm9pZCAwO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLnJlc3BvbnNlLnNlcnZpY2VfdGllciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHNlcnZpY2VUaWVyID0gdmFsdWUucmVzcG9uc2Uuc2VydmljZV90aWVyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VBbm5vdGF0aW9uQWRkZWRDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLmFubm90YXRpb24udHlwZSA9PT0gXCJ1cmxfY2l0YXRpb25cIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICAgICAgc291cmNlVHlwZTogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgIGlkOiAoX3EgPSAoX3AgPSAoX28gPSBzZWxmLmNvbmZpZykuZ2VuZXJhdGVJZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9wLmNhbGwoX28pKSAhPSBudWxsID8gX3EgOiBnZW5lcmF0ZUlkMigpLFxuICAgICAgICAgICAgICAgICAgdXJsOiB2YWx1ZS5hbm5vdGF0aW9uLnVybCxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiB2YWx1ZS5hbm5vdGF0aW9uLnRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuYW5ub3RhdGlvbi50eXBlID09PSBcImZpbGVfY2l0YXRpb25cIikge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInNvdXJjZVwiLFxuICAgICAgICAgICAgICAgICAgc291cmNlVHlwZTogXCJkb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfdCA9IChfcyA9IChfciA9IHNlbGYuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX3MuY2FsbChfcikpICE9IG51bGwgPyBfdCA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICBtZWRpYVR5cGU6IFwidGV4dC9wbGFpblwiLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IChfdiA9IChfdSA9IHZhbHVlLmFubm90YXRpb24ucXVvdGUpICE9IG51bGwgPyBfdSA6IHZhbHVlLmFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfdiA6IFwiRG9jdW1lbnRcIixcbiAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAoX3cgPSB2YWx1ZS5hbm5vdGF0aW9uLmZpbGVuYW1lKSAhPSBudWxsID8gX3cgOiB2YWx1ZS5hbm5vdGF0aW9uLmZpbGVfaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0Vycm9yQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3I6IHZhbHVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmx1c2goY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHtcbiAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VJZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGxvZ3Byb2JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBsb2dwcm9icztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXJ2aWNlVGllciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLnNlcnZpY2VUaWVyID0gc2VydmljZVRpZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICB0eXBlOiBcImZpbmlzaFwiLFxuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24sXG4gICAgICAgICAgICAgIHVzYWdlLFxuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgcmVxdWVzdDogeyBib2R5IH0sXG4gICAgICByZXNwb25zZTogeyBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMgfVxuICAgIH07XG4gIH1cbn07XG52YXIgdXNhZ2VTY2hlbWEyID0gejE2Lm9iamVjdCh7XG4gIGlucHV0X3Rva2VuczogejE2Lm51bWJlcigpLFxuICBpbnB1dF90b2tlbnNfZGV0YWlsczogejE2Lm9iamVjdCh7IGNhY2hlZF90b2tlbnM6IHoxNi5udW1iZXIoKS5udWxsaXNoKCkgfSkubnVsbGlzaCgpLFxuICBvdXRwdXRfdG9rZW5zOiB6MTYubnVtYmVyKCksXG4gIG91dHB1dF90b2tlbnNfZGV0YWlsczogejE2Lm9iamVjdCh7IHJlYXNvbmluZ190b2tlbnM6IHoxNi5udW1iZXIoKS5udWxsaXNoKCkgfSkubnVsbGlzaCgpXG59KTtcbnZhciB0ZXh0RGVsdGFDaHVua1NjaGVtYSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcInJlc3BvbnNlLm91dHB1dF90ZXh0LmRlbHRhXCIpLFxuICBpdGVtX2lkOiB6MTYuc3RyaW5nKCksXG4gIGRlbHRhOiB6MTYuc3RyaW5nKCksXG4gIGxvZ3Byb2JzOiBMT0dQUk9CU19TQ0hFTUEubnVsbGlzaCgpXG59KTtcbnZhciBlcnJvckNodW5rU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwiZXJyb3JcIiksXG4gIGNvZGU6IHoxNi5zdHJpbmcoKSxcbiAgbWVzc2FnZTogejE2LnN0cmluZygpLFxuICBwYXJhbTogejE2LnN0cmluZygpLm51bGxpc2goKSxcbiAgc2VxdWVuY2VfbnVtYmVyOiB6MTYubnVtYmVyKClcbn0pO1xudmFyIHJlc3BvbnNlRmluaXNoZWRDaHVua1NjaGVtYSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYuZW51bShbXCJyZXNwb25zZS5jb21wbGV0ZWRcIiwgXCJyZXNwb25zZS5pbmNvbXBsZXRlXCJdKSxcbiAgcmVzcG9uc2U6IHoxNi5vYmplY3Qoe1xuICAgIGluY29tcGxldGVfZGV0YWlsczogejE2Lm9iamVjdCh7IHJlYXNvbjogejE2LnN0cmluZygpIH0pLm51bGxpc2goKSxcbiAgICB1c2FnZTogdXNhZ2VTY2hlbWEyLFxuICAgIHNlcnZpY2VfdGllcjogejE2LnN0cmluZygpLm51bGxpc2goKVxuICB9KVxufSk7XG52YXIgcmVzcG9uc2VDcmVhdGVkQ2h1bmtTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJyZXNwb25zZS5jcmVhdGVkXCIpLFxuICByZXNwb25zZTogejE2Lm9iamVjdCh7XG4gICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICBjcmVhdGVkX2F0OiB6MTYubnVtYmVyKCksXG4gICAgbW9kZWw6IHoxNi5zdHJpbmcoKSxcbiAgICBzZXJ2aWNlX3RpZXI6IHoxNi5zdHJpbmcoKS5udWxsaXNoKClcbiAgfSlcbn0pO1xudmFyIHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwicmVzcG9uc2Uub3V0cHV0X2l0ZW0uYWRkZWRcIiksXG4gIG91dHB1dF9pbmRleDogejE2Lm51bWJlcigpLFxuICBpdGVtOiB6MTYuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcIm1lc3NhZ2VcIiksXG4gICAgICBpZDogejE2LnN0cmluZygpXG4gICAgfSksXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcInJlYXNvbmluZ1wiKSxcbiAgICAgIGlkOiB6MTYuc3RyaW5nKCksXG4gICAgICBlbmNyeXB0ZWRfY29udGVudDogejE2LnN0cmluZygpLm51bGxpc2goKVxuICAgIH0pLFxuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJmdW5jdGlvbl9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIGNhbGxfaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIG5hbWU6IHoxNi5zdHJpbmcoKSxcbiAgICAgIGFyZ3VtZW50czogejE2LnN0cmluZygpXG4gICAgfSksXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcIndlYl9zZWFyY2hfY2FsbFwiKSxcbiAgICAgIGlkOiB6MTYuc3RyaW5nKCksXG4gICAgICBzdGF0dXM6IHoxNi5zdHJpbmcoKSxcbiAgICAgIGFjdGlvbjogejE2Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwic2VhcmNoXCIpLFxuICAgICAgICBxdWVyeTogejE2LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICAgIH0pLm51bGxpc2goKVxuICAgIH0pLFxuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJjb21wdXRlcl9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIHN0YXR1czogejE2LnN0cmluZygpXG4gICAgfSksXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImZpbGVfc2VhcmNoX2NhbGxcIiksXG4gICAgICBpZDogejE2LnN0cmluZygpXG4gICAgfSksXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImltYWdlX2dlbmVyYXRpb25fY2FsbFwiKSxcbiAgICAgIGlkOiB6MTYuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiY29kZV9pbnRlcnByZXRlcl9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIGNvbnRhaW5lcl9pZDogejE2LnN0cmluZygpLFxuICAgICAgY29kZTogejE2LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgICBvdXRwdXRzOiB6MTYuYXJyYXkoXG4gICAgICAgIHoxNi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgICAgICB6MTYub2JqZWN0KHsgdHlwZTogejE2LmxpdGVyYWwoXCJsb2dzXCIpLCBsb2dzOiB6MTYuc3RyaW5nKCkgfSksXG4gICAgICAgICAgejE2Lm9iamVjdCh7IHR5cGU6IHoxNi5saXRlcmFsKFwiaW1hZ2VcIiksIHVybDogejE2LnN0cmluZygpIH0pXG4gICAgICAgIF0pXG4gICAgICApLm51bGxhYmxlKCksXG4gICAgICBzdGF0dXM6IHoxNi5zdHJpbmcoKVxuICAgIH0pXG4gIF0pXG59KTtcbnZhciByZXNwb25zZU91dHB1dEl0ZW1Eb25lU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwicmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZVwiKSxcbiAgb3V0cHV0X2luZGV4OiB6MTYubnVtYmVyKCksXG4gIGl0ZW06IHoxNi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwibWVzc2FnZVwiKSxcbiAgICAgIGlkOiB6MTYuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwicmVhc29uaW5nXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIGVuY3J5cHRlZF9jb250ZW50OiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgfSksXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImZ1bmN0aW9uX2NhbGxcIiksXG4gICAgICBpZDogejE2LnN0cmluZygpLFxuICAgICAgY2FsbF9pZDogejE2LnN0cmluZygpLFxuICAgICAgbmFtZTogejE2LnN0cmluZygpLFxuICAgICAgYXJndW1lbnRzOiB6MTYuc3RyaW5nKCksXG4gICAgICBzdGF0dXM6IHoxNi5saXRlcmFsKFwiY29tcGxldGVkXCIpXG4gICAgfSksXG4gICAgY29kZUludGVycHJldGVyQ2FsbEl0ZW0sXG4gICAgaW1hZ2VHZW5lcmF0aW9uQ2FsbEl0ZW0sXG4gICAgd2ViU2VhcmNoQ2FsbEl0ZW0sXG4gICAgZmlsZVNlYXJjaENhbGxJdGVtLFxuICAgIGxvY2FsU2hlbGxDYWxsSXRlbSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiY29tcHV0ZXJfY2FsbFwiKSxcbiAgICAgIGlkOiB6MTYuc3RyaW5nKCksXG4gICAgICBzdGF0dXM6IHoxNi5saXRlcmFsKFwiY29tcGxldGVkXCIpXG4gICAgfSlcbiAgXSlcbn0pO1xudmFyIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YVwiKSxcbiAgaXRlbV9pZDogejE2LnN0cmluZygpLFxuICBvdXRwdXRfaW5kZXg6IHoxNi5udW1iZXIoKSxcbiAgZGVsdGE6IHoxNi5zdHJpbmcoKVxufSk7XG52YXIgcmVzcG9uc2VDb2RlSW50ZXJwcmV0ZXJDYWxsQ29kZURlbHRhU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwicmVzcG9uc2UuY29kZV9pbnRlcnByZXRlcl9jYWxsX2NvZGUuZGVsdGFcIiksXG4gIGl0ZW1faWQ6IHoxNi5zdHJpbmcoKSxcbiAgb3V0cHV0X2luZGV4OiB6MTYubnVtYmVyKCksXG4gIGRlbHRhOiB6MTYuc3RyaW5nKClcbn0pO1xudmFyIHJlc3BvbnNlQ29kZUludGVycHJldGVyQ2FsbENvZGVEb25lU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwicmVzcG9uc2UuY29kZV9pbnRlcnByZXRlcl9jYWxsX2NvZGUuZG9uZVwiKSxcbiAgaXRlbV9pZDogejE2LnN0cmluZygpLFxuICBvdXRwdXRfaW5kZXg6IHoxNi5udW1iZXIoKSxcbiAgY29kZTogejE2LnN0cmluZygpXG59KTtcbnZhciByZXNwb25zZUFubm90YXRpb25BZGRlZFNjaGVtYSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcInJlc3BvbnNlLm91dHB1dF90ZXh0LmFubm90YXRpb24uYWRkZWRcIiksXG4gIGFubm90YXRpb246IHoxNi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwidXJsX2NpdGF0aW9uXCIpLFxuICAgICAgdXJsOiB6MTYuc3RyaW5nKCksXG4gICAgICB0aXRsZTogejE2LnN0cmluZygpXG4gICAgfSksXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImZpbGVfY2l0YXRpb25cIiksXG4gICAgICBmaWxlX2lkOiB6MTYuc3RyaW5nKCksXG4gICAgICBmaWxlbmFtZTogejE2LnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgIGluZGV4OiB6MTYubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgc3RhcnRfaW5kZXg6IHoxNi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICBlbmRfaW5kZXg6IHoxNi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICBxdW90ZTogejE2LnN0cmluZygpLm51bGxpc2goKVxuICAgIH0pXG4gIF0pXG59KTtcbnZhciByZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlQYXJ0QWRkZWRTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJyZXNwb25zZS5yZWFzb25pbmdfc3VtbWFyeV9wYXJ0LmFkZGVkXCIpLFxuICBpdGVtX2lkOiB6MTYuc3RyaW5nKCksXG4gIHN1bW1hcnlfaW5kZXg6IHoxNi5udW1iZXIoKVxufSk7XG52YXIgcmVzcG9uc2VSZWFzb25pbmdTdW1tYXJ5VGV4dERlbHRhU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwicmVzcG9uc2UucmVhc29uaW5nX3N1bW1hcnlfdGV4dC5kZWx0YVwiKSxcbiAgaXRlbV9pZDogejE2LnN0cmluZygpLFxuICBzdW1tYXJ5X2luZGV4OiB6MTYubnVtYmVyKCksXG4gIGRlbHRhOiB6MTYuc3RyaW5nKClcbn0pO1xudmFyIG9wZW5haVJlc3BvbnNlc0NodW5rU2NoZW1hID0gejE2LnVuaW9uKFtcbiAgdGV4dERlbHRhQ2h1bmtTY2hlbWEsXG4gIHJlc3BvbnNlRmluaXNoZWRDaHVua1NjaGVtYSxcbiAgcmVzcG9uc2VDcmVhdGVkQ2h1bmtTY2hlbWEsXG4gIHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkU2NoZW1hLFxuICByZXNwb25zZU91dHB1dEl0ZW1Eb25lU2NoZW1hLFxuICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhU2NoZW1hLFxuICByZXNwb25zZUNvZGVJbnRlcnByZXRlckNhbGxDb2RlRGVsdGFTY2hlbWEsXG4gIHJlc3BvbnNlQ29kZUludGVycHJldGVyQ2FsbENvZGVEb25lU2NoZW1hLFxuICByZXNwb25zZUFubm90YXRpb25BZGRlZFNjaGVtYSxcbiAgcmVzcG9uc2VSZWFzb25pbmdTdW1tYXJ5UGFydEFkZGVkU2NoZW1hLFxuICByZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlUZXh0RGVsdGFTY2hlbWEsXG4gIGVycm9yQ2h1bmtTY2hlbWEsXG4gIHoxNi5vYmplY3QoeyB0eXBlOiB6MTYuc3RyaW5nKCkgfSkubG9vc2UoKVxuICAvLyBmYWxsYmFjayBmb3IgdW5rbm93biBjaHVua3Ncbl0pO1xuZnVuY3Rpb24gaXNUZXh0RGVsdGFDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5vdXRwdXRfdGV4dC5kZWx0YVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZU91dHB1dEl0ZW1Eb25lQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZU91dHB1dEl0ZW1Eb25lUmVhc29uaW5nQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGlzUmVzcG9uc2VPdXRwdXRJdGVtRG9uZUNodW5rKGNodW5rKSAmJiBjaHVuay5pdGVtLnR5cGUgPT09IFwicmVhc29uaW5nXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlRmluaXNoZWRDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5jb21wbGV0ZWRcIiB8fCBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmluY29tcGxldGVcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VDcmVhdGVkQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuY3JlYXRlZFwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuZnVuY3Rpb25fY2FsbF9hcmd1bWVudHMuZGVsdGFcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VDb2RlSW50ZXJwcmV0ZXJDYWxsQ29kZURlbHRhQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuY29kZV9pbnRlcnByZXRlcl9jYWxsX2NvZGUuZGVsdGFcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VDb2RlSW50ZXJwcmV0ZXJDYWxsQ29kZURvbmVDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5jb2RlX2ludGVycHJldGVyX2NhbGxfY29kZS5kb25lXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlT3V0cHV0SXRlbUFkZGVkQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uub3V0cHV0X2l0ZW0uYWRkZWRcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRSZWFzb25pbmdDaHVuayhjaHVuaykge1xuICByZXR1cm4gaXNSZXNwb25zZU91dHB1dEl0ZW1BZGRlZENodW5rKGNodW5rKSAmJiBjaHVuay5pdGVtLnR5cGUgPT09IFwicmVhc29uaW5nXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlQW5ub3RhdGlvbkFkZGVkQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2Uub3V0cHV0X3RleHQuYW5ub3RhdGlvbi5hZGRlZFwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlQYXJ0QWRkZWRDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5yZWFzb25pbmdfc3VtbWFyeV9wYXJ0LmFkZGVkXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVRleHREZWx0YUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3RleHQuZGVsdGFcIjtcbn1cbmZ1bmN0aW9uIGlzRXJyb3JDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJlcnJvclwiO1xufVxuZnVuY3Rpb24gZ2V0UmVzcG9uc2VzTW9kZWxDb25maWcobW9kZWxJZCkge1xuICBjb25zdCBzdXBwb3J0c0ZsZXhQcm9jZXNzaW5nMiA9IG1vZGVsSWQuc3RhcnRzV2l0aChcIm8zXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcIm80LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTVcIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIik7XG4gIGNvbnN0IHN1cHBvcnRzUHJpb3JpdHlQcm9jZXNzaW5nMiA9IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC00XCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTVcIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LW5hbm9cIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzNcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzQtbWluaVwiKTtcbiAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgcmVxdWlyZWRBdXRvVHJ1bmNhdGlvbjogZmFsc2UsXG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwic3lzdGVtXCIsXG4gICAgc3VwcG9ydHNGbGV4UHJvY2Vzc2luZzogc3VwcG9ydHNGbGV4UHJvY2Vzc2luZzIsXG4gICAgc3VwcG9ydHNQcmlvcml0eVByb2Nlc3Npbmc6IHN1cHBvcnRzUHJpb3JpdHlQcm9jZXNzaW5nMlxuICB9O1xuICBpZiAobW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtY2hhdFwiKSkge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5kZWZhdWx0cyxcbiAgICAgIGlzUmVhc29uaW5nTW9kZWw6IGZhbHNlXG4gICAgfTtcbiAgfVxuICBpZiAobW9kZWxJZC5zdGFydHNXaXRoKFwib1wiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJjb2RleC1cIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiY29tcHV0ZXItdXNlXCIpKSB7XG4gICAgaWYgKG1vZGVsSWQuc3RhcnRzV2l0aChcIm8xLW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzEtcHJldmlld1wiKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICAgIGlzUmVhc29uaW5nTW9kZWw6IHRydWUsXG4gICAgICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcInJlbW92ZVwiXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4uZGVmYXVsdHMsXG4gICAgICBpc1JlYXNvbmluZ01vZGVsOiB0cnVlLFxuICAgICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwiZGV2ZWxvcGVyXCJcbiAgICB9O1xuICB9XG4gIHJldHVybiB7XG4gICAgLi4uZGVmYXVsdHMsXG4gICAgaXNSZWFzb25pbmdNb2RlbDogZmFsc2VcbiAgfTtcbn1cbnZhciBvcGVuYWlSZXNwb25zZXNQcm92aWRlck9wdGlvbnNTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgaW5jbHVkZTogejE2LmFycmF5KFxuICAgIHoxNi5lbnVtKFtcbiAgICAgIFwicmVhc29uaW5nLmVuY3J5cHRlZF9jb250ZW50XCIsXG4gICAgICBcImZpbGVfc2VhcmNoX2NhbGwucmVzdWx0c1wiLFxuICAgICAgXCJtZXNzYWdlLm91dHB1dF90ZXh0LmxvZ3Byb2JzXCJcbiAgICBdKVxuICApLm51bGxpc2goKSxcbiAgaW5zdHJ1Y3Rpb25zOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9rZW5zLlxuICAgKlxuICAgKiBTZXR0aW5nIHRvIHRydWUgd2lsbCByZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMgdGhhdFxuICAgKiB3ZXJlIGdlbmVyYXRlZC5cbiAgICpcbiAgICogU2V0dGluZyB0byBhIG51bWJlciB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRvcCBuXG4gICAqIHRva2VucyB0aGF0IHdlcmUgZ2VuZXJhdGVkLlxuICAgKlxuICAgKiBAc2VlIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvcmVzcG9uc2VzL2NyZWF0ZVxuICAgKiBAc2VlIGh0dHBzOi8vY29va2Jvb2sub3BlbmFpLmNvbS9leGFtcGxlcy91c2luZ19sb2dwcm9ic1xuICAgKi9cbiAgbG9ncHJvYnM6IHoxNi51bmlvbihbejE2LmJvb2xlYW4oKSwgejE2Lm51bWJlcigpLm1pbigxKS5tYXgoVE9QX0xPR1BST0JTX01BWCldKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRvdGFsIGNhbGxzIHRvIGJ1aWx0LWluIHRvb2xzIHRoYXQgY2FuIGJlIHByb2Nlc3NlZCBpbiBhIHJlc3BvbnNlLlxuICAgKiBUaGlzIG1heGltdW0gbnVtYmVyIGFwcGxpZXMgYWNyb3NzIGFsbCBidWlsdC1pbiB0b29sIGNhbGxzLCBub3QgcGVyIGluZGl2aWR1YWwgdG9vbC5cbiAgICogQW55IGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2FsbCBhIHRvb2wgYnkgdGhlIG1vZGVsIHdpbGwgYmUgaWdub3JlZC5cbiAgICovXG4gIG1heFRvb2xDYWxsczogejE2Lm51bWJlcigpLm51bGxpc2goKSxcbiAgbWV0YWRhdGE6IHoxNi5hbnkoKS5udWxsaXNoKCksXG4gIHBhcmFsbGVsVG9vbENhbGxzOiB6MTYuYm9vbGVhbigpLm51bGxpc2goKSxcbiAgcHJldmlvdXNSZXNwb25zZUlkOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBwcm9tcHRDYWNoZUtleTogejE2LnN0cmluZygpLm51bGxpc2goKSxcbiAgcmVhc29uaW5nRWZmb3J0OiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICByZWFzb25pbmdTdW1tYXJ5OiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBzYWZldHlJZGVudGlmaWVyOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBzZXJ2aWNlVGllcjogejE2LmVudW0oW1wiYXV0b1wiLCBcImZsZXhcIiwgXCJwcmlvcml0eVwiXSkubnVsbGlzaCgpLFxuICBzdG9yZTogejE2LmJvb2xlYW4oKS5udWxsaXNoKCksXG4gIHN0cmljdEpzb25TY2hlbWE6IHoxNi5ib29sZWFuKCkubnVsbGlzaCgpLFxuICB0ZXh0VmVyYm9zaXR5OiB6MTYuZW51bShbXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdKS5udWxsaXNoKCksXG4gIHVzZXI6IHoxNi5zdHJpbmcoKS5udWxsaXNoKClcbn0pO1xuXG4vLyBzcmMvc3BlZWNoL29wZW5haS1zcGVlY2gtbW9kZWwudHNcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzIGFzIGNvbWJpbmVIZWFkZXJzNixcbiAgY3JlYXRlQmluYXJ5UmVzcG9uc2VIYW5kbGVyLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczYsXG4gIHBvc3RKc29uVG9BcGkgYXMgcG9zdEpzb25Ub0FwaTZcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejE3IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIE9wZW5BSVByb3ZpZGVyT3B0aW9uc1NjaGVtYSA9IHoxNy5vYmplY3Qoe1xuICBpbnN0cnVjdGlvbnM6IHoxNy5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHNwZWVkOiB6MTcubnVtYmVyKCkubWluKDAuMjUpLm1heCg0KS5kZWZhdWx0KDEpLm51bGxpc2goKVxufSk7XG52YXIgT3BlbkFJU3BlZWNoTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGdldEFyZ3Moe1xuICAgIHRleHQsXG4gICAgdm9pY2UgPSBcImFsbG95XCIsXG4gICAgb3V0cHV0Rm9ybWF0ID0gXCJtcDNcIixcbiAgICBzcGVlZCxcbiAgICBpbnN0cnVjdGlvbnMsXG4gICAgbGFuZ3VhZ2UsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGNvbnN0IG9wZW5BSU9wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczYoe1xuICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IE9wZW5BSVByb3ZpZGVyT3B0aW9uc1NjaGVtYVxuICAgIH0pO1xuICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgIGlucHV0OiB0ZXh0LFxuICAgICAgdm9pY2UsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IFwibXAzXCIsXG4gICAgICBzcGVlZCxcbiAgICAgIGluc3RydWN0aW9uc1xuICAgIH07XG4gICAgaWYgKG91dHB1dEZvcm1hdCkge1xuICAgICAgaWYgKFtcIm1wM1wiLCBcIm9wdXNcIiwgXCJhYWNcIiwgXCJmbGFjXCIsIFwid2F2XCIsIFwicGNtXCJdLmluY2x1ZGVzKG91dHB1dEZvcm1hdCkpIHtcbiAgICAgICAgcmVxdWVzdEJvZHkucmVzcG9uc2VfZm9ybWF0ID0gb3V0cHV0Rm9ybWF0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgICAgc2V0dGluZzogXCJvdXRwdXRGb3JtYXRcIixcbiAgICAgICAgICBkZXRhaWxzOiBgVW5zdXBwb3J0ZWQgb3V0cHV0IGZvcm1hdDogJHtvdXRwdXRGb3JtYXR9LiBVc2luZyBtcDMgaW5zdGVhZC5gXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3BlbkFJT3B0aW9ucykge1xuICAgICAgY29uc3Qgc3BlZWNoTW9kZWxPcHRpb25zID0ge307XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBzcGVlY2hNb2RlbE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzcGVlY2hNb2RlbE9wdGlvbnNba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICByZXF1ZXN0Qm9keVtrZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxhbmd1YWdlKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwibGFuZ3VhZ2VcIixcbiAgICAgICAgZGV0YWlsczogYE9wZW5BSSBzcGVlY2ggbW9kZWxzIGRvIG5vdCBzdXBwb3J0IGxhbmd1YWdlIHNlbGVjdGlvbi4gTGFuZ3VhZ2UgcGFyYW1ldGVyIFwiJHtsYW5ndWFnZX1cIiB3YXMgaWdub3JlZC5gXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcXVlc3RCb2R5LFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvR2VuZXJhdGUob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gKF9jID0gKF9iID0gKF9hID0gdGhpcy5jb25maWcuX2ludGVybmFsKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY3VycmVudERhdGUpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKF9hKSkgIT0gbnVsbCA/IF9jIDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgY29uc3QgeyByZXF1ZXN0Qm9keSwgd2FybmluZ3MgfSA9IGF3YWl0IHRoaXMuZ2V0QXJncyhvcHRpb25zKTtcbiAgICBjb25zdCB7XG4gICAgICB2YWx1ZTogYXVkaW8sXG4gICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICByYXdWYWx1ZTogcmF3UmVzcG9uc2VcbiAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTYoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9hdWRpby9zcGVlY2hcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzNih0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5OiByZXF1ZXN0Qm9keSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlQmluYXJ5UmVzcG9uc2VIYW5kbGVyKCksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBhdWRpbyxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgcmVxdWVzdDoge1xuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcbiAgICAgIH0sXG4gICAgICByZXNwb25zZToge1xuICAgICAgICB0aW1lc3RhbXA6IGN1cnJlbnREYXRlLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgYm9keTogcmF3UmVzcG9uc2VcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuXG4vLyBzcmMvdHJhbnNjcmlwdGlvbi9vcGVuYWktdHJhbnNjcmlwdGlvbi1tb2RlbC50c1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnM3LFxuICBjb252ZXJ0QmFzZTY0VG9VaW50OEFycmF5LFxuICBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI2LFxuICBtZWRpYVR5cGVUb0V4dGVuc2lvbixcbiAgcGFyc2VQcm92aWRlck9wdGlvbnMgYXMgcGFyc2VQcm92aWRlck9wdGlvbnM3LFxuICBwb3N0Rm9ybURhdGFUb0FwaVxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTkgfSBmcm9tIFwiem9kL3Y0XCI7XG5cbi8vIHNyYy90cmFuc2NyaXB0aW9uL29wZW5haS10cmFuc2NyaXB0aW9uLW9wdGlvbnMudHNcbmltcG9ydCB7IHogYXMgejE4IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIG9wZW5BSVRyYW5zY3JpcHRpb25Qcm92aWRlck9wdGlvbnMgPSB6MTgub2JqZWN0KHtcbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgaW5mb3JtYXRpb24gdG8gaW5jbHVkZSBpbiB0aGUgdHJhbnNjcmlwdGlvbiByZXNwb25zZS5cbiAgICovXG4gIGluY2x1ZGU6IHoxOC5hcnJheSh6MTguc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBUaGUgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IGF1ZGlvIGluIElTTy02MzktMSBmb3JtYXQuXG4gICAqL1xuICBsYW5ndWFnZTogejE4LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBBbiBvcHRpb25hbCB0ZXh0IHRvIGd1aWRlIHRoZSBtb2RlbCdzIHN0eWxlIG9yIGNvbnRpbnVlIGEgcHJldmlvdXMgYXVkaW8gc2VnbWVudC5cbiAgICovXG4gIHByb21wdDogejE4LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS5cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cbiAgdGVtcGVyYXR1cmU6IHoxOC5udW1iZXIoKS5taW4oMCkubWF4KDEpLmRlZmF1bHQoMCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFRoZSB0aW1lc3RhbXAgZ3JhbnVsYXJpdGllcyB0byBwb3B1bGF0ZSBmb3IgdGhpcyB0cmFuc2NyaXB0aW9uLlxuICAgKiBAZGVmYXVsdCBbJ3NlZ21lbnQnXVxuICAgKi9cbiAgdGltZXN0YW1wR3JhbnVsYXJpdGllczogejE4LmFycmF5KHoxOC5lbnVtKFtcIndvcmRcIiwgXCJzZWdtZW50XCJdKSkuZGVmYXVsdChbXCJzZWdtZW50XCJdKS5vcHRpb25hbCgpXG59KTtcblxuLy8gc3JjL3RyYW5zY3JpcHRpb24vb3BlbmFpLXRyYW5zY3JpcHRpb24tbW9kZWwudHNcbnZhciBsYW5ndWFnZU1hcCA9IHtcbiAgYWZyaWthYW5zOiBcImFmXCIsXG4gIGFyYWJpYzogXCJhclwiLFxuICBhcm1lbmlhbjogXCJoeVwiLFxuICBhemVyYmFpamFuaTogXCJhelwiLFxuICBiZWxhcnVzaWFuOiBcImJlXCIsXG4gIGJvc25pYW46IFwiYnNcIixcbiAgYnVsZ2FyaWFuOiBcImJnXCIsXG4gIGNhdGFsYW46IFwiY2FcIixcbiAgY2hpbmVzZTogXCJ6aFwiLFxuICBjcm9hdGlhbjogXCJoclwiLFxuICBjemVjaDogXCJjc1wiLFxuICBkYW5pc2g6IFwiZGFcIixcbiAgZHV0Y2g6IFwibmxcIixcbiAgZW5nbGlzaDogXCJlblwiLFxuICBlc3RvbmlhbjogXCJldFwiLFxuICBmaW5uaXNoOiBcImZpXCIsXG4gIGZyZW5jaDogXCJmclwiLFxuICBnYWxpY2lhbjogXCJnbFwiLFxuICBnZXJtYW46IFwiZGVcIixcbiAgZ3JlZWs6IFwiZWxcIixcbiAgaGVicmV3OiBcImhlXCIsXG4gIGhpbmRpOiBcImhpXCIsXG4gIGh1bmdhcmlhbjogXCJodVwiLFxuICBpY2VsYW5kaWM6IFwiaXNcIixcbiAgaW5kb25lc2lhbjogXCJpZFwiLFxuICBpdGFsaWFuOiBcIml0XCIsXG4gIGphcGFuZXNlOiBcImphXCIsXG4gIGthbm5hZGE6IFwia25cIixcbiAga2F6YWtoOiBcImtrXCIsXG4gIGtvcmVhbjogXCJrb1wiLFxuICBsYXR2aWFuOiBcImx2XCIsXG4gIGxpdGh1YW5pYW46IFwibHRcIixcbiAgbWFjZWRvbmlhbjogXCJta1wiLFxuICBtYWxheTogXCJtc1wiLFxuICBtYXJhdGhpOiBcIm1yXCIsXG4gIG1hb3JpOiBcIm1pXCIsXG4gIG5lcGFsaTogXCJuZVwiLFxuICBub3J3ZWdpYW46IFwibm9cIixcbiAgcGVyc2lhbjogXCJmYVwiLFxuICBwb2xpc2g6IFwicGxcIixcbiAgcG9ydHVndWVzZTogXCJwdFwiLFxuICByb21hbmlhbjogXCJyb1wiLFxuICBydXNzaWFuOiBcInJ1XCIsXG4gIHNlcmJpYW46IFwic3JcIixcbiAgc2xvdmFrOiBcInNrXCIsXG4gIHNsb3ZlbmlhbjogXCJzbFwiLFxuICBzcGFuaXNoOiBcImVzXCIsXG4gIHN3YWhpbGk6IFwic3dcIixcbiAgc3dlZGlzaDogXCJzdlwiLFxuICB0YWdhbG9nOiBcInRsXCIsXG4gIHRhbWlsOiBcInRhXCIsXG4gIHRoYWk6IFwidGhcIixcbiAgdHVya2lzaDogXCJ0clwiLFxuICB1a3JhaW5pYW46IFwidWtcIixcbiAgdXJkdTogXCJ1clwiLFxuICB2aWV0bmFtZXNlOiBcInZpXCIsXG4gIHdlbHNoOiBcImN5XCJcbn07XG52YXIgT3BlbkFJVHJhbnNjcmlwdGlvbk1vZGVsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihtb2RlbElkLCBjb25maWcpIHtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuc3BlY2lmaWNhdGlvblZlcnNpb24gPSBcInYyXCI7XG4gIH1cbiAgZ2V0IHByb3ZpZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlcjtcbiAgfVxuICBhc3luYyBnZXRBcmdzKHtcbiAgICBhdWRpbyxcbiAgICBtZWRpYVR5cGUsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGNvbnN0IG9wZW5BSU9wdGlvbnMgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczcoe1xuICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IG9wZW5BSVRyYW5zY3JpcHRpb25Qcm92aWRlck9wdGlvbnNcbiAgICB9KTtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGNvbnN0IGJsb2IgPSBhdWRpbyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBuZXcgQmxvYihbYXVkaW9dKSA6IG5ldyBCbG9iKFtjb252ZXJ0QmFzZTY0VG9VaW50OEFycmF5KGF1ZGlvKV0pO1xuICAgIGZvcm1EYXRhLmFwcGVuZChcIm1vZGVsXCIsIHRoaXMubW9kZWxJZCk7XG4gICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IG1lZGlhVHlwZVRvRXh0ZW5zaW9uKG1lZGlhVHlwZSk7XG4gICAgZm9ybURhdGEuYXBwZW5kKFxuICAgICAgXCJmaWxlXCIsXG4gICAgICBuZXcgRmlsZShbYmxvYl0sIFwiYXVkaW9cIiwgeyB0eXBlOiBtZWRpYVR5cGUgfSksXG4gICAgICBgYXVkaW8uJHtmaWxlRXh0ZW5zaW9ufWBcbiAgICApO1xuICAgIGlmIChvcGVuQUlPcHRpb25zKSB7XG4gICAgICBjb25zdCB0cmFuc2NyaXB0aW9uTW9kZWxPcHRpb25zID0ge1xuICAgICAgICBpbmNsdWRlOiBvcGVuQUlPcHRpb25zLmluY2x1ZGUsXG4gICAgICAgIGxhbmd1YWdlOiBvcGVuQUlPcHRpb25zLmxhbmd1YWdlLFxuICAgICAgICBwcm9tcHQ6IG9wZW5BSU9wdGlvbnMucHJvbXB0LFxuICAgICAgICAvLyBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9hcGktcmVmZXJlbmNlL2F1ZGlvL2NyZWF0ZVRyYW5zY3JpcHRpb24jYXVkaW9fY3JlYXRldHJhbnNjcmlwdGlvbi1yZXNwb25zZV9mb3JtYXRcbiAgICAgICAgLy8gcHJlZmVyIHZlcmJvc2VfanNvbiB0byBnZXQgc2VnbWVudHMgZm9yIG1vZGVscyB0aGF0IHN1cHBvcnQgaXRcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiBbXG4gICAgICAgICAgXCJncHQtNG8tdHJhbnNjcmliZVwiLFxuICAgICAgICAgIFwiZ3B0LTRvLW1pbmktdHJhbnNjcmliZVwiXG4gICAgICAgIF0uaW5jbHVkZXModGhpcy5tb2RlbElkKSA/IFwianNvblwiIDogXCJ2ZXJib3NlX2pzb25cIixcbiAgICAgICAgdGVtcGVyYXR1cmU6IG9wZW5BSU9wdGlvbnMudGVtcGVyYXR1cmUsXG4gICAgICAgIHRpbWVzdGFtcF9ncmFudWxhcml0aWVzOiBvcGVuQUlPcHRpb25zLnRpbWVzdGFtcEdyYW51bGFyaXRpZXNcbiAgICAgIH07XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0cmFuc2NyaXB0aW9uTW9kZWxPcHRpb25zKSkge1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChgJHtrZXl9W11gLCBTdHJpbmcoaXRlbSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCBTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZvcm1EYXRhLFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvR2VuZXJhdGUob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSAoX2MgPSAoX2IgPSAoX2EgPSB0aGlzLmNvbmZpZy5faW50ZXJuYWwpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jdXJyZW50RGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpKSAhPSBudWxsID8gX2MgOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICBjb25zdCB7IGZvcm1EYXRhLCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHtcbiAgICAgIHZhbHVlOiByZXNwb25zZSxcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHJhd1ZhbHVlOiByYXdSZXNwb25zZVxuICAgIH0gPSBhd2FpdCBwb3N0Rm9ybURhdGFUb0FwaSh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2F1ZGlvL3RyYW5zY3JpcHRpb25zXCIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiBjb21iaW5lSGVhZGVyczcodGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgZm9ybURhdGEsXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI2KFxuICAgICAgICBvcGVuYWlUcmFuc2NyaXB0aW9uUmVzcG9uc2VTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGNvbnN0IGxhbmd1YWdlID0gcmVzcG9uc2UubGFuZ3VhZ2UgIT0gbnVsbCAmJiByZXNwb25zZS5sYW5ndWFnZSBpbiBsYW5ndWFnZU1hcCA/IGxhbmd1YWdlTWFwW3Jlc3BvbnNlLmxhbmd1YWdlXSA6IHZvaWQgMDtcbiAgICByZXR1cm4ge1xuICAgICAgdGV4dDogcmVzcG9uc2UudGV4dCxcbiAgICAgIHNlZ21lbnRzOiAoX2cgPSAoX2YgPSAoX2QgPSByZXNwb25zZS5zZWdtZW50cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLm1hcCgoc2VnbWVudCkgPT4gKHtcbiAgICAgICAgdGV4dDogc2VnbWVudC50ZXh0LFxuICAgICAgICBzdGFydFNlY29uZDogc2VnbWVudC5zdGFydCxcbiAgICAgICAgZW5kU2Vjb25kOiBzZWdtZW50LmVuZFxuICAgICAgfSkpKSAhPSBudWxsID8gX2YgOiAoX2UgPSByZXNwb25zZS53b3JkcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLm1hcCgod29yZCkgPT4gKHtcbiAgICAgICAgdGV4dDogd29yZC53b3JkLFxuICAgICAgICBzdGFydFNlY29uZDogd29yZC5zdGFydCxcbiAgICAgICAgZW5kU2Vjb25kOiB3b3JkLmVuZFxuICAgICAgfSkpKSAhPSBudWxsID8gX2cgOiBbXSxcbiAgICAgIGxhbmd1YWdlLFxuICAgICAgZHVyYXRpb25JblNlY29uZHM6IChfaCA9IHJlc3BvbnNlLmR1cmF0aW9uKSAhPSBudWxsID8gX2ggOiB2b2lkIDAsXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHRpbWVzdGFtcDogY3VycmVudERhdGUsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBib2R5OiByYXdSZXNwb25zZVxuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG52YXIgb3BlbmFpVHJhbnNjcmlwdGlvblJlc3BvbnNlU2NoZW1hID0gejE5Lm9iamVjdCh7XG4gIHRleHQ6IHoxOS5zdHJpbmcoKSxcbiAgbGFuZ3VhZ2U6IHoxOS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIGR1cmF0aW9uOiB6MTkubnVtYmVyKCkubnVsbGlzaCgpLFxuICB3b3JkczogejE5LmFycmF5KFxuICAgIHoxOS5vYmplY3Qoe1xuICAgICAgd29yZDogejE5LnN0cmluZygpLFxuICAgICAgc3RhcnQ6IHoxOS5udW1iZXIoKSxcbiAgICAgIGVuZDogejE5Lm51bWJlcigpXG4gICAgfSlcbiAgKS5udWxsaXNoKCksXG4gIHNlZ21lbnRzOiB6MTkuYXJyYXkoXG4gICAgejE5Lm9iamVjdCh7XG4gICAgICBpZDogejE5Lm51bWJlcigpLFxuICAgICAgc2VlazogejE5Lm51bWJlcigpLFxuICAgICAgc3RhcnQ6IHoxOS5udW1iZXIoKSxcbiAgICAgIGVuZDogejE5Lm51bWJlcigpLFxuICAgICAgdGV4dDogejE5LnN0cmluZygpLFxuICAgICAgdG9rZW5zOiB6MTkuYXJyYXkoejE5Lm51bWJlcigpKSxcbiAgICAgIHRlbXBlcmF0dXJlOiB6MTkubnVtYmVyKCksXG4gICAgICBhdmdfbG9ncHJvYjogejE5Lm51bWJlcigpLFxuICAgICAgY29tcHJlc3Npb25fcmF0aW86IHoxOS5udW1iZXIoKSxcbiAgICAgIG5vX3NwZWVjaF9wcm9iOiB6MTkubnVtYmVyKClcbiAgICB9KVxuICApLm51bGxpc2goKVxufSk7XG5cbi8vIHNyYy92ZXJzaW9uLnRzXG52YXIgVkVSU0lPTiA9IHRydWUgPyBcIjIuMC40NFwiIDogXCIwLjAuMC10ZXN0XCI7XG5cbi8vIHNyYy9vcGVuYWktcHJvdmlkZXIudHNcbmZ1bmN0aW9uIGNyZWF0ZU9wZW5BSShvcHRpb25zID0ge30pIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgYmFzZVVSTCA9IChfYSA9IHdpdGhvdXRUcmFpbGluZ1NsYXNoKFxuICAgIGxvYWRPcHRpb25hbFNldHRpbmcoe1xuICAgICAgc2V0dGluZ1ZhbHVlOiBvcHRpb25zLmJhc2VVUkwsXG4gICAgICBlbnZpcm9ubWVudFZhcmlhYmxlTmFtZTogXCJPUEVOQUlfQkFTRV9VUkxcIlxuICAgIH0pXG4gICkpICE9IG51bGwgPyBfYSA6IFwiaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MVwiO1xuICBjb25zdCBwcm92aWRlck5hbWUgPSAoX2IgPSBvcHRpb25zLm5hbWUpICE9IG51bGwgPyBfYiA6IFwib3BlbmFpXCI7XG4gIGNvbnN0IGdldEhlYWRlcnMgPSAoKSA9PiB3aXRoVXNlckFnZW50U3VmZml4KFxuICAgIHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtsb2FkQXBpS2V5KHtcbiAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSxcbiAgICAgICAgZW52aXJvbm1lbnRWYXJpYWJsZU5hbWU6IFwiT1BFTkFJX0FQSV9LRVlcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiT3BlbkFJXCJcbiAgICAgIH0pfWAsXG4gICAgICBcIk9wZW5BSS1Pcmdhbml6YXRpb25cIjogb3B0aW9ucy5vcmdhbml6YXRpb24sXG4gICAgICBcIk9wZW5BSS1Qcm9qZWN0XCI6IG9wdGlvbnMucHJvamVjdCxcbiAgICAgIC4uLm9wdGlvbnMuaGVhZGVyc1xuICAgIH0sXG4gICAgYGFpLXNkay9vcGVuYWkvJHtWRVJTSU9OfWBcbiAgKTtcbiAgY29uc3QgY3JlYXRlQ2hhdE1vZGVsID0gKG1vZGVsSWQpID0+IG5ldyBPcGVuQUlDaGF0TGFuZ3VhZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0uY2hhdGAsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlQ29tcGxldGlvbk1vZGVsID0gKG1vZGVsSWQpID0+IG5ldyBPcGVuQUlDb21wbGV0aW9uTGFuZ3VhZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0uY29tcGxldGlvbmAsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlRW1iZWRkaW5nTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSUVtYmVkZGluZ01vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5lbWJlZGRpbmdgLFxuICAgIHVybDogKHsgcGF0aCB9KSA9PiBgJHtiYXNlVVJMfSR7cGF0aH1gLFxuICAgIGhlYWRlcnM6IGdldEhlYWRlcnMsXG4gICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2hcbiAgfSk7XG4gIGNvbnN0IGNyZWF0ZUltYWdlTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSUltYWdlTW9kZWwobW9kZWxJZCwge1xuICAgIHByb3ZpZGVyOiBgJHtwcm92aWRlck5hbWV9LmltYWdlYCxcbiAgICB1cmw6ICh7IHBhdGggfSkgPT4gYCR7YmFzZVVSTH0ke3BhdGh9YCxcbiAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoXG4gIH0pO1xuICBjb25zdCBjcmVhdGVUcmFuc2NyaXB0aW9uTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSVRyYW5zY3JpcHRpb25Nb2RlbChtb2RlbElkLCB7XG4gICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0udHJhbnNjcmlwdGlvbmAsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlU3BlZWNoTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSVNwZWVjaE1vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5zcGVlY2hgLFxuICAgIHVybDogKHsgcGF0aCB9KSA9PiBgJHtiYXNlVVJMfSR7cGF0aH1gLFxuICAgIGhlYWRlcnM6IGdldEhlYWRlcnMsXG4gICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2hcbiAgfSk7XG4gIGNvbnN0IGNyZWF0ZUxhbmd1YWdlTW9kZWwgPSAobW9kZWxJZCkgPT4ge1xuICAgIGlmIChuZXcudGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiVGhlIE9wZW5BSSBtb2RlbCBmdW5jdGlvbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggdGhlIG5ldyBrZXl3b3JkLlwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlUmVzcG9uc2VzTW9kZWwobW9kZWxJZCk7XG4gIH07XG4gIGNvbnN0IGNyZWF0ZVJlc3BvbnNlc01vZGVsID0gKG1vZGVsSWQpID0+IHtcbiAgICByZXR1cm4gbmV3IE9wZW5BSVJlc3BvbnNlc0xhbmd1YWdlTW9kZWwobW9kZWxJZCwge1xuICAgICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0ucmVzcG9uc2VzYCxcbiAgICAgIHVybDogKHsgcGF0aCB9KSA9PiBgJHtiYXNlVVJMfSR7cGF0aH1gLFxuICAgICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgICAgZmlsZUlkUHJlZml4ZXM6IFtcImZpbGUtXCJdXG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHByb3ZpZGVyID0gZnVuY3Rpb24obW9kZWxJZCkge1xuICAgIHJldHVybiBjcmVhdGVMYW5ndWFnZU1vZGVsKG1vZGVsSWQpO1xuICB9O1xuICBwcm92aWRlci5sYW5ndWFnZU1vZGVsID0gY3JlYXRlTGFuZ3VhZ2VNb2RlbDtcbiAgcHJvdmlkZXIuY2hhdCA9IGNyZWF0ZUNoYXRNb2RlbDtcbiAgcHJvdmlkZXIuY29tcGxldGlvbiA9IGNyZWF0ZUNvbXBsZXRpb25Nb2RlbDtcbiAgcHJvdmlkZXIucmVzcG9uc2VzID0gY3JlYXRlUmVzcG9uc2VzTW9kZWw7XG4gIHByb3ZpZGVyLmVtYmVkZGluZyA9IGNyZWF0ZUVtYmVkZGluZ01vZGVsO1xuICBwcm92aWRlci50ZXh0RW1iZWRkaW5nID0gY3JlYXRlRW1iZWRkaW5nTW9kZWw7XG4gIHByb3ZpZGVyLnRleHRFbWJlZGRpbmdNb2RlbCA9IGNyZWF0ZUVtYmVkZGluZ01vZGVsO1xuICBwcm92aWRlci5pbWFnZSA9IGNyZWF0ZUltYWdlTW9kZWw7XG4gIHByb3ZpZGVyLmltYWdlTW9kZWwgPSBjcmVhdGVJbWFnZU1vZGVsO1xuICBwcm92aWRlci50cmFuc2NyaXB0aW9uID0gY3JlYXRlVHJhbnNjcmlwdGlvbk1vZGVsO1xuICBwcm92aWRlci50cmFuc2NyaXB0aW9uTW9kZWwgPSBjcmVhdGVUcmFuc2NyaXB0aW9uTW9kZWw7XG4gIHByb3ZpZGVyLnNwZWVjaCA9IGNyZWF0ZVNwZWVjaE1vZGVsO1xuICBwcm92aWRlci5zcGVlY2hNb2RlbCA9IGNyZWF0ZVNwZWVjaE1vZGVsO1xuICBwcm92aWRlci50b29scyA9IG9wZW5haVRvb2xzO1xuICByZXR1cm4gcHJvdmlkZXI7XG59XG52YXIgb3BlbmFpID0gY3JlYXRlT3BlbkFJKCk7XG5leHBvcnQge1xuICBWRVJTSU9OLFxuICBjcmVhdGVPcGVuQUksXG4gIG9wZW5haVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(instrument)/../../node_modules/.pnpm/@ai-sdk+openai@2.0.44_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@ai-sdk+openai@2.0.44_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs":
/*!*************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@ai-sdk+openai@2.0.44_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VERSION: () => (/* binding */ VERSION),\n/* harmony export */   createOpenAI: () => (/* binding */ createOpenAI),\n/* harmony export */   openai: () => (/* binding */ openai)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ai-sdk/provider-utils */ \"(rsc)/../../node_modules/.pnpm/@ai-sdk+provider-utils@3.0.10_zod@3.25.76/node_modules/@ai-sdk/provider-utils/dist/index.mjs\");\n/* harmony import */ var _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/provider */ \"(rsc)/../../node_modules/.pnpm/@ai-sdk+provider@2.0.0/node_modules/@ai-sdk/provider/dist/index.mjs\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/classic/schemas.js\");\n/* harmony import */ var zod_v4__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4 */ \"(rsc)/../../node_modules/.pnpm/zod@3.25.76/node_modules/zod/v4/classic/coerce.js\");\n// src/openai-provider.ts\n\n\n// src/chat/openai-chat-language-model.ts\n\n\n\n\n// src/openai-error.ts\n\n\nvar openaiErrorDataSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    // The additional information below is handled loosely to support\n    // OpenAI-compatible providers that have slightly different error\n    // responses:\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.any().nullish(),\n    code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).nullish()\n  })\n});\nvar openaiFailedResponseHandler = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonErrorResponseHandler)({\n  errorSchema: openaiErrorDataSchema,\n  errorToMessage: (data) => data.error.message\n});\n\n// src/chat/convert-to-openai-chat-messages.ts\n\n\nfunction convertToOpenAIChatMessages({\n  prompt,\n  systemMessageMode = \"system\"\n}) {\n  const messages = [];\n  const warnings = [];\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        switch (systemMessageMode) {\n          case \"system\": {\n            messages.push({ role: \"system\", content });\n            break;\n          }\n          case \"developer\": {\n            messages.push({ role: \"developer\", content });\n            break;\n          }\n          case \"remove\": {\n            warnings.push({\n              type: \"other\",\n              message: \"system messages are removed for this model\"\n            });\n            break;\n          }\n          default: {\n            const _exhaustiveCheck = systemMessageMode;\n            throw new Error(\n              `Unsupported system message mode: ${_exhaustiveCheck}`\n            );\n          }\n        }\n        break;\n      }\n      case \"user\": {\n        if (content.length === 1 && content[0].type === \"text\") {\n          messages.push({ role: \"user\", content: content[0].text });\n          break;\n        }\n        messages.push({\n          role: \"user\",\n          content: content.map((part, index) => {\n            var _a, _b, _c;\n            switch (part.type) {\n              case \"text\": {\n                return { type: \"text\", text: part.text };\n              }\n              case \"file\": {\n                if (part.mediaType.startsWith(\"image/\")) {\n                  const mediaType = part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType;\n                  return {\n                    type: \"image_url\",\n                    image_url: {\n                      url: part.data instanceof URL ? part.data.toString() : `data:${mediaType};base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`,\n                      // OpenAI specific extension: image detail\n                      detail: (_b = (_a = part.providerOptions) == null ? void 0 : _a.openai) == null ? void 0 : _b.imageDetail\n                    }\n                  };\n                } else if (part.mediaType.startsWith(\"audio/\")) {\n                  if (part.data instanceof URL) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                      functionality: \"audio file parts with URLs\"\n                    });\n                  }\n                  switch (part.mediaType) {\n                    case \"audio/wav\": {\n                      return {\n                        type: \"input_audio\",\n                        input_audio: {\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data),\n                          format: \"wav\"\n                        }\n                      };\n                    }\n                    case \"audio/mp3\":\n                    case \"audio/mpeg\": {\n                      return {\n                        type: \"input_audio\",\n                        input_audio: {\n                          data: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data),\n                          format: \"mp3\"\n                        }\n                      };\n                    }\n                    default: {\n                      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                        functionality: `audio content parts with media type ${part.mediaType}`\n                      });\n                    }\n                  }\n                } else if (part.mediaType === \"application/pdf\") {\n                  if (part.data instanceof URL) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                      functionality: \"PDF file parts with URLs\"\n                    });\n                  }\n                  return {\n                    type: \"file\",\n                    file: typeof part.data === \"string\" && part.data.startsWith(\"file-\") ? { file_id: part.data } : {\n                      filename: (_c = part.filename) != null ? _c : `part-${index}.pdf`,\n                      file_data: `data:application/pdf;base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    }\n                  };\n                } else {\n                  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                    functionality: `file part media type ${part.mediaType}`\n                  });\n                }\n              }\n            }\n          })\n        });\n        break;\n      }\n      case \"assistant\": {\n        let text = \"\";\n        const toolCalls = [];\n        for (const part of content) {\n          switch (part.type) {\n            case \"text\": {\n              text += part.text;\n              break;\n            }\n            case \"tool-call\": {\n              toolCalls.push({\n                id: part.toolCallId,\n                type: \"function\",\n                function: {\n                  name: part.toolName,\n                  arguments: JSON.stringify(part.input)\n                }\n              });\n              break;\n            }\n          }\n        }\n        messages.push({\n          role: \"assistant\",\n          content: text,\n          tool_calls: toolCalls.length > 0 ? toolCalls : void 0\n        });\n        break;\n      }\n      case \"tool\": {\n        for (const toolResponse of content) {\n          const output = toolResponse.output;\n          let contentValue;\n          switch (output.type) {\n            case \"text\":\n            case \"error-text\":\n              contentValue = output.value;\n              break;\n            case \"content\":\n            case \"json\":\n            case \"error-json\":\n              contentValue = JSON.stringify(output.value);\n              break;\n          }\n          messages.push({\n            role: \"tool\",\n            tool_call_id: toolResponse.toolCallId,\n            content: contentValue\n          });\n        }\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return { messages, warnings };\n}\n\n// src/chat/get-response-metadata.ts\nfunction getResponseMetadata({\n  id,\n  model,\n  created\n}) {\n  return {\n    id: id != null ? id : void 0,\n    modelId: model != null ? model : void 0,\n    timestamp: created != null ? new Date(created * 1e3) : void 0\n  };\n}\n\n// src/chat/map-openai-finish-reason.ts\nfunction mapOpenAIFinishReason(finishReason) {\n  switch (finishReason) {\n    case \"stop\":\n      return \"stop\";\n    case \"length\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    case \"function_call\":\n    case \"tool_calls\":\n      return \"tool-calls\";\n    default:\n      return \"unknown\";\n  }\n}\n\n// src/chat/openai-chat-options.ts\n\nvar openaiChatLanguageModelOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Modify the likelihood of specified tokens appearing in the completion.\n   *\n   * Accepts a JSON object that maps tokens (specified by their token ID in\n   * the GPT tokenizer) to an associated bias value from -100 to 100.\n   */\n  logitBias: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_3__.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()).optional(),\n  /**\n   * Return the log probabilities of the tokens.\n   *\n   * Setting to true will return the log probabilities of the tokens that\n   * were generated.\n   *\n   * Setting to a number will return the log probabilities of the top n\n   * tokens that were generated.\n   */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).optional(),\n  /**\n   * Whether to enable parallel function calling during tool use. Default to true.\n   */\n  parallelToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * A unique identifier representing your end-user, which can help OpenAI to\n   * monitor and detect abuse.\n   */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * Reasoning effort for reasoning models. Defaults to `medium`.\n   */\n  reasoningEffort: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"minimal\", \"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * Maximum number of completion tokens to generate. Useful for reasoning models.\n   */\n  maxCompletionTokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  /**\n   * Whether to enable persistence in responses API.\n   */\n  store: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Metadata to associate with the request.\n   */\n  metadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().max(64), zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().max(512)).optional(),\n  /**\n   * Parameters for prediction mode.\n   */\n  prediction: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.any()).optional(),\n  /**\n   * Whether to use structured outputs.\n   *\n   * @default true\n   */\n  structuredOutputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Service tier for the request.\n   * - 'auto': Default service tier\n   * - 'flex': 50% cheaper processing at the cost of increased latency. Only available for o3 and o4-mini models.\n   * - 'priority': Higher-speed processing with predictably low latency at premium cost. Available for Enterprise customers.\n   *\n   * @default 'auto'\n   */\n  serviceTier: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"flex\", \"priority\"]).optional(),\n  /**\n   * Whether to use strict JSON schema validation.\n   *\n   * @default false\n   */\n  strictJsonSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n   * Controls the verbosity of the model's responses.\n   * Lower values will result in more concise responses, while higher values will result in more verbose responses.\n   */\n  textVerbosity: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * A cache key for prompt caching. Allows manual control over prompt caching behavior.\n   * Useful for improving cache hit rates and working around automatic caching issues.\n   */\n  promptCacheKey: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * A stable identifier used to help detect users of your application\n   * that may be violating OpenAI's usage policies. The IDs should be a\n   * string that uniquely identifies each user. We recommend hashing their\n   * username or email address, in order to avoid sending us any identifying\n   * information.\n   */\n  safetyIdentifier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n// src/chat/openai-chat-prepare-tools.ts\n\nfunction prepareChatTools({\n  tools,\n  toolChoice,\n  structuredOutputs,\n  strictJsonSchema\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings };\n  }\n  const openaiTools2 = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case \"function\":\n        openaiTools2.push({\n          type: \"function\",\n          function: {\n            name: tool.name,\n            description: tool.description,\n            parameters: tool.inputSchema,\n            strict: structuredOutputs ? strictJsonSchema : void 0\n          }\n        });\n        break;\n      default:\n        toolWarnings.push({ type: \"unsupported-tool\", tool });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return { tools: openaiTools2, toolChoice: void 0, toolWarnings };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n    case \"none\":\n    case \"required\":\n      return { tools: openaiTools2, toolChoice: type, toolWarnings };\n    case \"tool\":\n      return {\n        tools: openaiTools2,\n        toolChoice: {\n          type: \"function\",\n          function: {\n            name: toolChoice.toolName\n          }\n        },\n        toolWarnings\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/chat/openai-chat-language-model.ts\nvar OpenAIChatLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      \"image/*\": [/^https?:\\/\\/.*$/]\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences,\n    responseFormat,\n    seed,\n    tools,\n    toolChoice,\n    providerOptions\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    const openaiOptions = (_a = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiChatLanguageModelOptions\n    })) != null ? _a : {};\n    const structuredOutputs = (_b = openaiOptions.structuredOutputs) != null ? _b : true;\n    if (topK != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"topK\"\n      });\n    }\n    if ((responseFormat == null ? void 0 : responseFormat.type) === \"json\" && responseFormat.schema != null && !structuredOutputs) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"responseFormat\",\n        details: \"JSON response format schema is only supported with structuredOutputs\"\n      });\n    }\n    const { messages, warnings: messageWarnings } = convertToOpenAIChatMessages(\n      {\n        prompt,\n        systemMessageMode: getSystemMessageMode(this.modelId)\n      }\n    );\n    warnings.push(...messageWarnings);\n    const strictJsonSchema = (_c = openaiOptions.strictJsonSchema) != null ? _c : false;\n    const baseArgs = {\n      // model id:\n      model: this.modelId,\n      // model specific settings:\n      logit_bias: openaiOptions.logitBias,\n      logprobs: openaiOptions.logprobs === true || typeof openaiOptions.logprobs === \"number\" ? true : void 0,\n      top_logprobs: typeof openaiOptions.logprobs === \"number\" ? openaiOptions.logprobs : typeof openaiOptions.logprobs === \"boolean\" ? openaiOptions.logprobs ? 0 : void 0 : void 0,\n      user: openaiOptions.user,\n      parallel_tool_calls: openaiOptions.parallelToolCalls,\n      // standardized settings:\n      max_tokens: maxOutputTokens,\n      temperature,\n      top_p: topP,\n      frequency_penalty: frequencyPenalty,\n      presence_penalty: presencePenalty,\n      response_format: (responseFormat == null ? void 0 : responseFormat.type) === \"json\" ? structuredOutputs && responseFormat.schema != null ? {\n        type: \"json_schema\",\n        json_schema: {\n          schema: responseFormat.schema,\n          strict: strictJsonSchema,\n          name: (_d = responseFormat.name) != null ? _d : \"response\",\n          description: responseFormat.description\n        }\n      } : { type: \"json_object\" } : void 0,\n      stop: stopSequences,\n      seed,\n      verbosity: openaiOptions.textVerbosity,\n      // openai specific settings:\n      // TODO AI SDK 6: remove, we auto-map maxOutputTokens now\n      max_completion_tokens: openaiOptions.maxCompletionTokens,\n      store: openaiOptions.store,\n      metadata: openaiOptions.metadata,\n      prediction: openaiOptions.prediction,\n      reasoning_effort: openaiOptions.reasoningEffort,\n      service_tier: openaiOptions.serviceTier,\n      prompt_cache_key: openaiOptions.promptCacheKey,\n      safety_identifier: openaiOptions.safetyIdentifier,\n      // messages:\n      messages\n    };\n    if (isReasoningModel(this.modelId)) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_p != null) {\n        baseArgs.top_p = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topP\",\n          details: \"topP is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.frequency_penalty != null) {\n        baseArgs.frequency_penalty = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"frequencyPenalty\",\n          details: \"frequencyPenalty is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.presence_penalty != null) {\n        baseArgs.presence_penalty = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"presencePenalty\",\n          details: \"presencePenalty is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.logit_bias != null) {\n        baseArgs.logit_bias = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"logitBias is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.logprobs != null) {\n        baseArgs.logprobs = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"logprobs is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_logprobs != null) {\n        baseArgs.top_logprobs = void 0;\n        warnings.push({\n          type: \"other\",\n          message: \"topLogprobs is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.max_tokens != null) {\n        if (baseArgs.max_completion_tokens == null) {\n          baseArgs.max_completion_tokens = baseArgs.max_tokens;\n        }\n        baseArgs.max_tokens = void 0;\n      }\n    } else if (this.modelId.startsWith(\"gpt-4o-search-preview\") || this.modelId.startsWith(\"gpt-4o-mini-search-preview\")) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for the search preview models and has been removed.\"\n        });\n      }\n    }\n    if (openaiOptions.serviceTier === \"flex\" && !supportsFlexProcessing(this.modelId)) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"flex processing is only available for o3, o4-mini, and gpt-5 models\"\n      });\n      baseArgs.service_tier = void 0;\n    }\n    if (openaiOptions.serviceTier === \"priority\" && !supportsPriorityProcessing(this.modelId)) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported\"\n      });\n      baseArgs.service_tier = void 0;\n    }\n    const {\n      tools: openaiTools2,\n      toolChoice: openaiToolChoice,\n      toolWarnings\n    } = prepareChatTools({\n      tools,\n      toolChoice,\n      structuredOutputs,\n      strictJsonSchema\n    });\n    return {\n      args: {\n        ...baseArgs,\n        tools: openaiTools2,\n        tool_choice: openaiToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings]\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;\n    const { args: body, warnings } = await this.getArgs(options);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/chat/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiChatResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const choice = response.choices[0];\n    const content = [];\n    const text = choice.message.content;\n    if (text != null && text.length > 0) {\n      content.push({ type: \"text\", text });\n    }\n    for (const toolCall of (_a = choice.message.tool_calls) != null ? _a : []) {\n      content.push({\n        type: \"tool-call\",\n        toolCallId: (_b = toolCall.id) != null ? _b : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n        toolName: toolCall.function.name,\n        input: toolCall.function.arguments\n      });\n    }\n    for (const annotation of (_c = choice.message.annotations) != null ? _c : []) {\n      content.push({\n        type: \"source\",\n        sourceType: \"url\",\n        id: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n        url: annotation.url,\n        title: annotation.title\n      });\n    }\n    const completionTokenDetails = (_d = response.usage) == null ? void 0 : _d.completion_tokens_details;\n    const promptTokenDetails = (_e = response.usage) == null ? void 0 : _e.prompt_tokens_details;\n    const providerMetadata = { openai: {} };\n    if ((completionTokenDetails == null ? void 0 : completionTokenDetails.accepted_prediction_tokens) != null) {\n      providerMetadata.openai.acceptedPredictionTokens = completionTokenDetails == null ? void 0 : completionTokenDetails.accepted_prediction_tokens;\n    }\n    if ((completionTokenDetails == null ? void 0 : completionTokenDetails.rejected_prediction_tokens) != null) {\n      providerMetadata.openai.rejectedPredictionTokens = completionTokenDetails == null ? void 0 : completionTokenDetails.rejected_prediction_tokens;\n    }\n    if (((_f = choice.logprobs) == null ? void 0 : _f.content) != null) {\n      providerMetadata.openai.logprobs = choice.logprobs.content;\n    }\n    return {\n      content,\n      finishReason: mapOpenAIFinishReason(choice.finish_reason),\n      usage: {\n        inputTokens: (_h = (_g = response.usage) == null ? void 0 : _g.prompt_tokens) != null ? _h : void 0,\n        outputTokens: (_j = (_i = response.usage) == null ? void 0 : _i.completion_tokens) != null ? _j : void 0,\n        totalTokens: (_l = (_k = response.usage) == null ? void 0 : _k.total_tokens) != null ? _l : void 0,\n        reasoningTokens: (_m = completionTokenDetails == null ? void 0 : completionTokenDetails.reasoning_tokens) != null ? _m : void 0,\n        cachedInputTokens: (_n = promptTokenDetails == null ? void 0 : promptTokenDetails.cached_tokens) != null ? _n : void 0\n      },\n      request: { body },\n      response: {\n        ...getResponseMetadata(response),\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      warnings,\n      providerMetadata\n    };\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const body = {\n      ...args,\n      stream: true,\n      stream_options: {\n        include_usage: true\n      }\n    };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/chat/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiChatChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const toolCalls = [];\n    let finishReason = \"unknown\";\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    let isFirstChunk = true;\n    let isActiveText = false;\n    const providerMetadata = { openai: {} };\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (\"error\" in value) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: value.error });\n              return;\n            }\n            if (isFirstChunk) {\n              isFirstChunk = false;\n              controller.enqueue({\n                type: \"response-metadata\",\n                ...getResponseMetadata(value)\n              });\n            }\n            if (value.usage != null) {\n              usage.inputTokens = (_a = value.usage.prompt_tokens) != null ? _a : void 0;\n              usage.outputTokens = (_b = value.usage.completion_tokens) != null ? _b : void 0;\n              usage.totalTokens = (_c = value.usage.total_tokens) != null ? _c : void 0;\n              usage.reasoningTokens = (_e = (_d = value.usage.completion_tokens_details) == null ? void 0 : _d.reasoning_tokens) != null ? _e : void 0;\n              usage.cachedInputTokens = (_g = (_f = value.usage.prompt_tokens_details) == null ? void 0 : _f.cached_tokens) != null ? _g : void 0;\n              if (((_h = value.usage.completion_tokens_details) == null ? void 0 : _h.accepted_prediction_tokens) != null) {\n                providerMetadata.openai.acceptedPredictionTokens = (_i = value.usage.completion_tokens_details) == null ? void 0 : _i.accepted_prediction_tokens;\n              }\n              if (((_j = value.usage.completion_tokens_details) == null ? void 0 : _j.rejected_prediction_tokens) != null) {\n                providerMetadata.openai.rejectedPredictionTokens = (_k = value.usage.completion_tokens_details) == null ? void 0 : _k.rejected_prediction_tokens;\n              }\n            }\n            const choice = value.choices[0];\n            if ((choice == null ? void 0 : choice.finish_reason) != null) {\n              finishReason = mapOpenAIFinishReason(choice.finish_reason);\n            }\n            if (((_l = choice == null ? void 0 : choice.logprobs) == null ? void 0 : _l.content) != null) {\n              providerMetadata.openai.logprobs = choice.logprobs.content;\n            }\n            if ((choice == null ? void 0 : choice.delta) == null) {\n              return;\n            }\n            const delta = choice.delta;\n            if (delta.content != null) {\n              if (!isActiveText) {\n                controller.enqueue({ type: \"text-start\", id: \"0\" });\n                isActiveText = true;\n              }\n              controller.enqueue({\n                type: \"text-delta\",\n                id: \"0\",\n                delta: delta.content\n              });\n            }\n            if (delta.tool_calls != null) {\n              for (const toolCallDelta of delta.tool_calls) {\n                const index = toolCallDelta.index;\n                if (toolCalls[index] == null) {\n                  if (toolCallDelta.type !== \"function\") {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'function' type.`\n                    });\n                  }\n                  if (toolCallDelta.id == null) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'id' to be a string.`\n                    });\n                  }\n                  if (((_m = toolCallDelta.function) == null ? void 0 : _m.name) == null) {\n                    throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidResponseDataError({\n                      data: toolCallDelta,\n                      message: `Expected 'function.name' to be a string.`\n                    });\n                  }\n                  controller.enqueue({\n                    type: \"tool-input-start\",\n                    id: toolCallDelta.id,\n                    toolName: toolCallDelta.function.name\n                  });\n                  toolCalls[index] = {\n                    id: toolCallDelta.id,\n                    type: \"function\",\n                    function: {\n                      name: toolCallDelta.function.name,\n                      arguments: (_n = toolCallDelta.function.arguments) != null ? _n : \"\"\n                    },\n                    hasFinished: false\n                  };\n                  const toolCall2 = toolCalls[index];\n                  if (((_o = toolCall2.function) == null ? void 0 : _o.name) != null && ((_p = toolCall2.function) == null ? void 0 : _p.arguments) != null) {\n                    if (toolCall2.function.arguments.length > 0) {\n                      controller.enqueue({\n                        type: \"tool-input-delta\",\n                        id: toolCall2.id,\n                        delta: toolCall2.function.arguments\n                      });\n                    }\n                    if ((0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isParsableJson)(toolCall2.function.arguments)) {\n                      controller.enqueue({\n                        type: \"tool-input-end\",\n                        id: toolCall2.id\n                      });\n                      controller.enqueue({\n                        type: \"tool-call\",\n                        toolCallId: (_q = toolCall2.id) != null ? _q : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                        toolName: toolCall2.function.name,\n                        input: toolCall2.function.arguments\n                      });\n                      toolCall2.hasFinished = true;\n                    }\n                  }\n                  continue;\n                }\n                const toolCall = toolCalls[index];\n                if (toolCall.hasFinished) {\n                  continue;\n                }\n                if (((_r = toolCallDelta.function) == null ? void 0 : _r.arguments) != null) {\n                  toolCall.function.arguments += (_t = (_s = toolCallDelta.function) == null ? void 0 : _s.arguments) != null ? _t : \"\";\n                }\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.id,\n                  delta: (_u = toolCallDelta.function.arguments) != null ? _u : \"\"\n                });\n                if (((_v = toolCall.function) == null ? void 0 : _v.name) != null && ((_w = toolCall.function) == null ? void 0 : _w.arguments) != null && (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.isParsableJson)(toolCall.function.arguments)) {\n                  controller.enqueue({\n                    type: \"tool-input-end\",\n                    id: toolCall.id\n                  });\n                  controller.enqueue({\n                    type: \"tool-call\",\n                    toolCallId: (_x = toolCall.id) != null ? _x : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                    toolName: toolCall.function.name,\n                    input: toolCall.function.arguments\n                  });\n                  toolCall.hasFinished = true;\n                }\n              }\n            }\n            if (delta.annotations != null) {\n              for (const annotation of delta.annotations) {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: annotation.url,\n                  title: annotation.title\n                });\n              }\n            }\n          },\n          flush(controller) {\n            if (isActiveText) {\n              controller.enqueue({ type: \"text-end\", id: \"0\" });\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              usage,\n              ...providerMetadata != null ? { providerMetadata } : {}\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar openaiTokenUsageSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  prompt_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n  }).nullish(),\n  completion_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    accepted_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    rejected_prediction_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish()\n  }).nullish()\n}).nullish();\nvar openaiChatResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\").nullish(),\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        tool_calls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\"),\n            function: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n            })\n          })\n        ).nullish(),\n        annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n            start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          })\n        ).nullish()\n      }),\n      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n            top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n              })\n            )\n          })\n        ).nullish()\n      }).nullish(),\n      finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    })\n  ),\n  usage: openaiTokenUsageSchema\n});\nvar openaiChatChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          role: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"assistant\"]).nullish(),\n          content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n          tool_calls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function\").nullish(),\n              function: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n              })\n            })\n          ).nullish(),\n          annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n              start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n            })\n          ).nullish()\n        }).nullish(),\n        logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n              token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n              logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n              top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                  token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                  logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n                })\n              )\n            })\n          ).nullish()\n        }).nullish(),\n        finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n      })\n    ),\n    usage: openaiTokenUsageSchema\n  }),\n  openaiErrorDataSchema\n]);\nfunction isReasoningModel(modelId) {\n  return (modelId.startsWith(\"o\") || modelId.startsWith(\"gpt-5\")) && !modelId.startsWith(\"gpt-5-chat\");\n}\nfunction supportsFlexProcessing(modelId) {\n  return modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-chat\");\n}\nfunction supportsPriorityProcessing(modelId) {\n  return modelId.startsWith(\"gpt-4\") || modelId.startsWith(\"gpt-5-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-nano\") && !modelId.startsWith(\"gpt-5-chat\") || modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\");\n}\nfunction getSystemMessageMode(modelId) {\n  var _a, _b;\n  if (!isReasoningModel(modelId)) {\n    return \"system\";\n  }\n  return (_b = (_a = reasoningModels[modelId]) == null ? void 0 : _a.systemMessageMode) != null ? _b : \"developer\";\n}\nvar reasoningModels = {\n  \"o1-mini\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-mini-2024-09-12\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-preview\": {\n    systemMessageMode: \"remove\"\n  },\n  \"o1-preview-2024-09-12\": {\n    systemMessageMode: \"remove\"\n  },\n  o3: {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-2025-04-16\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-mini\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o3-mini-2025-01-31\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o4-mini\": {\n    systemMessageMode: \"developer\"\n  },\n  \"o4-mini-2025-04-16\": {\n    systemMessageMode: \"developer\"\n  }\n};\n\n// src/completion/openai-completion-language-model.ts\n\n\n\n// src/completion/convert-to-openai-completion-prompt.ts\n\nfunction convertToOpenAICompletionPrompt({\n  prompt,\n  user = \"user\",\n  assistant = \"assistant\"\n}) {\n  let text = \"\";\n  if (prompt[0].role === \"system\") {\n    text += `${prompt[0].content}\n\n`;\n    prompt = prompt.slice(1);\n  }\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.InvalidPromptError({\n          message: \"Unexpected system message in prompt: ${content}\",\n          prompt\n        });\n      }\n      case \"user\": {\n        const userMessage = content.map((part) => {\n          switch (part.type) {\n            case \"text\": {\n              return part.text;\n            }\n          }\n        }).filter(Boolean).join(\"\");\n        text += `${user}:\n${userMessage}\n\n`;\n        break;\n      }\n      case \"assistant\": {\n        const assistantMessage = content.map((part) => {\n          switch (part.type) {\n            case \"text\": {\n              return part.text;\n            }\n            case \"tool-call\": {\n              throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                functionality: \"tool-call messages\"\n              });\n            }\n          }\n        }).join(\"\");\n        text += `${assistant}:\n${assistantMessage}\n\n`;\n        break;\n      }\n      case \"tool\": {\n        throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n          functionality: \"tool messages\"\n        });\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  text += `${assistant}:\n`;\n  return {\n    prompt: text,\n    stopSequences: [`\n${user}:`]\n  };\n}\n\n// src/completion/get-response-metadata.ts\nfunction getResponseMetadata2({\n  id,\n  model,\n  created\n}) {\n  return {\n    id: id != null ? id : void 0,\n    modelId: model != null ? model : void 0,\n    timestamp: created != null ? new Date(created * 1e3) : void 0\n  };\n}\n\n// src/completion/map-openai-finish-reason.ts\nfunction mapOpenAIFinishReason2(finishReason) {\n  switch (finishReason) {\n    case \"stop\":\n      return \"stop\";\n    case \"length\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    case \"function_call\":\n    case \"tool_calls\":\n      return \"tool-calls\";\n    default:\n      return \"unknown\";\n  }\n}\n\n// src/completion/openai-completion-options.ts\n\nvar openaiCompletionProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n  Echo back the prompt in addition to the completion.\n     */\n  echo: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().optional(),\n  /**\n  Modify the likelihood of specified tokens appearing in the completion.\n  \n  Accepts a JSON object that maps tokens (specified by their token ID in\n  the GPT tokenizer) to an associated bias value from -100 to 100. You\n  can use this tokenizer tool to convert text to token IDs. Mathematically,\n  the bias is added to the logits generated by the model prior to sampling.\n  The exact effect will vary per model, but values between -1 and 1 should\n  decrease or increase likelihood of selection; values like -100 or 100\n  should result in a ban or exclusive selection of the relevant token.\n  \n  As an example, you can pass {\"50256\": -100} to prevent the <|endoftext|>\n  token from being generated.\n   */\n  logitBias: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()).optional(),\n  /**\n  The suffix that comes after a completion of inserted text.\n   */\n  suffix: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n  A unique identifier representing your end-user, which can help OpenAI to\n  monitor and detect abuse. Learn more.\n   */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n  Return the log probabilities of the tokens. Including logprobs will increase\n  the response size and can slow down response times. However, it can\n  be useful to better understand how the model is behaving.\n  Setting to true will return the log probabilities of the tokens that\n  were generated.\n  Setting to a number will return the log probabilities of the top n\n  tokens that were generated.\n     */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()]).optional()\n});\n\n// src/completion/openai-completion-language-model.ts\nvar OpenAICompletionLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      // No URLs are supported for completion models.\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get providerOptionsName() {\n    return this.config.provider.split(\".\")[0].trim();\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    prompt,\n    maxOutputTokens,\n    temperature,\n    topP,\n    topK,\n    frequencyPenalty,\n    presencePenalty,\n    stopSequences: userStopSequences,\n    responseFormat,\n    tools,\n    toolChoice,\n    seed,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openaiOptions = {\n      ...await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: \"openai\",\n        providerOptions,\n        schema: openaiCompletionProviderOptions\n      }),\n      ...await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n        provider: this.providerOptionsName,\n        providerOptions,\n        schema: openaiCompletionProviderOptions\n      })\n    };\n    if (topK != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"topK\" });\n    }\n    if (tools == null ? void 0 : tools.length) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"tools\" });\n    }\n    if (toolChoice != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"toolChoice\" });\n    }\n    if (responseFormat != null && responseFormat.type !== \"text\") {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"responseFormat\",\n        details: \"JSON response format is not supported.\"\n      });\n    }\n    const { prompt: completionPrompt, stopSequences } = convertToOpenAICompletionPrompt({ prompt });\n    const stop = [...stopSequences != null ? stopSequences : [], ...userStopSequences != null ? userStopSequences : []];\n    return {\n      args: {\n        // model id:\n        model: this.modelId,\n        // model specific settings:\n        echo: openaiOptions.echo,\n        logit_bias: openaiOptions.logitBias,\n        logprobs: (openaiOptions == null ? void 0 : openaiOptions.logprobs) === true ? 0 : (openaiOptions == null ? void 0 : openaiOptions.logprobs) === false ? void 0 : openaiOptions == null ? void 0 : openaiOptions.logprobs,\n        suffix: openaiOptions.suffix,\n        user: openaiOptions.user,\n        // standardized settings:\n        max_tokens: maxOutputTokens,\n        temperature,\n        top_p: topP,\n        frequency_penalty: frequencyPenalty,\n        presence_penalty: presencePenalty,\n        seed,\n        // prompt:\n        prompt: completionPrompt,\n        // stop sequences:\n        stop: stop.length > 0 ? stop : void 0\n      },\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c;\n    const { args, warnings } = await this.getArgs(options);\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: args,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiCompletionResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const choice = response.choices[0];\n    const providerMetadata = { openai: {} };\n    if (choice.logprobs != null) {\n      providerMetadata.openai.logprobs = choice.logprobs;\n    }\n    return {\n      content: [{ type: \"text\", text: choice.text }],\n      usage: {\n        inputTokens: (_a = response.usage) == null ? void 0 : _a.prompt_tokens,\n        outputTokens: (_b = response.usage) == null ? void 0 : _b.completion_tokens,\n        totalTokens: (_c = response.usage) == null ? void 0 : _c.total_tokens\n      },\n      finishReason: mapOpenAIFinishReason2(choice.finish_reason),\n      request: { body: args },\n      response: {\n        ...getResponseMetadata2(response),\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      providerMetadata,\n      warnings\n    };\n  }\n  async doStream(options) {\n    const { args, warnings } = await this.getArgs(options);\n    const body = {\n      ...args,\n      stream: true,\n      stream_options: {\n        include_usage: true\n      }\n    };\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/completions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiCompletionChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    let finishReason = \"unknown\";\n    const providerMetadata = { openai: {} };\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    let isFirstChunk = true;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (\"error\" in value) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: value.error });\n              return;\n            }\n            if (isFirstChunk) {\n              isFirstChunk = false;\n              controller.enqueue({\n                type: \"response-metadata\",\n                ...getResponseMetadata2(value)\n              });\n              controller.enqueue({ type: \"text-start\", id: \"0\" });\n            }\n            if (value.usage != null) {\n              usage.inputTokens = value.usage.prompt_tokens;\n              usage.outputTokens = value.usage.completion_tokens;\n              usage.totalTokens = value.usage.total_tokens;\n            }\n            const choice = value.choices[0];\n            if ((choice == null ? void 0 : choice.finish_reason) != null) {\n              finishReason = mapOpenAIFinishReason2(choice.finish_reason);\n            }\n            if ((choice == null ? void 0 : choice.logprobs) != null) {\n              providerMetadata.openai.logprobs = choice.logprobs;\n            }\n            if ((choice == null ? void 0 : choice.text) != null && choice.text.length > 0) {\n              controller.enqueue({\n                type: \"text-delta\",\n                id: \"0\",\n                delta: choice.text\n              });\n            }\n          },\n          flush(controller) {\n            if (!isFirstChunk) {\n              controller.enqueue({ type: \"text-end\", id: \"0\" });\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              providerMetadata,\n              usage\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar usageSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  completion_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  total_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar openaiCompletionResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n        token_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n        top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number())).nullish()\n      }).nullish()\n    })\n  ),\n  usage: usageSchema.nullish()\n});\nvar openaiCompletionChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    created: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n    choices: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        finish_reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n        index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n        logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n          token_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n          top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number())).nullish()\n        }).nullish()\n      })\n    ),\n    usage: usageSchema.nullish()\n  }),\n  openaiErrorDataSchema\n]);\n\n// src/embedding/openai-embedding-model.ts\n\n\n\n\n// src/embedding/openai-embedding-options.ts\n\nvar openaiEmbeddingProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n  The number of dimensions the resulting output embeddings should have.\n  Only supported in text-embedding-3 and later models.\n     */\n  dimensions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  /**\n  A unique identifier representing your end-user, which can help OpenAI to\n  monitor and detect abuse. Learn more.\n  */\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n\n// src/embedding/openai-embedding-model.ts\nvar OpenAIEmbeddingModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.maxEmbeddingsPerCall = 2048;\n    this.supportsParallelCalls = true;\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doEmbed({\n    values,\n    headers,\n    abortSignal,\n    providerOptions\n  }) {\n    var _a;\n    if (values.length > this.maxEmbeddingsPerCall) {\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.TooManyEmbeddingValuesForCallError({\n        provider: this.provider,\n        modelId: this.modelId,\n        maxEmbeddingsPerCall: this.maxEmbeddingsPerCall,\n        values\n      });\n    }\n    const openaiOptions = (_a = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiEmbeddingProviderOptions\n    })) != null ? _a : {};\n    const {\n      responseHeaders,\n      value: response,\n      rawValue\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/embeddings\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n      body: {\n        model: this.modelId,\n        input: values,\n        encoding_format: \"float\",\n        dimensions: openaiOptions.dimensions,\n        user: openaiOptions.user\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiTextEmbeddingResponseSchema\n      ),\n      abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      embeddings: response.data.map((item) => item.embedding),\n      usage: response.usage ? { tokens: response.usage.prompt_tokens } : void 0,\n      response: { headers: responseHeaders, body: rawValue }\n    };\n  }\n};\nvar openaiTextEmbeddingResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ embedding: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()) })),\n  usage: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ prompt_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number() }).nullish()\n});\n\n// src/image/openai-image-model.ts\n\n\n\n// src/image/openai-image-options.ts\nvar modelMaxImagesPerCall = {\n  \"dall-e-3\": 1,\n  \"dall-e-2\": 10,\n  \"gpt-image-1\": 10,\n  \"gpt-image-1-mini\": 10\n};\nvar hasDefaultResponseFormat = /* @__PURE__ */ new Set([\n  \"gpt-image-1\",\n  \"gpt-image-1-mini\"\n]);\n\n// src/image/openai-image-model.ts\nvar OpenAIImageModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get maxImagesPerCall() {\n    var _a;\n    return (_a = modelMaxImagesPerCall[this.modelId]) != null ? _a : 1;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async doGenerate({\n    prompt,\n    n,\n    size,\n    aspectRatio,\n    seed,\n    providerOptions,\n    headers,\n    abortSignal\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    if (aspectRatio != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"aspectRatio\",\n        details: \"This model does not support aspect ratio. Use `size` instead.\"\n      });\n    }\n    if (seed != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"seed\" });\n    }\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { value: response, responseHeaders } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/images/generations\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), headers),\n      body: {\n        model: this.modelId,\n        prompt,\n        n,\n        size,\n        ...(_d = providerOptions.openai) != null ? _d : {},\n        ...!hasDefaultResponseFormat.has(this.modelId) ? { response_format: \"b64_json\" } : {}\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiImageResponseSchema\n      ),\n      abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      images: response.data.map((item) => item.b64_json),\n      warnings,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders\n      },\n      providerMetadata: {\n        openai: {\n          images: response.data.map(\n            (item) => item.revised_prompt ? {\n              revisedPrompt: item.revised_prompt\n            } : null\n          )\n        }\n      }\n    };\n  }\n};\nvar openaiImageResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  data: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ b64_json: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), revised_prompt: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional() })\n  )\n});\n\n// src/tool/code-interpreter.ts\n\n\nvar codeInterpreterInputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  containerId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar codeInterpreterOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() })\n    ])\n  ).nullish()\n});\nvar codeInterpreterArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  container: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      fileIds: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n    })\n  ]).optional()\n});\nvar codeInterpreterToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.code_interpreter\",\n  name: \"code_interpreter\",\n  inputSchema: codeInterpreterInputSchema,\n  outputSchema: codeInterpreterOutputSchema\n});\nvar codeInterpreter = (args = {}) => {\n  return codeInterpreterToolFactory(args);\n};\n\n// src/tool/file-search.ts\n\n\nvar comparisonFilterSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  key: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"eq\", \"ne\", \"gt\", \"gte\", \"lt\", \"lte\"]),\n  value: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean()])\n});\nvar compoundFilterSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"and\", \"or\"]),\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([comparisonFilterSchema, zod_v4__WEBPACK_IMPORTED_MODULE_0__.lazy(() => compoundFilterSchema)])\n  )\n});\nvar fileSearchArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  vectorStoreIds: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n  maxNumResults: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n  ranking: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    ranker: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    scoreThreshold: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional()\n  }).optional(),\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([comparisonFilterSchema, compoundFilterSchema]).optional()\n});\nvar fileSearchOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n  results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()),\n      fileId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ).nullable()\n});\nvar fileSearch = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.file_search\",\n  name: \"file_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({}),\n  outputSchema: fileSearchOutputSchema\n});\n\n// src/tool/image-generation.ts\n\n\nvar imageGenerationArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  background: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"opaque\", \"transparent\"]).optional(),\n  inputFidelity: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"high\"]).optional(),\n  inputImageMask: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    fileId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    imageUrl: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional(),\n  model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  moderation: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\"]).optional(),\n  outputCompression: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().int().min(0).max(100).optional(),\n  outputFormat: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"png\", \"jpeg\", \"webp\"]).optional(),\n  quality: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"low\", \"medium\", \"high\"]).optional(),\n  size: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"1024x1024\", \"1024x1536\", \"1536x1024\", \"auto\"]).optional()\n}).strict();\nvar imageGenerationOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  result: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar imageGenerationToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.image_generation\",\n  name: \"image_generation\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({}),\n  outputSchema: imageGenerationOutputSchema\n});\nvar imageGeneration = (args = {}) => {\n  return imageGenerationToolFactory(args);\n};\n\n// src/tool/local-shell.ts\n\n\nvar localShellInputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"exec\"),\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n    timeoutMs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    workingDirectory: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    env: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n  })\n});\nvar localShellOutputSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar localShell = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactoryWithOutputSchema)({\n  id: \"openai.local_shell\",\n  name: \"local_shell\",\n  inputSchema: localShellInputSchema,\n  outputSchema: localShellOutputSchema\n});\n\n// src/tool/web-search.ts\n\n\nvar webSearchArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  filters: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    allowedDomains: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n  }).optional(),\n  searchContextSize: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"approximate\"),\n    country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional()\n});\nvar webSearchToolFactory = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"openai.web_search\",\n  name: \"web_search\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      })\n    ]).nullish()\n  })\n});\nvar webSearch = (args = {}) => {\n  return webSearchToolFactory(args);\n};\n\n// src/tool/web-search-preview.ts\n\n\nvar webSearchPreviewArgsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Search context size to use for the web search.\n   * - high: Most comprehensive context, highest cost, slower response\n   * - medium: Balanced context, cost, and latency (default)\n   * - low: Least context, lowest cost, fastest response\n   */\n  searchContextSize: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).optional(),\n  /**\n   * User location information to provide geographically relevant search results.\n   */\n  userLocation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    /**\n     * Type of location (always 'approximate')\n     */\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"approximate\"),\n    /**\n     * Two-letter ISO country code (e.g., 'US', 'GB')\n     */\n    country: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * City name (free text, e.g., 'Minneapolis')\n     */\n    city: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * Region name (free text, e.g., 'Minnesota')\n     */\n    region: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    /**\n     * IANA timezone (e.g., 'America/Chicago')\n     */\n    timezone: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n  }).optional()\n});\nvar webSearchPreview = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createProviderDefinedToolFactory)({\n  id: \"openai.web_search_preview\",\n  name: \"web_search_preview\",\n  inputSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n        url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n      })\n    ]).nullish()\n  })\n});\n\n// src/openai-tools.ts\nvar openaiTools = {\n  /**\n   * The Code Interpreter tool allows models to write and run Python code in a\n   * sandboxed environment to solve complex problems in domains like data analysis,\n   * coding, and math.\n   *\n   * @param container - The container to use for the code interpreter.\n   *\n   * Must have name `code_interpreter`.\n   */\n  codeInterpreter,\n  /**\n   * File search is a tool available in the Responses API. It enables models to\n   * retrieve information in a knowledge base of previously uploaded files through\n   * semantic and keyword search.\n   *\n   * Must have name `file_search`.\n   *\n   * @param vectorStoreIds - The vector store IDs to use for the file search.\n   * @param maxNumResults - The maximum number of results to return.\n   * @param ranking - The ranking options to use for the file search.\n   * @param filters - The filters to use for the file search.\n   */\n  fileSearch,\n  /**\n   * The image generation tool allows you to generate images using a text prompt,\n   * and optionally image inputs. It leverages the GPT Image model,\n   * and automatically optimizes text inputs for improved performance.\n   *\n   * Must have name `image_generation`.\n   *\n   * @param size - Image dimensions (e.g., 1024x1024, 1024x1536)\n   * @param quality - Rendering quality (e.g. low, medium, high)\n   * @param format - File output format\n   * @param compression - Compression level (0-100%) for JPEG and WebP formats\n   * @param background - Transparent or opaque\n   */\n  imageGeneration,\n  /**\n   * Local shell is a tool that allows agents to run shell commands locally\n   * on a machine you or the user provides.\n   *\n   * Supported models: `gpt-5-codex` and `codex-mini-latest`\n   *\n   * Must have name `local_shell`.\n   */\n  localShell,\n  /**\n   * Web search allows models to access up-to-date information from the internet\n   * and provide answers with sourced citations.\n   *\n   * Must have name `web_search_preview`.\n   *\n   * @param searchContextSize - The search context size to use for the web search.\n   * @param userLocation - The user location to use for the web search.\n   *\n   * @deprecated Use `webSearch` instead.\n   */\n  webSearchPreview,\n  /**\n   * Web search allows models to access up-to-date information from the internet\n   * and provide answers with sourced citations.\n   *\n   * Must have name `web_search`.\n   *\n   * @param filters - The filters to use for the web search.\n   * @param searchContextSize - The search context size to use for the web search.\n   * @param userLocation - The user location to use for the web search.\n   */\n  webSearch\n};\n\n// src/responses/openai-responses-language-model.ts\n\n\n\n\n// src/responses/convert-to-openai-responses-input.ts\n\n\n\nfunction isFileId(data, prefixes) {\n  if (!prefixes) return false;\n  return prefixes.some((prefix) => data.startsWith(prefix));\n}\nasync function convertToOpenAIResponsesInput({\n  prompt,\n  systemMessageMode,\n  fileIdPrefixes,\n  store,\n  hasLocalShellTool = false\n}) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n  const input = [];\n  const warnings = [];\n  for (const { role, content } of prompt) {\n    switch (role) {\n      case \"system\": {\n        switch (systemMessageMode) {\n          case \"system\": {\n            input.push({ role: \"system\", content });\n            break;\n          }\n          case \"developer\": {\n            input.push({ role: \"developer\", content });\n            break;\n          }\n          case \"remove\": {\n            warnings.push({\n              type: \"other\",\n              message: \"system messages are removed for this model\"\n            });\n            break;\n          }\n          default: {\n            const _exhaustiveCheck = systemMessageMode;\n            throw new Error(\n              `Unsupported system message mode: ${_exhaustiveCheck}`\n            );\n          }\n        }\n        break;\n      }\n      case \"user\": {\n        input.push({\n          role: \"user\",\n          content: content.map((part, index) => {\n            var _a2, _b2, _c2;\n            switch (part.type) {\n              case \"text\": {\n                return { type: \"input_text\", text: part.text };\n              }\n              case \"file\": {\n                if (part.mediaType.startsWith(\"image/\")) {\n                  const mediaType = part.mediaType === \"image/*\" ? \"image/jpeg\" : part.mediaType;\n                  return {\n                    type: \"input_image\",\n                    ...part.data instanceof URL ? { image_url: part.data.toString() } : typeof part.data === \"string\" && isFileId(part.data, fileIdPrefixes) ? { file_id: part.data } : {\n                      image_url: `data:${mediaType};base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    },\n                    detail: (_b2 = (_a2 = part.providerOptions) == null ? void 0 : _a2.openai) == null ? void 0 : _b2.imageDetail\n                  };\n                } else if (part.mediaType === \"application/pdf\") {\n                  if (part.data instanceof URL) {\n                    return {\n                      type: \"input_file\",\n                      file_url: part.data.toString()\n                    };\n                  }\n                  return {\n                    type: \"input_file\",\n                    ...typeof part.data === \"string\" && isFileId(part.data, fileIdPrefixes) ? { file_id: part.data } : {\n                      filename: (_c2 = part.filename) != null ? _c2 : `part-${index}.pdf`,\n                      file_data: `data:application/pdf;base64,${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertToBase64)(part.data)}`\n                    }\n                  };\n                } else {\n                  throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n                    functionality: `file part media type ${part.mediaType}`\n                  });\n                }\n              }\n            }\n          })\n        });\n        break;\n      }\n      case \"assistant\": {\n        const reasoningMessages = {};\n        const toolCallParts = {};\n        for (const part of content) {\n          switch (part.type) {\n            case \"text\": {\n              input.push({\n                role: \"assistant\",\n                content: [{ type: \"output_text\", text: part.text }],\n                id: (_c = (_b = (_a = part.providerOptions) == null ? void 0 : _a.openai) == null ? void 0 : _b.itemId) != null ? _c : void 0\n              });\n              break;\n            }\n            case \"tool-call\": {\n              toolCallParts[part.toolCallId] = part;\n              if (part.providerExecuted) {\n                break;\n              }\n              if (hasLocalShellTool && part.toolName === \"local_shell\") {\n                const parsedInput = localShellInputSchema.parse(part.input);\n                input.push({\n                  type: \"local_shell_call\",\n                  call_id: part.toolCallId,\n                  id: (_f = (_e = (_d = part.providerOptions) == null ? void 0 : _d.openai) == null ? void 0 : _e.itemId) != null ? _f : void 0,\n                  action: {\n                    type: \"exec\",\n                    command: parsedInput.action.command,\n                    timeout_ms: parsedInput.action.timeoutMs,\n                    user: parsedInput.action.user,\n                    working_directory: parsedInput.action.workingDirectory,\n                    env: parsedInput.action.env\n                  }\n                });\n                break;\n              }\n              input.push({\n                type: \"function_call\",\n                call_id: part.toolCallId,\n                name: part.toolName,\n                arguments: JSON.stringify(part.input),\n                id: (_i = (_h = (_g = part.providerOptions) == null ? void 0 : _g.openai) == null ? void 0 : _h.itemId) != null ? _i : void 0\n              });\n              break;\n            }\n            // assistant tool result parts are from provider-executed tools:\n            case \"tool-result\": {\n              if (store) {\n                input.push({ type: \"item_reference\", id: part.toolCallId });\n              } else {\n                warnings.push({\n                  type: \"other\",\n                  message: `Results for OpenAI tool ${part.toolName} are not sent to the API when store is false`\n                });\n              }\n              break;\n            }\n            case \"reasoning\": {\n              const providerOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n                provider: \"openai\",\n                providerOptions: part.providerOptions,\n                schema: openaiResponsesReasoningProviderOptionsSchema\n              });\n              const reasoningId = providerOptions == null ? void 0 : providerOptions.itemId;\n              if (reasoningId != null) {\n                const reasoningMessage = reasoningMessages[reasoningId];\n                if (store) {\n                  if (reasoningMessage === void 0) {\n                    input.push({ type: \"item_reference\", id: reasoningId });\n                    reasoningMessages[reasoningId] = {\n                      type: \"reasoning\",\n                      id: reasoningId,\n                      summary: []\n                    };\n                  }\n                } else {\n                  const summaryParts = [];\n                  if (part.text.length > 0) {\n                    summaryParts.push({\n                      type: \"summary_text\",\n                      text: part.text\n                    });\n                  } else if (reasoningMessage !== void 0) {\n                    warnings.push({\n                      type: \"other\",\n                      message: `Cannot append empty reasoning part to existing reasoning sequence. Skipping reasoning part: ${JSON.stringify(part)}.`\n                    });\n                  }\n                  if (reasoningMessage === void 0) {\n                    reasoningMessages[reasoningId] = {\n                      type: \"reasoning\",\n                      id: reasoningId,\n                      encrypted_content: providerOptions == null ? void 0 : providerOptions.reasoningEncryptedContent,\n                      summary: summaryParts\n                    };\n                    input.push(reasoningMessages[reasoningId]);\n                  } else {\n                    reasoningMessage.summary.push(...summaryParts);\n                  }\n                }\n              } else {\n                warnings.push({\n                  type: \"other\",\n                  message: `Non-OpenAI reasoning parts are not supported. Skipping reasoning part: ${JSON.stringify(part)}.`\n                });\n              }\n              break;\n            }\n          }\n        }\n        break;\n      }\n      case \"tool\": {\n        for (const part of content) {\n          const output = part.output;\n          if (hasLocalShellTool && part.toolName === \"local_shell\" && output.type === \"json\") {\n            input.push({\n              type: \"local_shell_call_output\",\n              call_id: part.toolCallId,\n              output: localShellOutputSchema.parse(output.value).output\n            });\n            break;\n          }\n          let contentValue;\n          switch (output.type) {\n            case \"text\":\n            case \"error-text\":\n              contentValue = output.value;\n              break;\n            case \"content\":\n            case \"json\":\n            case \"error-json\":\n              contentValue = JSON.stringify(output.value);\n              break;\n          }\n          input.push({\n            type: \"function_call_output\",\n            call_id: part.toolCallId,\n            output: contentValue\n          });\n        }\n        break;\n      }\n      default: {\n        const _exhaustiveCheck = role;\n        throw new Error(`Unsupported role: ${_exhaustiveCheck}`);\n      }\n    }\n  }\n  return { input, warnings };\n}\nvar openaiResponsesReasoningProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  itemId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningEncryptedContent: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n});\n\n// src/responses/map-openai-responses-finish-reason.ts\nfunction mapOpenAIResponseFinishReason({\n  finishReason,\n  hasFunctionCall\n}) {\n  switch (finishReason) {\n    case void 0:\n    case null:\n      return hasFunctionCall ? \"tool-calls\" : \"stop\";\n    case \"max_output_tokens\":\n      return \"length\";\n    case \"content_filter\":\n      return \"content-filter\";\n    default:\n      return hasFunctionCall ? \"tool-calls\" : \"unknown\";\n  }\n}\n\n// src/responses/openai-responses-prepare-tools.ts\n\nfunction prepareResponsesTools({\n  tools,\n  toolChoice,\n  strictJsonSchema\n}) {\n  tools = (tools == null ? void 0 : tools.length) ? tools : void 0;\n  const toolWarnings = [];\n  if (tools == null) {\n    return { tools: void 0, toolChoice: void 0, toolWarnings };\n  }\n  const openaiTools2 = [];\n  for (const tool of tools) {\n    switch (tool.type) {\n      case \"function\":\n        openaiTools2.push({\n          type: \"function\",\n          name: tool.name,\n          description: tool.description,\n          parameters: tool.inputSchema,\n          strict: strictJsonSchema\n        });\n        break;\n      case \"provider-defined\": {\n        switch (tool.id) {\n          case \"openai.file_search\": {\n            const args = fileSearchArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"file_search\",\n              vector_store_ids: args.vectorStoreIds,\n              max_num_results: args.maxNumResults,\n              ranking_options: args.ranking ? {\n                ranker: args.ranking.ranker,\n                score_threshold: args.ranking.scoreThreshold\n              } : void 0,\n              filters: args.filters\n            });\n            break;\n          }\n          case \"openai.local_shell\": {\n            openaiTools2.push({\n              type: \"local_shell\"\n            });\n            break;\n          }\n          case \"openai.web_search_preview\": {\n            const args = webSearchPreviewArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"web_search_preview\",\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"openai.web_search\": {\n            const args = webSearchArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"web_search\",\n              filters: args.filters != null ? { allowed_domains: args.filters.allowedDomains } : void 0,\n              search_context_size: args.searchContextSize,\n              user_location: args.userLocation\n            });\n            break;\n          }\n          case \"openai.code_interpreter\": {\n            const args = codeInterpreterArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"code_interpreter\",\n              container: args.container == null ? { type: \"auto\", file_ids: void 0 } : typeof args.container === \"string\" ? args.container : { type: \"auto\", file_ids: args.container.fileIds }\n            });\n            break;\n          }\n          case \"openai.image_generation\": {\n            const args = imageGenerationArgsSchema.parse(tool.args);\n            openaiTools2.push({\n              type: \"image_generation\",\n              background: args.background,\n              input_fidelity: args.inputFidelity,\n              input_image_mask: args.inputImageMask ? {\n                file_id: args.inputImageMask.fileId,\n                image_url: args.inputImageMask.imageUrl\n              } : void 0,\n              model: args.model,\n              size: args.size,\n              quality: args.quality,\n              moderation: args.moderation,\n              output_format: args.outputFormat,\n              output_compression: args.outputCompression\n            });\n            break;\n          }\n        }\n        break;\n      }\n      default:\n        toolWarnings.push({ type: \"unsupported-tool\", tool });\n        break;\n    }\n  }\n  if (toolChoice == null) {\n    return { tools: openaiTools2, toolChoice: void 0, toolWarnings };\n  }\n  const type = toolChoice.type;\n  switch (type) {\n    case \"auto\":\n    case \"none\":\n    case \"required\":\n      return { tools: openaiTools2, toolChoice: type, toolWarnings };\n    case \"tool\":\n      return {\n        tools: openaiTools2,\n        toolChoice: toolChoice.toolName === \"code_interpreter\" || toolChoice.toolName === \"file_search\" || toolChoice.toolName === \"image_generation\" || toolChoice.toolName === \"web_search_preview\" || toolChoice.toolName === \"web_search\" ? { type: toolChoice.toolName } : { type: \"function\", name: toolChoice.toolName },\n        toolWarnings\n      };\n    default: {\n      const _exhaustiveCheck = type;\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.UnsupportedFunctionalityError({\n        functionality: `tool choice type: ${_exhaustiveCheck}`\n      });\n    }\n  }\n}\n\n// src/responses/openai-responses-language-model.ts\nvar webSearchCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n      query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"open_page\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"find\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      pattern: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ]).nullish()\n});\nvar fileSearchCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_search_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  queries: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n  results: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      attributes: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.unknown()),\n      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      score: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ).nullish()\n});\nvar codeInterpreterCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_interpreter_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n  container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }),\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() })\n    ])\n  ).nullable()\n});\nvar localShellCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"local_shell_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"exec\"),\n    command: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()),\n    timeout_ms: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().optional(),\n    user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    working_directory: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    env: zod_v4__WEBPACK_IMPORTED_MODULE_0__.record(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional()\n  })\n});\nvar imageGenerationCallItem = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image_generation_call\"),\n  id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  result: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar TOP_LOGPROBS_MAX = 20;\nvar LOGPROBS_SCHEMA = zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    top_logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n      zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        token: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n        logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n      })\n    )\n  })\n);\nvar OpenAIResponsesLanguageModel = class {\n  constructor(modelId, config) {\n    this.specificationVersion = \"v2\";\n    this.supportedUrls = {\n      \"image/*\": [/^https?:\\/\\/.*$/],\n      \"application/pdf\": [/^https?:\\/\\/.*$/]\n    };\n    this.modelId = modelId;\n    this.config = config;\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    maxOutputTokens,\n    temperature,\n    stopSequences,\n    topP,\n    topK,\n    presencePenalty,\n    frequencyPenalty,\n    seed,\n    prompt,\n    providerOptions,\n    tools,\n    toolChoice,\n    responseFormat\n  }) {\n    var _a, _b, _c, _d;\n    const warnings = [];\n    const modelConfig = getResponsesModelConfig(this.modelId);\n    if (topK != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"topK\" });\n    }\n    if (seed != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"seed\" });\n    }\n    if (presencePenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"presencePenalty\"\n      });\n    }\n    if (frequencyPenalty != null) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"frequencyPenalty\"\n      });\n    }\n    if (stopSequences != null) {\n      warnings.push({ type: \"unsupported-setting\", setting: \"stopSequences\" });\n    }\n    const openaiOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openaiResponsesProviderOptionsSchema\n    });\n    const { input, warnings: inputWarnings } = await convertToOpenAIResponsesInput({\n      prompt,\n      systemMessageMode: modelConfig.systemMessageMode,\n      fileIdPrefixes: this.config.fileIdPrefixes,\n      store: (_a = openaiOptions == null ? void 0 : openaiOptions.store) != null ? _a : true,\n      hasLocalShellTool: hasOpenAITool(\"openai.local_shell\")\n    });\n    warnings.push(...inputWarnings);\n    const strictJsonSchema = (_b = openaiOptions == null ? void 0 : openaiOptions.strictJsonSchema) != null ? _b : false;\n    let include = openaiOptions == null ? void 0 : openaiOptions.include;\n    function addInclude(key) {\n      include = include != null ? [...include, key] : [key];\n    }\n    function hasOpenAITool(id) {\n      return (tools == null ? void 0 : tools.find(\n        (tool) => tool.type === \"provider-defined\" && tool.id === id\n      )) != null;\n    }\n    const topLogprobs = typeof (openaiOptions == null ? void 0 : openaiOptions.logprobs) === \"number\" ? openaiOptions == null ? void 0 : openaiOptions.logprobs : (openaiOptions == null ? void 0 : openaiOptions.logprobs) === true ? TOP_LOGPROBS_MAX : void 0;\n    if (topLogprobs) {\n      addInclude(\"message.output_text.logprobs\");\n    }\n    const webSearchToolName = (_c = tools == null ? void 0 : tools.find(\n      (tool) => tool.type === \"provider-defined\" && (tool.id === \"openai.web_search\" || tool.id === \"openai.web_search_preview\")\n    )) == null ? void 0 : _c.name;\n    if (webSearchToolName) {\n      addInclude(\"web_search_call.action.sources\");\n    }\n    if (hasOpenAITool(\"openai.code_interpreter\")) {\n      addInclude(\"code_interpreter_call.outputs\");\n    }\n    const baseArgs = {\n      model: this.modelId,\n      input,\n      temperature,\n      top_p: topP,\n      max_output_tokens: maxOutputTokens,\n      ...((responseFormat == null ? void 0 : responseFormat.type) === \"json\" || (openaiOptions == null ? void 0 : openaiOptions.textVerbosity)) && {\n        text: {\n          ...(responseFormat == null ? void 0 : responseFormat.type) === \"json\" && {\n            format: responseFormat.schema != null ? {\n              type: \"json_schema\",\n              strict: strictJsonSchema,\n              name: (_d = responseFormat.name) != null ? _d : \"response\",\n              description: responseFormat.description,\n              schema: responseFormat.schema\n            } : { type: \"json_object\" }\n          },\n          ...(openaiOptions == null ? void 0 : openaiOptions.textVerbosity) && {\n            verbosity: openaiOptions.textVerbosity\n          }\n        }\n      },\n      // provider options:\n      max_tool_calls: openaiOptions == null ? void 0 : openaiOptions.maxToolCalls,\n      metadata: openaiOptions == null ? void 0 : openaiOptions.metadata,\n      parallel_tool_calls: openaiOptions == null ? void 0 : openaiOptions.parallelToolCalls,\n      previous_response_id: openaiOptions == null ? void 0 : openaiOptions.previousResponseId,\n      store: openaiOptions == null ? void 0 : openaiOptions.store,\n      user: openaiOptions == null ? void 0 : openaiOptions.user,\n      instructions: openaiOptions == null ? void 0 : openaiOptions.instructions,\n      service_tier: openaiOptions == null ? void 0 : openaiOptions.serviceTier,\n      include,\n      prompt_cache_key: openaiOptions == null ? void 0 : openaiOptions.promptCacheKey,\n      safety_identifier: openaiOptions == null ? void 0 : openaiOptions.safetyIdentifier,\n      top_logprobs: topLogprobs,\n      // model-specific settings:\n      ...modelConfig.isReasoningModel && ((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null || (openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null) && {\n        reasoning: {\n          ...(openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null && {\n            effort: openaiOptions.reasoningEffort\n          },\n          ...(openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null && {\n            summary: openaiOptions.reasoningSummary\n          }\n        }\n      },\n      ...modelConfig.requiredAutoTruncation && {\n        truncation: \"auto\"\n      }\n    };\n    if (modelConfig.isReasoningModel) {\n      if (baseArgs.temperature != null) {\n        baseArgs.temperature = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"temperature\",\n          details: \"temperature is not supported for reasoning models\"\n        });\n      }\n      if (baseArgs.top_p != null) {\n        baseArgs.top_p = void 0;\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"topP\",\n          details: \"topP is not supported for reasoning models\"\n        });\n      }\n    } else {\n      if ((openaiOptions == null ? void 0 : openaiOptions.reasoningEffort) != null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"reasoningEffort\",\n          details: \"reasoningEffort is not supported for non-reasoning models\"\n        });\n      }\n      if ((openaiOptions == null ? void 0 : openaiOptions.reasoningSummary) != null) {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"reasoningSummary\",\n          details: \"reasoningSummary is not supported for non-reasoning models\"\n        });\n      }\n    }\n    if ((openaiOptions == null ? void 0 : openaiOptions.serviceTier) === \"flex\" && !modelConfig.supportsFlexProcessing) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"flex processing is only available for o3, o4-mini, and gpt-5 models\"\n      });\n      delete baseArgs.service_tier;\n    }\n    if ((openaiOptions == null ? void 0 : openaiOptions.serviceTier) === \"priority\" && !modelConfig.supportsPriorityProcessing) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"serviceTier\",\n        details: \"priority processing is only available for supported models (gpt-4, gpt-5, gpt-5-mini, o3, o4-mini) and requires Enterprise access. gpt-5-nano is not supported\"\n      });\n      delete baseArgs.service_tier;\n    }\n    const {\n      tools: openaiTools2,\n      toolChoice: openaiToolChoice,\n      toolWarnings\n    } = prepareResponsesTools({\n      tools,\n      toolChoice,\n      strictJsonSchema\n    });\n    return {\n      webSearchToolName,\n      args: {\n        ...baseArgs,\n        tools: openaiTools2,\n        tool_choice: openaiToolChoice\n      },\n      warnings: [...warnings, ...toolWarnings]\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;\n    const {\n      args: body,\n      warnings,\n      webSearchToolName\n    } = await this.getArgs(options);\n    const url = this.config.url({\n      path: \"/responses\",\n      modelId: this.modelId\n    });\n    const {\n      responseHeaders,\n      value: response,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url,\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n          id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n          created_at: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n          error: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n            code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n            message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n          }).nullish(),\n          model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n          output: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n            zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n                role: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"assistant\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"output_text\"),\n                    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                    logprobs: LOGPROBS_SCHEMA.nullish(),\n                    annotations: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                      zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n                          start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n                          end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n                          url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                          title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n                        }),\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_citation\"),\n                          file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                          filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                          index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n                          quote: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n                        }),\n                        zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                          type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"container_file_citation\")\n                        })\n                      ])\n                    )\n                  })\n                )\n              }),\n              webSearchCallItem,\n              fileSearchCallItem,\n              codeInterpreterCallItem,\n              imageGenerationCallItem,\n              localShellCallItem,\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n                call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n              }),\n              zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n                id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n                encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n                summary: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n                  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n                    type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"summary_text\"),\n                    text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n                  })\n                )\n              })\n            ])\n          ),\n          service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n          incomplete_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).nullish(),\n          usage: usageSchema2\n        })\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    if (response.error) {\n      throw new _ai_sdk_provider__WEBPACK_IMPORTED_MODULE_2__.APICallError({\n        message: response.error.message,\n        url,\n        requestBodyValues: body,\n        statusCode: 400,\n        responseHeaders,\n        responseBody: rawResponse,\n        isRetryable: false\n      });\n    }\n    const content = [];\n    const logprobs = [];\n    let hasFunctionCall = false;\n    for (const part of response.output) {\n      switch (part.type) {\n        case \"reasoning\": {\n          if (part.summary.length === 0) {\n            part.summary.push({ type: \"summary_text\", text: \"\" });\n          }\n          for (const summary of part.summary) {\n            content.push({\n              type: \"reasoning\",\n              text: summary.text,\n              providerMetadata: {\n                openai: {\n                  itemId: part.id,\n                  reasoningEncryptedContent: (_a = part.encrypted_content) != null ? _a : null\n                }\n              }\n            });\n          }\n          break;\n        }\n        case \"image_generation_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"image_generation\",\n            input: \"{}\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"image_generation\",\n            result: {\n              result: part.result\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"local_shell_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: \"local_shell\",\n            input: JSON.stringify({ action: part.action }),\n            providerMetadata: {\n              openai: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"message\": {\n          for (const contentPart of part.content) {\n            if (((_c = (_b = options.providerOptions) == null ? void 0 : _b.openai) == null ? void 0 : _c.logprobs) && contentPart.logprobs) {\n              logprobs.push(contentPart.logprobs);\n            }\n            content.push({\n              type: \"text\",\n              text: contentPart.text,\n              providerMetadata: {\n                openai: {\n                  itemId: part.id\n                }\n              }\n            });\n            for (const annotation of contentPart.annotations) {\n              if (annotation.type === \"url_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (_f = (_e = (_d = this.config).generateId) == null ? void 0 : _e.call(_d)) != null ? _f : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: annotation.url,\n                  title: annotation.title\n                });\n              } else if (annotation.type === \"file_citation\") {\n                content.push({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_i = (_h = (_g = this.config).generateId) == null ? void 0 : _h.call(_g)) != null ? _i : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_k = (_j = annotation.quote) != null ? _j : annotation.filename) != null ? _k : \"Document\",\n                  filename: (_l = annotation.filename) != null ? _l : annotation.file_id\n                });\n              }\n            }\n          }\n          break;\n        }\n        case \"function_call\": {\n          hasFunctionCall = true;\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.call_id,\n            toolName: part.name,\n            input: part.arguments,\n            providerMetadata: {\n              openai: {\n                itemId: part.id\n              }\n            }\n          });\n          break;\n        }\n        case \"web_search_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n            input: JSON.stringify({ action: part.action }),\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n            result: { status: part.status },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"computer_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"computer_use\",\n            input: \"\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"computer_use\",\n            result: {\n              type: \"computer_use_tool_result\",\n              status: part.status || \"completed\"\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"file_search_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"file_search\",\n            input: \"{}\",\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"file_search\",\n            result: {\n              queries: part.queries,\n              results: (_n = (_m = part.results) == null ? void 0 : _m.map((result) => ({\n                attributes: result.attributes,\n                fileId: result.file_id,\n                filename: result.filename,\n                score: result.score,\n                text: result.text\n              }))) != null ? _n : null\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n        case \"code_interpreter_call\": {\n          content.push({\n            type: \"tool-call\",\n            toolCallId: part.id,\n            toolName: \"code_interpreter\",\n            input: JSON.stringify({\n              code: part.code,\n              containerId: part.container_id\n            }),\n            providerExecuted: true\n          });\n          content.push({\n            type: \"tool-result\",\n            toolCallId: part.id,\n            toolName: \"code_interpreter\",\n            result: {\n              outputs: part.outputs\n            },\n            providerExecuted: true\n          });\n          break;\n        }\n      }\n    }\n    const providerMetadata = {\n      openai: { responseId: response.id }\n    };\n    if (logprobs.length > 0) {\n      providerMetadata.openai.logprobs = logprobs;\n    }\n    if (typeof response.service_tier === \"string\") {\n      providerMetadata.openai.serviceTier = response.service_tier;\n    }\n    return {\n      content,\n      finishReason: mapOpenAIResponseFinishReason({\n        finishReason: (_o = response.incomplete_details) == null ? void 0 : _o.reason,\n        hasFunctionCall\n      }),\n      usage: {\n        inputTokens: response.usage.input_tokens,\n        outputTokens: response.usage.output_tokens,\n        totalTokens: response.usage.input_tokens + response.usage.output_tokens,\n        reasoningTokens: (_q = (_p = response.usage.output_tokens_details) == null ? void 0 : _p.reasoning_tokens) != null ? _q : void 0,\n        cachedInputTokens: (_s = (_r = response.usage.input_tokens_details) == null ? void 0 : _r.cached_tokens) != null ? _s : void 0\n      },\n      request: { body },\n      response: {\n        id: response.id,\n        timestamp: new Date(response.created_at * 1e3),\n        modelId: response.model,\n        headers: responseHeaders,\n        body: rawResponse\n      },\n      providerMetadata,\n      warnings\n    };\n  }\n  async doStream(options) {\n    const {\n      args: body,\n      warnings,\n      webSearchToolName\n    } = await this.getArgs(options);\n    const { responseHeaders, value: response } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/responses\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: {\n        ...body,\n        stream: true\n      },\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createEventSourceResponseHandler)(\n        openaiResponsesChunkSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const self = this;\n    let finishReason = \"unknown\";\n    const usage = {\n      inputTokens: void 0,\n      outputTokens: void 0,\n      totalTokens: void 0\n    };\n    const logprobs = [];\n    let responseId = null;\n    const ongoingToolCalls = {};\n    let hasFunctionCall = false;\n    const activeReasoning = {};\n    let serviceTier;\n    return {\n      stream: response.pipeThrough(\n        new TransformStream({\n          start(controller) {\n            controller.enqueue({ type: \"stream-start\", warnings });\n          },\n          transform(chunk, controller) {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w;\n            if (options.includeRawChunks) {\n              controller.enqueue({ type: \"raw\", rawValue: chunk.rawValue });\n            }\n            if (!chunk.success) {\n              finishReason = \"error\";\n              controller.enqueue({ type: \"error\", error: chunk.error });\n              return;\n            }\n            const value = chunk.value;\n            if (isResponseOutputItemAddedChunk(value)) {\n              if (value.item.type === \"function_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: value.item.name,\n                  toolCallId: value.item.call_id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.call_id,\n                  toolName: value.item.name\n                });\n              } else if (value.item.type === \"web_search_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: webSearchToolName != null ? webSearchToolName : \"web_search\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"computer_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: \"computer_use\",\n                  toolCallId: value.item.id\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: \"computer_use\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"code_interpreter_call\") {\n                ongoingToolCalls[value.output_index] = {\n                  toolName: \"code_interpreter\",\n                  toolCallId: value.item.id,\n                  codeInterpreter: {\n                    containerId: value.item.container_id\n                  }\n                };\n                controller.enqueue({\n                  type: \"tool-input-start\",\n                  id: value.item.id,\n                  toolName: \"code_interpreter\",\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: value.item.id,\n                  delta: `{\"containerId\":\"${value.item.container_id}\",\"code\":\"`\n                });\n              } else if (value.item.type === \"file_search_call\") {\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"file_search\",\n                  input: \"{}\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"image_generation_call\") {\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"image_generation\",\n                  input: \"{}\",\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"message\") {\n                controller.enqueue({\n                  type: \"text-start\",\n                  id: value.item.id,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (isResponseOutputItemAddedReasoningChunk(value)) {\n                activeReasoning[value.item.id] = {\n                  encryptedContent: value.item.encrypted_content,\n                  summaryParts: [0]\n                };\n                controller.enqueue({\n                  type: \"reasoning-start\",\n                  id: `${value.item.id}:0`,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id,\n                      reasoningEncryptedContent: (_a = value.item.encrypted_content) != null ? _a : null\n                    }\n                  }\n                });\n              }\n            } else if (isResponseOutputItemDoneChunk(value)) {\n              if (value.item.type === \"function_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                hasFunctionCall = true;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.call_id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.call_id,\n                  toolName: value.item.name,\n                  input: value.item.arguments,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item.id\n                    }\n                  }\n                });\n              } else if (value.item.type === \"web_search_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"web_search\",\n                  input: JSON.stringify({ action: value.item.action }),\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"web_search\",\n                  result: { status: value.item.status },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"computer_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: value.item.id\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.id,\n                  toolName: \"computer_use\",\n                  input: \"\",\n                  providerExecuted: true\n                });\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"computer_use\",\n                  result: {\n                    type: \"computer_use_tool_result\",\n                    status: value.item.status || \"completed\"\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"file_search_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"file_search\",\n                  result: {\n                    queries: value.item.queries,\n                    results: (_c = (_b = value.item.results) == null ? void 0 : _b.map((result) => ({\n                      attributes: result.attributes,\n                      fileId: result.file_id,\n                      filename: result.filename,\n                      score: result.score,\n                      text: result.text\n                    }))) != null ? _c : null\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"code_interpreter_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"code_interpreter\",\n                  result: {\n                    outputs: value.item.outputs\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"image_generation_call\") {\n                controller.enqueue({\n                  type: \"tool-result\",\n                  toolCallId: value.item.id,\n                  toolName: \"image_generation\",\n                  result: {\n                    result: value.item.result\n                  },\n                  providerExecuted: true\n                });\n              } else if (value.item.type === \"local_shell_call\") {\n                ongoingToolCalls[value.output_index] = void 0;\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: value.item.call_id,\n                  toolName: \"local_shell\",\n                  input: JSON.stringify({\n                    action: {\n                      type: \"exec\",\n                      command: value.item.action.command,\n                      timeoutMs: value.item.action.timeout_ms,\n                      user: value.item.action.user,\n                      workingDirectory: value.item.action.working_directory,\n                      env: value.item.action.env\n                    }\n                  }),\n                  providerMetadata: {\n                    openai: { itemId: value.item.id }\n                  }\n                });\n              } else if (value.item.type === \"message\") {\n                controller.enqueue({\n                  type: \"text-end\",\n                  id: value.item.id\n                });\n              } else if (isResponseOutputItemDoneReasoningChunk(value)) {\n                const activeReasoningPart = activeReasoning[value.item.id];\n                for (const summaryIndex of activeReasoningPart.summaryParts) {\n                  controller.enqueue({\n                    type: \"reasoning-end\",\n                    id: `${value.item.id}:${summaryIndex}`,\n                    providerMetadata: {\n                      openai: {\n                        itemId: value.item.id,\n                        reasoningEncryptedContent: (_d = value.item.encrypted_content) != null ? _d : null\n                      }\n                    }\n                  });\n                }\n                delete activeReasoning[value.item.id];\n              }\n            } else if (isResponseFunctionCallArgumentsDeltaChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: value.delta\n                });\n              }\n            } else if (isResponseCodeInterpreterCallCodeDeltaChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  // The delta is code, which is embedding in a JSON string.\n                  // To escape it, we use JSON.stringify and slice to remove the outer quotes.\n                  delta: JSON.stringify(value.delta).slice(1, -1)\n                });\n              }\n            } else if (isResponseCodeInterpreterCallCodeDoneChunk(value)) {\n              const toolCall = ongoingToolCalls[value.output_index];\n              if (toolCall != null) {\n                controller.enqueue({\n                  type: \"tool-input-delta\",\n                  id: toolCall.toolCallId,\n                  delta: '\"}'\n                });\n                controller.enqueue({\n                  type: \"tool-input-end\",\n                  id: toolCall.toolCallId\n                });\n                controller.enqueue({\n                  type: \"tool-call\",\n                  toolCallId: toolCall.toolCallId,\n                  toolName: \"code_interpreter\",\n                  input: JSON.stringify({\n                    code: value.code,\n                    containerId: toolCall.codeInterpreter.containerId\n                  }),\n                  providerExecuted: true\n                });\n              }\n            } else if (isResponseCreatedChunk(value)) {\n              responseId = value.response.id;\n              controller.enqueue({\n                type: \"response-metadata\",\n                id: value.response.id,\n                timestamp: new Date(value.response.created_at * 1e3),\n                modelId: value.response.model\n              });\n            } else if (isTextDeltaChunk(value)) {\n              controller.enqueue({\n                type: \"text-delta\",\n                id: value.item_id,\n                delta: value.delta\n              });\n              if (((_f = (_e = options.providerOptions) == null ? void 0 : _e.openai) == null ? void 0 : _f.logprobs) && value.logprobs) {\n                logprobs.push(value.logprobs);\n              }\n            } else if (isResponseReasoningSummaryPartAddedChunk(value)) {\n              if (value.summary_index > 0) {\n                (_g = activeReasoning[value.item_id]) == null ? void 0 : _g.summaryParts.push(\n                  value.summary_index\n                );\n                controller.enqueue({\n                  type: \"reasoning-start\",\n                  id: `${value.item_id}:${value.summary_index}`,\n                  providerMetadata: {\n                    openai: {\n                      itemId: value.item_id,\n                      reasoningEncryptedContent: (_i = (_h = activeReasoning[value.item_id]) == null ? void 0 : _h.encryptedContent) != null ? _i : null\n                    }\n                  }\n                });\n              }\n            } else if (isResponseReasoningSummaryTextDeltaChunk(value)) {\n              controller.enqueue({\n                type: \"reasoning-delta\",\n                id: `${value.item_id}:${value.summary_index}`,\n                delta: value.delta,\n                providerMetadata: {\n                  openai: {\n                    itemId: value.item_id\n                  }\n                }\n              });\n            } else if (isResponseFinishedChunk(value)) {\n              finishReason = mapOpenAIResponseFinishReason({\n                finishReason: (_j = value.response.incomplete_details) == null ? void 0 : _j.reason,\n                hasFunctionCall\n              });\n              usage.inputTokens = value.response.usage.input_tokens;\n              usage.outputTokens = value.response.usage.output_tokens;\n              usage.totalTokens = value.response.usage.input_tokens + value.response.usage.output_tokens;\n              usage.reasoningTokens = (_l = (_k = value.response.usage.output_tokens_details) == null ? void 0 : _k.reasoning_tokens) != null ? _l : void 0;\n              usage.cachedInputTokens = (_n = (_m = value.response.usage.input_tokens_details) == null ? void 0 : _m.cached_tokens) != null ? _n : void 0;\n              if (typeof value.response.service_tier === \"string\") {\n                serviceTier = value.response.service_tier;\n              }\n            } else if (isResponseAnnotationAddedChunk(value)) {\n              if (value.annotation.type === \"url_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"url\",\n                  id: (_q = (_p = (_o = self.config).generateId) == null ? void 0 : _p.call(_o)) != null ? _q : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  url: value.annotation.url,\n                  title: value.annotation.title\n                });\n              } else if (value.annotation.type === \"file_citation\") {\n                controller.enqueue({\n                  type: \"source\",\n                  sourceType: \"document\",\n                  id: (_t = (_s = (_r = self.config).generateId) == null ? void 0 : _s.call(_r)) != null ? _t : (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.generateId)(),\n                  mediaType: \"text/plain\",\n                  title: (_v = (_u = value.annotation.quote) != null ? _u : value.annotation.filename) != null ? _v : \"Document\",\n                  filename: (_w = value.annotation.filename) != null ? _w : value.annotation.file_id\n                });\n              }\n            } else if (isErrorChunk(value)) {\n              controller.enqueue({ type: \"error\", error: value });\n            }\n          },\n          flush(controller) {\n            const providerMetadata = {\n              openai: {\n                responseId\n              }\n            };\n            if (logprobs.length > 0) {\n              providerMetadata.openai.logprobs = logprobs;\n            }\n            if (serviceTier !== void 0) {\n              providerMetadata.openai.serviceTier = serviceTier;\n            }\n            controller.enqueue({\n              type: \"finish\",\n              finishReason,\n              usage,\n              providerMetadata\n            });\n          }\n        })\n      ),\n      request: { body },\n      response: { headers: responseHeaders }\n    };\n  }\n};\nvar usageSchema2 = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  input_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  input_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ cached_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish() }).nullish(),\n  output_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  output_tokens_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reasoning_tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish() }).nullish()\n});\nvar textDeltaChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_text.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  logprobs: LOGPROBS_SCHEMA.nullish()\n});\nvar errorChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"error\"),\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  message: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  param: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  sequence_number: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar responseFinishedChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"response.completed\", \"response.incomplete\"]),\n  response: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    incomplete_details: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ reason: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).nullish(),\n    usage: usageSchema2,\n    service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n  })\n});\nvar responseCreatedChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.created\"),\n  response: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n    id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    created_at: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n    model: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n    service_tier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n  })\n});\nvar responseOutputItemAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_item.added\"),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  item: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"web_search_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      action: zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n        type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"search\"),\n        query: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n      }).nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_search_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image_generation_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"code_interpreter_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      container_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullable(),\n      outputs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n        zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"logs\"), logs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }),\n          zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"image\"), url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() })\n        ])\n      ).nullable(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    })\n  ])\n});\nvar responseOutputItemDoneSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_item.done\"),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  item: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"message\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"reasoning\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      encrypted_content: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"function_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      call_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      name: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      arguments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"completed\")\n    }),\n    codeInterpreterCallItem,\n    imageGenerationCallItem,\n    webSearchCallItem,\n    fileSearchCallItem,\n    localShellCallItem,\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"computer_call\"),\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      status: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"completed\")\n    })\n  ])\n});\nvar responseFunctionCallArgumentsDeltaSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.function_call_arguments.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar responseCodeInterpreterCallCodeDeltaSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.code_interpreter_call_code.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar responseCodeInterpreterCallCodeDoneSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.code_interpreter_call_code.done\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  output_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  code: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar responseAnnotationAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.output_text.annotation.added\"),\n  annotation: zod_v4__WEBPACK_IMPORTED_MODULE_0__.discriminatedUnion(\"type\", [\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"url_citation\"),\n      url: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      title: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n    }),\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"file_citation\"),\n      file_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      filename: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n      index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      start_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      end_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n      quote: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n    })\n  ])\n});\nvar responseReasoningSummaryPartAddedSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.reasoning_summary_part.added\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n});\nvar responseReasoningSummaryTextDeltaSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.literal(\"response.reasoning_summary_text.delta\"),\n  item_id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  summary_index: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n  delta: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nvar openaiResponsesChunkSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([\n  textDeltaChunkSchema,\n  responseFinishedChunkSchema,\n  responseCreatedChunkSchema,\n  responseOutputItemAddedSchema,\n  responseOutputItemDoneSchema,\n  responseFunctionCallArgumentsDeltaSchema,\n  responseCodeInterpreterCallCodeDeltaSchema,\n  responseCodeInterpreterCallCodeDoneSchema,\n  responseAnnotationAddedSchema,\n  responseReasoningSummaryPartAddedSchema,\n  responseReasoningSummaryTextDeltaSchema,\n  errorChunkSchema,\n  zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({ type: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string() }).loose()\n  // fallback for unknown chunks\n]);\nfunction isTextDeltaChunk(chunk) {\n  return chunk.type === \"response.output_text.delta\";\n}\nfunction isResponseOutputItemDoneChunk(chunk) {\n  return chunk.type === \"response.output_item.done\";\n}\nfunction isResponseOutputItemDoneReasoningChunk(chunk) {\n  return isResponseOutputItemDoneChunk(chunk) && chunk.item.type === \"reasoning\";\n}\nfunction isResponseFinishedChunk(chunk) {\n  return chunk.type === \"response.completed\" || chunk.type === \"response.incomplete\";\n}\nfunction isResponseCreatedChunk(chunk) {\n  return chunk.type === \"response.created\";\n}\nfunction isResponseFunctionCallArgumentsDeltaChunk(chunk) {\n  return chunk.type === \"response.function_call_arguments.delta\";\n}\nfunction isResponseCodeInterpreterCallCodeDeltaChunk(chunk) {\n  return chunk.type === \"response.code_interpreter_call_code.delta\";\n}\nfunction isResponseCodeInterpreterCallCodeDoneChunk(chunk) {\n  return chunk.type === \"response.code_interpreter_call_code.done\";\n}\nfunction isResponseOutputItemAddedChunk(chunk) {\n  return chunk.type === \"response.output_item.added\";\n}\nfunction isResponseOutputItemAddedReasoningChunk(chunk) {\n  return isResponseOutputItemAddedChunk(chunk) && chunk.item.type === \"reasoning\";\n}\nfunction isResponseAnnotationAddedChunk(chunk) {\n  return chunk.type === \"response.output_text.annotation.added\";\n}\nfunction isResponseReasoningSummaryPartAddedChunk(chunk) {\n  return chunk.type === \"response.reasoning_summary_part.added\";\n}\nfunction isResponseReasoningSummaryTextDeltaChunk(chunk) {\n  return chunk.type === \"response.reasoning_summary_text.delta\";\n}\nfunction isErrorChunk(chunk) {\n  return chunk.type === \"error\";\n}\nfunction getResponsesModelConfig(modelId) {\n  const supportsFlexProcessing2 = modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-chat\");\n  const supportsPriorityProcessing2 = modelId.startsWith(\"gpt-4\") || modelId.startsWith(\"gpt-5-mini\") || modelId.startsWith(\"gpt-5\") && !modelId.startsWith(\"gpt-5-nano\") && !modelId.startsWith(\"gpt-5-chat\") || modelId.startsWith(\"o3\") || modelId.startsWith(\"o4-mini\");\n  const defaults = {\n    requiredAutoTruncation: false,\n    systemMessageMode: \"system\",\n    supportsFlexProcessing: supportsFlexProcessing2,\n    supportsPriorityProcessing: supportsPriorityProcessing2\n  };\n  if (modelId.startsWith(\"gpt-5-chat\")) {\n    return {\n      ...defaults,\n      isReasoningModel: false\n    };\n  }\n  if (modelId.startsWith(\"o\") || modelId.startsWith(\"gpt-5\") || modelId.startsWith(\"codex-\") || modelId.startsWith(\"computer-use\")) {\n    if (modelId.startsWith(\"o1-mini\") || modelId.startsWith(\"o1-preview\")) {\n      return {\n        ...defaults,\n        isReasoningModel: true,\n        systemMessageMode: \"remove\"\n      };\n    }\n    return {\n      ...defaults,\n      isReasoningModel: true,\n      systemMessageMode: \"developer\"\n    };\n  }\n  return {\n    ...defaults,\n    isReasoningModel: false\n  };\n}\nvar openaiResponsesProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  include: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\n      \"reasoning.encrypted_content\",\n      \"file_search_call.results\",\n      \"message.output_text.logprobs\"\n    ])\n  ).nullish(),\n  instructions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  /**\n   * Return the log probabilities of the tokens.\n   *\n   * Setting to true will return the log probabilities of the tokens that\n   * were generated.\n   *\n   * Setting to a number will return the log probabilities of the top n\n   * tokens that were generated.\n   *\n   * @see https://platform.openai.com/docs/api-reference/responses/create\n   * @see https://cookbook.openai.com/examples/using_logprobs\n   */\n  logprobs: zod_v4__WEBPACK_IMPORTED_MODULE_0__.union([zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean(), zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(1).max(TOP_LOGPROBS_MAX)]).optional(),\n  /**\n   * The maximum number of total calls to built-in tools that can be processed in a response.\n   * This maximum number applies across all built-in tool calls, not per individual tool.\n   * Any further attempts to call a tool by the model will be ignored.\n   */\n  maxToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  metadata: zod_v4__WEBPACK_IMPORTED_MODULE_0__.any().nullish(),\n  parallelToolCalls: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  previousResponseId: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  promptCacheKey: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningEffort: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  reasoningSummary: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  safetyIdentifier: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  serviceTier: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"auto\", \"flex\", \"priority\"]).nullish(),\n  store: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  strictJsonSchema: zod_v4__WEBPACK_IMPORTED_MODULE_0__.boolean().nullish(),\n  textVerbosity: zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"low\", \"medium\", \"high\"]).nullish(),\n  user: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n});\n\n// src/speech/openai-speech-model.ts\n\n\nvar OpenAIProviderOptionsSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  instructions: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  speed: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(0.25).max(4).default(1).nullish()\n});\nvar OpenAISpeechModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    text,\n    voice = \"alloy\",\n    outputFormat = \"mp3\",\n    speed,\n    instructions,\n    language,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openAIOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: OpenAIProviderOptionsSchema\n    });\n    const requestBody = {\n      model: this.modelId,\n      input: text,\n      voice,\n      response_format: \"mp3\",\n      speed,\n      instructions\n    };\n    if (outputFormat) {\n      if ([\"mp3\", \"opus\", \"aac\", \"flac\", \"wav\", \"pcm\"].includes(outputFormat)) {\n        requestBody.response_format = outputFormat;\n      } else {\n        warnings.push({\n          type: \"unsupported-setting\",\n          setting: \"outputFormat\",\n          details: `Unsupported output format: ${outputFormat}. Using mp3 instead.`\n        });\n      }\n    }\n    if (openAIOptions) {\n      const speechModelOptions = {};\n      for (const key in speechModelOptions) {\n        const value = speechModelOptions[key];\n        if (value !== void 0) {\n          requestBody[key] = value;\n        }\n      }\n    }\n    if (language) {\n      warnings.push({\n        type: \"unsupported-setting\",\n        setting: \"language\",\n        details: `OpenAI speech models do not support language selection. Language parameter \"${language}\" was ignored.`\n      });\n    }\n    return {\n      requestBody,\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c;\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { requestBody, warnings } = await this.getArgs(options);\n    const {\n      value: audio,\n      responseHeaders,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postJsonToApi)({\n      url: this.config.url({\n        path: \"/audio/speech\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      body: requestBody,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createBinaryResponseHandler)(),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    return {\n      audio,\n      warnings,\n      request: {\n        body: JSON.stringify(requestBody)\n      },\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n        body: rawResponse\n      }\n    };\n  }\n};\n\n// src/transcription/openai-transcription-model.ts\n\n\n\n// src/transcription/openai-transcription-options.ts\n\nvar openAITranscriptionProviderOptions = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * Additional information to include in the transcription response.\n   */\n  include: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.string()).optional(),\n  /**\n   * The language of the input audio in ISO-639-1 format.\n   */\n  language: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * An optional text to guide the model's style or continue a previous audio segment.\n   */\n  prompt: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n  /**\n   * The sampling temperature, between 0 and 1.\n   * @default 0\n   */\n  temperature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().min(0).max(1).default(0).optional(),\n  /**\n   * The timestamp granularities to populate for this transcription.\n   * @default ['segment']\n   */\n  timestampGranularities: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__[\"enum\"]([\"word\", \"segment\"])).default([\"segment\"]).optional()\n});\n\n// src/transcription/openai-transcription-model.ts\nvar languageMap = {\n  afrikaans: \"af\",\n  arabic: \"ar\",\n  armenian: \"hy\",\n  azerbaijani: \"az\",\n  belarusian: \"be\",\n  bosnian: \"bs\",\n  bulgarian: \"bg\",\n  catalan: \"ca\",\n  chinese: \"zh\",\n  croatian: \"hr\",\n  czech: \"cs\",\n  danish: \"da\",\n  dutch: \"nl\",\n  english: \"en\",\n  estonian: \"et\",\n  finnish: \"fi\",\n  french: \"fr\",\n  galician: \"gl\",\n  german: \"de\",\n  greek: \"el\",\n  hebrew: \"he\",\n  hindi: \"hi\",\n  hungarian: \"hu\",\n  icelandic: \"is\",\n  indonesian: \"id\",\n  italian: \"it\",\n  japanese: \"ja\",\n  kannada: \"kn\",\n  kazakh: \"kk\",\n  korean: \"ko\",\n  latvian: \"lv\",\n  lithuanian: \"lt\",\n  macedonian: \"mk\",\n  malay: \"ms\",\n  marathi: \"mr\",\n  maori: \"mi\",\n  nepali: \"ne\",\n  norwegian: \"no\",\n  persian: \"fa\",\n  polish: \"pl\",\n  portuguese: \"pt\",\n  romanian: \"ro\",\n  russian: \"ru\",\n  serbian: \"sr\",\n  slovak: \"sk\",\n  slovenian: \"sl\",\n  spanish: \"es\",\n  swahili: \"sw\",\n  swedish: \"sv\",\n  tagalog: \"tl\",\n  tamil: \"ta\",\n  thai: \"th\",\n  turkish: \"tr\",\n  ukrainian: \"uk\",\n  urdu: \"ur\",\n  vietnamese: \"vi\",\n  welsh: \"cy\"\n};\nvar OpenAITranscriptionModel = class {\n  constructor(modelId, config) {\n    this.modelId = modelId;\n    this.config = config;\n    this.specificationVersion = \"v2\";\n  }\n  get provider() {\n    return this.config.provider;\n  }\n  async getArgs({\n    audio,\n    mediaType,\n    providerOptions\n  }) {\n    const warnings = [];\n    const openAIOptions = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.parseProviderOptions)({\n      provider: \"openai\",\n      providerOptions,\n      schema: openAITranscriptionProviderOptions\n    });\n    const formData = new FormData();\n    const blob = audio instanceof Uint8Array ? new Blob([audio]) : new Blob([(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.convertBase64ToUint8Array)(audio)]);\n    formData.append(\"model\", this.modelId);\n    const fileExtension = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.mediaTypeToExtension)(mediaType);\n    formData.append(\n      \"file\",\n      new File([blob], \"audio\", { type: mediaType }),\n      `audio.${fileExtension}`\n    );\n    if (openAIOptions) {\n      const transcriptionModelOptions = {\n        include: openAIOptions.include,\n        language: openAIOptions.language,\n        prompt: openAIOptions.prompt,\n        // https://platform.openai.com/docs/api-reference/audio/createTranscription#audio_createtranscription-response_format\n        // prefer verbose_json to get segments for models that support it\n        response_format: [\n          \"gpt-4o-transcribe\",\n          \"gpt-4o-mini-transcribe\"\n        ].includes(this.modelId) ? \"json\" : \"verbose_json\",\n        temperature: openAIOptions.temperature,\n        timestamp_granularities: openAIOptions.timestampGranularities\n      };\n      for (const [key, value] of Object.entries(transcriptionModelOptions)) {\n        if (value != null) {\n          if (Array.isArray(value)) {\n            for (const item of value) {\n              formData.append(`${key}[]`, String(item));\n            }\n          } else {\n            formData.append(key, String(value));\n          }\n        }\n      }\n    }\n    return {\n      formData,\n      warnings\n    };\n  }\n  async doGenerate(options) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    const currentDate = (_c = (_b = (_a = this.config._internal) == null ? void 0 : _a.currentDate) == null ? void 0 : _b.call(_a)) != null ? _c : /* @__PURE__ */ new Date();\n    const { formData, warnings } = await this.getArgs(options);\n    const {\n      value: response,\n      responseHeaders,\n      rawValue: rawResponse\n    } = await (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.postFormDataToApi)({\n      url: this.config.url({\n        path: \"/audio/transcriptions\",\n        modelId: this.modelId\n      }),\n      headers: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.combineHeaders)(this.config.headers(), options.headers),\n      formData,\n      failedResponseHandler: openaiFailedResponseHandler,\n      successfulResponseHandler: (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.createJsonResponseHandler)(\n        openaiTranscriptionResponseSchema\n      ),\n      abortSignal: options.abortSignal,\n      fetch: this.config.fetch\n    });\n    const language = response.language != null && response.language in languageMap ? languageMap[response.language] : void 0;\n    return {\n      text: response.text,\n      segments: (_g = (_f = (_d = response.segments) == null ? void 0 : _d.map((segment) => ({\n        text: segment.text,\n        startSecond: segment.start,\n        endSecond: segment.end\n      }))) != null ? _f : (_e = response.words) == null ? void 0 : _e.map((word) => ({\n        text: word.word,\n        startSecond: word.start,\n        endSecond: word.end\n      }))) != null ? _g : [],\n      language,\n      durationInSeconds: (_h = response.duration) != null ? _h : void 0,\n      warnings,\n      response: {\n        timestamp: currentDate,\n        modelId: this.modelId,\n        headers: responseHeaders,\n        body: rawResponse\n      }\n    };\n  }\n};\nvar openaiTranscriptionResponseSchema = zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n  text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n  language: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  duration: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number().nullish(),\n  words: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      word: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      start: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      end: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n    })\n  ).nullish(),\n  segments: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(\n    zod_v4__WEBPACK_IMPORTED_MODULE_0__.object({\n      id: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      seek: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      start: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      end: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      text: zod_v4__WEBPACK_IMPORTED_MODULE_0__.string(),\n      tokens: zod_v4__WEBPACK_IMPORTED_MODULE_0__.array(zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()),\n      temperature: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      avg_logprob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      compression_ratio: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number(),\n      no_speech_prob: zod_v4__WEBPACK_IMPORTED_MODULE_0__.number()\n    })\n  ).nullish()\n});\n\n// src/version.ts\nvar VERSION =  true ? \"2.0.44\" : 0;\n\n// src/openai-provider.ts\nfunction createOpenAI(options = {}) {\n  var _a, _b;\n  const baseURL = (_a = (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withoutTrailingSlash)(\n    (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadOptionalSetting)({\n      settingValue: options.baseURL,\n      environmentVariableName: \"OPENAI_BASE_URL\"\n    })\n  )) != null ? _a : \"https://api.openai.com/v1\";\n  const providerName = (_b = options.name) != null ? _b : \"openai\";\n  const getHeaders = () => (0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.withUserAgentSuffix)(\n    {\n      Authorization: `Bearer ${(0,_ai_sdk_provider_utils__WEBPACK_IMPORTED_MODULE_1__.loadApiKey)({\n        apiKey: options.apiKey,\n        environmentVariableName: \"OPENAI_API_KEY\",\n        description: \"OpenAI\"\n      })}`,\n      \"OpenAI-Organization\": options.organization,\n      \"OpenAI-Project\": options.project,\n      ...options.headers\n    },\n    `ai-sdk/openai/${VERSION}`\n  );\n  const createChatModel = (modelId) => new OpenAIChatLanguageModel(modelId, {\n    provider: `${providerName}.chat`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createCompletionModel = (modelId) => new OpenAICompletionLanguageModel(modelId, {\n    provider: `${providerName}.completion`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createEmbeddingModel = (modelId) => new OpenAIEmbeddingModel(modelId, {\n    provider: `${providerName}.embedding`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createImageModel = (modelId) => new OpenAIImageModel(modelId, {\n    provider: `${providerName}.image`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createTranscriptionModel = (modelId) => new OpenAITranscriptionModel(modelId, {\n    provider: `${providerName}.transcription`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createSpeechModel = (modelId) => new OpenAISpeechModel(modelId, {\n    provider: `${providerName}.speech`,\n    url: ({ path }) => `${baseURL}${path}`,\n    headers: getHeaders,\n    fetch: options.fetch\n  });\n  const createLanguageModel = (modelId) => {\n    if (new.target) {\n      throw new Error(\n        \"The OpenAI model function cannot be called with the new keyword.\"\n      );\n    }\n    return createResponsesModel(modelId);\n  };\n  const createResponsesModel = (modelId) => {\n    return new OpenAIResponsesLanguageModel(modelId, {\n      provider: `${providerName}.responses`,\n      url: ({ path }) => `${baseURL}${path}`,\n      headers: getHeaders,\n      fetch: options.fetch,\n      fileIdPrefixes: [\"file-\"]\n    });\n  };\n  const provider = function(modelId) {\n    return createLanguageModel(modelId);\n  };\n  provider.languageModel = createLanguageModel;\n  provider.chat = createChatModel;\n  provider.completion = createCompletionModel;\n  provider.responses = createResponsesModel;\n  provider.embedding = createEmbeddingModel;\n  provider.textEmbedding = createEmbeddingModel;\n  provider.textEmbeddingModel = createEmbeddingModel;\n  provider.image = createImageModel;\n  provider.imageModel = createImageModel;\n  provider.transcription = createTranscriptionModel;\n  provider.transcriptionModel = createTranscriptionModel;\n  provider.speech = createSpeechModel;\n  provider.speechModel = createSpeechModel;\n  provider.tools = openaiTools;\n  return provider;\n}\nvar openai = createOpenAI();\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhaS1zZGsrb3BlbmFpQDIuMC40NF96b2RAMy4yNS43Ni9ub2RlX21vZHVsZXMvQGFpLXNkay9vcGVuYWkvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBTWdDOztBQUVoQztBQUcwQjtBQVNNO0FBQ0M7O0FBRWpDO0FBQzJCO0FBQzZDO0FBQ3hFLDRCQUE0QiwwQ0FBUTtBQUNwQyxTQUFTLDBDQUFRO0FBQ2pCLGFBQWEsMENBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwQ0FBUTtBQUNsQixXQUFXLHVDQUFLO0FBQ2hCLFVBQVUseUNBQU8sRUFBRSwwQ0FBUSxJQUFJLDBDQUFRO0FBQ3ZDLEdBQUc7QUFDSCxDQUFDO0FBQ0Qsa0NBQWtDLHNGQUE4QjtBQUNoRTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUcwQjtBQUMrQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlCQUF5QjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEJBQTRCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGlCQUFpQjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3Q0FBd0M7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFGQUFxRixXQUFXLFNBQVMsdUVBQWUsWUFBWTtBQUNwSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLDhCQUE4QiwyRUFBNkI7QUFDM0Q7QUFDQSxxQkFBcUI7QUFDckI7QUFD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O0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxJQUFJO0FBQ2xCLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FB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QVEsUUFBUSxFQUFFLEtBQUs7QUFDekM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLGlCQUFpQixhQUFhO0FBQzlCLFlBQVksTUFBTSxRQUFRLFFBQVEsRUFBRSxLQUFLO0FBQ3pDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxpQkFBaUIsYUFBYTtBQUM5QixZQUFZLE1BQU0sUUFBUSxRQUFRLEVBQUUsS0FBSztBQUN6QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGFBQWE7QUFDaEMsY0FBYyxNQUFNLFFBQVEsUUFBUSxFQUFFLEtBQUs7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AbW9kdWxhci9jb29rYm9vay8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQGFpLXNkaytvcGVuYWlAMi4wLjQ0X3pvZEAzLjI1Ljc2L25vZGVfbW9kdWxlcy9AYWktc2RrL29wZW5haS9kaXN0L2luZGV4Lm1qcz81N2Q1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9vcGVuYWktcHJvdmlkZXIudHNcbmltcG9ydCB7XG4gIGxvYWRBcGlLZXksXG4gIGxvYWRPcHRpb25hbFNldHRpbmcsXG4gIHdpdGhvdXRUcmFpbGluZ1NsYXNoLFxuICB3aXRoVXNlckFnZW50U3VmZml4XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5cbi8vIHNyYy9jaGF0L29wZW5haS1jaGF0LWxhbmd1YWdlLW1vZGVsLnRzXG5pbXBvcnQge1xuICBJbnZhbGlkUmVzcG9uc2VEYXRhRXJyb3Jcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmltcG9ydCB7XG4gIGNvbWJpbmVIZWFkZXJzLFxuICBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcixcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcixcbiAgZ2VuZXJhdGVJZCxcbiAgaXNQYXJzYWJsZUpzb24sXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zLFxuICBwb3N0SnNvblRvQXBpXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHozIH0gZnJvbSBcInpvZC92NFwiO1xuXG4vLyBzcmMvb3BlbmFpLWVycm9yLnRzXG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZC92NFwiO1xuaW1wb3J0IHsgY3JlYXRlSnNvbkVycm9yUmVzcG9uc2VIYW5kbGVyIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbnZhciBvcGVuYWlFcnJvckRhdGFTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGVycm9yOiB6Lm9iamVjdCh7XG4gICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICAvLyBUaGUgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBiZWxvdyBpcyBoYW5kbGVkIGxvb3NlbHkgdG8gc3VwcG9ydFxuICAgIC8vIE9wZW5BSS1jb21wYXRpYmxlIHByb3ZpZGVycyB0aGF0IGhhdmUgc2xpZ2h0bHkgZGlmZmVyZW50IGVycm9yXG4gICAgLy8gcmVzcG9uc2VzOlxuICAgIHR5cGU6IHouc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgIHBhcmFtOiB6LmFueSgpLm51bGxpc2goKSxcbiAgICBjb2RlOiB6LnVuaW9uKFt6LnN0cmluZygpLCB6Lm51bWJlcigpXSkubnVsbGlzaCgpXG4gIH0pXG59KTtcbnZhciBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIgPSBjcmVhdGVKc29uRXJyb3JSZXNwb25zZUhhbmRsZXIoe1xuICBlcnJvclNjaGVtYTogb3BlbmFpRXJyb3JEYXRhU2NoZW1hLFxuICBlcnJvclRvTWVzc2FnZTogKGRhdGEpID0+IGRhdGEuZXJyb3IubWVzc2FnZVxufSk7XG5cbi8vIHNyYy9jaGF0L2NvbnZlcnQtdG8tb3BlbmFpLWNoYXQtbWVzc2FnZXMudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQgeyBjb252ZXJ0VG9CYXNlNjQgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuZnVuY3Rpb24gY29udmVydFRvT3BlbkFJQ2hhdE1lc3NhZ2VzKHtcbiAgcHJvbXB0LFxuICBzeXN0ZW1NZXNzYWdlTW9kZSA9IFwic3lzdGVtXCJcbn0pIHtcbiAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgZm9yIChjb25zdCB7IHJvbGUsIGNvbnRlbnQgfSBvZiBwcm9tcHQpIHtcbiAgICBzd2l0Y2ggKHJvbGUpIHtcbiAgICAgIGNhc2UgXCJzeXN0ZW1cIjoge1xuICAgICAgICBzd2l0Y2ggKHN5c3RlbU1lc3NhZ2VNb2RlKSB7XG4gICAgICAgICAgY2FzZSBcInN5c3RlbVwiOiB7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiZGV2ZWxvcGVyXCI6IHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlOiBcImRldmVsb3BlclwiLCBjb250ZW50IH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJyZW1vdmVcIjoge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJzeXN0ZW0gbWVzc2FnZXMgYXJlIHJlbW92ZWQgZm9yIHRoaXMgbW9kZWxcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHN5c3RlbU1lc3NhZ2VNb2RlO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgVW5zdXBwb3J0ZWQgc3lzdGVtIG1lc3NhZ2UgbW9kZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInVzZXJcIjoge1xuICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPT09IDEgJiYgY29udGVudFswXS50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogY29udGVudFswXS50ZXh0IH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQubWFwKChwYXJ0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgICAgICBzd2l0Y2ggKHBhcnQudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IHBhcnQudGV4dCB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhc2UgXCJmaWxlXCI6IHtcbiAgICAgICAgICAgICAgICBpZiAocGFydC5tZWRpYVR5cGUuc3RhcnRzV2l0aChcImltYWdlL1wiKSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUeXBlID0gcGFydC5tZWRpYVR5cGUgPT09IFwiaW1hZ2UvKlwiID8gXCJpbWFnZS9qcGVnXCIgOiBwYXJ0Lm1lZGlhVHlwZTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VfdXJsXCIsXG4gICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDoge1xuICAgICAgICAgICAgICAgICAgICAgIHVybDogcGFydC5kYXRhIGluc3RhbmNlb2YgVVJMID8gcGFydC5kYXRhLnRvU3RyaW5nKCkgOiBgZGF0YToke21lZGlhVHlwZX07YmFzZTY0LCR7Y29udmVydFRvQmFzZTY0KHBhcnQuZGF0YSl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVuQUkgc3BlY2lmaWMgZXh0ZW5zaW9uOiBpbWFnZSBkZXRhaWxcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IChfYiA9IChfYSA9IHBhcnQucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2Eub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaW1hZ2VEZXRhaWxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQubWVkaWFUeXBlLnN0YXJ0c1dpdGgoXCJhdWRpby9cIikpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmRhdGEgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBcImF1ZGlvIGZpbGUgcGFydHMgd2l0aCBVUkxzXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBhcnQubWVkaWFUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhdWRpby93YXZcIjoge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImlucHV0X2F1ZGlvXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF9hdWRpbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb252ZXJ0VG9CYXNlNjQocGFydC5kYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcIndhdlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXVkaW8vbXAzXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhdWRpby9tcGVnXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9hdWRpb1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRfYXVkaW86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY29udmVydFRvQmFzZTY0KHBhcnQuZGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogXCJtcDNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbmFsaXR5OiBgYXVkaW8gY29udGVudCBwYXJ0cyB3aXRoIG1lZGlhIHR5cGUgJHtwYXJ0Lm1lZGlhVHlwZX1gXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQubWVkaWFUeXBlID09PSBcImFwcGxpY2F0aW9uL3BkZlwiKSB7XG4gICAgICAgICAgICAgICAgICBpZiAocGFydC5kYXRhIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogXCJQREYgZmlsZSBwYXJ0cyB3aXRoIFVSTHNcIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICBmaWxlOiB0eXBlb2YgcGFydC5kYXRhID09PSBcInN0cmluZ1wiICYmIHBhcnQuZGF0YS5zdGFydHNXaXRoKFwiZmlsZS1cIikgPyB7IGZpbGVfaWQ6IHBhcnQuZGF0YSB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAoX2MgPSBwYXJ0LmZpbGVuYW1lKSAhPSBudWxsID8gX2MgOiBgcGFydC0ke2luZGV4fS5wZGZgLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVfZGF0YTogYGRhdGE6YXBwbGljYXRpb24vcGRmO2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NChwYXJ0LmRhdGEpfWBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogYGZpbGUgcGFydCBtZWRpYSB0eXBlICR7cGFydC5tZWRpYVR5cGV9YFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcImFzc2lzdGFudFwiOiB7XG4gICAgICAgIGxldCB0ZXh0ID0gXCJcIjtcbiAgICAgICAgY29uc3QgdG9vbENhbGxzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjb250ZW50KSB7XG4gICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgdGV4dCArPSBwYXJ0LnRleHQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInRvb2wtY2FsbFwiOiB7XG4gICAgICAgICAgICAgIHRvb2xDYWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgbmFtZTogcGFydC50b29sTmFtZSxcbiAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogSlNPTi5zdHJpbmdpZnkocGFydC5pbnB1dClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICBjb250ZW50OiB0ZXh0LFxuICAgICAgICAgIHRvb2xfY2FsbHM6IHRvb2xDYWxscy5sZW5ndGggPiAwID8gdG9vbENhbGxzIDogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ0b29sXCI6IHtcbiAgICAgICAgZm9yIChjb25zdCB0b29sUmVzcG9uc2Ugb2YgY29udGVudCkge1xuICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHRvb2xSZXNwb25zZS5vdXRwdXQ7XG4gICAgICAgICAgbGV0IGNvbnRlbnRWYWx1ZTtcbiAgICAgICAgICBzd2l0Y2ggKG91dHB1dC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwidGV4dFwiOlxuICAgICAgICAgICAgY2FzZSBcImVycm9yLXRleHRcIjpcbiAgICAgICAgICAgICAgY29udGVudFZhbHVlID0gb3V0cHV0LnZhbHVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjb250ZW50XCI6XG4gICAgICAgICAgICBjYXNlIFwianNvblwiOlxuICAgICAgICAgICAgY2FzZSBcImVycm9yLWpzb25cIjpcbiAgICAgICAgICAgICAgY29udGVudFZhbHVlID0gSlNPTi5zdHJpbmdpZnkob3V0cHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgcm9sZTogXCJ0b29sXCIsXG4gICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHRvb2xSZXNwb25zZS50b29sQ2FsbElkLFxuICAgICAgICAgICAgY29udGVudDogY29udGVudFZhbHVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSByb2xlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHJvbGU6ICR7X2V4aGF1c3RpdmVDaGVja31gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgbWVzc2FnZXMsIHdhcm5pbmdzIH07XG59XG5cbi8vIHNyYy9jaGF0L2dldC1yZXNwb25zZS1tZXRhZGF0YS50c1xuZnVuY3Rpb24gZ2V0UmVzcG9uc2VNZXRhZGF0YSh7XG4gIGlkLFxuICBtb2RlbCxcbiAgY3JlYXRlZFxufSkge1xuICByZXR1cm4ge1xuICAgIGlkOiBpZCAhPSBudWxsID8gaWQgOiB2b2lkIDAsXG4gICAgbW9kZWxJZDogbW9kZWwgIT0gbnVsbCA/IG1vZGVsIDogdm9pZCAwLFxuICAgIHRpbWVzdGFtcDogY3JlYXRlZCAhPSBudWxsID8gbmV3IERhdGUoY3JlYXRlZCAqIDFlMykgOiB2b2lkIDBcbiAgfTtcbn1cblxuLy8gc3JjL2NoYXQvbWFwLW9wZW5haS1maW5pc2gtcmVhc29uLnRzXG5mdW5jdGlvbiBtYXBPcGVuQUlGaW5pc2hSZWFzb24oZmluaXNoUmVhc29uKSB7XG4gIHN3aXRjaCAoZmluaXNoUmVhc29uKSB7XG4gICAgY2FzZSBcInN0b3BcIjpcbiAgICAgIHJldHVybiBcInN0b3BcIjtcbiAgICBjYXNlIFwibGVuZ3RoXCI6XG4gICAgICByZXR1cm4gXCJsZW5ndGhcIjtcbiAgICBjYXNlIFwiY29udGVudF9maWx0ZXJcIjpcbiAgICAgIHJldHVybiBcImNvbnRlbnQtZmlsdGVyXCI7XG4gICAgY2FzZSBcImZ1bmN0aW9uX2NhbGxcIjpcbiAgICBjYXNlIFwidG9vbF9jYWxsc1wiOlxuICAgICAgcmV0dXJuIFwidG9vbC1jYWxsc1wiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJ1bmtub3duXCI7XG4gIH1cbn1cblxuLy8gc3JjL2NoYXQvb3BlbmFpLWNoYXQtb3B0aW9ucy50c1xuaW1wb3J0IHsgeiBhcyB6MiB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciBvcGVuYWlDaGF0TGFuZ3VhZ2VNb2RlbE9wdGlvbnMgPSB6Mi5vYmplY3Qoe1xuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaWtlbGlob29kIG9mIHNwZWNpZmllZCB0b2tlbnMgYXBwZWFyaW5nIGluIHRoZSBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBBY2NlcHRzIGEgSlNPTiBvYmplY3QgdGhhdCBtYXBzIHRva2VucyAoc3BlY2lmaWVkIGJ5IHRoZWlyIHRva2VuIElEIGluXG4gICAqIHRoZSBHUFQgdG9rZW5pemVyKSB0byBhbiBhc3NvY2lhdGVkIGJpYXMgdmFsdWUgZnJvbSAtMTAwIHRvIDEwMC5cbiAgICovXG4gIGxvZ2l0QmlhczogejIucmVjb3JkKHoyLmNvZXJjZS5udW1iZXIoKSwgejIubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMuXG4gICAqXG4gICAqIFNldHRpbmcgdG8gdHJ1ZSB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRva2VucyB0aGF0XG4gICAqIHdlcmUgZ2VuZXJhdGVkLlxuICAgKlxuICAgKiBTZXR0aW5nIHRvIGEgbnVtYmVyIHdpbGwgcmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9wIG5cbiAgICogdG9rZW5zIHRoYXQgd2VyZSBnZW5lcmF0ZWQuXG4gICAqL1xuICBsb2dwcm9iczogejIudW5pb24oW3oyLmJvb2xlYW4oKSwgejIubnVtYmVyKCldKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogV2hldGhlciB0byBlbmFibGUgcGFyYWxsZWwgZnVuY3Rpb24gY2FsbGluZyBkdXJpbmcgdG9vbCB1c2UuIERlZmF1bHQgdG8gdHJ1ZS5cbiAgICovXG4gIHBhcmFsbGVsVG9vbENhbGxzOiB6Mi5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0b1xuICAgKiBtb25pdG9yIGFuZCBkZXRlY3QgYWJ1c2UuXG4gICAqL1xuICB1c2VyOiB6Mi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogUmVhc29uaW5nIGVmZm9ydCBmb3IgcmVhc29uaW5nIG1vZGVscy4gRGVmYXVsdHMgdG8gYG1lZGl1bWAuXG4gICAqL1xuICByZWFzb25pbmdFZmZvcnQ6IHoyLmVudW0oW1wibWluaW1hbFwiLCBcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBNYXhpbXVtIG51bWJlciBvZiBjb21wbGV0aW9uIHRva2VucyB0byBnZW5lcmF0ZS4gVXNlZnVsIGZvciByZWFzb25pbmcgbW9kZWxzLlxuICAgKi9cbiAgbWF4Q29tcGxldGlvblRva2VuczogejIubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGluIHJlc3BvbnNlcyBBUEkuXG4gICAqL1xuICBzdG9yZTogejIuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBNZXRhZGF0YSB0byBhc3NvY2lhdGUgd2l0aCB0aGUgcmVxdWVzdC5cbiAgICovXG4gIG1ldGFkYXRhOiB6Mi5yZWNvcmQoejIuc3RyaW5nKCkubWF4KDY0KSwgejIuc3RyaW5nKCkubWF4KDUxMikpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBQYXJhbWV0ZXJzIGZvciBwcmVkaWN0aW9uIG1vZGUuXG4gICAqL1xuICBwcmVkaWN0aW9uOiB6Mi5yZWNvcmQoejIuc3RyaW5nKCksIHoyLmFueSgpKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogV2hldGhlciB0byB1c2Ugc3RydWN0dXJlZCBvdXRwdXRzLlxuICAgKlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBzdHJ1Y3R1cmVkT3V0cHV0czogejIuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBTZXJ2aWNlIHRpZXIgZm9yIHRoZSByZXF1ZXN0LlxuICAgKiAtICdhdXRvJzogRGVmYXVsdCBzZXJ2aWNlIHRpZXJcbiAgICogLSAnZmxleCc6IDUwJSBjaGVhcGVyIHByb2Nlc3NpbmcgYXQgdGhlIGNvc3Qgb2YgaW5jcmVhc2VkIGxhdGVuY3kuIE9ubHkgYXZhaWxhYmxlIGZvciBvMyBhbmQgbzQtbWluaSBtb2RlbHMuXG4gICAqIC0gJ3ByaW9yaXR5JzogSGlnaGVyLXNwZWVkIHByb2Nlc3Npbmcgd2l0aCBwcmVkaWN0YWJseSBsb3cgbGF0ZW5jeSBhdCBwcmVtaXVtIGNvc3QuIEF2YWlsYWJsZSBmb3IgRW50ZXJwcmlzZSBjdXN0b21lcnMuXG4gICAqXG4gICAqIEBkZWZhdWx0ICdhdXRvJ1xuICAgKi9cbiAgc2VydmljZVRpZXI6IHoyLmVudW0oW1wiYXV0b1wiLCBcImZsZXhcIiwgXCJwcmlvcml0eVwiXSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gdXNlIHN0cmljdCBKU09OIHNjaGVtYSB2YWxpZGF0aW9uLlxuICAgKlxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgc3RyaWN0SnNvblNjaGVtYTogejIuYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBDb250cm9scyB0aGUgdmVyYm9zaXR5IG9mIHRoZSBtb2RlbCdzIHJlc3BvbnNlcy5cbiAgICogTG93ZXIgdmFsdWVzIHdpbGwgcmVzdWx0IGluIG1vcmUgY29uY2lzZSByZXNwb25zZXMsIHdoaWxlIGhpZ2hlciB2YWx1ZXMgd2lsbCByZXN1bHQgaW4gbW9yZSB2ZXJib3NlIHJlc3BvbnNlcy5cbiAgICovXG4gIHRleHRWZXJib3NpdHk6IHoyLmVudW0oW1wibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiXSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIEEgY2FjaGUga2V5IGZvciBwcm9tcHQgY2FjaGluZy4gQWxsb3dzIG1hbnVhbCBjb250cm9sIG92ZXIgcHJvbXB0IGNhY2hpbmcgYmVoYXZpb3IuXG4gICAqIFVzZWZ1bCBmb3IgaW1wcm92aW5nIGNhY2hlIGhpdCByYXRlcyBhbmQgd29ya2luZyBhcm91bmQgYXV0b21hdGljIGNhY2hpbmcgaXNzdWVzLlxuICAgKi9cbiAgcHJvbXB0Q2FjaGVLZXk6IHoyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBBIHN0YWJsZSBpZGVudGlmaWVyIHVzZWQgdG8gaGVscCBkZXRlY3QgdXNlcnMgb2YgeW91ciBhcHBsaWNhdGlvblxuICAgKiB0aGF0IG1heSBiZSB2aW9sYXRpbmcgT3BlbkFJJ3MgdXNhZ2UgcG9saWNpZXMuIFRoZSBJRHMgc2hvdWxkIGJlIGFcbiAgICogc3RyaW5nIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyBlYWNoIHVzZXIuIFdlIHJlY29tbWVuZCBoYXNoaW5nIHRoZWlyXG4gICAqIHVzZXJuYW1lIG9yIGVtYWlsIGFkZHJlc3MsIGluIG9yZGVyIHRvIGF2b2lkIHNlbmRpbmcgdXMgYW55IGlkZW50aWZ5aW5nXG4gICAqIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgc2FmZXR5SWRlbnRpZmllcjogejIuc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5cbi8vIHNyYy9jaGF0L29wZW5haS1jaGF0LXByZXBhcmUtdG9vbHMudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yIGFzIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yMlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuZnVuY3Rpb24gcHJlcGFyZUNoYXRUb29scyh7XG4gIHRvb2xzLFxuICB0b29sQ2hvaWNlLFxuICBzdHJ1Y3R1cmVkT3V0cHV0cyxcbiAgc3RyaWN0SnNvblNjaGVtYVxufSkge1xuICB0b29scyA9ICh0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMubGVuZ3RoKSA/IHRvb2xzIDogdm9pZCAwO1xuICBjb25zdCB0b29sV2FybmluZ3MgPSBbXTtcbiAgaWYgKHRvb2xzID09IG51bGwpIHtcbiAgICByZXR1cm4geyB0b29sczogdm9pZCAwLCB0b29sQ2hvaWNlOiB2b2lkIDAsIHRvb2xXYXJuaW5ncyB9O1xuICB9XG4gIGNvbnN0IG9wZW5haVRvb2xzMiA9IFtdO1xuICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMpIHtcbiAgICBzd2l0Y2ggKHRvb2wudHlwZSkge1xuICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgICAgIHN0cmljdDogc3RydWN0dXJlZE91dHB1dHMgPyBzdHJpY3RKc29uU2NoZW1hIDogdm9pZCAwXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0b29sV2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtdG9vbFwiLCB0b29sIH0pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgaWYgKHRvb2xDaG9pY2UgPT0gbnVsbCkge1xuICAgIHJldHVybiB7IHRvb2xzOiBvcGVuYWlUb29sczIsIHRvb2xDaG9pY2U6IHZvaWQgMCwgdG9vbFdhcm5pbmdzIH07XG4gIH1cbiAgY29uc3QgdHlwZSA9IHRvb2xDaG9pY2UudHlwZTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBcImF1dG9cIjpcbiAgICBjYXNlIFwibm9uZVwiOlxuICAgIGNhc2UgXCJyZXF1aXJlZFwiOlxuICAgICAgcmV0dXJuIHsgdG9vbHM6IG9wZW5haVRvb2xzMiwgdG9vbENob2ljZTogdHlwZSwgdG9vbFdhcm5pbmdzIH07XG4gICAgY2FzZSBcInRvb2xcIjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xzOiBvcGVuYWlUb29sczIsXG4gICAgICAgIHRvb2xDaG9pY2U6IHtcbiAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2xDaG9pY2UudG9vbE5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRvb2xXYXJuaW5nc1xuICAgICAgfTtcbiAgICBkZWZhdWx0OiB7XG4gICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gdHlwZTtcbiAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjIoe1xuICAgICAgICBmdW5jdGlvbmFsaXR5OiBgdG9vbCBjaG9pY2UgdHlwZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vLyBzcmMvY2hhdC9vcGVuYWktY2hhdC1sYW5ndWFnZS1tb2RlbC50c1xudmFyIE9wZW5BSUNoYXRMYW5ndWFnZU1vZGVsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihtb2RlbElkLCBjb25maWcpIHtcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2MlwiO1xuICAgIHRoaXMuc3VwcG9ydGVkVXJscyA9IHtcbiAgICAgIFwiaW1hZ2UvKlwiOiBbL15odHRwcz86XFwvXFwvLiokL11cbiAgICB9O1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cbiAgZ2V0IHByb3ZpZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlcjtcbiAgfVxuICBhc3luYyBnZXRBcmdzKHtcbiAgICBwcm9tcHQsXG4gICAgbWF4T3V0cHV0VG9rZW5zLFxuICAgIHRlbXBlcmF0dXJlLFxuICAgIHRvcFAsXG4gICAgdG9wSyxcbiAgICBmcmVxdWVuY3lQZW5hbHR5LFxuICAgIHByZXNlbmNlUGVuYWx0eSxcbiAgICBzdG9wU2VxdWVuY2VzLFxuICAgIHJlc3BvbnNlRm9ybWF0LFxuICAgIHNlZWQsXG4gICAgdG9vbHMsXG4gICAgdG9vbENob2ljZSxcbiAgICBwcm92aWRlck9wdGlvbnNcbiAgfSkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGNvbnN0IG9wZW5haU9wdGlvbnMgPSAoX2EgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9ucyh7XG4gICAgICBwcm92aWRlcjogXCJvcGVuYWlcIixcbiAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgIHNjaGVtYTogb3BlbmFpQ2hhdExhbmd1YWdlTW9kZWxPcHRpb25zXG4gICAgfSkpICE9IG51bGwgPyBfYSA6IHt9O1xuICAgIGNvbnN0IHN0cnVjdHVyZWRPdXRwdXRzID0gKF9iID0gb3BlbmFpT3B0aW9ucy5zdHJ1Y3R1cmVkT3V0cHV0cykgIT0gbnVsbCA/IF9iIDogdHJ1ZTtcbiAgICBpZiAodG9wSyAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwidG9wS1wiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKChyZXNwb25zZUZvcm1hdCA9PSBudWxsID8gdm9pZCAwIDogcmVzcG9uc2VGb3JtYXQudHlwZSkgPT09IFwianNvblwiICYmIHJlc3BvbnNlRm9ybWF0LnNjaGVtYSAhPSBudWxsICYmICFzdHJ1Y3R1cmVkT3V0cHV0cykge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInJlc3BvbnNlRm9ybWF0XCIsXG4gICAgICAgIGRldGFpbHM6IFwiSlNPTiByZXNwb25zZSBmb3JtYXQgc2NoZW1hIGlzIG9ubHkgc3VwcG9ydGVkIHdpdGggc3RydWN0dXJlZE91dHB1dHNcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHsgbWVzc2FnZXMsIHdhcm5pbmdzOiBtZXNzYWdlV2FybmluZ3MgfSA9IGNvbnZlcnRUb09wZW5BSUNoYXRNZXNzYWdlcyhcbiAgICAgIHtcbiAgICAgICAgcHJvbXB0LFxuICAgICAgICBzeXN0ZW1NZXNzYWdlTW9kZTogZ2V0U3lzdGVtTWVzc2FnZU1vZGUodGhpcy5tb2RlbElkKVxuICAgICAgfVxuICAgICk7XG4gICAgd2FybmluZ3MucHVzaCguLi5tZXNzYWdlV2FybmluZ3MpO1xuICAgIGNvbnN0IHN0cmljdEpzb25TY2hlbWEgPSAoX2MgPSBvcGVuYWlPcHRpb25zLnN0cmljdEpzb25TY2hlbWEpICE9IG51bGwgPyBfYyA6IGZhbHNlO1xuICAgIGNvbnN0IGJhc2VBcmdzID0ge1xuICAgICAgLy8gbW9kZWwgaWQ6XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbElkLFxuICAgICAgLy8gbW9kZWwgc3BlY2lmaWMgc2V0dGluZ3M6XG4gICAgICBsb2dpdF9iaWFzOiBvcGVuYWlPcHRpb25zLmxvZ2l0QmlhcyxcbiAgICAgIGxvZ3Byb2JzOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzID09PSB0cnVlIHx8IHR5cGVvZiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzID09PSBcIm51bWJlclwiID8gdHJ1ZSA6IHZvaWQgMCxcbiAgICAgIHRvcF9sb2dwcm9iczogdHlwZW9mIG9wZW5haU9wdGlvbnMubG9ncHJvYnMgPT09IFwibnVtYmVyXCIgPyBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzIDogdHlwZW9mIG9wZW5haU9wdGlvbnMubG9ncHJvYnMgPT09IFwiYm9vbGVhblwiID8gb3BlbmFpT3B0aW9ucy5sb2dwcm9icyA/IDAgOiB2b2lkIDAgOiB2b2lkIDAsXG4gICAgICB1c2VyOiBvcGVuYWlPcHRpb25zLnVzZXIsXG4gICAgICBwYXJhbGxlbF90b29sX2NhbGxzOiBvcGVuYWlPcHRpb25zLnBhcmFsbGVsVG9vbENhbGxzLFxuICAgICAgLy8gc3RhbmRhcmRpemVkIHNldHRpbmdzOlxuICAgICAgbWF4X3Rva2VuczogbWF4T3V0cHV0VG9rZW5zLFxuICAgICAgdGVtcGVyYXR1cmUsXG4gICAgICB0b3BfcDogdG9wUCxcbiAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiBmcmVxdWVuY3lQZW5hbHR5LFxuICAgICAgcHJlc2VuY2VfcGVuYWx0eTogcHJlc2VuY2VQZW5hbHR5LFxuICAgICAgcmVzcG9uc2VfZm9ybWF0OiAocmVzcG9uc2VGb3JtYXQgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3BvbnNlRm9ybWF0LnR5cGUpID09PSBcImpzb25cIiA/IHN0cnVjdHVyZWRPdXRwdXRzICYmIHJlc3BvbnNlRm9ybWF0LnNjaGVtYSAhPSBudWxsID8ge1xuICAgICAgICB0eXBlOiBcImpzb25fc2NoZW1hXCIsXG4gICAgICAgIGpzb25fc2NoZW1hOiB7XG4gICAgICAgICAgc2NoZW1hOiByZXNwb25zZUZvcm1hdC5zY2hlbWEsXG4gICAgICAgICAgc3RyaWN0OiBzdHJpY3RKc29uU2NoZW1hLFxuICAgICAgICAgIG5hbWU6IChfZCA9IHJlc3BvbnNlRm9ybWF0Lm5hbWUpICE9IG51bGwgPyBfZCA6IFwicmVzcG9uc2VcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzcG9uc2VGb3JtYXQuZGVzY3JpcHRpb25cbiAgICAgICAgfVxuICAgICAgfSA6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0gOiB2b2lkIDAsXG4gICAgICBzdG9wOiBzdG9wU2VxdWVuY2VzLFxuICAgICAgc2VlZCxcbiAgICAgIHZlcmJvc2l0eTogb3BlbmFpT3B0aW9ucy50ZXh0VmVyYm9zaXR5LFxuICAgICAgLy8gb3BlbmFpIHNwZWNpZmljIHNldHRpbmdzOlxuICAgICAgLy8gVE9ETyBBSSBTREsgNjogcmVtb3ZlLCB3ZSBhdXRvLW1hcCBtYXhPdXRwdXRUb2tlbnMgbm93XG4gICAgICBtYXhfY29tcGxldGlvbl90b2tlbnM6IG9wZW5haU9wdGlvbnMubWF4Q29tcGxldGlvblRva2VucyxcbiAgICAgIHN0b3JlOiBvcGVuYWlPcHRpb25zLnN0b3JlLFxuICAgICAgbWV0YWRhdGE6IG9wZW5haU9wdGlvbnMubWV0YWRhdGEsXG4gICAgICBwcmVkaWN0aW9uOiBvcGVuYWlPcHRpb25zLnByZWRpY3Rpb24sXG4gICAgICByZWFzb25pbmdfZWZmb3J0OiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ0VmZm9ydCxcbiAgICAgIHNlcnZpY2VfdGllcjogb3BlbmFpT3B0aW9ucy5zZXJ2aWNlVGllcixcbiAgICAgIHByb21wdF9jYWNoZV9rZXk6IG9wZW5haU9wdGlvbnMucHJvbXB0Q2FjaGVLZXksXG4gICAgICBzYWZldHlfaWRlbnRpZmllcjogb3BlbmFpT3B0aW9ucy5zYWZldHlJZGVudGlmaWVyLFxuICAgICAgLy8gbWVzc2FnZXM6XG4gICAgICBtZXNzYWdlc1xuICAgIH07XG4gICAgaWYgKGlzUmVhc29uaW5nTW9kZWwodGhpcy5tb2RlbElkKSkge1xuICAgICAgaWYgKGJhc2VBcmdzLnRlbXBlcmF0dXJlICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MudGVtcGVyYXR1cmUgPSB2b2lkIDA7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwidGVtcGVyYXR1cmVcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRlbXBlcmF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy50b3BfcCAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRvcF9wID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRvcFBcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRvcFAgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VBcmdzLmZyZXF1ZW5jeV9wZW5hbHR5ICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MuZnJlcXVlbmN5X3BlbmFsdHkgPSB2b2lkIDA7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwiZnJlcXVlbmN5UGVuYWx0eVwiLFxuICAgICAgICAgIGRldGFpbHM6IFwiZnJlcXVlbmN5UGVuYWx0eSBpcyBub3Qgc3VwcG9ydGVkIGZvciByZWFzb25pbmcgbW9kZWxzXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFyZ3MucHJlc2VuY2VfcGVuYWx0eSAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnByZXNlbmNlX3BlbmFsdHkgPSB2b2lkIDA7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwicHJlc2VuY2VQZW5hbHR5XCIsXG4gICAgICAgICAgZGV0YWlsczogXCJwcmVzZW5jZVBlbmFsdHkgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VBcmdzLmxvZ2l0X2JpYXMgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy5sb2dpdF9iaWFzID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJsb2dpdEJpYXMgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VBcmdzLmxvZ3Byb2JzICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MubG9ncHJvYnMgPSB2b2lkIDA7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICBtZXNzYWdlOiBcImxvZ3Byb2JzIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy50b3BfbG9ncHJvYnMgIT0gbnVsbCkge1xuICAgICAgICBiYXNlQXJncy50b3BfbG9ncHJvYnMgPSB2b2lkIDA7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwib3RoZXJcIixcbiAgICAgICAgICBtZXNzYWdlOiBcInRvcExvZ3Byb2JzIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy5tYXhfdG9rZW5zICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGJhc2VBcmdzLm1heF9jb21wbGV0aW9uX3Rva2VucyA9PSBudWxsKSB7XG4gICAgICAgICAgYmFzZUFyZ3MubWF4X2NvbXBsZXRpb25fdG9rZW5zID0gYmFzZUFyZ3MubWF4X3Rva2VucztcbiAgICAgICAgfVxuICAgICAgICBiYXNlQXJncy5tYXhfdG9rZW5zID0gdm9pZCAwO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNG8tc2VhcmNoLXByZXZpZXdcIikgfHwgdGhpcy5tb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNG8tbWluaS1zZWFyY2gtcHJldmlld1wiKSkge1xuICAgICAgaWYgKGJhc2VBcmdzLnRlbXBlcmF0dXJlICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MudGVtcGVyYXR1cmUgPSB2b2lkIDA7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwidGVtcGVyYXR1cmVcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRlbXBlcmF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoZSBzZWFyY2ggcHJldmlldyBtb2RlbHMgYW5kIGhhcyBiZWVuIHJlbW92ZWQuXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyID09PSBcImZsZXhcIiAmJiAhc3VwcG9ydHNGbGV4UHJvY2Vzc2luZyh0aGlzLm1vZGVsSWQpKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwic2VydmljZVRpZXJcIixcbiAgICAgICAgZGV0YWlsczogXCJmbGV4IHByb2Nlc3NpbmcgaXMgb25seSBhdmFpbGFibGUgZm9yIG8zLCBvNC1taW5pLCBhbmQgZ3B0LTUgbW9kZWxzXCJcbiAgICAgIH0pO1xuICAgICAgYmFzZUFyZ3Muc2VydmljZV90aWVyID0gdm9pZCAwO1xuICAgIH1cbiAgICBpZiAob3BlbmFpT3B0aW9ucy5zZXJ2aWNlVGllciA9PT0gXCJwcmlvcml0eVwiICYmICFzdXBwb3J0c1ByaW9yaXR5UHJvY2Vzc2luZyh0aGlzLm1vZGVsSWQpKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwic2VydmljZVRpZXJcIixcbiAgICAgICAgZGV0YWlsczogXCJwcmlvcml0eSBwcm9jZXNzaW5nIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBzdXBwb3J0ZWQgbW9kZWxzIChncHQtNCwgZ3B0LTUsIGdwdC01LW1pbmksIG8zLCBvNC1taW5pKSBhbmQgcmVxdWlyZXMgRW50ZXJwcmlzZSBhY2Nlc3MuIGdwdC01LW5hbm8gaXMgbm90IHN1cHBvcnRlZFwiXG4gICAgICB9KTtcbiAgICAgIGJhc2VBcmdzLnNlcnZpY2VfdGllciA9IHZvaWQgMDtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgdG9vbHM6IG9wZW5haVRvb2xzMixcbiAgICAgIHRvb2xDaG9pY2U6IG9wZW5haVRvb2xDaG9pY2UsXG4gICAgICB0b29sV2FybmluZ3NcbiAgICB9ID0gcHJlcGFyZUNoYXRUb29scyh7XG4gICAgICB0b29scyxcbiAgICAgIHRvb2xDaG9pY2UsXG4gICAgICBzdHJ1Y3R1cmVkT3V0cHV0cyxcbiAgICAgIHN0cmljdEpzb25TY2hlbWFcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgYXJnczoge1xuICAgICAgICAuLi5iYXNlQXJncyxcbiAgICAgICAgdG9vbHM6IG9wZW5haVRvb2xzMixcbiAgICAgICAgdG9vbF9jaG9pY2U6IG9wZW5haVRvb2xDaG9pY2VcbiAgICAgIH0sXG4gICAgICB3YXJuaW5nczogWy4uLndhcm5pbmdzLCAuLi50b29sV2FybmluZ3NdXG4gICAgfTtcbiAgfVxuICBhc3luYyBkb0dlbmVyYXRlKG9wdGlvbnMpIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uO1xuICAgIGNvbnN0IHsgYXJnczogYm9keSwgd2FybmluZ3MgfSA9IGF3YWl0IHRoaXMuZ2V0QXJncyhvcHRpb25zKTtcbiAgICBjb25zdCB7XG4gICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICB2YWx1ZTogcmVzcG9uc2UsXG4gICAgICByYXdWYWx1ZTogcmF3UmVzcG9uc2VcbiAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaSh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2NoYXQvY29tcGxldGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzKHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHksXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIoXG4gICAgICAgIG9wZW5haUNoYXRSZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3QgY2hvaWNlID0gcmVzcG9uc2UuY2hvaWNlc1swXTtcbiAgICBjb25zdCBjb250ZW50ID0gW107XG4gICAgY29uc3QgdGV4dCA9IGNob2ljZS5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgaWYgKHRleHQgIT0gbnVsbCAmJiB0ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRlbnQucHVzaCh7IHR5cGU6IFwidGV4dFwiLCB0ZXh0IH0pO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHRvb2xDYWxsIG9mIChfYSA9IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMpICE9IG51bGwgPyBfYSA6IFtdKSB7XG4gICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICB0b29sQ2FsbElkOiAoX2IgPSB0b29sQ2FsbC5pZCkgIT0gbnVsbCA/IF9iIDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgaW5wdXQ6IHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50c1xuICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYW5ub3RhdGlvbiBvZiAoX2MgPSBjaG9pY2UubWVzc2FnZS5hbm5vdGF0aW9ucykgIT0gbnVsbCA/IF9jIDogW10pIHtcbiAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgIHNvdXJjZVR5cGU6IFwidXJsXCIsXG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCksXG4gICAgICAgIHVybDogYW5ub3RhdGlvbi51cmwsXG4gICAgICAgIHRpdGxlOiBhbm5vdGF0aW9uLnRpdGxlXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY29tcGxldGlvblRva2VuRGV0YWlscyA9IChfZCA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2QuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscztcbiAgICBjb25zdCBwcm9tcHRUb2tlbkRldGFpbHMgPSAoX2UgPSByZXNwb25zZS51c2FnZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9lLnByb21wdF90b2tlbnNfZGV0YWlscztcbiAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0geyBvcGVuYWk6IHt9IH07XG4gICAgaWYgKChjb21wbGV0aW9uVG9rZW5EZXRhaWxzID09IG51bGwgPyB2b2lkIDAgOiBjb21wbGV0aW9uVG9rZW5EZXRhaWxzLmFjY2VwdGVkX3ByZWRpY3Rpb25fdG9rZW5zKSAhPSBudWxsKSB7XG4gICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5hY2NlcHRlZFByZWRpY3Rpb25Ub2tlbnMgPSBjb21wbGV0aW9uVG9rZW5EZXRhaWxzID09IG51bGwgPyB2b2lkIDAgOiBjb21wbGV0aW9uVG9rZW5EZXRhaWxzLmFjY2VwdGVkX3ByZWRpY3Rpb25fdG9rZW5zO1xuICAgIH1cbiAgICBpZiAoKGNvbXBsZXRpb25Ub2tlbkRldGFpbHMgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbXBsZXRpb25Ub2tlbkRldGFpbHMucmVqZWN0ZWRfcHJlZGljdGlvbl90b2tlbnMpICE9IG51bGwpIHtcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEub3BlbmFpLnJlamVjdGVkUHJlZGljdGlvblRva2VucyA9IGNvbXBsZXRpb25Ub2tlbkRldGFpbHMgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbXBsZXRpb25Ub2tlbkRldGFpbHMucmVqZWN0ZWRfcHJlZGljdGlvbl90b2tlbnM7XG4gICAgfVxuICAgIGlmICgoKF9mID0gY2hvaWNlLmxvZ3Byb2JzKSA9PSBudWxsID8gdm9pZCAwIDogX2YuY29udGVudCkgIT0gbnVsbCkge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBjaG9pY2UubG9ncHJvYnMuY29udGVudDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRlbnQsXG4gICAgICBmaW5pc2hSZWFzb246IG1hcE9wZW5BSUZpbmlzaFJlYXNvbihjaG9pY2UuZmluaXNoX3JlYXNvbiksXG4gICAgICB1c2FnZToge1xuICAgICAgICBpbnB1dFRva2VuczogKF9oID0gKF9nID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfZy5wcm9tcHRfdG9rZW5zKSAhPSBudWxsID8gX2ggOiB2b2lkIDAsXG4gICAgICAgIG91dHB1dFRva2VuczogKF9qID0gKF9pID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfaS5jb21wbGV0aW9uX3Rva2VucykgIT0gbnVsbCA/IF9qIDogdm9pZCAwLFxuICAgICAgICB0b3RhbFRva2VuczogKF9sID0gKF9rID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfay50b3RhbF90b2tlbnMpICE9IG51bGwgPyBfbCA6IHZvaWQgMCxcbiAgICAgICAgcmVhc29uaW5nVG9rZW5zOiAoX20gPSBjb21wbGV0aW9uVG9rZW5EZXRhaWxzID09IG51bGwgPyB2b2lkIDAgOiBjb21wbGV0aW9uVG9rZW5EZXRhaWxzLnJlYXNvbmluZ190b2tlbnMpICE9IG51bGwgPyBfbSA6IHZvaWQgMCxcbiAgICAgICAgY2FjaGVkSW5wdXRUb2tlbnM6IChfbiA9IHByb21wdFRva2VuRGV0YWlscyA9PSBudWxsID8gdm9pZCAwIDogcHJvbXB0VG9rZW5EZXRhaWxzLmNhY2hlZF90b2tlbnMpICE9IG51bGwgPyBfbiA6IHZvaWQgMFxuICAgICAgfSxcbiAgICAgIHJlcXVlc3Q6IHsgYm9keSB9LFxuICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgLi4uZ2V0UmVzcG9uc2VNZXRhZGF0YShyZXNwb25zZSksXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgYm9keTogcmF3UmVzcG9uc2VcbiAgICAgIH0sXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGFcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvU3RyZWFtKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGFyZ3MsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIC4uLmFyZ3MsXG4gICAgICBzdHJlYW06IHRydWUsXG4gICAgICBzdHJlYW1fb3B0aW9uczoge1xuICAgICAgICBpbmNsdWRlX3VzYWdlOiB0cnVlXG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCB7IHJlc3BvbnNlSGVhZGVycywgdmFsdWU6IHJlc3BvbnNlIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpKHtcbiAgICAgIHVybDogdGhpcy5jb25maWcudXJsKHtcbiAgICAgICAgcGF0aDogXCIvY2hhdC9jb21wbGV0aW9uc1wiLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWRcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnModGhpcy5jb25maWcuaGVhZGVycygpLCBvcHRpb25zLmhlYWRlcnMpLFxuICAgICAgYm9keSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlRXZlbnRTb3VyY2VSZXNwb25zZUhhbmRsZXIoXG4gICAgICAgIG9wZW5haUNoYXRDaHVua1NjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3QgdG9vbENhbGxzID0gW107XG4gICAgbGV0IGZpbmlzaFJlYXNvbiA9IFwidW5rbm93blwiO1xuICAgIGNvbnN0IHVzYWdlID0ge1xuICAgICAgaW5wdXRUb2tlbnM6IHZvaWQgMCxcbiAgICAgIG91dHB1dFRva2Vuczogdm9pZCAwLFxuICAgICAgdG90YWxUb2tlbnM6IHZvaWQgMFxuICAgIH07XG4gICAgbGV0IGlzRmlyc3RDaHVuayA9IHRydWU7XG4gICAgbGV0IGlzQWN0aXZlVGV4dCA9IGZhbHNlO1xuICAgIGNvbnN0IHByb3ZpZGVyTWV0YWRhdGEgPSB7IG9wZW5haToge30gfTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZWFtOiByZXNwb25zZS5waXBlVGhyb3VnaChcbiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJzdHJlYW0tc3RhcnRcIiwgd2FybmluZ3MgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfaiwgX2ssIF9sLCBfbSwgX24sIF9vLCBfcCwgX3EsIF9yLCBfcywgX3QsIF91LCBfdiwgX3csIF94O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZVJhd0NodW5rcykge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInJhd1wiLCByYXdWYWx1ZTogY2h1bmsucmF3VmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNodW5rLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0gXCJlcnJvclwiO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiBjaHVuay5lcnJvciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjaHVuay52YWx1ZTtcbiAgICAgICAgICAgIGlmIChcImVycm9yXCIgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0gXCJlcnJvclwiO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiB2YWx1ZS5lcnJvciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRmlyc3RDaHVuaykge1xuICAgICAgICAgICAgICBpc0ZpcnN0Q2h1bmsgPSBmYWxzZTtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlc3BvbnNlLW1ldGFkYXRhXCIsXG4gICAgICAgICAgICAgICAgLi4uZ2V0UmVzcG9uc2VNZXRhZGF0YSh2YWx1ZSlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUudXNhZ2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICB1c2FnZS5pbnB1dFRva2VucyA9IChfYSA9IHZhbHVlLnVzYWdlLnByb21wdF90b2tlbnMpICE9IG51bGwgPyBfYSA6IHZvaWQgMDtcbiAgICAgICAgICAgICAgdXNhZ2Uub3V0cHV0VG9rZW5zID0gKF9iID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnMpICE9IG51bGwgPyBfYiA6IHZvaWQgMDtcbiAgICAgICAgICAgICAgdXNhZ2UudG90YWxUb2tlbnMgPSAoX2MgPSB2YWx1ZS51c2FnZS50b3RhbF90b2tlbnMpICE9IG51bGwgPyBfYyA6IHZvaWQgMDtcbiAgICAgICAgICAgICAgdXNhZ2UucmVhc29uaW5nVG9rZW5zID0gKF9lID0gKF9kID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLnJlYXNvbmluZ190b2tlbnMpICE9IG51bGwgPyBfZSA6IHZvaWQgMDtcbiAgICAgICAgICAgICAgdXNhZ2UuY2FjaGVkSW5wdXRUb2tlbnMgPSAoX2cgPSAoX2YgPSB2YWx1ZS51c2FnZS5wcm9tcHRfdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfZi5jYWNoZWRfdG9rZW5zKSAhPSBudWxsID8gX2cgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIGlmICgoKF9oID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9oLmFjY2VwdGVkX3ByZWRpY3Rpb25fdG9rZW5zKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkuYWNjZXB0ZWRQcmVkaWN0aW9uVG9rZW5zID0gKF9pID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9pLmFjY2VwdGVkX3ByZWRpY3Rpb25fdG9rZW5zO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICgoKF9qID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9qLnJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkucmVqZWN0ZWRQcmVkaWN0aW9uVG9rZW5zID0gKF9rID0gdmFsdWUudXNhZ2UuY29tcGxldGlvbl90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9rLnJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjaG9pY2UgPSB2YWx1ZS5jaG9pY2VzWzBdO1xuICAgICAgICAgICAgaWYgKChjaG9pY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNob2ljZS5maW5pc2hfcmVhc29uKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IG1hcE9wZW5BSUZpbmlzaFJlYXNvbihjaG9pY2UuZmluaXNoX3JlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKChfbCA9IGNob2ljZSA9PSBudWxsID8gdm9pZCAwIDogY2hvaWNlLmxvZ3Byb2JzKSA9PSBudWxsID8gdm9pZCAwIDogX2wuY29udGVudCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5sb2dwcm9icyA9IGNob2ljZS5sb2dwcm9icy5jb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjaG9pY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNob2ljZS5kZWx0YSkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IGNob2ljZS5kZWx0YTtcbiAgICAgICAgICAgIGlmIChkZWx0YS5jb250ZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgaWYgKCFpc0FjdGl2ZVRleHQpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInRleHQtc3RhcnRcIiwgaWQ6IFwiMFwiIH0pO1xuICAgICAgICAgICAgICAgIGlzQWN0aXZlVGV4dCA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICBpZDogXCIwXCIsXG4gICAgICAgICAgICAgICAgZGVsdGE6IGRlbHRhLmNvbnRlbnRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVsdGEudG9vbF9jYWxscyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdG9vbENhbGxEZWx0YSBvZiBkZWx0YS50b29sX2NhbGxzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0b29sQ2FsbERlbHRhLmluZGV4O1xuICAgICAgICAgICAgICAgIGlmICh0b29sQ2FsbHNbaW5kZXhdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0b29sQ2FsbERlbHRhLnR5cGUgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFJlc3BvbnNlRGF0YUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0b29sQ2FsbERlbHRhLFxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBFeHBlY3RlZCAnZnVuY3Rpb24nIHR5cGUuYFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmICh0b29sQ2FsbERlbHRhLmlkID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRSZXNwb25zZURhdGFFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YTogdG9vbENhbGxEZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRXhwZWN0ZWQgJ2lkJyB0byBiZSBhIHN0cmluZy5gXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKCgoX20gPSB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uKSA9PSBudWxsID8gdm9pZCAwIDogX20ubmFtZSkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFJlc3BvbnNlRGF0YUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0b29sQ2FsbERlbHRhLFxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBFeHBlY3RlZCAnZnVuY3Rpb24ubmFtZScgdG8gYmUgYSBzdHJpbmcuYFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGxEZWx0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xDYWxsRGVsdGEuZnVuY3Rpb24ubmFtZVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbHNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGxEZWx0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsRGVsdGEuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IChfbiA9IHRvb2xDYWxsRGVsdGEuZnVuY3Rpb24uYXJndW1lbnRzKSAhPSBudWxsID8gX24gOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGhhc0ZpbmlzaGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsMiA9IHRvb2xDYWxsc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICBpZiAoKChfbyA9IHRvb2xDYWxsMi5mdW5jdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9vLm5hbWUpICE9IG51bGwgJiYgKChfcCA9IHRvb2xDYWxsMi5mdW5jdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9wLmFyZ3VtZW50cykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vbENhbGwyLmZ1bmN0aW9uLmFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1kZWx0YVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRvb2xDYWxsMi5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhOiB0b29sQ2FsbDIuZnVuY3Rpb24uYXJndW1lbnRzXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUGFyc2FibGVKc29uKHRvb2xDYWxsMi5mdW5jdGlvbi5hcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbDIuaWRcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IChfcSA9IHRvb2xDYWxsMi5pZCkgIT0gbnVsbCA/IF9xIDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xDYWxsMi5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHRvb2xDYWxsMi5mdW5jdGlvbi5hcmd1bWVudHNcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbDIuaGFzRmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbENhbGwgPSB0b29sQ2FsbHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmICh0b29sQ2FsbC5oYXNGaW5pc2hlZCkge1xuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoKF9yID0gdG9vbENhbGxEZWx0YS5mdW5jdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9yLmFyZ3VtZW50cykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgdG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzICs9IChfdCA9IChfcyA9IHRvb2xDYWxsRGVsdGEuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfcy5hcmd1bWVudHMpICE9IG51bGwgPyBfdCA6IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICAgIGRlbHRhOiAoX3UgPSB0b29sQ2FsbERlbHRhLmZ1bmN0aW9uLmFyZ3VtZW50cykgIT0gbnVsbCA/IF91IDogXCJcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICgoKF92ID0gdG9vbENhbGwuZnVuY3Rpb24pID09IG51bGwgPyB2b2lkIDAgOiBfdi5uYW1lKSAhPSBudWxsICYmICgoX3cgPSB0b29sQ2FsbC5mdW5jdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF93LmFyZ3VtZW50cykgIT0gbnVsbCAmJiBpc1BhcnNhYmxlSnNvbih0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC5pZFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiAoX3ggPSB0b29sQ2FsbC5pZCkgIT0gbnVsbCA/IF94IDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50c1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbC5oYXNGaW5pc2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGVsdGEuYW5ub3RhdGlvbnMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFubm90YXRpb24gb2YgZGVsdGEuYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJzb3VyY2VcIixcbiAgICAgICAgICAgICAgICAgIHNvdXJjZVR5cGU6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICAgICAgICAgICAgdXJsOiBhbm5vdGF0aW9uLnVybCxcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiBhbm5vdGF0aW9uLnRpdGxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGZsdXNoKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGlmIChpc0FjdGl2ZVRleHQpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJ0ZXh0LWVuZFwiLCBpZDogXCIwXCIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICB0eXBlOiBcImZpbmlzaFwiLFxuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24sXG4gICAgICAgICAgICAgIHVzYWdlLFxuICAgICAgICAgICAgICAuLi5wcm92aWRlck1ldGFkYXRhICE9IG51bGwgPyB7IHByb3ZpZGVyTWV0YWRhdGEgfSA6IHt9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgcmVxdWVzdDogeyBib2R5IH0sXG4gICAgICByZXNwb25zZTogeyBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMgfVxuICAgIH07XG4gIH1cbn07XG52YXIgb3BlbmFpVG9rZW5Vc2FnZVNjaGVtYSA9IHozLm9iamVjdCh7XG4gIHByb21wdF90b2tlbnM6IHozLm51bWJlcigpLm51bGxpc2goKSxcbiAgY29tcGxldGlvbl90b2tlbnM6IHozLm51bWJlcigpLm51bGxpc2goKSxcbiAgdG90YWxfdG9rZW5zOiB6My5udW1iZXIoKS5udWxsaXNoKCksXG4gIHByb21wdF90b2tlbnNfZGV0YWlsczogejMub2JqZWN0KHtcbiAgICBjYWNoZWRfdG9rZW5zOiB6My5udW1iZXIoKS5udWxsaXNoKClcbiAgfSkubnVsbGlzaCgpLFxuICBjb21wbGV0aW9uX3Rva2Vuc19kZXRhaWxzOiB6My5vYmplY3Qoe1xuICAgIHJlYXNvbmluZ190b2tlbnM6IHozLm51bWJlcigpLm51bGxpc2goKSxcbiAgICBhY2NlcHRlZF9wcmVkaWN0aW9uX3Rva2VuczogejMubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgIHJlamVjdGVkX3ByZWRpY3Rpb25fdG9rZW5zOiB6My5udW1iZXIoKS5udWxsaXNoKClcbiAgfSkubnVsbGlzaCgpXG59KS5udWxsaXNoKCk7XG52YXIgb3BlbmFpQ2hhdFJlc3BvbnNlU2NoZW1hID0gejMub2JqZWN0KHtcbiAgaWQ6IHozLnN0cmluZygpLm51bGxpc2goKSxcbiAgY3JlYXRlZDogejMubnVtYmVyKCkubnVsbGlzaCgpLFxuICBtb2RlbDogejMuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBjaG9pY2VzOiB6My5hcnJheShcbiAgICB6My5vYmplY3Qoe1xuICAgICAgbWVzc2FnZTogejMub2JqZWN0KHtcbiAgICAgICAgcm9sZTogejMubGl0ZXJhbChcImFzc2lzdGFudFwiKS5udWxsaXNoKCksXG4gICAgICAgIGNvbnRlbnQ6IHozLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgdG9vbF9jYWxsczogejMuYXJyYXkoXG4gICAgICAgICAgejMub2JqZWN0KHtcbiAgICAgICAgICAgIGlkOiB6My5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgICB0eXBlOiB6My5saXRlcmFsKFwiZnVuY3Rpb25cIiksXG4gICAgICAgICAgICBmdW5jdGlvbjogejMub2JqZWN0KHtcbiAgICAgICAgICAgICAgbmFtZTogejMuc3RyaW5nKCksXG4gICAgICAgICAgICAgIGFyZ3VtZW50czogejMuc3RyaW5nKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgKS5udWxsaXNoKCksXG4gICAgICAgIGFubm90YXRpb25zOiB6My5hcnJheShcbiAgICAgICAgICB6My5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogejMubGl0ZXJhbChcInVybF9jaXRhdGlvblwiKSxcbiAgICAgICAgICAgIHN0YXJ0X2luZGV4OiB6My5udW1iZXIoKSxcbiAgICAgICAgICAgIGVuZF9pbmRleDogejMubnVtYmVyKCksXG4gICAgICAgICAgICB1cmw6IHozLnN0cmluZygpLFxuICAgICAgICAgICAgdGl0bGU6IHozLnN0cmluZygpXG4gICAgICAgICAgfSlcbiAgICAgICAgKS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgaW5kZXg6IHozLm51bWJlcigpLFxuICAgICAgbG9ncHJvYnM6IHozLm9iamVjdCh7XG4gICAgICAgIGNvbnRlbnQ6IHozLmFycmF5KFxuICAgICAgICAgIHozLm9iamVjdCh7XG4gICAgICAgICAgICB0b2tlbjogejMuc3RyaW5nKCksXG4gICAgICAgICAgICBsb2dwcm9iOiB6My5udW1iZXIoKSxcbiAgICAgICAgICAgIHRvcF9sb2dwcm9iczogejMuYXJyYXkoXG4gICAgICAgICAgICAgIHozLm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdG9rZW46IHozLnN0cmluZygpLFxuICAgICAgICAgICAgICAgIGxvZ3Byb2I6IHozLm51bWJlcigpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSlcbiAgICAgICAgKS5udWxsaXNoKClcbiAgICAgIH0pLm51bGxpc2goKSxcbiAgICAgIGZpbmlzaF9yZWFzb246IHozLnN0cmluZygpLm51bGxpc2goKVxuICAgIH0pXG4gICksXG4gIHVzYWdlOiBvcGVuYWlUb2tlblVzYWdlU2NoZW1hXG59KTtcbnZhciBvcGVuYWlDaGF0Q2h1bmtTY2hlbWEgPSB6My51bmlvbihbXG4gIHozLm9iamVjdCh7XG4gICAgaWQ6IHozLnN0cmluZygpLm51bGxpc2goKSxcbiAgICBjcmVhdGVkOiB6My5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgbW9kZWw6IHozLnN0cmluZygpLm51bGxpc2goKSxcbiAgICBjaG9pY2VzOiB6My5hcnJheShcbiAgICAgIHozLm9iamVjdCh7XG4gICAgICAgIGRlbHRhOiB6My5vYmplY3Qoe1xuICAgICAgICAgIHJvbGU6IHozLmVudW0oW1wiYXNzaXN0YW50XCJdKS5udWxsaXNoKCksXG4gICAgICAgICAgY29udGVudDogejMuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgIHRvb2xfY2FsbHM6IHozLmFycmF5KFxuICAgICAgICAgICAgejMub2JqZWN0KHtcbiAgICAgICAgICAgICAgaW5kZXg6IHozLm51bWJlcigpLFxuICAgICAgICAgICAgICBpZDogejMuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICB0eXBlOiB6My5saXRlcmFsKFwiZnVuY3Rpb25cIikubnVsbGlzaCgpLFxuICAgICAgICAgICAgICBmdW5jdGlvbjogejMub2JqZWN0KHtcbiAgICAgICAgICAgICAgICBuYW1lOiB6My5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiB6My5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKS5udWxsaXNoKCksXG4gICAgICAgICAgYW5ub3RhdGlvbnM6IHozLmFycmF5KFxuICAgICAgICAgICAgejMub2JqZWN0KHtcbiAgICAgICAgICAgICAgdHlwZTogejMubGl0ZXJhbChcInVybF9jaXRhdGlvblwiKSxcbiAgICAgICAgICAgICAgc3RhcnRfaW5kZXg6IHozLm51bWJlcigpLFxuICAgICAgICAgICAgICBlbmRfaW5kZXg6IHozLm51bWJlcigpLFxuICAgICAgICAgICAgICB1cmw6IHozLnN0cmluZygpLFxuICAgICAgICAgICAgICB0aXRsZTogejMuc3RyaW5nKClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKS5udWxsaXNoKClcbiAgICAgICAgfSkubnVsbGlzaCgpLFxuICAgICAgICBsb2dwcm9iczogejMub2JqZWN0KHtcbiAgICAgICAgICBjb250ZW50OiB6My5hcnJheShcbiAgICAgICAgICAgIHozLm9iamVjdCh7XG4gICAgICAgICAgICAgIHRva2VuOiB6My5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgbG9ncHJvYjogejMubnVtYmVyKCksXG4gICAgICAgICAgICAgIHRvcF9sb2dwcm9iczogejMuYXJyYXkoXG4gICAgICAgICAgICAgICAgejMub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgIHRva2VuOiB6My5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgIGxvZ3Byb2I6IHozLm51bWJlcigpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApLm51bGxpc2goKVxuICAgICAgICB9KS5udWxsaXNoKCksXG4gICAgICAgIGZpbmlzaF9yZWFzb246IHozLnN0cmluZygpLm51bGxpc2goKSxcbiAgICAgICAgaW5kZXg6IHozLm51bWJlcigpXG4gICAgICB9KVxuICAgICksXG4gICAgdXNhZ2U6IG9wZW5haVRva2VuVXNhZ2VTY2hlbWFcbiAgfSksXG4gIG9wZW5haUVycm9yRGF0YVNjaGVtYVxuXSk7XG5mdW5jdGlvbiBpc1JlYXNvbmluZ01vZGVsKG1vZGVsSWQpIHtcbiAgcmV0dXJuIChtb2RlbElkLnN0YXJ0c1dpdGgoXCJvXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01XCIpKSAmJiAhbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtY2hhdFwiKTtcbn1cbmZ1bmN0aW9uIHN1cHBvcnRzRmxleFByb2Nlc3NpbmcobW9kZWxJZCkge1xuICByZXR1cm4gbW9kZWxJZC5zdGFydHNXaXRoKFwibzNcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzQtbWluaVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSAmJiAhbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtY2hhdFwiKTtcbn1cbmZ1bmN0aW9uIHN1cHBvcnRzUHJpb3JpdHlQcm9jZXNzaW5nKG1vZGVsSWQpIHtcbiAgcmV0dXJuIG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC00XCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LW1pbmlcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTVcIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LW5hbm9cIikgJiYgIW1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01LWNoYXRcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzNcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzQtbWluaVwiKTtcbn1cbmZ1bmN0aW9uIGdldFN5c3RlbU1lc3NhZ2VNb2RlKG1vZGVsSWQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgaWYgKCFpc1JlYXNvbmluZ01vZGVsKG1vZGVsSWQpKSB7XG4gICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gIH1cbiAgcmV0dXJuIChfYiA9IChfYSA9IHJlYXNvbmluZ01vZGVsc1ttb2RlbElkXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnN5c3RlbU1lc3NhZ2VNb2RlKSAhPSBudWxsID8gX2IgOiBcImRldmVsb3BlclwiO1xufVxudmFyIHJlYXNvbmluZ01vZGVscyA9IHtcbiAgXCJvMS1taW5pXCI6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJyZW1vdmVcIlxuICB9LFxuICBcIm8xLW1pbmktMjAyNC0wOS0xMlwiOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwicmVtb3ZlXCJcbiAgfSxcbiAgXCJvMS1wcmV2aWV3XCI6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJyZW1vdmVcIlxuICB9LFxuICBcIm8xLXByZXZpZXctMjAyNC0wOS0xMlwiOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwicmVtb3ZlXCJcbiAgfSxcbiAgbzM6IHtcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJkZXZlbG9wZXJcIlxuICB9LFxuICBcIm8zLTIwMjUtMDQtMTZcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcImRldmVsb3BlclwiXG4gIH0sXG4gIFwibzMtbWluaVwiOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwiZGV2ZWxvcGVyXCJcbiAgfSxcbiAgXCJvMy1taW5pLTIwMjUtMDEtMzFcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcImRldmVsb3BlclwiXG4gIH0sXG4gIFwibzQtbWluaVwiOiB7XG4gICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwiZGV2ZWxvcGVyXCJcbiAgfSxcbiAgXCJvNC1taW5pLTIwMjUtMDQtMTZcIjoge1xuICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBcImRldmVsb3BlclwiXG4gIH1cbn07XG5cbi8vIHNyYy9jb21wbGV0aW9uL29wZW5haS1jb21wbGV0aW9uLWxhbmd1YWdlLW1vZGVsLnRzXG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczIsXG4gIGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyMixcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyMixcbiAgcGFyc2VQcm92aWRlck9wdGlvbnMgYXMgcGFyc2VQcm92aWRlck9wdGlvbnMyLFxuICBwb3N0SnNvblRvQXBpIGFzIHBvc3RKc29uVG9BcGkyXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo1IH0gZnJvbSBcInpvZC92NFwiO1xuXG4vLyBzcmMvY29tcGxldGlvbi9jb252ZXJ0LXRvLW9wZW5haS1jb21wbGV0aW9uLXByb21wdC50c1xuaW1wb3J0IHtcbiAgSW52YWxpZFByb21wdEVycm9yLFxuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjNcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSUNvbXBsZXRpb25Qcm9tcHQoe1xuICBwcm9tcHQsXG4gIHVzZXIgPSBcInVzZXJcIixcbiAgYXNzaXN0YW50ID0gXCJhc3Npc3RhbnRcIlxufSkge1xuICBsZXQgdGV4dCA9IFwiXCI7XG4gIGlmIChwcm9tcHRbMF0ucm9sZSA9PT0gXCJzeXN0ZW1cIikge1xuICAgIHRleHQgKz0gYCR7cHJvbXB0WzBdLmNvbnRlbnR9XG5cbmA7XG4gICAgcHJvbXB0ID0gcHJvbXB0LnNsaWNlKDEpO1xuICB9XG4gIGZvciAoY29uc3QgeyByb2xlLCBjb250ZW50IH0gb2YgcHJvbXB0KSB7XG4gICAgc3dpdGNoIChyb2xlKSB7XG4gICAgICBjYXNlIFwic3lzdGVtXCI6IHtcbiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRQcm9tcHRFcnJvcih7XG4gICAgICAgICAgbWVzc2FnZTogXCJVbmV4cGVjdGVkIHN5c3RlbSBtZXNzYWdlIGluIHByb21wdDogJHtjb250ZW50fVwiLFxuICAgICAgICAgIHByb21wdFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ1c2VyXCI6IHtcbiAgICAgICAgY29uc3QgdXNlck1lc3NhZ2UgPSBjb250ZW50Lm1hcCgocGFydCkgPT4ge1xuICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgIHJldHVybiBwYXJ0LnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlwiKTtcbiAgICAgICAgdGV4dCArPSBgJHt1c2VyfTpcbiR7dXNlck1lc3NhZ2V9XG5cbmA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcImFzc2lzdGFudFwiOiB7XG4gICAgICAgIGNvbnN0IGFzc2lzdGFudE1lc3NhZ2UgPSBjb250ZW50Lm1hcCgocGFydCkgPT4ge1xuICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwidGV4dFwiOiB7XG4gICAgICAgICAgICAgIHJldHVybiBwYXJ0LnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwidG9vbC1jYWxsXCI6IHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yMyh7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25hbGl0eTogXCJ0b29sLWNhbGwgbWVzc2FnZXNcIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLmpvaW4oXCJcIik7XG4gICAgICAgIHRleHQgKz0gYCR7YXNzaXN0YW50fTpcbiR7YXNzaXN0YW50TWVzc2FnZX1cblxuYDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwidG9vbFwiOiB7XG4gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjMoe1xuICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IFwidG9vbCBtZXNzYWdlc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gcm9sZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCByb2xlOiAke19leGhhdXN0aXZlQ2hlY2t9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHRleHQgKz0gYCR7YXNzaXN0YW50fTpcbmA7XG4gIHJldHVybiB7XG4gICAgcHJvbXB0OiB0ZXh0LFxuICAgIHN0b3BTZXF1ZW5jZXM6IFtgXG4ke3VzZXJ9OmBdXG4gIH07XG59XG5cbi8vIHNyYy9jb21wbGV0aW9uL2dldC1yZXNwb25zZS1tZXRhZGF0YS50c1xuZnVuY3Rpb24gZ2V0UmVzcG9uc2VNZXRhZGF0YTIoe1xuICBpZCxcbiAgbW9kZWwsXG4gIGNyZWF0ZWRcbn0pIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogaWQgIT0gbnVsbCA/IGlkIDogdm9pZCAwLFxuICAgIG1vZGVsSWQ6IG1vZGVsICE9IG51bGwgPyBtb2RlbCA6IHZvaWQgMCxcbiAgICB0aW1lc3RhbXA6IGNyZWF0ZWQgIT0gbnVsbCA/IG5ldyBEYXRlKGNyZWF0ZWQgKiAxZTMpIDogdm9pZCAwXG4gIH07XG59XG5cbi8vIHNyYy9jb21wbGV0aW9uL21hcC1vcGVuYWktZmluaXNoLXJlYXNvbi50c1xuZnVuY3Rpb24gbWFwT3BlbkFJRmluaXNoUmVhc29uMihmaW5pc2hSZWFzb24pIHtcbiAgc3dpdGNoIChmaW5pc2hSZWFzb24pIHtcbiAgICBjYXNlIFwic3RvcFwiOlxuICAgICAgcmV0dXJuIFwic3RvcFwiO1xuICAgIGNhc2UgXCJsZW5ndGhcIjpcbiAgICAgIHJldHVybiBcImxlbmd0aFwiO1xuICAgIGNhc2UgXCJjb250ZW50X2ZpbHRlclwiOlxuICAgICAgcmV0dXJuIFwiY29udGVudC1maWx0ZXJcIjtcbiAgICBjYXNlIFwiZnVuY3Rpb25fY2FsbFwiOlxuICAgIGNhc2UgXCJ0b29sX2NhbGxzXCI6XG4gICAgICByZXR1cm4gXCJ0b29sLWNhbGxzXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcInVua25vd25cIjtcbiAgfVxufVxuXG4vLyBzcmMvY29tcGxldGlvbi9vcGVuYWktY29tcGxldGlvbi1vcHRpb25zLnRzXG5pbXBvcnQgeyB6IGFzIHo0IH0gZnJvbSBcInpvZC92NFwiO1xudmFyIG9wZW5haUNvbXBsZXRpb25Qcm92aWRlck9wdGlvbnMgPSB6NC5vYmplY3Qoe1xuICAvKipcbiAgRWNobyBiYWNrIHRoZSBwcm9tcHQgaW4gYWRkaXRpb24gdG8gdGhlIGNvbXBsZXRpb24uXG4gICAgICovXG4gIGVjaG86IHo0LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAvKipcbiAgTW9kaWZ5IHRoZSBsaWtlbGlob29kIG9mIHNwZWNpZmllZCB0b2tlbnMgYXBwZWFyaW5nIGluIHRoZSBjb21wbGV0aW9uLlxuICBcbiAgQWNjZXB0cyBhIEpTT04gb2JqZWN0IHRoYXQgbWFwcyB0b2tlbnMgKHNwZWNpZmllZCBieSB0aGVpciB0b2tlbiBJRCBpblxuICB0aGUgR1BUIHRva2VuaXplcikgdG8gYW4gYXNzb2NpYXRlZCBiaWFzIHZhbHVlIGZyb20gLTEwMCB0byAxMDAuIFlvdVxuICBjYW4gdXNlIHRoaXMgdG9rZW5pemVyIHRvb2wgdG8gY29udmVydCB0ZXh0IHRvIHRva2VuIElEcy4gTWF0aGVtYXRpY2FsbHksXG4gIHRoZSBiaWFzIGlzIGFkZGVkIHRvIHRoZSBsb2dpdHMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBwcmlvciB0byBzYW1wbGluZy5cbiAgVGhlIGV4YWN0IGVmZmVjdCB3aWxsIHZhcnkgcGVyIG1vZGVsLCBidXQgdmFsdWVzIGJldHdlZW4gLTEgYW5kIDEgc2hvdWxkXG4gIGRlY3JlYXNlIG9yIGluY3JlYXNlIGxpa2VsaWhvb2Qgb2Ygc2VsZWN0aW9uOyB2YWx1ZXMgbGlrZSAtMTAwIG9yIDEwMFxuICBzaG91bGQgcmVzdWx0IGluIGEgYmFuIG9yIGV4Y2x1c2l2ZSBzZWxlY3Rpb24gb2YgdGhlIHJlbGV2YW50IHRva2VuLlxuICBcbiAgQXMgYW4gZXhhbXBsZSwgeW91IGNhbiBwYXNzIHtcIjUwMjU2XCI6IC0xMDB9IHRvIHByZXZlbnQgdGhlIDx8ZW5kb2Z0ZXh0fD5cbiAgdG9rZW4gZnJvbSBiZWluZyBnZW5lcmF0ZWQuXG4gICAqL1xuICBsb2dpdEJpYXM6IHo0LnJlY29yZCh6NC5zdHJpbmcoKSwgejQubnVtYmVyKCkpLm9wdGlvbmFsKCksXG4gIC8qKlxuICBUaGUgc3VmZml4IHRoYXQgY29tZXMgYWZ0ZXIgYSBjb21wbGV0aW9uIG9mIGluc2VydGVkIHRleHQuXG4gICAqL1xuICBzdWZmaXg6IHo0LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIC8qKlxuICBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG9cbiAgbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBMZWFybiBtb3JlLlxuICAgKi9cbiAgdXNlcjogejQuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gIFJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRva2Vucy4gSW5jbHVkaW5nIGxvZ3Byb2JzIHdpbGwgaW5jcmVhc2VcbiAgdGhlIHJlc3BvbnNlIHNpemUgYW5kIGNhbiBzbG93IGRvd24gcmVzcG9uc2UgdGltZXMuIEhvd2V2ZXIsIGl0IGNhblxuICBiZSB1c2VmdWwgdG8gYmV0dGVyIHVuZGVyc3RhbmQgaG93IHRoZSBtb2RlbCBpcyBiZWhhdmluZy5cbiAgU2V0dGluZyB0byB0cnVlIHdpbGwgcmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9rZW5zIHRoYXRcbiAgd2VyZSBnZW5lcmF0ZWQuXG4gIFNldHRpbmcgdG8gYSBudW1iZXIgd2lsbCByZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b3AgblxuICB0b2tlbnMgdGhhdCB3ZXJlIGdlbmVyYXRlZC5cbiAgICAgKi9cbiAgbG9ncHJvYnM6IHo0LnVuaW9uKFt6NC5ib29sZWFuKCksIHo0Lm51bWJlcigpXSkub3B0aW9uYWwoKVxufSk7XG5cbi8vIHNyYy9jb21wbGV0aW9uL29wZW5haS1jb21wbGV0aW9uLWxhbmd1YWdlLW1vZGVsLnRzXG52YXIgT3BlbkFJQ29tcGxldGlvbkxhbmd1YWdlTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMuc3BlY2lmaWNhdGlvblZlcnNpb24gPSBcInYyXCI7XG4gICAgdGhpcy5zdXBwb3J0ZWRVcmxzID0ge1xuICAgICAgLy8gTm8gVVJMcyBhcmUgc3VwcG9ydGVkIGZvciBjb21wbGV0aW9uIG1vZGVscy5cbiAgICB9O1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cbiAgZ2V0IHByb3ZpZGVyT3B0aW9uc05hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyLnNwbGl0KFwiLlwiKVswXS50cmltKCk7XG4gIH1cbiAgZ2V0IHByb3ZpZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlcjtcbiAgfVxuICBhc3luYyBnZXRBcmdzKHtcbiAgICBwcm9tcHQsXG4gICAgbWF4T3V0cHV0VG9rZW5zLFxuICAgIHRlbXBlcmF0dXJlLFxuICAgIHRvcFAsXG4gICAgdG9wSyxcbiAgICBmcmVxdWVuY3lQZW5hbHR5LFxuICAgIHByZXNlbmNlUGVuYWx0eSxcbiAgICBzdG9wU2VxdWVuY2VzOiB1c2VyU3RvcFNlcXVlbmNlcyxcbiAgICByZXNwb25zZUZvcm1hdCxcbiAgICB0b29scyxcbiAgICB0b29sQ2hvaWNlLFxuICAgIHNlZWQsXG4gICAgcHJvdmlkZXJPcHRpb25zXG4gIH0pIHtcbiAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICAgIGNvbnN0IG9wZW5haU9wdGlvbnMgPSB7XG4gICAgICAuLi5hd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczIoe1xuICAgICAgICBwcm92aWRlcjogXCJvcGVuYWlcIixcbiAgICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgICBzY2hlbWE6IG9wZW5haUNvbXBsZXRpb25Qcm92aWRlck9wdGlvbnNcbiAgICAgIH0pLFxuICAgICAgLi4uYXdhaXQgcGFyc2VQcm92aWRlck9wdGlvbnMyKHtcbiAgICAgICAgcHJvdmlkZXI6IHRoaXMucHJvdmlkZXJPcHRpb25zTmFtZSxcbiAgICAgICAgcHJvdmlkZXJPcHRpb25zLFxuICAgICAgICBzY2hlbWE6IG9wZW5haUNvbXBsZXRpb25Qcm92aWRlck9wdGlvbnNcbiAgICAgIH0pXG4gICAgfTtcbiAgICBpZiAodG9wSyAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsIHNldHRpbmc6IFwidG9wS1wiIH0pO1xuICAgIH1cbiAgICBpZiAodG9vbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xzLmxlbmd0aCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLCBzZXR0aW5nOiBcInRvb2xzXCIgfSk7XG4gICAgfVxuICAgIGlmICh0b29sQ2hvaWNlICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJ0b29sQ2hvaWNlXCIgfSk7XG4gICAgfVxuICAgIGlmIChyZXNwb25zZUZvcm1hdCAhPSBudWxsICYmIHJlc3BvbnNlRm9ybWF0LnR5cGUgIT09IFwidGV4dFwiKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwicmVzcG9uc2VGb3JtYXRcIixcbiAgICAgICAgZGV0YWlsczogXCJKU09OIHJlc3BvbnNlIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkLlwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgeyBwcm9tcHQ6IGNvbXBsZXRpb25Qcm9tcHQsIHN0b3BTZXF1ZW5jZXMgfSA9IGNvbnZlcnRUb09wZW5BSUNvbXBsZXRpb25Qcm9tcHQoeyBwcm9tcHQgfSk7XG4gICAgY29uc3Qgc3RvcCA9IFsuLi5zdG9wU2VxdWVuY2VzICE9IG51bGwgPyBzdG9wU2VxdWVuY2VzIDogW10sIC4uLnVzZXJTdG9wU2VxdWVuY2VzICE9IG51bGwgPyB1c2VyU3RvcFNlcXVlbmNlcyA6IFtdXTtcbiAgICByZXR1cm4ge1xuICAgICAgYXJnczoge1xuICAgICAgICAvLyBtb2RlbCBpZDpcbiAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgLy8gbW9kZWwgc3BlY2lmaWMgc2V0dGluZ3M6XG4gICAgICAgIGVjaG86IG9wZW5haU9wdGlvbnMuZWNobyxcbiAgICAgICAgbG9naXRfYmlhczogb3BlbmFpT3B0aW9ucy5sb2dpdEJpYXMsXG4gICAgICAgIGxvZ3Byb2JzOiAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5sb2dwcm9icykgPT09IHRydWUgPyAwIDogKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMpID09PSBmYWxzZSA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMsXG4gICAgICAgIHN1ZmZpeDogb3BlbmFpT3B0aW9ucy5zdWZmaXgsXG4gICAgICAgIHVzZXI6IG9wZW5haU9wdGlvbnMudXNlcixcbiAgICAgICAgLy8gc3RhbmRhcmRpemVkIHNldHRpbmdzOlxuICAgICAgICBtYXhfdG9rZW5zOiBtYXhPdXRwdXRUb2tlbnMsXG4gICAgICAgIHRlbXBlcmF0dXJlLFxuICAgICAgICB0b3BfcDogdG9wUCxcbiAgICAgICAgZnJlcXVlbmN5X3BlbmFsdHk6IGZyZXF1ZW5jeVBlbmFsdHksXG4gICAgICAgIHByZXNlbmNlX3BlbmFsdHk6IHByZXNlbmNlUGVuYWx0eSxcbiAgICAgICAgc2VlZCxcbiAgICAgICAgLy8gcHJvbXB0OlxuICAgICAgICBwcm9tcHQ6IGNvbXBsZXRpb25Qcm9tcHQsXG4gICAgICAgIC8vIHN0b3Agc2VxdWVuY2VzOlxuICAgICAgICBzdG9wOiBzdG9wLmxlbmd0aCA+IDAgPyBzdG9wIDogdm9pZCAwXG4gICAgICB9LFxuICAgICAgd2FybmluZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvR2VuZXJhdGUob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jO1xuICAgIGNvbnN0IHsgYXJncywgd2FybmluZ3MgfSA9IGF3YWl0IHRoaXMuZ2V0QXJncyhvcHRpb25zKTtcbiAgICBjb25zdCB7XG4gICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICB2YWx1ZTogcmVzcG9uc2UsXG4gICAgICByYXdWYWx1ZTogcmF3UmVzcG9uc2VcbiAgICB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTIoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9jb21wbGV0aW9uc1wiLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWRcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnMyKHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHk6IGFyZ3MsXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIyKFxuICAgICAgICBvcGVuYWlDb21wbGV0aW9uUmVzcG9uc2VTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGNvbnN0IGNob2ljZSA9IHJlc3BvbnNlLmNob2ljZXNbMF07XG4gICAgY29uc3QgcHJvdmlkZXJNZXRhZGF0YSA9IHsgb3BlbmFpOiB7fSB9O1xuICAgIGlmIChjaG9pY2UubG9ncHJvYnMgIT0gbnVsbCkge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkubG9ncHJvYnMgPSBjaG9pY2UubG9ncHJvYnM7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50OiBbeyB0eXBlOiBcInRleHRcIiwgdGV4dDogY2hvaWNlLnRleHQgfV0sXG4gICAgICB1c2FnZToge1xuICAgICAgICBpbnB1dFRva2VuczogKF9hID0gcmVzcG9uc2UudXNhZ2UpID09IG51bGwgPyB2b2lkIDAgOiBfYS5wcm9tcHRfdG9rZW5zLFxuICAgICAgICBvdXRwdXRUb2tlbnM6IChfYiA9IHJlc3BvbnNlLnVzYWdlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY29tcGxldGlvbl90b2tlbnMsXG4gICAgICAgIHRvdGFsVG9rZW5zOiAoX2MgPSByZXNwb25zZS51c2FnZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLnRvdGFsX3Rva2Vuc1xuICAgICAgfSxcbiAgICAgIGZpbmlzaFJlYXNvbjogbWFwT3BlbkFJRmluaXNoUmVhc29uMihjaG9pY2UuZmluaXNoX3JlYXNvbiksXG4gICAgICByZXF1ZXN0OiB7IGJvZHk6IGFyZ3MgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIC4uLmdldFJlc3BvbnNlTWV0YWRhdGEyKHJlc3BvbnNlKSxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBib2R5OiByYXdSZXNwb25zZVxuICAgICAgfSxcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEsXG4gICAgICB3YXJuaW5nc1xuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9TdHJlYW0ob3B0aW9ucykge1xuICAgIGNvbnN0IHsgYXJncywgd2FybmluZ3MgfSA9IGF3YWl0IHRoaXMuZ2V0QXJncyhvcHRpb25zKTtcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgLi4uYXJncyxcbiAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgIHN0cmVhbV9vcHRpb25zOiB7XG4gICAgICAgIGluY2x1ZGVfdXNhZ2U6IHRydWVcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHsgcmVzcG9uc2VIZWFkZXJzLCB2YWx1ZTogcmVzcG9uc2UgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGkyKHtcbiAgICAgIHVybDogdGhpcy5jb25maWcudXJsKHtcbiAgICAgICAgcGF0aDogXCIvY29tcGxldGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzMih0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcjIoXG4gICAgICAgIG9wZW5haUNvbXBsZXRpb25DaHVua1NjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgbGV0IGZpbmlzaFJlYXNvbiA9IFwidW5rbm93blwiO1xuICAgIGNvbnN0IHByb3ZpZGVyTWV0YWRhdGEgPSB7IG9wZW5haToge30gfTtcbiAgICBjb25zdCB1c2FnZSA9IHtcbiAgICAgIGlucHV0VG9rZW5zOiB2b2lkIDAsXG4gICAgICBvdXRwdXRUb2tlbnM6IHZvaWQgMCxcbiAgICAgIHRvdGFsVG9rZW5zOiB2b2lkIDBcbiAgICB9O1xuICAgIGxldCBpc0ZpcnN0Q2h1bmsgPSB0cnVlO1xuICAgIHJldHVybiB7XG4gICAgICBzdHJlYW06IHJlc3BvbnNlLnBpcGVUaHJvdWdoKFxuICAgICAgICBuZXcgVHJhbnNmb3JtU3RyZWFtKHtcbiAgICAgICAgICBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInN0cmVhbS1zdGFydFwiLCB3YXJuaW5ncyB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRyYW5zZm9ybShjaHVuaywgY29udHJvbGxlcikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5jbHVkZVJhd0NodW5rcykge1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInJhd1wiLCByYXdWYWx1ZTogY2h1bmsucmF3VmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNodW5rLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0gXCJlcnJvclwiO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiBjaHVuay5lcnJvciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjaHVuay52YWx1ZTtcbiAgICAgICAgICAgIGlmIChcImVycm9yXCIgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uID0gXCJlcnJvclwiO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yOiB2YWx1ZS5lcnJvciB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRmlyc3RDaHVuaykge1xuICAgICAgICAgICAgICBpc0ZpcnN0Q2h1bmsgPSBmYWxzZTtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlc3BvbnNlLW1ldGFkYXRhXCIsXG4gICAgICAgICAgICAgICAgLi4uZ2V0UmVzcG9uc2VNZXRhZGF0YTIodmFsdWUpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoeyB0eXBlOiBcInRleHQtc3RhcnRcIiwgaWQ6IFwiMFwiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlLnVzYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSB2YWx1ZS51c2FnZS5wcm9tcHRfdG9rZW5zO1xuICAgICAgICAgICAgICB1c2FnZS5vdXRwdXRUb2tlbnMgPSB2YWx1ZS51c2FnZS5jb21wbGV0aW9uX3Rva2VucztcbiAgICAgICAgICAgICAgdXNhZ2UudG90YWxUb2tlbnMgPSB2YWx1ZS51c2FnZS50b3RhbF90b2tlbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjaG9pY2UgPSB2YWx1ZS5jaG9pY2VzWzBdO1xuICAgICAgICAgICAgaWYgKChjaG9pY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNob2ljZS5maW5pc2hfcmVhc29uKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbiA9IG1hcE9wZW5BSUZpbmlzaFJlYXNvbjIoY2hvaWNlLmZpbmlzaF9yZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjaG9pY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGNob2ljZS5sb2dwcm9icykgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5sb2dwcm9icyA9IGNob2ljZS5sb2dwcm9icztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2hvaWNlID09IG51bGwgPyB2b2lkIDAgOiBjaG9pY2UudGV4dCkgIT0gbnVsbCAmJiBjaG9pY2UudGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgaWQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgIGRlbHRhOiBjaG9pY2UudGV4dFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGZsdXNoKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGlmICghaXNGaXJzdENodW5rKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwidGV4dC1lbmRcIiwgaWQ6IFwiMFwiIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJmaW5pc2hcIixcbiAgICAgICAgICAgICAgZmluaXNoUmVhc29uLFxuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhLFxuICAgICAgICAgICAgICB1c2FnZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKSxcbiAgICAgIHJlcXVlc3Q6IHsgYm9keSB9LFxuICAgICAgcmVzcG9uc2U6IHsgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzIH1cbiAgICB9O1xuICB9XG59O1xudmFyIHVzYWdlU2NoZW1hID0gejUub2JqZWN0KHtcbiAgcHJvbXB0X3Rva2VuczogejUubnVtYmVyKCksXG4gIGNvbXBsZXRpb25fdG9rZW5zOiB6NS5udW1iZXIoKSxcbiAgdG90YWxfdG9rZW5zOiB6NS5udW1iZXIoKVxufSk7XG52YXIgb3BlbmFpQ29tcGxldGlvblJlc3BvbnNlU2NoZW1hID0gejUub2JqZWN0KHtcbiAgaWQ6IHo1LnN0cmluZygpLm51bGxpc2goKSxcbiAgY3JlYXRlZDogejUubnVtYmVyKCkubnVsbGlzaCgpLFxuICBtb2RlbDogejUuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBjaG9pY2VzOiB6NS5hcnJheShcbiAgICB6NS5vYmplY3Qoe1xuICAgICAgdGV4dDogejUuc3RyaW5nKCksXG4gICAgICBmaW5pc2hfcmVhc29uOiB6NS5zdHJpbmcoKSxcbiAgICAgIGxvZ3Byb2JzOiB6NS5vYmplY3Qoe1xuICAgICAgICB0b2tlbnM6IHo1LmFycmF5KHo1LnN0cmluZygpKSxcbiAgICAgICAgdG9rZW5fbG9ncHJvYnM6IHo1LmFycmF5KHo1Lm51bWJlcigpKSxcbiAgICAgICAgdG9wX2xvZ3Byb2JzOiB6NS5hcnJheSh6NS5yZWNvcmQoejUuc3RyaW5nKCksIHo1Lm51bWJlcigpKSkubnVsbGlzaCgpXG4gICAgICB9KS5udWxsaXNoKClcbiAgICB9KVxuICApLFxuICB1c2FnZTogdXNhZ2VTY2hlbWEubnVsbGlzaCgpXG59KTtcbnZhciBvcGVuYWlDb21wbGV0aW9uQ2h1bmtTY2hlbWEgPSB6NS51bmlvbihbXG4gIHo1Lm9iamVjdCh7XG4gICAgaWQ6IHo1LnN0cmluZygpLm51bGxpc2goKSxcbiAgICBjcmVhdGVkOiB6NS5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgbW9kZWw6IHo1LnN0cmluZygpLm51bGxpc2goKSxcbiAgICBjaG9pY2VzOiB6NS5hcnJheShcbiAgICAgIHo1Lm9iamVjdCh7XG4gICAgICAgIHRleHQ6IHo1LnN0cmluZygpLFxuICAgICAgICBmaW5pc2hfcmVhc29uOiB6NS5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIGluZGV4OiB6NS5udW1iZXIoKSxcbiAgICAgICAgbG9ncHJvYnM6IHo1Lm9iamVjdCh7XG4gICAgICAgICAgdG9rZW5zOiB6NS5hcnJheSh6NS5zdHJpbmcoKSksXG4gICAgICAgICAgdG9rZW5fbG9ncHJvYnM6IHo1LmFycmF5KHo1Lm51bWJlcigpKSxcbiAgICAgICAgICB0b3BfbG9ncHJvYnM6IHo1LmFycmF5KHo1LnJlY29yZCh6NS5zdHJpbmcoKSwgejUubnVtYmVyKCkpKS5udWxsaXNoKClcbiAgICAgICAgfSkubnVsbGlzaCgpXG4gICAgICB9KVxuICAgICksXG4gICAgdXNhZ2U6IHVzYWdlU2NoZW1hLm51bGxpc2goKVxuICB9KSxcbiAgb3BlbmFpRXJyb3JEYXRhU2NoZW1hXG5dKTtcblxuLy8gc3JjL2VtYmVkZGluZy9vcGVuYWktZW1iZWRkaW5nLW1vZGVsLnRzXG5pbXBvcnQge1xuICBUb29NYW55RW1iZWRkaW5nVmFsdWVzRm9yQ2FsbEVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczMsXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjMsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zMyxcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpM1xufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6NyB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL2VtYmVkZGluZy9vcGVuYWktZW1iZWRkaW5nLW9wdGlvbnMudHNcbmltcG9ydCB7IHogYXMgejYgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgb3BlbmFpRW1iZWRkaW5nUHJvdmlkZXJPcHRpb25zID0gejYub2JqZWN0KHtcbiAgLyoqXG4gIFRoZSBudW1iZXIgb2YgZGltZW5zaW9ucyB0aGUgcmVzdWx0aW5nIG91dHB1dCBlbWJlZGRpbmdzIHNob3VsZCBoYXZlLlxuICBPbmx5IHN1cHBvcnRlZCBpbiB0ZXh0LWVtYmVkZGluZy0zIGFuZCBsYXRlciBtb2RlbHMuXG4gICAgICovXG4gIGRpbWVuc2lvbnM6IHo2Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIC8qKlxuICBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG9cbiAgbW9uaXRvciBhbmQgZGV0ZWN0IGFidXNlLiBMZWFybiBtb3JlLlxuICAqL1xuICB1c2VyOiB6Ni5zdHJpbmcoKS5vcHRpb25hbCgpXG59KTtcblxuLy8gc3JjL2VtYmVkZGluZy9vcGVuYWktZW1iZWRkaW5nLW1vZGVsLnRzXG52YXIgT3BlbkFJRW1iZWRkaW5nTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMuc3BlY2lmaWNhdGlvblZlcnNpb24gPSBcInYyXCI7XG4gICAgdGhpcy5tYXhFbWJlZGRpbmdzUGVyQ2FsbCA9IDIwNDg7XG4gICAgdGhpcy5zdXBwb3J0c1BhcmFsbGVsQ2FsbHMgPSB0cnVlO1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gIH1cbiAgZ2V0IHByb3ZpZGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5wcm92aWRlcjtcbiAgfVxuICBhc3luYyBkb0VtYmVkKHtcbiAgICB2YWx1ZXMsXG4gICAgaGVhZGVycyxcbiAgICBhYm9ydFNpZ25hbCxcbiAgICBwcm92aWRlck9wdGlvbnNcbiAgfSkge1xuICAgIHZhciBfYTtcbiAgICBpZiAodmFsdWVzLmxlbmd0aCA+IHRoaXMubWF4RW1iZWRkaW5nc1BlckNhbGwpIHtcbiAgICAgIHRocm93IG5ldyBUb29NYW55RW1iZWRkaW5nVmFsdWVzRm9yQ2FsbEVycm9yKHtcbiAgICAgICAgcHJvdmlkZXI6IHRoaXMucHJvdmlkZXIsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgbWF4RW1iZWRkaW5nc1BlckNhbGw6IHRoaXMubWF4RW1iZWRkaW5nc1BlckNhbGwsXG4gICAgICAgIHZhbHVlc1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG9wZW5haU9wdGlvbnMgPSAoX2EgPSBhd2FpdCBwYXJzZVByb3ZpZGVyT3B0aW9uczMoe1xuICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgICBzY2hlbWE6IG9wZW5haUVtYmVkZGluZ1Byb3ZpZGVyT3B0aW9uc1xuICAgIH0pKSAhPSBudWxsID8gX2EgOiB7fTtcbiAgICBjb25zdCB7XG4gICAgICByZXNwb25zZUhlYWRlcnMsXG4gICAgICB2YWx1ZTogcmVzcG9uc2UsXG4gICAgICByYXdWYWx1ZVxuICAgIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpMyh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2VtYmVkZGluZ3NcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzMyh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIGhlYWRlcnMpLFxuICAgICAgYm9keToge1xuICAgICAgICBtb2RlbDogdGhpcy5tb2RlbElkLFxuICAgICAgICBpbnB1dDogdmFsdWVzLFxuICAgICAgICBlbmNvZGluZ19mb3JtYXQ6IFwiZmxvYXRcIixcbiAgICAgICAgZGltZW5zaW9uczogb3BlbmFpT3B0aW9ucy5kaW1lbnNpb25zLFxuICAgICAgICB1c2VyOiBvcGVuYWlPcHRpb25zLnVzZXJcbiAgICAgIH0sXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIzKFxuICAgICAgICBvcGVuYWlUZXh0RW1iZWRkaW5nUmVzcG9uc2VTY2hlbWFcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBlbWJlZGRpbmdzOiByZXNwb25zZS5kYXRhLm1hcCgoaXRlbSkgPT4gaXRlbS5lbWJlZGRpbmcpLFxuICAgICAgdXNhZ2U6IHJlc3BvbnNlLnVzYWdlID8geyB0b2tlbnM6IHJlc3BvbnNlLnVzYWdlLnByb21wdF90b2tlbnMgfSA6IHZvaWQgMCxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycywgYm9keTogcmF3VmFsdWUgfVxuICAgIH07XG4gIH1cbn07XG52YXIgb3BlbmFpVGV4dEVtYmVkZGluZ1Jlc3BvbnNlU2NoZW1hID0gejcub2JqZWN0KHtcbiAgZGF0YTogejcuYXJyYXkoejcub2JqZWN0KHsgZW1iZWRkaW5nOiB6Ny5hcnJheSh6Ny5udW1iZXIoKSkgfSkpLFxuICB1c2FnZTogejcub2JqZWN0KHsgcHJvbXB0X3Rva2VuczogejcubnVtYmVyKCkgfSkubnVsbGlzaCgpXG59KTtcblxuLy8gc3JjL2ltYWdlL29wZW5haS1pbWFnZS1tb2RlbC50c1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnM0LFxuICBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI0LFxuICBwb3N0SnNvblRvQXBpIGFzIHBvc3RKc29uVG9BcGk0XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHo4IH0gZnJvbSBcInpvZC92NFwiO1xuXG4vLyBzcmMvaW1hZ2Uvb3BlbmFpLWltYWdlLW9wdGlvbnMudHNcbnZhciBtb2RlbE1heEltYWdlc1BlckNhbGwgPSB7XG4gIFwiZGFsbC1lLTNcIjogMSxcbiAgXCJkYWxsLWUtMlwiOiAxMCxcbiAgXCJncHQtaW1hZ2UtMVwiOiAxMCxcbiAgXCJncHQtaW1hZ2UtMS1taW5pXCI6IDEwXG59O1xudmFyIGhhc0RlZmF1bHRSZXNwb25zZUZvcm1hdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgXCJncHQtaW1hZ2UtMVwiLFxuICBcImdwdC1pbWFnZS0xLW1pbmlcIlxuXSk7XG5cbi8vIHNyYy9pbWFnZS9vcGVuYWktaW1hZ2UtbW9kZWwudHNcbnZhciBPcGVuQUlJbWFnZU1vZGVsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihtb2RlbElkLCBjb25maWcpIHtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuc3BlY2lmaWNhdGlvblZlcnNpb24gPSBcInYyXCI7XG4gIH1cbiAgZ2V0IG1heEltYWdlc1BlckNhbGwoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSBtb2RlbE1heEltYWdlc1BlckNhbGxbdGhpcy5tb2RlbElkXSkgIT0gbnVsbCA/IF9hIDogMTtcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGRvR2VuZXJhdGUoe1xuICAgIHByb21wdCxcbiAgICBuLFxuICAgIHNpemUsXG4gICAgYXNwZWN0UmF0aW8sXG4gICAgc2VlZCxcbiAgICBwcm92aWRlck9wdGlvbnMsXG4gICAgaGVhZGVycyxcbiAgICBhYm9ydFNpZ25hbFxuICB9KSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgaWYgKGFzcGVjdFJhdGlvICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJhc3BlY3RSYXRpb1wiLFxuICAgICAgICBkZXRhaWxzOiBcIlRoaXMgbW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBhc3BlY3QgcmF0aW8uIFVzZSBgc2l6ZWAgaW5zdGVhZC5cIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzZWVkICE9IG51bGwpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goeyB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIiwgc2V0dGluZzogXCJzZWVkXCIgfSk7XG4gICAgfVxuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gKF9jID0gKF9iID0gKF9hID0gdGhpcy5jb25maWcuX2ludGVybmFsKSA9PSBudWxsID8gdm9pZCAwIDogX2EuY3VycmVudERhdGUpID09IG51bGwgPyB2b2lkIDAgOiBfYi5jYWxsKF9hKSkgIT0gbnVsbCA/IF9jIDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgY29uc3QgeyB2YWx1ZTogcmVzcG9uc2UsIHJlc3BvbnNlSGVhZGVycyB9ID0gYXdhaXQgcG9zdEpzb25Ub0FwaTQoe1xuICAgICAgdXJsOiB0aGlzLmNvbmZpZy51cmwoe1xuICAgICAgICBwYXRoOiBcIi9pbWFnZXMvZ2VuZXJhdGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzNCh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIGhlYWRlcnMpLFxuICAgICAgYm9keToge1xuICAgICAgICBtb2RlbDogdGhpcy5tb2RlbElkLFxuICAgICAgICBwcm9tcHQsXG4gICAgICAgIG4sXG4gICAgICAgIHNpemUsXG4gICAgICAgIC4uLihfZCA9IHByb3ZpZGVyT3B0aW9ucy5vcGVuYWkpICE9IG51bGwgPyBfZCA6IHt9LFxuICAgICAgICAuLi4haGFzRGVmYXVsdFJlc3BvbnNlRm9ybWF0Lmhhcyh0aGlzLm1vZGVsSWQpID8geyByZXNwb25zZV9mb3JtYXQ6IFwiYjY0X2pzb25cIiB9IDoge31cbiAgICAgIH0sXG4gICAgICBmYWlsZWRSZXNwb25zZUhhbmRsZXI6IG9wZW5haUZhaWxlZFJlc3BvbnNlSGFuZGxlcixcbiAgICAgIHN1Y2Nlc3NmdWxSZXNwb25zZUhhbmRsZXI6IGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXI0KFxuICAgICAgICBvcGVuYWlJbWFnZVJlc3BvbnNlU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgaW1hZ2VzOiByZXNwb25zZS5kYXRhLm1hcCgoaXRlbSkgPT4gaXRlbS5iNjRfanNvbiksXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHRpbWVzdGFtcDogY3VycmVudERhdGUsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzXG4gICAgICB9LFxuICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICBpbWFnZXM6IHJlc3BvbnNlLmRhdGEubWFwKFxuICAgICAgICAgICAgKGl0ZW0pID0+IGl0ZW0ucmV2aXNlZF9wcm9tcHQgPyB7XG4gICAgICAgICAgICAgIHJldmlzZWRQcm9tcHQ6IGl0ZW0ucmV2aXNlZF9wcm9tcHRcbiAgICAgICAgICAgIH0gOiBudWxsXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcbnZhciBvcGVuYWlJbWFnZVJlc3BvbnNlU2NoZW1hID0gejgub2JqZWN0KHtcbiAgZGF0YTogejguYXJyYXkoXG4gICAgejgub2JqZWN0KHsgYjY0X2pzb246IHo4LnN0cmluZygpLCByZXZpc2VkX3Byb21wdDogejguc3RyaW5nKCkub3B0aW9uYWwoKSB9KVxuICApXG59KTtcblxuLy8gc3JjL3Rvb2wvY29kZS1pbnRlcnByZXRlci50c1xuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejkgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgY29kZUludGVycHJldGVySW5wdXRTY2hlbWEgPSB6OS5vYmplY3Qoe1xuICBjb2RlOiB6OS5zdHJpbmcoKS5udWxsaXNoKCksXG4gIGNvbnRhaW5lcklkOiB6OS5zdHJpbmcoKVxufSk7XG52YXIgY29kZUludGVycHJldGVyT3V0cHV0U2NoZW1hID0gejkub2JqZWN0KHtcbiAgb3V0cHV0czogejkuYXJyYXkoXG4gICAgejkuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICB6OS5vYmplY3QoeyB0eXBlOiB6OS5saXRlcmFsKFwibG9nc1wiKSwgbG9nczogejkuc3RyaW5nKCkgfSksXG4gICAgICB6OS5vYmplY3QoeyB0eXBlOiB6OS5saXRlcmFsKFwiaW1hZ2VcIiksIHVybDogejkuc3RyaW5nKCkgfSlcbiAgICBdKVxuICApLm51bGxpc2goKVxufSk7XG52YXIgY29kZUludGVycHJldGVyQXJnc1NjaGVtYSA9IHo5Lm9iamVjdCh7XG4gIGNvbnRhaW5lcjogejkudW5pb24oW1xuICAgIHo5LnN0cmluZygpLFxuICAgIHo5Lm9iamVjdCh7XG4gICAgICBmaWxlSWRzOiB6OS5hcnJheSh6OS5zdHJpbmcoKSkub3B0aW9uYWwoKVxuICAgIH0pXG4gIF0pLm9wdGlvbmFsKClcbn0pO1xudmFyIGNvZGVJbnRlcnByZXRlclRvb2xGYWN0b3J5ID0gY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hKHtcbiAgaWQ6IFwib3BlbmFpLmNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgbmFtZTogXCJjb2RlX2ludGVycHJldGVyXCIsXG4gIGlucHV0U2NoZW1hOiBjb2RlSW50ZXJwcmV0ZXJJbnB1dFNjaGVtYSxcbiAgb3V0cHV0U2NoZW1hOiBjb2RlSW50ZXJwcmV0ZXJPdXRwdXRTY2hlbWFcbn0pO1xudmFyIGNvZGVJbnRlcnByZXRlciA9IChhcmdzID0ge30pID0+IHtcbiAgcmV0dXJuIGNvZGVJbnRlcnByZXRlclRvb2xGYWN0b3J5KGFyZ3MpO1xufTtcblxuLy8gc3JjL3Rvb2wvZmlsZS1zZWFyY2gudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEyIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejEwIH0gZnJvbSBcInpvZC92NFwiO1xudmFyIGNvbXBhcmlzb25GaWx0ZXJTY2hlbWEgPSB6MTAub2JqZWN0KHtcbiAga2V5OiB6MTAuc3RyaW5nKCksXG4gIHR5cGU6IHoxMC5lbnVtKFtcImVxXCIsIFwibmVcIiwgXCJndFwiLCBcImd0ZVwiLCBcImx0XCIsIFwibHRlXCJdKSxcbiAgdmFsdWU6IHoxMC51bmlvbihbejEwLnN0cmluZygpLCB6MTAubnVtYmVyKCksIHoxMC5ib29sZWFuKCldKVxufSk7XG52YXIgY29tcG91bmRGaWx0ZXJTY2hlbWEgPSB6MTAub2JqZWN0KHtcbiAgdHlwZTogejEwLmVudW0oW1wiYW5kXCIsIFwib3JcIl0pLFxuICBmaWx0ZXJzOiB6MTAuYXJyYXkoXG4gICAgejEwLnVuaW9uKFtjb21wYXJpc29uRmlsdGVyU2NoZW1hLCB6MTAubGF6eSgoKSA9PiBjb21wb3VuZEZpbHRlclNjaGVtYSldKVxuICApXG59KTtcbnZhciBmaWxlU2VhcmNoQXJnc1NjaGVtYSA9IHoxMC5vYmplY3Qoe1xuICB2ZWN0b3JTdG9yZUlkczogejEwLmFycmF5KHoxMC5zdHJpbmcoKSksXG4gIG1heE51bVJlc3VsdHM6IHoxMC5udW1iZXIoKS5vcHRpb25hbCgpLFxuICByYW5raW5nOiB6MTAub2JqZWN0KHtcbiAgICByYW5rZXI6IHoxMC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNjb3JlVGhyZXNob2xkOiB6MTAubnVtYmVyKCkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpLFxuICBmaWx0ZXJzOiB6MTAudW5pb24oW2NvbXBhcmlzb25GaWx0ZXJTY2hlbWEsIGNvbXBvdW5kRmlsdGVyU2NoZW1hXSkub3B0aW9uYWwoKVxufSk7XG52YXIgZmlsZVNlYXJjaE91dHB1dFNjaGVtYSA9IHoxMC5vYmplY3Qoe1xuICBxdWVyaWVzOiB6MTAuYXJyYXkoejEwLnN0cmluZygpKSxcbiAgcmVzdWx0czogejEwLmFycmF5KFxuICAgIHoxMC5vYmplY3Qoe1xuICAgICAgYXR0cmlidXRlczogejEwLnJlY29yZCh6MTAuc3RyaW5nKCksIHoxMC51bmtub3duKCkpLFxuICAgICAgZmlsZUlkOiB6MTAuc3RyaW5nKCksXG4gICAgICBmaWxlbmFtZTogejEwLnN0cmluZygpLFxuICAgICAgc2NvcmU6IHoxMC5udW1iZXIoKSxcbiAgICAgIHRleHQ6IHoxMC5zdHJpbmcoKVxuICAgIH0pXG4gICkubnVsbGFibGUoKVxufSk7XG52YXIgZmlsZVNlYXJjaCA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYTIoe1xuICBpZDogXCJvcGVuYWkuZmlsZV9zZWFyY2hcIixcbiAgbmFtZTogXCJmaWxlX3NlYXJjaFwiLFxuICBpbnB1dFNjaGVtYTogejEwLm9iamVjdCh7fSksXG4gIG91dHB1dFNjaGVtYTogZmlsZVNlYXJjaE91dHB1dFNjaGVtYVxufSk7XG5cbi8vIHNyYy90b29sL2ltYWdlLWdlbmVyYXRpb24udHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYSBhcyBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeVdpdGhPdXRwdXRTY2hlbWEzIH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejExIH0gZnJvbSBcInpvZC92NFwiO1xudmFyIGltYWdlR2VuZXJhdGlvbkFyZ3NTY2hlbWEgPSB6MTEub2JqZWN0KHtcbiAgYmFja2dyb3VuZDogejExLmVudW0oW1wiYXV0b1wiLCBcIm9wYXF1ZVwiLCBcInRyYW5zcGFyZW50XCJdKS5vcHRpb25hbCgpLFxuICBpbnB1dEZpZGVsaXR5OiB6MTEuZW51bShbXCJsb3dcIiwgXCJoaWdoXCJdKS5vcHRpb25hbCgpLFxuICBpbnB1dEltYWdlTWFzazogejExLm9iamVjdCh7XG4gICAgZmlsZUlkOiB6MTEuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpbWFnZVVybDogejExLnN0cmluZygpLm9wdGlvbmFsKClcbiAgfSkub3B0aW9uYWwoKSxcbiAgbW9kZWw6IHoxMS5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBtb2RlcmF0aW9uOiB6MTEuZW51bShbXCJhdXRvXCJdKS5vcHRpb25hbCgpLFxuICBvdXRwdXRDb21wcmVzc2lvbjogejExLm51bWJlcigpLmludCgpLm1pbigwKS5tYXgoMTAwKS5vcHRpb25hbCgpLFxuICBvdXRwdXRGb3JtYXQ6IHoxMS5lbnVtKFtcInBuZ1wiLCBcImpwZWdcIiwgXCJ3ZWJwXCJdKS5vcHRpb25hbCgpLFxuICBxdWFsaXR5OiB6MTEuZW51bShbXCJhdXRvXCIsIFwibG93XCIsIFwibWVkaXVtXCIsIFwiaGlnaFwiXSkub3B0aW9uYWwoKSxcbiAgc2l6ZTogejExLmVudW0oW1wiMTAyNHgxMDI0XCIsIFwiMTAyNHgxNTM2XCIsIFwiMTUzNngxMDI0XCIsIFwiYXV0b1wiXSkub3B0aW9uYWwoKVxufSkuc3RyaWN0KCk7XG52YXIgaW1hZ2VHZW5lcmF0aW9uT3V0cHV0U2NoZW1hID0gejExLm9iamVjdCh7XG4gIHJlc3VsdDogejExLnN0cmluZygpXG59KTtcbnZhciBpbWFnZUdlbmVyYXRpb25Ub29sRmFjdG9yeSA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYTMoe1xuICBpZDogXCJvcGVuYWkuaW1hZ2VfZ2VuZXJhdGlvblwiLFxuICBuYW1lOiBcImltYWdlX2dlbmVyYXRpb25cIixcbiAgaW5wdXRTY2hlbWE6IHoxMS5vYmplY3Qoe30pLFxuICBvdXRwdXRTY2hlbWE6IGltYWdlR2VuZXJhdGlvbk91dHB1dFNjaGVtYVxufSk7XG52YXIgaW1hZ2VHZW5lcmF0aW9uID0gKGFyZ3MgPSB7fSkgPT4ge1xuICByZXR1cm4gaW1hZ2VHZW5lcmF0aW9uVG9vbEZhY3RvcnkoYXJncyk7XG59O1xuXG4vLyBzcmMvdG9vbC9sb2NhbC1zaGVsbC50c1xuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hIGFzIGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5V2l0aE91dHB1dFNjaGVtYTQgfSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTIgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgbG9jYWxTaGVsbElucHV0U2NoZW1hID0gejEyLm9iamVjdCh7XG4gIGFjdGlvbjogejEyLm9iamVjdCh7XG4gICAgdHlwZTogejEyLmxpdGVyYWwoXCJleGVjXCIpLFxuICAgIGNvbW1hbmQ6IHoxMi5hcnJheSh6MTIuc3RyaW5nKCkpLFxuICAgIHRpbWVvdXRNczogejEyLm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgdXNlcjogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgd29ya2luZ0RpcmVjdG9yeTogejEyLnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZW52OiB6MTIucmVjb3JkKHoxMi5zdHJpbmcoKSwgejEyLnN0cmluZygpKS5vcHRpb25hbCgpXG4gIH0pXG59KTtcbnZhciBsb2NhbFNoZWxsT3V0cHV0U2NoZW1hID0gejEyLm9iamVjdCh7XG4gIG91dHB1dDogejEyLnN0cmluZygpXG59KTtcbnZhciBsb2NhbFNoZWxsID0gY3JlYXRlUHJvdmlkZXJEZWZpbmVkVG9vbEZhY3RvcnlXaXRoT3V0cHV0U2NoZW1hNCh7XG4gIGlkOiBcIm9wZW5haS5sb2NhbF9zaGVsbFwiLFxuICBuYW1lOiBcImxvY2FsX3NoZWxsXCIsXG4gIGlucHV0U2NoZW1hOiBsb2NhbFNoZWxsSW5wdXRTY2hlbWEsXG4gIG91dHB1dFNjaGVtYTogbG9jYWxTaGVsbE91dHB1dFNjaGVtYVxufSk7XG5cbi8vIHNyYy90b29sL3dlYi1zZWFyY2gudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5IH0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXItdXRpbHNcIjtcbmltcG9ydCB7IHogYXMgejEzIH0gZnJvbSBcInpvZC92NFwiO1xudmFyIHdlYlNlYXJjaEFyZ3NTY2hlbWEgPSB6MTMub2JqZWN0KHtcbiAgZmlsdGVyczogejEzLm9iamVjdCh7XG4gICAgYWxsb3dlZERvbWFpbnM6IHoxMy5hcnJheSh6MTMuc3RyaW5nKCkpLm9wdGlvbmFsKClcbiAgfSkub3B0aW9uYWwoKSxcbiAgc2VhcmNoQ29udGV4dFNpemU6IHoxMy5lbnVtKFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gIHVzZXJMb2NhdGlvbjogejEzLm9iamVjdCh7XG4gICAgdHlwZTogejEzLmxpdGVyYWwoXCJhcHByb3hpbWF0ZVwiKSxcbiAgICBjb3VudHJ5OiB6MTMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjaXR5OiB6MTMuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZWdpb246IHoxMy5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHRpbWV6b25lOiB6MTMuc3RyaW5nKCkub3B0aW9uYWwoKVxuICB9KS5vcHRpb25hbCgpXG59KTtcbnZhciB3ZWJTZWFyY2hUb29sRmFjdG9yeSA9IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5KHtcbiAgaWQ6IFwib3BlbmFpLndlYl9zZWFyY2hcIixcbiAgbmFtZTogXCJ3ZWJfc2VhcmNoXCIsXG4gIGlucHV0U2NoZW1hOiB6MTMub2JqZWN0KHtcbiAgICBhY3Rpb246IHoxMy5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgIHoxMy5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTMubGl0ZXJhbChcInNlYXJjaFwiKSxcbiAgICAgICAgcXVlcnk6IHoxMy5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgejEzLm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxMy5saXRlcmFsKFwib3Blbl9wYWdlXCIpLFxuICAgICAgICB1cmw6IHoxMy5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6MTMub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejEzLmxpdGVyYWwoXCJmaW5kXCIpLFxuICAgICAgICB1cmw6IHoxMy5zdHJpbmcoKSxcbiAgICAgICAgcGF0dGVybjogejEzLnN0cmluZygpXG4gICAgICB9KVxuICAgIF0pLm51bGxpc2goKVxuICB9KVxufSk7XG52YXIgd2ViU2VhcmNoID0gKGFyZ3MgPSB7fSkgPT4ge1xuICByZXR1cm4gd2ViU2VhcmNoVG9vbEZhY3RvcnkoYXJncyk7XG59O1xuXG4vLyBzcmMvdG9vbC93ZWItc2VhcmNoLXByZXZpZXcudHNcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5IGFzIGNyZWF0ZVByb3ZpZGVyRGVmaW5lZFRvb2xGYWN0b3J5MiB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxNCB9IGZyb20gXCJ6b2QvdjRcIjtcbnZhciB3ZWJTZWFyY2hQcmV2aWV3QXJnc1NjaGVtYSA9IHoxNC5vYmplY3Qoe1xuICAvKipcbiAgICogU2VhcmNoIGNvbnRleHQgc2l6ZSB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKiAtIGhpZ2g6IE1vc3QgY29tcHJlaGVuc2l2ZSBjb250ZXh0LCBoaWdoZXN0IGNvc3QsIHNsb3dlciByZXNwb25zZVxuICAgKiAtIG1lZGl1bTogQmFsYW5jZWQgY29udGV4dCwgY29zdCwgYW5kIGxhdGVuY3kgKGRlZmF1bHQpXG4gICAqIC0gbG93OiBMZWFzdCBjb250ZXh0LCBsb3dlc3QgY29zdCwgZmFzdGVzdCByZXNwb25zZVxuICAgKi9cbiAgc2VhcmNoQ29udGV4dFNpemU6IHoxNC5lbnVtKFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBVc2VyIGxvY2F0aW9uIGluZm9ybWF0aW9uIHRvIHByb3ZpZGUgZ2VvZ3JhcGhpY2FsbHkgcmVsZXZhbnQgc2VhcmNoIHJlc3VsdHMuXG4gICAqL1xuICB1c2VyTG9jYXRpb246IHoxNC5vYmplY3Qoe1xuICAgIC8qKlxuICAgICAqIFR5cGUgb2YgbG9jYXRpb24gKGFsd2F5cyAnYXBwcm94aW1hdGUnKVxuICAgICAqL1xuICAgIHR5cGU6IHoxNC5saXRlcmFsKFwiYXBwcm94aW1hdGVcIiksXG4gICAgLyoqXG4gICAgICogVHdvLWxldHRlciBJU08gY291bnRyeSBjb2RlIChlLmcuLCAnVVMnLCAnR0InKVxuICAgICAqL1xuICAgIGNvdW50cnk6IHoxNC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIENpdHkgbmFtZSAoZnJlZSB0ZXh0LCBlLmcuLCAnTWlubmVhcG9saXMnKVxuICAgICAqL1xuICAgIGNpdHk6IHoxNC5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFJlZ2lvbiBuYW1lIChmcmVlIHRleHQsIGUuZy4sICdNaW5uZXNvdGEnKVxuICAgICAqL1xuICAgIHJlZ2lvbjogejE0LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogSUFOQSB0aW1lem9uZSAoZS5nLiwgJ0FtZXJpY2EvQ2hpY2FnbycpXG4gICAgICovXG4gICAgdGltZXpvbmU6IHoxNC5zdHJpbmcoKS5vcHRpb25hbCgpXG4gIH0pLm9wdGlvbmFsKClcbn0pO1xudmFyIHdlYlNlYXJjaFByZXZpZXcgPSBjcmVhdGVQcm92aWRlckRlZmluZWRUb29sRmFjdG9yeTIoe1xuICBpZDogXCJvcGVuYWkud2ViX3NlYXJjaF9wcmV2aWV3XCIsXG4gIG5hbWU6IFwid2ViX3NlYXJjaF9wcmV2aWV3XCIsXG4gIGlucHV0U2NoZW1hOiB6MTQub2JqZWN0KHtcbiAgICBhY3Rpb246IHoxNC5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgIHoxNC5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6MTQubGl0ZXJhbChcInNlYXJjaFwiKSxcbiAgICAgICAgcXVlcnk6IHoxNC5zdHJpbmcoKS5udWxsaXNoKClcbiAgICAgIH0pLFxuICAgICAgejE0Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoxNC5saXRlcmFsKFwib3Blbl9wYWdlXCIpLFxuICAgICAgICB1cmw6IHoxNC5zdHJpbmcoKVxuICAgICAgfSksXG4gICAgICB6MTQub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejE0LmxpdGVyYWwoXCJmaW5kXCIpLFxuICAgICAgICB1cmw6IHoxNC5zdHJpbmcoKSxcbiAgICAgICAgcGF0dGVybjogejE0LnN0cmluZygpXG4gICAgICB9KVxuICAgIF0pLm51bGxpc2goKVxuICB9KVxufSk7XG5cbi8vIHNyYy9vcGVuYWktdG9vbHMudHNcbnZhciBvcGVuYWlUb29scyA9IHtcbiAgLyoqXG4gICAqIFRoZSBDb2RlIEludGVycHJldGVyIHRvb2wgYWxsb3dzIG1vZGVscyB0byB3cml0ZSBhbmQgcnVuIFB5dGhvbiBjb2RlIGluIGFcbiAgICogc2FuZGJveGVkIGVudmlyb25tZW50IHRvIHNvbHZlIGNvbXBsZXggcHJvYmxlbXMgaW4gZG9tYWlucyBsaWtlIGRhdGEgYW5hbHlzaXMsXG4gICAqIGNvZGluZywgYW5kIG1hdGguXG4gICAqXG4gICAqIEBwYXJhbSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHRvIHVzZSBmb3IgdGhlIGNvZGUgaW50ZXJwcmV0ZXIuXG4gICAqXG4gICAqIE11c3QgaGF2ZSBuYW1lIGBjb2RlX2ludGVycHJldGVyYC5cbiAgICovXG4gIGNvZGVJbnRlcnByZXRlcixcbiAgLyoqXG4gICAqIEZpbGUgc2VhcmNoIGlzIGEgdG9vbCBhdmFpbGFibGUgaW4gdGhlIFJlc3BvbnNlcyBBUEkuIEl0IGVuYWJsZXMgbW9kZWxzIHRvXG4gICAqIHJldHJpZXZlIGluZm9ybWF0aW9uIGluIGEga25vd2xlZGdlIGJhc2Ugb2YgcHJldmlvdXNseSB1cGxvYWRlZCBmaWxlcyB0aHJvdWdoXG4gICAqIHNlbWFudGljIGFuZCBrZXl3b3JkIHNlYXJjaC5cbiAgICpcbiAgICogTXVzdCBoYXZlIG5hbWUgYGZpbGVfc2VhcmNoYC5cbiAgICpcbiAgICogQHBhcmFtIHZlY3RvclN0b3JlSWRzIC0gVGhlIHZlY3RvciBzdG9yZSBJRHMgdG8gdXNlIGZvciB0aGUgZmlsZSBzZWFyY2guXG4gICAqIEBwYXJhbSBtYXhOdW1SZXN1bHRzIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuICAgKiBAcGFyYW0gcmFua2luZyAtIFRoZSByYW5raW5nIG9wdGlvbnMgdG8gdXNlIGZvciB0aGUgZmlsZSBzZWFyY2guXG4gICAqIEBwYXJhbSBmaWx0ZXJzIC0gVGhlIGZpbHRlcnMgdG8gdXNlIGZvciB0aGUgZmlsZSBzZWFyY2guXG4gICAqL1xuICBmaWxlU2VhcmNoLFxuICAvKipcbiAgICogVGhlIGltYWdlIGdlbmVyYXRpb24gdG9vbCBhbGxvd3MgeW91IHRvIGdlbmVyYXRlIGltYWdlcyB1c2luZyBhIHRleHQgcHJvbXB0LFxuICAgKiBhbmQgb3B0aW9uYWxseSBpbWFnZSBpbnB1dHMuIEl0IGxldmVyYWdlcyB0aGUgR1BUIEltYWdlIG1vZGVsLFxuICAgKiBhbmQgYXV0b21hdGljYWxseSBvcHRpbWl6ZXMgdGV4dCBpbnB1dHMgZm9yIGltcHJvdmVkIHBlcmZvcm1hbmNlLlxuICAgKlxuICAgKiBNdXN0IGhhdmUgbmFtZSBgaW1hZ2VfZ2VuZXJhdGlvbmAuXG4gICAqXG4gICAqIEBwYXJhbSBzaXplIC0gSW1hZ2UgZGltZW5zaW9ucyAoZS5nLiwgMTAyNHgxMDI0LCAxMDI0eDE1MzYpXG4gICAqIEBwYXJhbSBxdWFsaXR5IC0gUmVuZGVyaW5nIHF1YWxpdHkgKGUuZy4gbG93LCBtZWRpdW0sIGhpZ2gpXG4gICAqIEBwYXJhbSBmb3JtYXQgLSBGaWxlIG91dHB1dCBmb3JtYXRcbiAgICogQHBhcmFtIGNvbXByZXNzaW9uIC0gQ29tcHJlc3Npb24gbGV2ZWwgKDAtMTAwJSkgZm9yIEpQRUcgYW5kIFdlYlAgZm9ybWF0c1xuICAgKiBAcGFyYW0gYmFja2dyb3VuZCAtIFRyYW5zcGFyZW50IG9yIG9wYXF1ZVxuICAgKi9cbiAgaW1hZ2VHZW5lcmF0aW9uLFxuICAvKipcbiAgICogTG9jYWwgc2hlbGwgaXMgYSB0b29sIHRoYXQgYWxsb3dzIGFnZW50cyB0byBydW4gc2hlbGwgY29tbWFuZHMgbG9jYWxseVxuICAgKiBvbiBhIG1hY2hpbmUgeW91IG9yIHRoZSB1c2VyIHByb3ZpZGVzLlxuICAgKlxuICAgKiBTdXBwb3J0ZWQgbW9kZWxzOiBgZ3B0LTUtY29kZXhgIGFuZCBgY29kZXgtbWluaS1sYXRlc3RgXG4gICAqXG4gICAqIE11c3QgaGF2ZSBuYW1lIGBsb2NhbF9zaGVsbGAuXG4gICAqL1xuICBsb2NhbFNoZWxsLFxuICAvKipcbiAgICogV2ViIHNlYXJjaCBhbGxvd3MgbW9kZWxzIHRvIGFjY2VzcyB1cC10by1kYXRlIGluZm9ybWF0aW9uIGZyb20gdGhlIGludGVybmV0XG4gICAqIGFuZCBwcm92aWRlIGFuc3dlcnMgd2l0aCBzb3VyY2VkIGNpdGF0aW9ucy5cbiAgICpcbiAgICogTXVzdCBoYXZlIG5hbWUgYHdlYl9zZWFyY2hfcHJldmlld2AuXG4gICAqXG4gICAqIEBwYXJhbSBzZWFyY2hDb250ZXh0U2l6ZSAtIFRoZSBzZWFyY2ggY29udGV4dCBzaXplIHRvIHVzZSBmb3IgdGhlIHdlYiBzZWFyY2guXG4gICAqIEBwYXJhbSB1c2VyTG9jYXRpb24gLSBUaGUgdXNlciBsb2NhdGlvbiB0byB1c2UgZm9yIHRoZSB3ZWIgc2VhcmNoLlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgYHdlYlNlYXJjaGAgaW5zdGVhZC5cbiAgICovXG4gIHdlYlNlYXJjaFByZXZpZXcsXG4gIC8qKlxuICAgKiBXZWIgc2VhcmNoIGFsbG93cyBtb2RlbHMgdG8gYWNjZXNzIHVwLXRvLWRhdGUgaW5mb3JtYXRpb24gZnJvbSB0aGUgaW50ZXJuZXRcbiAgICogYW5kIHByb3ZpZGUgYW5zd2VycyB3aXRoIHNvdXJjZWQgY2l0YXRpb25zLlxuICAgKlxuICAgKiBNdXN0IGhhdmUgbmFtZSBgd2ViX3NlYXJjaGAuXG4gICAqXG4gICAqIEBwYXJhbSBmaWx0ZXJzIC0gVGhlIGZpbHRlcnMgdG8gdXNlIGZvciB0aGUgd2ViIHNlYXJjaC5cbiAgICogQHBhcmFtIHNlYXJjaENvbnRleHRTaXplIC0gVGhlIHNlYXJjaCBjb250ZXh0IHNpemUgdG8gdXNlIGZvciB0aGUgd2ViIHNlYXJjaC5cbiAgICogQHBhcmFtIHVzZXJMb2NhdGlvbiAtIFRoZSB1c2VyIGxvY2F0aW9uIHRvIHVzZSBmb3IgdGhlIHdlYiBzZWFyY2guXG4gICAqL1xuICB3ZWJTZWFyY2hcbn07XG5cbi8vIHNyYy9yZXNwb25zZXMvb3BlbmFpLXJlc3BvbnNlcy1sYW5ndWFnZS1tb2RlbC50c1xuaW1wb3J0IHtcbiAgQVBJQ2FsbEVycm9yXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyXCI7XG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczUsXG4gIGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyIGFzIGNyZWF0ZUV2ZW50U291cmNlUmVzcG9uc2VIYW5kbGVyMyxcbiAgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlciBhcyBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyNSxcbiAgZ2VuZXJhdGVJZCBhcyBnZW5lcmF0ZUlkMixcbiAgcGFyc2VQcm92aWRlck9wdGlvbnMgYXMgcGFyc2VQcm92aWRlck9wdGlvbnM1LFxuICBwb3N0SnNvblRvQXBpIGFzIHBvc3RKc29uVG9BcGk1XG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxNiB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL3Jlc3BvbnNlcy9jb252ZXJ0LXRvLW9wZW5haS1yZXNwb25zZXMtaW5wdXQudHNcbmltcG9ydCB7XG4gIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yIGFzIFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yNFxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlclwiO1xuaW1wb3J0IHsgY29udmVydFRvQmFzZTY0IGFzIGNvbnZlcnRUb0Jhc2U2NDIsIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zNCB9IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxNSB9IGZyb20gXCJ6b2QvdjRcIjtcbmZ1bmN0aW9uIGlzRmlsZUlkKGRhdGEsIHByZWZpeGVzKSB7XG4gIGlmICghcHJlZml4ZXMpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHByZWZpeGVzLnNvbWUoKHByZWZpeCkgPT4gZGF0YS5zdGFydHNXaXRoKHByZWZpeCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gY29udmVydFRvT3BlbkFJUmVzcG9uc2VzSW5wdXQoe1xuICBwcm9tcHQsXG4gIHN5c3RlbU1lc3NhZ2VNb2RlLFxuICBmaWxlSWRQcmVmaXhlcyxcbiAgc3RvcmUsXG4gIGhhc0xvY2FsU2hlbGxUb29sID0gZmFsc2Vcbn0pIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2k7XG4gIGNvbnN0IGlucHV0ID0gW107XG4gIGNvbnN0IHdhcm5pbmdzID0gW107XG4gIGZvciAoY29uc3QgeyByb2xlLCBjb250ZW50IH0gb2YgcHJvbXB0KSB7XG4gICAgc3dpdGNoIChyb2xlKSB7XG4gICAgICBjYXNlIFwic3lzdGVtXCI6IHtcbiAgICAgICAgc3dpdGNoIChzeXN0ZW1NZXNzYWdlTW9kZSkge1xuICAgICAgICAgIGNhc2UgXCJzeXN0ZW1cIjoge1xuICAgICAgICAgICAgaW5wdXQucHVzaCh7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImRldmVsb3BlclwiOiB7XG4gICAgICAgICAgICBpbnB1dC5wdXNoKHsgcm9sZTogXCJkZXZlbG9wZXJcIiwgY29udGVudCB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwicmVtb3ZlXCI6IHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwic3lzdGVtIG1lc3NhZ2VzIGFyZSByZW1vdmVkIGZvciB0aGlzIG1vZGVsXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGNvbnN0IF9leGhhdXN0aXZlQ2hlY2sgPSBzeXN0ZW1NZXNzYWdlTW9kZTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFVuc3VwcG9ydGVkIHN5c3RlbSBtZXNzYWdlIG1vZGU6ICR7X2V4aGF1c3RpdmVDaGVja31gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJ1c2VyXCI6IHtcbiAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgY29udGVudDogY29udGVudC5tYXAoKHBhcnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EyLCBfYjIsIF9jMjtcbiAgICAgICAgICAgIHN3aXRjaCAocGFydC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcImlucHV0X3RleHRcIiwgdGV4dDogcGFydC50ZXh0IH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2FzZSBcImZpbGVcIjoge1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0Lm1lZGlhVHlwZS5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtZWRpYVR5cGUgPSBwYXJ0Lm1lZGlhVHlwZSA9PT0gXCJpbWFnZS8qXCIgPyBcImltYWdlL2pwZWdcIiA6IHBhcnQubWVkaWFUeXBlO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9pbWFnZVwiLFxuICAgICAgICAgICAgICAgICAgICAuLi5wYXJ0LmRhdGEgaW5zdGFuY2VvZiBVUkwgPyB7IGltYWdlX3VybDogcGFydC5kYXRhLnRvU3RyaW5nKCkgfSA6IHR5cGVvZiBwYXJ0LmRhdGEgPT09IFwic3RyaW5nXCIgJiYgaXNGaWxlSWQocGFydC5kYXRhLCBmaWxlSWRQcmVmaXhlcykgPyB7IGZpbGVfaWQ6IHBhcnQuZGF0YSB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogYGRhdGE6JHttZWRpYVR5cGV9O2Jhc2U2NCwke2NvbnZlcnRUb0Jhc2U2NDIocGFydC5kYXRhKX1gXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDogKF9iMiA9IChfYTIgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfYjIuaW1hZ2VEZXRhaWxcbiAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0Lm1lZGlhVHlwZSA9PT0gXCJhcHBsaWNhdGlvbi9wZGZcIikge1xuICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuZGF0YSBpbnN0YW5jZW9mIFVSTCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5wdXRfZmlsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIGZpbGVfdXJsOiBwYXJ0LmRhdGEudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJpbnB1dF9maWxlXCIsXG4gICAgICAgICAgICAgICAgICAgIC4uLnR5cGVvZiBwYXJ0LmRhdGEgPT09IFwic3RyaW5nXCIgJiYgaXNGaWxlSWQocGFydC5kYXRhLCBmaWxlSWRQcmVmaXhlcykgPyB7IGZpbGVfaWQ6IHBhcnQuZGF0YSB9IDoge1xuICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAoX2MyID0gcGFydC5maWxlbmFtZSkgIT0gbnVsbCA/IF9jMiA6IGBwYXJ0LSR7aW5kZXh9LnBkZmAsXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZV9kYXRhOiBgZGF0YTphcHBsaWNhdGlvbi9wZGY7YmFzZTY0LCR7Y29udmVydFRvQmFzZTY0MihwYXJ0LmRhdGEpfWBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRnVuY3Rpb25hbGl0eUVycm9yNCh7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uYWxpdHk6IGBmaWxlIHBhcnQgbWVkaWEgdHlwZSAke3BhcnQubWVkaWFUeXBlfWBcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJhc3Npc3RhbnRcIjoge1xuICAgICAgICBjb25zdCByZWFzb25pbmdNZXNzYWdlcyA9IHt9O1xuICAgICAgICBjb25zdCB0b29sQ2FsbFBhcnRzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjb250ZW50KSB7XG4gICAgICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6IHtcbiAgICAgICAgICAgICAgaW5wdXQucHVzaCh7XG4gICAgICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgICAgICBjb250ZW50OiBbeyB0eXBlOiBcIm91dHB1dF90ZXh0XCIsIHRleHQ6IHBhcnQudGV4dCB9XSxcbiAgICAgICAgICAgICAgICBpZDogKF9jID0gKF9iID0gKF9hID0gcGFydC5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfYi5pdGVtSWQpICE9IG51bGwgPyBfYyA6IHZvaWQgMFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwidG9vbC1jYWxsXCI6IHtcbiAgICAgICAgICAgICAgdG9vbENhbGxQYXJ0c1twYXJ0LnRvb2xDYWxsSWRdID0gcGFydDtcbiAgICAgICAgICAgICAgaWYgKHBhcnQucHJvdmlkZXJFeGVjdXRlZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChoYXNMb2NhbFNoZWxsVG9vbCAmJiBwYXJ0LnRvb2xOYW1lID09PSBcImxvY2FsX3NoZWxsXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IGxvY2FsU2hlbGxJbnB1dFNjaGVtYS5wYXJzZShwYXJ0LmlucHV0KTtcbiAgICAgICAgICAgICAgICBpbnB1dC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwibG9jYWxfc2hlbGxfY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgY2FsbF9pZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfZiA9IChfZSA9IChfZCA9IHBhcnQucHJvdmlkZXJPcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2Qub3BlbmFpKSA9PSBudWxsID8gdm9pZCAwIDogX2UuaXRlbUlkKSAhPSBudWxsID8gX2YgOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJleGVjXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IHBhcnNlZElucHV0LmFjdGlvbi5jb21tYW5kLFxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0X21zOiBwYXJzZWRJbnB1dC5hY3Rpb24udGltZW91dE1zLFxuICAgICAgICAgICAgICAgICAgICB1c2VyOiBwYXJzZWRJbnB1dC5hY3Rpb24udXNlcixcbiAgICAgICAgICAgICAgICAgICAgd29ya2luZ19kaXJlY3Rvcnk6IHBhcnNlZElucHV0LmFjdGlvbi53b3JraW5nRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICBlbnY6IHBhcnNlZElucHV0LmFjdGlvbi5lbnZcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpbnB1dC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uX2NhbGxcIixcbiAgICAgICAgICAgICAgICBjYWxsX2lkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgICAgbmFtZTogcGFydC50b29sTmFtZSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IEpTT04uc3RyaW5naWZ5KHBhcnQuaW5wdXQpLFxuICAgICAgICAgICAgICAgIGlkOiAoX2kgPSAoX2ggPSAoX2cgPSBwYXJ0LnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9nLm9wZW5haSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9oLml0ZW1JZCkgIT0gbnVsbCA/IF9pIDogdm9pZCAwXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGFzc2lzdGFudCB0b29sIHJlc3VsdCBwYXJ0cyBhcmUgZnJvbSBwcm92aWRlci1leGVjdXRlZCB0b29sczpcbiAgICAgICAgICAgIGNhc2UgXCJ0b29sLXJlc3VsdFwiOiB7XG4gICAgICAgICAgICAgIGlmIChzdG9yZSkge1xuICAgICAgICAgICAgICAgIGlucHV0LnB1c2goeyB0eXBlOiBcIml0ZW1fcmVmZXJlbmNlXCIsIGlkOiBwYXJ0LnRvb2xDYWxsSWQgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgUmVzdWx0cyBmb3IgT3BlbkFJIHRvb2wgJHtwYXJ0LnRvb2xOYW1lfSBhcmUgbm90IHNlbnQgdG8gdGhlIEFQSSB3aGVuIHN0b3JlIGlzIGZhbHNlYFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcInJlYXNvbmluZ1wiOiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zNCh7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IFwib3BlbmFpXCIsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJPcHRpb25zOiBwYXJ0LnByb3ZpZGVyT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzY2hlbWE6IG9wZW5haVJlc3BvbnNlc1JlYXNvbmluZ1Byb3ZpZGVyT3B0aW9uc1NjaGVtYVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgY29uc3QgcmVhc29uaW5nSWQgPSBwcm92aWRlck9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IHByb3ZpZGVyT3B0aW9ucy5pdGVtSWQ7XG4gICAgICAgICAgICAgIGlmIChyZWFzb25pbmdJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhc29uaW5nTWVzc2FnZSA9IHJlYXNvbmluZ01lc3NhZ2VzW3JlYXNvbmluZ0lkXTtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChyZWFzb25pbmdNZXNzYWdlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQucHVzaCh7IHR5cGU6IFwiaXRlbV9yZWZlcmVuY2VcIiwgaWQ6IHJlYXNvbmluZ0lkIH0pO1xuICAgICAgICAgICAgICAgICAgICByZWFzb25pbmdNZXNzYWdlc1tyZWFzb25pbmdJZF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICBpZDogcmVhc29uaW5nSWQsXG4gICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeVBhcnRzID0gW107XG4gICAgICAgICAgICAgICAgICBpZiAocGFydC50ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeVBhcnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3VtbWFyeV90ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogcGFydC50ZXh0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZWFzb25pbmdNZXNzYWdlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvdGhlclwiLFxuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBDYW5ub3QgYXBwZW5kIGVtcHR5IHJlYXNvbmluZyBwYXJ0IHRvIGV4aXN0aW5nIHJlYXNvbmluZyBzZXF1ZW5jZS4gU2tpcHBpbmcgcmVhc29uaW5nIHBhcnQ6ICR7SlNPTi5zdHJpbmdpZnkocGFydCl9LmBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAocmVhc29uaW5nTWVzc2FnZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ01lc3NhZ2VzW3JlYXNvbmluZ0lkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkOiByZWFzb25pbmdJZCxcbiAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRfY29udGVudDogcHJvdmlkZXJPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBwcm92aWRlck9wdGlvbnMucmVhc29uaW5nRW5jcnlwdGVkQ29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiBzdW1tYXJ5UGFydHNcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQucHVzaChyZWFzb25pbmdNZXNzYWdlc1tyZWFzb25pbmdJZF0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nTWVzc2FnZS5zdW1tYXJ5LnB1c2goLi4uc3VtbWFyeVBhcnRzKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcIm90aGVyXCIsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgTm9uLU9wZW5BSSByZWFzb25pbmcgcGFydHMgYXJlIG5vdCBzdXBwb3J0ZWQuIFNraXBwaW5nIHJlYXNvbmluZyBwYXJ0OiAke0pTT04uc3RyaW5naWZ5KHBhcnQpfS5gXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInRvb2xcIjoge1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgY29udGVudCkge1xuICAgICAgICAgIGNvbnN0IG91dHB1dCA9IHBhcnQub3V0cHV0O1xuICAgICAgICAgIGlmIChoYXNMb2NhbFNoZWxsVG9vbCAmJiBwYXJ0LnRvb2xOYW1lID09PSBcImxvY2FsX3NoZWxsXCIgJiYgb3V0cHV0LnR5cGUgPT09IFwianNvblwiKSB7XG4gICAgICAgICAgICBpbnB1dC5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJsb2NhbF9zaGVsbF9jYWxsX291dHB1dFwiLFxuICAgICAgICAgICAgICBjYWxsX2lkOiBwYXJ0LnRvb2xDYWxsSWQsXG4gICAgICAgICAgICAgIG91dHB1dDogbG9jYWxTaGVsbE91dHB1dFNjaGVtYS5wYXJzZShvdXRwdXQudmFsdWUpLm91dHB1dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGNvbnRlbnRWYWx1ZTtcbiAgICAgICAgICBzd2l0Y2ggKG91dHB1dC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwidGV4dFwiOlxuICAgICAgICAgICAgY2FzZSBcImVycm9yLXRleHRcIjpcbiAgICAgICAgICAgICAgY29udGVudFZhbHVlID0gb3V0cHV0LnZhbHVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjb250ZW50XCI6XG4gICAgICAgICAgICBjYXNlIFwianNvblwiOlxuICAgICAgICAgICAgY2FzZSBcImVycm9yLWpzb25cIjpcbiAgICAgICAgICAgICAgY29udGVudFZhbHVlID0gSlNPTi5zdHJpbmdpZnkob3V0cHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlucHV0LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvbl9jYWxsX291dHB1dFwiLFxuICAgICAgICAgICAgY2FsbF9pZDogcGFydC50b29sQ2FsbElkLFxuICAgICAgICAgICAgb3V0cHV0OiBjb250ZW50VmFsdWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3QgX2V4aGF1c3RpdmVDaGVjayA9IHJvbGU7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcm9sZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4geyBpbnB1dCwgd2FybmluZ3MgfTtcbn1cbnZhciBvcGVuYWlSZXNwb25zZXNSZWFzb25pbmdQcm92aWRlck9wdGlvbnNTY2hlbWEgPSB6MTUub2JqZWN0KHtcbiAgaXRlbUlkOiB6MTUuc3RyaW5nKCkubnVsbGlzaCgpLFxuICByZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50OiB6MTUuc3RyaW5nKCkubnVsbGlzaCgpXG59KTtcblxuLy8gc3JjL3Jlc3BvbnNlcy9tYXAtb3BlbmFpLXJlc3BvbnNlcy1maW5pc2gtcmVhc29uLnRzXG5mdW5jdGlvbiBtYXBPcGVuQUlSZXNwb25zZUZpbmlzaFJlYXNvbih7XG4gIGZpbmlzaFJlYXNvbixcbiAgaGFzRnVuY3Rpb25DYWxsXG59KSB7XG4gIHN3aXRjaCAoZmluaXNoUmVhc29uKSB7XG4gICAgY2FzZSB2b2lkIDA6XG4gICAgY2FzZSBudWxsOlxuICAgICAgcmV0dXJuIGhhc0Z1bmN0aW9uQ2FsbCA/IFwidG9vbC1jYWxsc1wiIDogXCJzdG9wXCI7XG4gICAgY2FzZSBcIm1heF9vdXRwdXRfdG9rZW5zXCI6XG4gICAgICByZXR1cm4gXCJsZW5ndGhcIjtcbiAgICBjYXNlIFwiY29udGVudF9maWx0ZXJcIjpcbiAgICAgIHJldHVybiBcImNvbnRlbnQtZmlsdGVyXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBoYXNGdW5jdGlvbkNhbGwgPyBcInRvb2wtY2FsbHNcIiA6IFwidW5rbm93blwiO1xuICB9XG59XG5cbi8vIHNyYy9yZXNwb25zZXMvb3BlbmFpLXJlc3BvbnNlcy1wcmVwYXJlLXRvb2xzLnRzXG5pbXBvcnQge1xuICBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvciBhcyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjVcbn0gZnJvbSBcIkBhaS1zZGsvcHJvdmlkZXJcIjtcbmZ1bmN0aW9uIHByZXBhcmVSZXNwb25zZXNUb29scyh7XG4gIHRvb2xzLFxuICB0b29sQ2hvaWNlLFxuICBzdHJpY3RKc29uU2NoZW1hXG59KSB7XG4gIHRvb2xzID0gKHRvb2xzID09IG51bGwgPyB2b2lkIDAgOiB0b29scy5sZW5ndGgpID8gdG9vbHMgOiB2b2lkIDA7XG4gIGNvbnN0IHRvb2xXYXJuaW5ncyA9IFtdO1xuICBpZiAodG9vbHMgPT0gbnVsbCkge1xuICAgIHJldHVybiB7IHRvb2xzOiB2b2lkIDAsIHRvb2xDaG9pY2U6IHZvaWQgMCwgdG9vbFdhcm5pbmdzIH07XG4gIH1cbiAgY29uc3Qgb3BlbmFpVG9vbHMyID0gW107XG4gIGZvciAoY29uc3QgdG9vbCBvZiB0b29scykge1xuICAgIHN3aXRjaCAodG9vbC50eXBlKSB7XG4gICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24sXG4gICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgICBzdHJpY3Q6IHN0cmljdEpzb25TY2hlbWFcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInByb3ZpZGVyLWRlZmluZWRcIjoge1xuICAgICAgICBzd2l0Y2ggKHRvb2wuaWQpIHtcbiAgICAgICAgICBjYXNlIFwib3BlbmFpLmZpbGVfc2VhcmNoXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBmaWxlU2VhcmNoQXJnc1NjaGVtYS5wYXJzZSh0b29sLmFyZ3MpO1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcImZpbGVfc2VhcmNoXCIsXG4gICAgICAgICAgICAgIHZlY3Rvcl9zdG9yZV9pZHM6IGFyZ3MudmVjdG9yU3RvcmVJZHMsXG4gICAgICAgICAgICAgIG1heF9udW1fcmVzdWx0czogYXJncy5tYXhOdW1SZXN1bHRzLFxuICAgICAgICAgICAgICByYW5raW5nX29wdGlvbnM6IGFyZ3MucmFua2luZyA/IHtcbiAgICAgICAgICAgICAgICByYW5rZXI6IGFyZ3MucmFua2luZy5yYW5rZXIsXG4gICAgICAgICAgICAgICAgc2NvcmVfdGhyZXNob2xkOiBhcmdzLnJhbmtpbmcuc2NvcmVUaHJlc2hvbGRcbiAgICAgICAgICAgICAgfSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgZmlsdGVyczogYXJncy5maWx0ZXJzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwib3BlbmFpLmxvY2FsX3NoZWxsXCI6IHtcbiAgICAgICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJsb2NhbF9zaGVsbFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwib3BlbmFpLndlYl9zZWFyY2hfcHJldmlld1wiOiB7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gd2ViU2VhcmNoUHJldmlld0FyZ3NTY2hlbWEucGFyc2UodG9vbC5hcmdzKTtcbiAgICAgICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJ3ZWJfc2VhcmNoX3ByZXZpZXdcIixcbiAgICAgICAgICAgICAgc2VhcmNoX2NvbnRleHRfc2l6ZTogYXJncy5zZWFyY2hDb250ZXh0U2l6ZSxcbiAgICAgICAgICAgICAgdXNlcl9sb2NhdGlvbjogYXJncy51c2VyTG9jYXRpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgXCJvcGVuYWkud2ViX3NlYXJjaFwiOiB7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gd2ViU2VhcmNoQXJnc1NjaGVtYS5wYXJzZSh0b29sLmFyZ3MpO1xuICAgICAgICAgICAgb3BlbmFpVG9vbHMyLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgZmlsdGVyczogYXJncy5maWx0ZXJzICE9IG51bGwgPyB7IGFsbG93ZWRfZG9tYWluczogYXJncy5maWx0ZXJzLmFsbG93ZWREb21haW5zIH0gOiB2b2lkIDAsXG4gICAgICAgICAgICAgIHNlYXJjaF9jb250ZXh0X3NpemU6IGFyZ3Muc2VhcmNoQ29udGV4dFNpemUsXG4gICAgICAgICAgICAgIHVzZXJfbG9jYXRpb246IGFyZ3MudXNlckxvY2F0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwib3BlbmFpLmNvZGVfaW50ZXJwcmV0ZXJcIjoge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IGNvZGVJbnRlcnByZXRlckFyZ3NTY2hlbWEucGFyc2UodG9vbC5hcmdzKTtcbiAgICAgICAgICAgIG9wZW5haVRvb2xzMi5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb2RlX2ludGVycHJldGVyXCIsXG4gICAgICAgICAgICAgIGNvbnRhaW5lcjogYXJncy5jb250YWluZXIgPT0gbnVsbCA/IHsgdHlwZTogXCJhdXRvXCIsIGZpbGVfaWRzOiB2b2lkIDAgfSA6IHR5cGVvZiBhcmdzLmNvbnRhaW5lciA9PT0gXCJzdHJpbmdcIiA/IGFyZ3MuY29udGFpbmVyIDogeyB0eXBlOiBcImF1dG9cIiwgZmlsZV9pZHM6IGFyZ3MuY29udGFpbmVyLmZpbGVJZHMgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcIm9wZW5haS5pbWFnZV9nZW5lcmF0aW9uXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBpbWFnZUdlbmVyYXRpb25BcmdzU2NoZW1hLnBhcnNlKHRvb2wuYXJncyk7XG4gICAgICAgICAgICBvcGVuYWlUb29sczIucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VfZ2VuZXJhdGlvblwiLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBhcmdzLmJhY2tncm91bmQsXG4gICAgICAgICAgICAgIGlucHV0X2ZpZGVsaXR5OiBhcmdzLmlucHV0RmlkZWxpdHksXG4gICAgICAgICAgICAgIGlucHV0X2ltYWdlX21hc2s6IGFyZ3MuaW5wdXRJbWFnZU1hc2sgPyB7XG4gICAgICAgICAgICAgICAgZmlsZV9pZDogYXJncy5pbnB1dEltYWdlTWFzay5maWxlSWQsXG4gICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiBhcmdzLmlucHV0SW1hZ2VNYXNrLmltYWdlVXJsXG4gICAgICAgICAgICAgIH0gOiB2b2lkIDAsXG4gICAgICAgICAgICAgIG1vZGVsOiBhcmdzLm1vZGVsLFxuICAgICAgICAgICAgICBzaXplOiBhcmdzLnNpemUsXG4gICAgICAgICAgICAgIHF1YWxpdHk6IGFyZ3MucXVhbGl0eSxcbiAgICAgICAgICAgICAgbW9kZXJhdGlvbjogYXJncy5tb2RlcmF0aW9uLFxuICAgICAgICAgICAgICBvdXRwdXRfZm9ybWF0OiBhcmdzLm91dHB1dEZvcm1hdCxcbiAgICAgICAgICAgICAgb3V0cHV0X2NvbXByZXNzaW9uOiBhcmdzLm91dHB1dENvbXByZXNzaW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRvb2xXYXJuaW5ncy5wdXNoKHsgdHlwZTogXCJ1bnN1cHBvcnRlZC10b29sXCIsIHRvb2wgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAodG9vbENob2ljZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgdG9vbHM6IG9wZW5haVRvb2xzMiwgdG9vbENob2ljZTogdm9pZCAwLCB0b29sV2FybmluZ3MgfTtcbiAgfVxuICBjb25zdCB0eXBlID0gdG9vbENob2ljZS50eXBlO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIFwiYXV0b1wiOlxuICAgIGNhc2UgXCJub25lXCI6XG4gICAgY2FzZSBcInJlcXVpcmVkXCI6XG4gICAgICByZXR1cm4geyB0b29sczogb3BlbmFpVG9vbHMyLCB0b29sQ2hvaWNlOiB0eXBlLCB0b29sV2FybmluZ3MgfTtcbiAgICBjYXNlIFwidG9vbFwiOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9vbHM6IG9wZW5haVRvb2xzMixcbiAgICAgICAgdG9vbENob2ljZTogdG9vbENob2ljZS50b29sTmFtZSA9PT0gXCJjb2RlX2ludGVycHJldGVyXCIgfHwgdG9vbENob2ljZS50b29sTmFtZSA9PT0gXCJmaWxlX3NlYXJjaFwiIHx8IHRvb2xDaG9pY2UudG9vbE5hbWUgPT09IFwiaW1hZ2VfZ2VuZXJhdGlvblwiIHx8IHRvb2xDaG9pY2UudG9vbE5hbWUgPT09IFwid2ViX3NlYXJjaF9wcmV2aWV3XCIgfHwgdG9vbENob2ljZS50b29sTmFtZSA9PT0gXCJ3ZWJfc2VhcmNoXCIgPyB7IHR5cGU6IHRvb2xDaG9pY2UudG9vbE5hbWUgfSA6IHsgdHlwZTogXCJmdW5jdGlvblwiLCBuYW1lOiB0b29sQ2hvaWNlLnRvb2xOYW1lIH0sXG4gICAgICAgIHRvb2xXYXJuaW5nc1xuICAgICAgfTtcbiAgICBkZWZhdWx0OiB7XG4gICAgICBjb25zdCBfZXhoYXVzdGl2ZUNoZWNrID0gdHlwZTtcbiAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEZ1bmN0aW9uYWxpdHlFcnJvcjUoe1xuICAgICAgICBmdW5jdGlvbmFsaXR5OiBgdG9vbCBjaG9pY2UgdHlwZTogJHtfZXhoYXVzdGl2ZUNoZWNrfWBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vLyBzcmMvcmVzcG9uc2VzL29wZW5haS1yZXNwb25zZXMtbGFuZ3VhZ2UtbW9kZWwudHNcbnZhciB3ZWJTZWFyY2hDYWxsSXRlbSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcIndlYl9zZWFyY2hfY2FsbFwiKSxcbiAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgc3RhdHVzOiB6MTYuc3RyaW5nKCksXG4gIGFjdGlvbjogejE2LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJzZWFyY2hcIiksXG4gICAgICBxdWVyeTogejE2LnN0cmluZygpLm51bGxpc2goKVxuICAgIH0pLFxuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJvcGVuX3BhZ2VcIiksXG4gICAgICB1cmw6IHoxNi5zdHJpbmcoKVxuICAgIH0pLFxuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJmaW5kXCIpLFxuICAgICAgdXJsOiB6MTYuc3RyaW5nKCksXG4gICAgICBwYXR0ZXJuOiB6MTYuc3RyaW5nKClcbiAgICB9KVxuICBdKS5udWxsaXNoKClcbn0pO1xudmFyIGZpbGVTZWFyY2hDYWxsSXRlbSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcImZpbGVfc2VhcmNoX2NhbGxcIiksXG4gIGlkOiB6MTYuc3RyaW5nKCksXG4gIHF1ZXJpZXM6IHoxNi5hcnJheSh6MTYuc3RyaW5nKCkpLFxuICByZXN1bHRzOiB6MTYuYXJyYXkoXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICBhdHRyaWJ1dGVzOiB6MTYucmVjb3JkKHoxNi5zdHJpbmcoKSwgejE2LnVua25vd24oKSksXG4gICAgICBmaWxlX2lkOiB6MTYuc3RyaW5nKCksXG4gICAgICBmaWxlbmFtZTogejE2LnN0cmluZygpLFxuICAgICAgc2NvcmU6IHoxNi5udW1iZXIoKSxcbiAgICAgIHRleHQ6IHoxNi5zdHJpbmcoKVxuICAgIH0pXG4gICkubnVsbGlzaCgpXG59KTtcbnZhciBjb2RlSW50ZXJwcmV0ZXJDYWxsSXRlbSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcImNvZGVfaW50ZXJwcmV0ZXJfY2FsbFwiKSxcbiAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgY29kZTogejE2LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGNvbnRhaW5lcl9pZDogejE2LnN0cmluZygpLFxuICBvdXRwdXRzOiB6MTYuYXJyYXkoXG4gICAgejE2LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgejE2Lm9iamVjdCh7IHR5cGU6IHoxNi5saXRlcmFsKFwibG9nc1wiKSwgbG9nczogejE2LnN0cmluZygpIH0pLFxuICAgICAgejE2Lm9iamVjdCh7IHR5cGU6IHoxNi5saXRlcmFsKFwiaW1hZ2VcIiksIHVybDogejE2LnN0cmluZygpIH0pXG4gICAgXSlcbiAgKS5udWxsYWJsZSgpXG59KTtcbnZhciBsb2NhbFNoZWxsQ2FsbEl0ZW0gPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJsb2NhbF9zaGVsbF9jYWxsXCIpLFxuICBpZDogejE2LnN0cmluZygpLFxuICBjYWxsX2lkOiB6MTYuc3RyaW5nKCksXG4gIGFjdGlvbjogejE2Lm9iamVjdCh7XG4gICAgdHlwZTogejE2LmxpdGVyYWwoXCJleGVjXCIpLFxuICAgIGNvbW1hbmQ6IHoxNi5hcnJheSh6MTYuc3RyaW5nKCkpLFxuICAgIHRpbWVvdXRfbXM6IHoxNi5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIHVzZXI6IHoxNi5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHdvcmtpbmdfZGlyZWN0b3J5OiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBlbnY6IHoxNi5yZWNvcmQoejE2LnN0cmluZygpLCB6MTYuc3RyaW5nKCkpLm9wdGlvbmFsKClcbiAgfSlcbn0pO1xudmFyIGltYWdlR2VuZXJhdGlvbkNhbGxJdGVtID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwiaW1hZ2VfZ2VuZXJhdGlvbl9jYWxsXCIpLFxuICBpZDogejE2LnN0cmluZygpLFxuICByZXN1bHQ6IHoxNi5zdHJpbmcoKVxufSk7XG52YXIgVE9QX0xPR1BST0JTX01BWCA9IDIwO1xudmFyIExPR1BST0JTX1NDSEVNQSA9IHoxNi5hcnJheShcbiAgejE2Lm9iamVjdCh7XG4gICAgdG9rZW46IHoxNi5zdHJpbmcoKSxcbiAgICBsb2dwcm9iOiB6MTYubnVtYmVyKCksXG4gICAgdG9wX2xvZ3Byb2JzOiB6MTYuYXJyYXkoXG4gICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgdG9rZW46IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgbG9ncHJvYjogejE2Lm51bWJlcigpXG4gICAgICB9KVxuICAgIClcbiAgfSlcbik7XG52YXIgT3BlbkFJUmVzcG9uc2VzTGFuZ3VhZ2VNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgICB0aGlzLnN1cHBvcnRlZFVybHMgPSB7XG4gICAgICBcImltYWdlLypcIjogWy9eaHR0cHM/OlxcL1xcLy4qJC9dLFxuICAgICAgXCJhcHBsaWNhdGlvbi9wZGZcIjogWy9eaHR0cHM/OlxcL1xcLy4qJC9dXG4gICAgfTtcbiAgICB0aGlzLm1vZGVsSWQgPSBtb2RlbElkO1xuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgbWF4T3V0cHV0VG9rZW5zLFxuICAgIHRlbXBlcmF0dXJlLFxuICAgIHN0b3BTZXF1ZW5jZXMsXG4gICAgdG9wUCxcbiAgICB0b3BLLFxuICAgIHByZXNlbmNlUGVuYWx0eSxcbiAgICBmcmVxdWVuY3lQZW5hbHR5LFxuICAgIHNlZWQsXG4gICAgcHJvbXB0LFxuICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICB0b29scyxcbiAgICB0b29sQ2hvaWNlLFxuICAgIHJlc3BvbnNlRm9ybWF0XG4gIH0pIHtcbiAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgY29uc3Qgd2FybmluZ3MgPSBbXTtcbiAgICBjb25zdCBtb2RlbENvbmZpZyA9IGdldFJlc3BvbnNlc01vZGVsQ29uZmlnKHRoaXMubW9kZWxJZCk7XG4gICAgaWYgKHRvcEsgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLCBzZXR0aW5nOiBcInRvcEtcIiB9KTtcbiAgICB9XG4gICAgaWYgKHNlZWQgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLCBzZXR0aW5nOiBcInNlZWRcIiB9KTtcbiAgICB9XG4gICAgaWYgKHByZXNlbmNlUGVuYWx0eSAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwicHJlc2VuY2VQZW5hbHR5XCJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZnJlcXVlbmN5UGVuYWx0eSAhPSBudWxsKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgdHlwZTogXCJ1bnN1cHBvcnRlZC1zZXR0aW5nXCIsXG4gICAgICAgIHNldHRpbmc6IFwiZnJlcXVlbmN5UGVuYWx0eVwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHN0b3BTZXF1ZW5jZXMgIT0gbnVsbCkge1xuICAgICAgd2FybmluZ3MucHVzaCh7IHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLCBzZXR0aW5nOiBcInN0b3BTZXF1ZW5jZXNcIiB9KTtcbiAgICB9XG4gICAgY29uc3Qgb3BlbmFpT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zNSh7XG4gICAgICBwcm92aWRlcjogXCJvcGVuYWlcIixcbiAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgIHNjaGVtYTogb3BlbmFpUmVzcG9uc2VzUHJvdmlkZXJPcHRpb25zU2NoZW1hXG4gICAgfSk7XG4gICAgY29uc3QgeyBpbnB1dCwgd2FybmluZ3M6IGlucHV0V2FybmluZ3MgfSA9IGF3YWl0IGNvbnZlcnRUb09wZW5BSVJlc3BvbnNlc0lucHV0KHtcbiAgICAgIHByb21wdCxcbiAgICAgIHN5c3RlbU1lc3NhZ2VNb2RlOiBtb2RlbENvbmZpZy5zeXN0ZW1NZXNzYWdlTW9kZSxcbiAgICAgIGZpbGVJZFByZWZpeGVzOiB0aGlzLmNvbmZpZy5maWxlSWRQcmVmaXhlcyxcbiAgICAgIHN0b3JlOiAoX2EgPSBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnN0b3JlKSAhPSBudWxsID8gX2EgOiB0cnVlLFxuICAgICAgaGFzTG9jYWxTaGVsbFRvb2w6IGhhc09wZW5BSVRvb2woXCJvcGVuYWkubG9jYWxfc2hlbGxcIilcbiAgICB9KTtcbiAgICB3YXJuaW5ncy5wdXNoKC4uLmlucHV0V2FybmluZ3MpO1xuICAgIGNvbnN0IHN0cmljdEpzb25TY2hlbWEgPSAoX2IgPSBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnN0cmljdEpzb25TY2hlbWEpICE9IG51bGwgPyBfYiA6IGZhbHNlO1xuICAgIGxldCBpbmNsdWRlID0gb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5pbmNsdWRlO1xuICAgIGZ1bmN0aW9uIGFkZEluY2x1ZGUoa2V5KSB7XG4gICAgICBpbmNsdWRlID0gaW5jbHVkZSAhPSBudWxsID8gWy4uLmluY2x1ZGUsIGtleV0gOiBba2V5XTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFzT3BlbkFJVG9vbChpZCkge1xuICAgICAgcmV0dXJuICh0b29scyA9PSBudWxsID8gdm9pZCAwIDogdG9vbHMuZmluZChcbiAgICAgICAgKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gXCJwcm92aWRlci1kZWZpbmVkXCIgJiYgdG9vbC5pZCA9PT0gaWRcbiAgICAgICkpICE9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHRvcExvZ3Byb2JzID0gdHlwZW9mIChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLmxvZ3Byb2JzKSA9PT0gXCJudW1iZXJcIiA/IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubG9ncHJvYnMgOiAob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5sb2dwcm9icykgPT09IHRydWUgPyBUT1BfTE9HUFJPQlNfTUFYIDogdm9pZCAwO1xuICAgIGlmICh0b3BMb2dwcm9icykge1xuICAgICAgYWRkSW5jbHVkZShcIm1lc3NhZ2Uub3V0cHV0X3RleHQubG9ncHJvYnNcIik7XG4gICAgfVxuICAgIGNvbnN0IHdlYlNlYXJjaFRvb2xOYW1lID0gKF9jID0gdG9vbHMgPT0gbnVsbCA/IHZvaWQgMCA6IHRvb2xzLmZpbmQoXG4gICAgICAodG9vbCkgPT4gdG9vbC50eXBlID09PSBcInByb3ZpZGVyLWRlZmluZWRcIiAmJiAodG9vbC5pZCA9PT0gXCJvcGVuYWkud2ViX3NlYXJjaFwiIHx8IHRvb2wuaWQgPT09IFwib3BlbmFpLndlYl9zZWFyY2hfcHJldmlld1wiKVxuICAgICkpID09IG51bGwgPyB2b2lkIDAgOiBfYy5uYW1lO1xuICAgIGlmICh3ZWJTZWFyY2hUb29sTmFtZSkge1xuICAgICAgYWRkSW5jbHVkZShcIndlYl9zZWFyY2hfY2FsbC5hY3Rpb24uc291cmNlc1wiKTtcbiAgICB9XG4gICAgaWYgKGhhc09wZW5BSVRvb2woXCJvcGVuYWkuY29kZV9pbnRlcnByZXRlclwiKSkge1xuICAgICAgYWRkSW5jbHVkZShcImNvZGVfaW50ZXJwcmV0ZXJfY2FsbC5vdXRwdXRzXCIpO1xuICAgIH1cbiAgICBjb25zdCBiYXNlQXJncyA9IHtcbiAgICAgIG1vZGVsOiB0aGlzLm1vZGVsSWQsXG4gICAgICBpbnB1dCxcbiAgICAgIHRlbXBlcmF0dXJlLFxuICAgICAgdG9wX3A6IHRvcFAsXG4gICAgICBtYXhfb3V0cHV0X3Rva2VuczogbWF4T3V0cHV0VG9rZW5zLFxuICAgICAgLi4uKChyZXNwb25zZUZvcm1hdCA9PSBudWxsID8gdm9pZCAwIDogcmVzcG9uc2VGb3JtYXQudHlwZSkgPT09IFwianNvblwiIHx8IChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnRleHRWZXJib3NpdHkpKSAmJiB7XG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICAuLi4ocmVzcG9uc2VGb3JtYXQgPT0gbnVsbCA/IHZvaWQgMCA6IHJlc3BvbnNlRm9ybWF0LnR5cGUpID09PSBcImpzb25cIiAmJiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHJlc3BvbnNlRm9ybWF0LnNjaGVtYSAhPSBudWxsID8ge1xuICAgICAgICAgICAgICB0eXBlOiBcImpzb25fc2NoZW1hXCIsXG4gICAgICAgICAgICAgIHN0cmljdDogc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgICAgICAgbmFtZTogKF9kID0gcmVzcG9uc2VGb3JtYXQubmFtZSkgIT0gbnVsbCA/IF9kIDogXCJyZXNwb25zZVwiLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcmVzcG9uc2VGb3JtYXQuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgIHNjaGVtYTogcmVzcG9uc2VGb3JtYXQuc2NoZW1hXG4gICAgICAgICAgICB9IDogeyB0eXBlOiBcImpzb25fb2JqZWN0XCIgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgLi4uKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMudGV4dFZlcmJvc2l0eSkgJiYge1xuICAgICAgICAgICAgdmVyYm9zaXR5OiBvcGVuYWlPcHRpb25zLnRleHRWZXJib3NpdHlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBwcm92aWRlciBvcHRpb25zOlxuICAgICAgbWF4X3Rvb2xfY2FsbHM6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubWF4VG9vbENhbGxzLFxuICAgICAgbWV0YWRhdGE6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMubWV0YWRhdGEsXG4gICAgICBwYXJhbGxlbF90b29sX2NhbGxzOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnBhcmFsbGVsVG9vbENhbGxzLFxuICAgICAgcHJldmlvdXNfcmVzcG9uc2VfaWQ6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgc3RvcmU6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuc3RvcmUsXG4gICAgICB1c2VyOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnVzZXIsXG4gICAgICBpbnN0cnVjdGlvbnM6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuaW5zdHJ1Y3Rpb25zLFxuICAgICAgc2VydmljZV90aWVyOiBvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnNlcnZpY2VUaWVyLFxuICAgICAgaW5jbHVkZSxcbiAgICAgIHByb21wdF9jYWNoZV9rZXk6IG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucHJvbXB0Q2FjaGVLZXksXG4gICAgICBzYWZldHlfaWRlbnRpZmllcjogb3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zYWZldHlJZGVudGlmaWVyLFxuICAgICAgdG9wX2xvZ3Byb2JzOiB0b3BMb2dwcm9icyxcbiAgICAgIC8vIG1vZGVsLXNwZWNpZmljIHNldHRpbmdzOlxuICAgICAgLi4ubW9kZWxDb25maWcuaXNSZWFzb25pbmdNb2RlbCAmJiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0KSAhPSBudWxsIHx8IChvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ1N1bW1hcnkpICE9IG51bGwpICYmIHtcbiAgICAgICAgcmVhc29uaW5nOiB7XG4gICAgICAgICAgLi4uKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0KSAhPSBudWxsICYmIHtcbiAgICAgICAgICAgIGVmZm9ydDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdFZmZvcnRcbiAgICAgICAgICB9LFxuICAgICAgICAgIC4uLihvcGVuYWlPcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcGVuYWlPcHRpb25zLnJlYXNvbmluZ1N1bW1hcnkpICE9IG51bGwgJiYge1xuICAgICAgICAgICAgc3VtbWFyeTogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLi4ubW9kZWxDb25maWcucmVxdWlyZWRBdXRvVHJ1bmNhdGlvbiAmJiB7XG4gICAgICAgIHRydW5jYXRpb246IFwiYXV0b1wiXG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAobW9kZWxDb25maWcuaXNSZWFzb25pbmdNb2RlbCkge1xuICAgICAgaWYgKGJhc2VBcmdzLnRlbXBlcmF0dXJlICE9IG51bGwpIHtcbiAgICAgICAgYmFzZUFyZ3MudGVtcGVyYXR1cmUgPSB2b2lkIDA7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwidGVtcGVyYXR1cmVcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRlbXBlcmF0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChiYXNlQXJncy50b3BfcCAhPSBudWxsKSB7XG4gICAgICAgIGJhc2VBcmdzLnRvcF9wID0gdm9pZCAwO1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcInRvcFBcIixcbiAgICAgICAgICBkZXRhaWxzOiBcInRvcFAgaXMgbm90IHN1cHBvcnRlZCBmb3IgcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMucmVhc29uaW5nRWZmb3J0KSAhPSBudWxsKSB7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwicmVhc29uaW5nRWZmb3J0XCIsXG4gICAgICAgICAgZGV0YWlsczogXCJyZWFzb25pbmdFZmZvcnQgaXMgbm90IHN1cHBvcnRlZCBmb3Igbm9uLXJlYXNvbmluZyBtb2RlbHNcIlxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5yZWFzb25pbmdTdW1tYXJ5KSAhPSBudWxsKSB7XG4gICAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICAgIHNldHRpbmc6IFwicmVhc29uaW5nU3VtbWFyeVwiLFxuICAgICAgICAgIGRldGFpbHM6IFwicmVhc29uaW5nU3VtbWFyeSBpcyBub3Qgc3VwcG9ydGVkIGZvciBub24tcmVhc29uaW5nIG1vZGVsc1wiXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoKG9wZW5haU9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wZW5haU9wdGlvbnMuc2VydmljZVRpZXIpID09PSBcImZsZXhcIiAmJiAhbW9kZWxDb25maWcuc3VwcG9ydHNGbGV4UHJvY2Vzc2luZykge1xuICAgICAgd2FybmluZ3MucHVzaCh7XG4gICAgICAgIHR5cGU6IFwidW5zdXBwb3J0ZWQtc2V0dGluZ1wiLFxuICAgICAgICBzZXR0aW5nOiBcInNlcnZpY2VUaWVyXCIsXG4gICAgICAgIGRldGFpbHM6IFwiZmxleCBwcm9jZXNzaW5nIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBvMywgbzQtbWluaSwgYW5kIGdwdC01IG1vZGVsc1wiXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBiYXNlQXJncy5zZXJ2aWNlX3RpZXI7XG4gICAgfVxuICAgIGlmICgob3BlbmFpT3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3BlbmFpT3B0aW9ucy5zZXJ2aWNlVGllcikgPT09IFwicHJpb3JpdHlcIiAmJiAhbW9kZWxDb25maWcuc3VwcG9ydHNQcmlvcml0eVByb2Nlc3NpbmcpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJzZXJ2aWNlVGllclwiLFxuICAgICAgICBkZXRhaWxzOiBcInByaW9yaXR5IHByb2Nlc3NpbmcgaXMgb25seSBhdmFpbGFibGUgZm9yIHN1cHBvcnRlZCBtb2RlbHMgKGdwdC00LCBncHQtNSwgZ3B0LTUtbWluaSwgbzMsIG80LW1pbmkpIGFuZCByZXF1aXJlcyBFbnRlcnByaXNlIGFjY2Vzcy4gZ3B0LTUtbmFubyBpcyBub3Qgc3VwcG9ydGVkXCJcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIGJhc2VBcmdzLnNlcnZpY2VfdGllcjtcbiAgICB9XG4gICAgY29uc3Qge1xuICAgICAgdG9vbHM6IG9wZW5haVRvb2xzMixcbiAgICAgIHRvb2xDaG9pY2U6IG9wZW5haVRvb2xDaG9pY2UsXG4gICAgICB0b29sV2FybmluZ3NcbiAgICB9ID0gcHJlcGFyZVJlc3BvbnNlc1Rvb2xzKHtcbiAgICAgIHRvb2xzLFxuICAgICAgdG9vbENob2ljZSxcbiAgICAgIHN0cmljdEpzb25TY2hlbWFcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgd2ViU2VhcmNoVG9vbE5hbWUsXG4gICAgICBhcmdzOiB7XG4gICAgICAgIC4uLmJhc2VBcmdzLFxuICAgICAgICB0b29sczogb3BlbmFpVG9vbHMyLFxuICAgICAgICB0b29sX2Nob2ljZTogb3BlbmFpVG9vbENob2ljZVxuICAgICAgfSxcbiAgICAgIHdhcm5pbmdzOiBbLi4ud2FybmluZ3MsIC4uLnRvb2xXYXJuaW5nc11cbiAgICB9O1xuICB9XG4gIGFzeW5jIGRvR2VuZXJhdGUob3B0aW9ucykge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfaiwgX2ssIF9sLCBfbSwgX24sIF9vLCBfcCwgX3EsIF9yLCBfcztcbiAgICBjb25zdCB7XG4gICAgICBhcmdzOiBib2R5LFxuICAgICAgd2FybmluZ3MsXG4gICAgICB3ZWJTZWFyY2hUb29sTmFtZVxuICAgIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gdGhpcy5jb25maWcudXJsKHtcbiAgICAgIHBhdGg6IFwiL3Jlc3BvbnNlc1wiLFxuICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgfSk7XG4gICAgY29uc3Qge1xuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RKc29uVG9BcGk1KHtcbiAgICAgIHVybCxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzNSh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBib2R5LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVKc29uUmVzcG9uc2VIYW5kbGVyNShcbiAgICAgICAgejE2Lm9iamVjdCh7XG4gICAgICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICBjcmVhdGVkX2F0OiB6MTYubnVtYmVyKCksXG4gICAgICAgICAgZXJyb3I6IHoxNi5vYmplY3Qoe1xuICAgICAgICAgICAgY29kZTogejE2LnN0cmluZygpLFxuICAgICAgICAgICAgbWVzc2FnZTogejE2LnN0cmluZygpXG4gICAgICAgICAgfSkubnVsbGlzaCgpLFxuICAgICAgICAgIG1vZGVsOiB6MTYuc3RyaW5nKCksXG4gICAgICAgICAgb3V0cHV0OiB6MTYuYXJyYXkoXG4gICAgICAgICAgICB6MTYuZGlzY3JpbWluYXRlZFVuaW9uKFwidHlwZVwiLCBbXG4gICAgICAgICAgICAgIHoxNi5vYmplY3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwibWVzc2FnZVwiKSxcbiAgICAgICAgICAgICAgICByb2xlOiB6MTYubGl0ZXJhbChcImFzc2lzdGFudFwiKSxcbiAgICAgICAgICAgICAgICBpZDogejE2LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHoxNi5hcnJheShcbiAgICAgICAgICAgICAgICAgIHoxNi5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcIm91dHB1dF90ZXh0XCIpLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB6MTYuc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIGxvZ3Byb2JzOiBMT0dQUk9CU19TQ0hFTUEubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogejE2LmFycmF5KFxuICAgICAgICAgICAgICAgICAgICAgIHoxNi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHoxNi5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcInVybF9jaXRhdGlvblwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfaW5kZXg6IHoxNi5udW1iZXIoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kX2luZGV4OiB6MTYubnVtYmVyKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogejE2LnN0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogejE2LnN0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHoxNi5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImZpbGVfY2l0YXRpb25cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVfaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IHoxNi5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB6MTYubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydF9pbmRleDogejE2Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kX2luZGV4OiB6MTYubnVtYmVyKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90ZTogejE2LnN0cmluZygpLm51bGxpc2goKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJjb250YWluZXJfZmlsZV9jaXRhdGlvblwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHdlYlNlYXJjaENhbGxJdGVtLFxuICAgICAgICAgICAgICBmaWxlU2VhcmNoQ2FsbEl0ZW0sXG4gICAgICAgICAgICAgIGNvZGVJbnRlcnByZXRlckNhbGxJdGVtLFxuICAgICAgICAgICAgICBpbWFnZUdlbmVyYXRpb25DYWxsSXRlbSxcbiAgICAgICAgICAgICAgbG9jYWxTaGVsbENhbGxJdGVtLFxuICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImZ1bmN0aW9uX2NhbGxcIiksXG4gICAgICAgICAgICAgICAgY2FsbF9pZDogejE2LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIG5hbWU6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBpZDogejE2LnN0cmluZygpXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImNvbXB1dGVyX2NhbGxcIiksXG4gICAgICAgICAgICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHoxNi5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB6MTYub2JqZWN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcInJlYXNvbmluZ1wiKSxcbiAgICAgICAgICAgICAgICBpZDogejE2LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIGVuY3J5cHRlZF9jb250ZW50OiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgICAgICAgICAgIHN1bW1hcnk6IHoxNi5hcnJheShcbiAgICAgICAgICAgICAgICAgIHoxNi5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB6MTYubGl0ZXJhbChcInN1bW1hcnlfdGV4dFwiKSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogejE2LnN0cmluZygpXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgKSxcbiAgICAgICAgICBzZXJ2aWNlX3RpZXI6IHoxNi5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgICAgaW5jb21wbGV0ZV9kZXRhaWxzOiB6MTYub2JqZWN0KHsgcmVhc29uOiB6MTYuc3RyaW5nKCkgfSkubnVsbGlzaCgpLFxuICAgICAgICAgIHVzYWdlOiB1c2FnZVNjaGVtYTJcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICBhYm9ydFNpZ25hbDogb3B0aW9ucy5hYm9ydFNpZ25hbCxcbiAgICAgIGZldGNoOiB0aGlzLmNvbmZpZy5mZXRjaFxuICAgIH0pO1xuICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEFQSUNhbGxFcnJvcih7XG4gICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHVybCxcbiAgICAgICAgcmVxdWVzdEJvZHlWYWx1ZXM6IGJvZHksXG4gICAgICAgIHN0YXR1c0NvZGU6IDQwMCxcbiAgICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICByZXNwb25zZUJvZHk6IHJhd1Jlc3BvbnNlLFxuICAgICAgICBpc1JldHJ5YWJsZTogZmFsc2VcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBjb250ZW50ID0gW107XG4gICAgY29uc3QgbG9ncHJvYnMgPSBbXTtcbiAgICBsZXQgaGFzRnVuY3Rpb25DYWxsID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgc3dpdGNoIChwYXJ0LnR5cGUpIHtcbiAgICAgICAgY2FzZSBcInJlYXNvbmluZ1wiOiB7XG4gICAgICAgICAgaWYgKHBhcnQuc3VtbWFyeS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHBhcnQuc3VtbWFyeS5wdXNoKHsgdHlwZTogXCJzdW1tYXJ5X3RleHRcIiwgdGV4dDogXCJcIiB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBzdW1tYXJ5IG9mIHBhcnQuc3VtbWFyeSkge1xuICAgICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJyZWFzb25pbmdcIixcbiAgICAgICAgICAgICAgdGV4dDogc3VtbWFyeS50ZXh0LFxuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICAgICAgICByZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50OiAoX2EgPSBwYXJ0LmVuY3J5cHRlZF9jb250ZW50KSAhPSBudWxsID8gX2EgOiBudWxsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImltYWdlX2dlbmVyYXRpb25fY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiaW1hZ2VfZ2VuZXJhdGlvblwiLFxuICAgICAgICAgICAgaW5wdXQ6IFwie31cIixcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImltYWdlX2dlbmVyYXRpb25cIixcbiAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICByZXN1bHQ6IHBhcnQucmVzdWx0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJsb2NhbF9zaGVsbF9jYWxsXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuY2FsbF9pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImxvY2FsX3NoZWxsXCIsXG4gICAgICAgICAgICBpbnB1dDogSlNPTi5zdHJpbmdpZnkoeyBhY3Rpb246IHBhcnQuYWN0aW9uIH0pLFxuICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnQuaWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJtZXNzYWdlXCI6IHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNvbnRlbnRQYXJ0IG9mIHBhcnQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKCgoX2MgPSAoX2IgPSBvcHRpb25zLnByb3ZpZGVyT3B0aW9ucykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm9wZW5haSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmxvZ3Byb2JzKSAmJiBjb250ZW50UGFydC5sb2dwcm9icykge1xuICAgICAgICAgICAgICBsb2dwcm9icy5wdXNoKGNvbnRlbnRQYXJ0LmxvZ3Byb2JzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICB0ZXh0OiBjb250ZW50UGFydC50ZXh0LFxuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnQuaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yIChjb25zdCBhbm5vdGF0aW9uIG9mIGNvbnRlbnRQYXJ0LmFubm90YXRpb25zKSB7XG4gICAgICAgICAgICAgIGlmIChhbm5vdGF0aW9uLnR5cGUgPT09IFwidXJsX2NpdGF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJzb3VyY2VcIixcbiAgICAgICAgICAgICAgICAgIHNvdXJjZVR5cGU6IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICBpZDogKF9mID0gKF9lID0gKF9kID0gdGhpcy5jb25maWcpLmdlbmVyYXRlSWQpID09IG51bGwgPyB2b2lkIDAgOiBfZS5jYWxsKF9kKSkgIT0gbnVsbCA/IF9mIDogZ2VuZXJhdGVJZDIoKSxcbiAgICAgICAgICAgICAgICAgIHVybDogYW5ub3RhdGlvbi51cmwsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogYW5ub3RhdGlvbi50aXRsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFubm90YXRpb24udHlwZSA9PT0gXCJmaWxlX2NpdGF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJzb3VyY2VcIixcbiAgICAgICAgICAgICAgICAgIHNvdXJjZVR5cGU6IFwiZG9jdW1lbnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiAoX2kgPSAoX2ggPSAoX2cgPSB0aGlzLmNvbmZpZykuZ2VuZXJhdGVJZCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9oLmNhbGwoX2cpKSAhPSBudWxsID8gX2kgOiBnZW5lcmF0ZUlkMigpLFxuICAgICAgICAgICAgICAgICAgbWVkaWFUeXBlOiBcInRleHQvcGxhaW5cIixcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiAoX2sgPSAoX2ogPSBhbm5vdGF0aW9uLnF1b3RlKSAhPSBudWxsID8gX2ogOiBhbm5vdGF0aW9uLmZpbGVuYW1lKSAhPSBudWxsID8gX2sgOiBcIkRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgICBmaWxlbmFtZTogKF9sID0gYW5ub3RhdGlvbi5maWxlbmFtZSkgIT0gbnVsbCA/IF9sIDogYW5ub3RhdGlvbi5maWxlX2lkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uX2NhbGxcIjoge1xuICAgICAgICAgIGhhc0Z1bmN0aW9uQ2FsbCA9IHRydWU7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmNhbGxfaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogcGFydC5uYW1lLFxuICAgICAgICAgICAgaW5wdXQ6IHBhcnQuYXJndW1lbnRzLFxuICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnQuaWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ3ZWJfc2VhcmNoX2NhbGxcIjoge1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiB3ZWJTZWFyY2hUb29sTmFtZSAhPSBudWxsID8gd2ViU2VhcmNoVG9vbE5hbWUgOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogcGFydC5hY3Rpb24gfSksXG4gICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogd2ViU2VhcmNoVG9vbE5hbWUgIT0gbnVsbCA/IHdlYlNlYXJjaFRvb2xOYW1lIDogXCJ3ZWJfc2VhcmNoXCIsXG4gICAgICAgICAgICByZXN1bHQ6IHsgc3RhdHVzOiBwYXJ0LnN0YXR1cyB9LFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjb21wdXRlcl9jYWxsXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogXCJjb21wdXRlcl91c2VcIixcbiAgICAgICAgICAgIGlucHV0OiBcIlwiLFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJjb21wdXRlcl91c2VfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgc3RhdHVzOiBwYXJ0LnN0YXR1cyB8fCBcImNvbXBsZXRlZFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJmaWxlX3NlYXJjaF9jYWxsXCI6IHtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHBhcnQuaWQsXG4gICAgICAgICAgICB0b29sTmFtZTogXCJmaWxlX3NlYXJjaFwiLFxuICAgICAgICAgICAgaW5wdXQ6IFwie31cIixcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb250ZW50LnB1c2goe1xuICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgdG9vbENhbGxJZDogcGFydC5pZCxcbiAgICAgICAgICAgIHRvb2xOYW1lOiBcImZpbGVfc2VhcmNoXCIsXG4gICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgcXVlcmllczogcGFydC5xdWVyaWVzLFxuICAgICAgICAgICAgICByZXN1bHRzOiAoX24gPSAoX20gPSBwYXJ0LnJlc3VsdHMpID09IG51bGwgPyB2b2lkIDAgOiBfbS5tYXAoKHJlc3VsdCkgPT4gKHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiByZXN1bHQuYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICBmaWxlSWQ6IHJlc3VsdC5maWxlX2lkLFxuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiByZXN1bHQuZmlsZW5hbWUsXG4gICAgICAgICAgICAgICAgc2NvcmU6IHJlc3VsdC5zY29yZSxcbiAgICAgICAgICAgICAgICB0ZXh0OiByZXN1bHQudGV4dFxuICAgICAgICAgICAgICB9KSkpICE9IG51bGwgPyBfbiA6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImNvZGVfaW50ZXJwcmV0ZXJfY2FsbFwiOiB7XG4gICAgICAgICAgY29udGVudC5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29kZV9pbnRlcnByZXRlclwiLFxuICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgY29kZTogcGFydC5jb2RlLFxuICAgICAgICAgICAgICBjb250YWluZXJJZDogcGFydC5jb250YWluZXJfaWRcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnRlbnQucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICB0b29sQ2FsbElkOiBwYXJ0LmlkLFxuICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29kZV9pbnRlcnByZXRlclwiLFxuICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgIG91dHB1dHM6IHBhcnQub3V0cHV0c1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0ge1xuICAgICAgb3BlbmFpOiB7IHJlc3BvbnNlSWQ6IHJlc3BvbnNlLmlkIH1cbiAgICB9O1xuICAgIGlmIChsb2dwcm9icy5sZW5ndGggPiAwKSB7XG4gICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5sb2dwcm9icyA9IGxvZ3Byb2JzO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlc3BvbnNlLnNlcnZpY2VfdGllciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkuc2VydmljZVRpZXIgPSByZXNwb25zZS5zZXJ2aWNlX3RpZXI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50LFxuICAgICAgZmluaXNoUmVhc29uOiBtYXBPcGVuQUlSZXNwb25zZUZpbmlzaFJlYXNvbih7XG4gICAgICAgIGZpbmlzaFJlYXNvbjogKF9vID0gcmVzcG9uc2UuaW5jb21wbGV0ZV9kZXRhaWxzKSA9PSBudWxsID8gdm9pZCAwIDogX28ucmVhc29uLFxuICAgICAgICBoYXNGdW5jdGlvbkNhbGxcbiAgICAgIH0pLFxuICAgICAgdXNhZ2U6IHtcbiAgICAgICAgaW5wdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucyxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zLFxuICAgICAgICB0b3RhbFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zICsgcmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucyxcbiAgICAgICAgcmVhc29uaW5nVG9rZW5zOiAoX3EgPSAoX3AgPSByZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfcC5yZWFzb25pbmdfdG9rZW5zKSAhPSBudWxsID8gX3EgOiB2b2lkIDAsXG4gICAgICAgIGNhY2hlZElucHV0VG9rZW5zOiAoX3MgPSAoX3IgPSByZXNwb25zZS51c2FnZS5pbnB1dF90b2tlbnNfZGV0YWlscykgPT0gbnVsbCA/IHZvaWQgMCA6IF9yLmNhY2hlZF90b2tlbnMpICE9IG51bGwgPyBfcyA6IHZvaWQgMFxuICAgICAgfSxcbiAgICAgIHJlcXVlc3Q6IHsgYm9keSB9LFxuICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgaWQ6IHJlc3BvbnNlLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKHJlc3BvbnNlLmNyZWF0ZWRfYXQgKiAxZTMpLFxuICAgICAgICBtb2RlbElkOiByZXNwb25zZS5tb2RlbCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBib2R5OiByYXdSZXNwb25zZVxuICAgICAgfSxcbiAgICAgIHByb3ZpZGVyTWV0YWRhdGEsXG4gICAgICB3YXJuaW5nc1xuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9TdHJlYW0ob3B0aW9ucykge1xuICAgIGNvbnN0IHtcbiAgICAgIGFyZ3M6IGJvZHksXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIHdlYlNlYXJjaFRvb2xOYW1lXG4gICAgfSA9IGF3YWl0IHRoaXMuZ2V0QXJncyhvcHRpb25zKTtcbiAgICBjb25zdCB7IHJlc3BvbnNlSGVhZGVycywgdmFsdWU6IHJlc3BvbnNlIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpNSh7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL3Jlc3BvbnNlc1wiLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWRcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnM1KHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgLi4uYm9keSxcbiAgICAgICAgc3RyZWFtOiB0cnVlXG4gICAgICB9LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVFdmVudFNvdXJjZVJlc3BvbnNlSGFuZGxlcjMoXG4gICAgICAgIG9wZW5haVJlc3BvbnNlc0NodW5rU2NoZW1hXG4gICAgICApLFxuICAgICAgYWJvcnRTaWduYWw6IG9wdGlvbnMuYWJvcnRTaWduYWwsXG4gICAgICBmZXRjaDogdGhpcy5jb25maWcuZmV0Y2hcbiAgICB9KTtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBsZXQgZmluaXNoUmVhc29uID0gXCJ1bmtub3duXCI7XG4gICAgY29uc3QgdXNhZ2UgPSB7XG4gICAgICBpbnB1dFRva2Vuczogdm9pZCAwLFxuICAgICAgb3V0cHV0VG9rZW5zOiB2b2lkIDAsXG4gICAgICB0b3RhbFRva2Vuczogdm9pZCAwXG4gICAgfTtcbiAgICBjb25zdCBsb2dwcm9icyA9IFtdO1xuICAgIGxldCByZXNwb25zZUlkID0gbnVsbDtcbiAgICBjb25zdCBvbmdvaW5nVG9vbENhbGxzID0ge307XG4gICAgbGV0IGhhc0Z1bmN0aW9uQ2FsbCA9IGZhbHNlO1xuICAgIGNvbnN0IGFjdGl2ZVJlYXNvbmluZyA9IHt9O1xuICAgIGxldCBzZXJ2aWNlVGllcjtcbiAgICByZXR1cm4ge1xuICAgICAgc3RyZWFtOiByZXNwb25zZS5waXBlVGhyb3VnaChcbiAgICAgICAgbmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJzdHJlYW0tc3RhcnRcIiwgd2FybmluZ3MgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm0oY2h1bmssIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9pLCBfaiwgX2ssIF9sLCBfbSwgX24sIF9vLCBfcCwgX3EsIF9yLCBfcywgX3QsIF91LCBfdiwgX3c7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pbmNsdWRlUmF3Q2h1bmtzKSB7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwicmF3XCIsIHJhd1ZhbHVlOiBjaHVuay5yYXdWYWx1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2h1bmsuc3VjY2Vzcykge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSBcImVycm9yXCI7XG4gICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7IHR5cGU6IFwiZXJyb3JcIiwgZXJyb3I6IGNodW5rLmVycm9yIH0pO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNodW5rLnZhbHVlO1xuICAgICAgICAgICAgaWYgKGlzUmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJmdW5jdGlvbl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogdmFsdWUuaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5jYWxsX2lkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbS5jYWxsX2lkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHZhbHVlLml0ZW0ubmFtZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJ3ZWJfc2VhcmNoX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB3ZWJTZWFyY2hUb29sTmFtZSAhPSBudWxsID8gd2ViU2VhcmNoVG9vbE5hbWUgOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHdlYlNlYXJjaFRvb2xOYW1lICE9IG51bGwgPyB3ZWJTZWFyY2hUb29sTmFtZSA6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJjb21wdXRlcl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJjb21wdXRlcl91c2VcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImNvZGVfaW50ZXJwcmV0ZXJfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29kZV9pbnRlcnByZXRlclwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIGNvZGVJbnRlcnByZXRlcjoge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogdmFsdWUuaXRlbS5jb250YWluZXJfaWRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtc3RhcnRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29kZV9pbnRlcnByZXRlclwiLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgZGVsdGE6IGB7XCJjb250YWluZXJJZFwiOlwiJHt2YWx1ZS5pdGVtLmNvbnRhaW5lcl9pZH1cIixcImNvZGVcIjpcImBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwiZmlsZV9zZWFyY2hfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiZmlsZV9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBcInt9XCIsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImltYWdlX2dlbmVyYXRpb25fY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiaW1hZ2VfZ2VuZXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgaW5wdXQ6IFwie31cIixcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwibWVzc2FnZVwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dC1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZU91dHB1dEl0ZW1BZGRlZFJlYXNvbmluZ0NodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVJlYXNvbmluZ1t2YWx1ZS5pdGVtLmlkXSA9IHtcbiAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZENvbnRlbnQ6IHZhbHVlLml0ZW0uZW5jcnlwdGVkX2NvbnRlbnQsXG4gICAgICAgICAgICAgICAgICBzdW1tYXJ5UGFydHM6IFswXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVhc29uaW5nLXN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICBpZDogYCR7dmFsdWUuaXRlbS5pZH06MGAsXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5haToge1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICByZWFzb25pbmdFbmNyeXB0ZWRDb250ZW50OiAoX2EgPSB2YWx1ZS5pdGVtLmVuY3J5cHRlZF9jb250ZW50KSAhPSBudWxsID8gX2EgOiBudWxsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlT3V0cHV0SXRlbURvbmVDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJmdW5jdGlvbl9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaGFzRnVuY3Rpb25DYWxsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uY2FsbF9pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5jYWxsX2lkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IHZhbHVlLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgIGlucHV0OiB2YWx1ZS5pdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwid2ViX3NlYXJjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pdGVtLmlkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwid2ViX3NlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHsgYWN0aW9uOiB2YWx1ZS5pdGVtLmFjdGlvbiB9KSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcIndlYl9zZWFyY2hcIixcbiAgICAgICAgICAgICAgICAgIHJlc3VsdDogeyBzdGF0dXM6IHZhbHVlLml0ZW0uc3RhdHVzIH0sXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImNvbXB1dGVyX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWNhbGxcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJjb21wdXRlcl91c2VcIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtcmVzdWx0XCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB2YWx1ZS5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29tcHV0ZXJfdXNlXCIsXG4gICAgICAgICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjb21wdXRlcl91c2VfdG9vbF9yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB2YWx1ZS5pdGVtLnN0YXR1cyB8fCBcImNvbXBsZXRlZFwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJmaWxlX3NlYXJjaF9jYWxsXCIpIHtcbiAgICAgICAgICAgICAgICBvbmdvaW5nVG9vbENhbGxzW3ZhbHVlLm91dHB1dF9pbmRleF0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJmaWxlX3NlYXJjaFwiLFxuICAgICAgICAgICAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJpZXM6IHZhbHVlLml0ZW0ucXVlcmllcyxcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogKF9jID0gKF9iID0gdmFsdWUuaXRlbS5yZXN1bHRzKSA9PSBudWxsID8gdm9pZCAwIDogX2IubWFwKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogcmVzdWx0LmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZUlkOiByZXN1bHQuZmlsZV9pZCxcbiAgICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZTogcmVzdWx0LmZpbGVuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIHNjb3JlOiByZXN1bHQuc2NvcmUsXG4gICAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVzdWx0LnRleHRcbiAgICAgICAgICAgICAgICAgICAgfSkpKSAhPSBudWxsID8gX2MgOiBudWxsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJFeGVjdXRlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIikge1xuICAgICAgICAgICAgICAgIG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLXJlc3VsdFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgIHRvb2xOYW1lOiBcImNvZGVfaW50ZXJwcmV0ZXJcIixcbiAgICAgICAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRzOiB2YWx1ZS5pdGVtLm91dHB1dHNcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUuaXRlbS50eXBlID09PSBcImltYWdlX2dlbmVyYXRpb25fY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1yZXN1bHRcIixcbiAgICAgICAgICAgICAgICAgIHRvb2xDYWxsSWQ6IHZhbHVlLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICB0b29sTmFtZTogXCJpbWFnZV9nZW5lcmF0aW9uXCIsXG4gICAgICAgICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiB2YWx1ZS5pdGVtLnJlc3VsdFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRXhlY3V0ZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5pdGVtLnR5cGUgPT09IFwibG9jYWxfc2hlbGxfY2FsbFwiKSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtY2FsbFwiLFxuICAgICAgICAgICAgICAgICAgdG9vbENhbGxJZDogdmFsdWUuaXRlbS5jYWxsX2lkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwibG9jYWxfc2hlbGxcIixcbiAgICAgICAgICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZXhlY1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IHZhbHVlLml0ZW0uYWN0aW9uLmNvbW1hbmQsXG4gICAgICAgICAgICAgICAgICAgICAgdGltZW91dE1zOiB2YWx1ZS5pdGVtLmFjdGlvbi50aW1lb3V0X21zLFxuICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IHZhbHVlLml0ZW0uYWN0aW9uLnVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgd29ya2luZ0RpcmVjdG9yeTogdmFsdWUuaXRlbS5hY3Rpb24ud29ya2luZ19kaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgICAgZW52OiB2YWx1ZS5pdGVtLmFjdGlvbi5lbnZcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5haTogeyBpdGVtSWQ6IHZhbHVlLml0ZW0uaWQgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLml0ZW0udHlwZSA9PT0gXCJtZXNzYWdlXCIpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0LWVuZFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLml0ZW0uaWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlT3V0cHV0SXRlbURvbmVSZWFzb25pbmdDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVSZWFzb25pbmdQYXJ0ID0gYWN0aXZlUmVhc29uaW5nW3ZhbHVlLml0ZW0uaWRdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3VtbWFyeUluZGV4IG9mIGFjdGl2ZVJlYXNvbmluZ1BhcnQuc3VtbWFyeVBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1lbmRcIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGAke3ZhbHVlLml0ZW0uaWR9OiR7c3VtbWFyeUluZGV4fWAsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbmluZ0VuY3J5cHRlZENvbnRlbnQ6IChfZCA9IHZhbHVlLml0ZW0uZW5jcnlwdGVkX2NvbnRlbnQpICE9IG51bGwgPyBfZCA6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgYWN0aXZlUmVhc29uaW5nW3ZhbHVlLml0ZW0uaWRdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUNodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IG9uZ29pbmdUb29sQ2FsbHNbdmFsdWUub3V0cHV0X2luZGV4XTtcbiAgICAgICAgICAgICAgaWYgKHRvb2xDYWxsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0b29sLWlucHV0LWRlbHRhXCIsXG4gICAgICAgICAgICAgICAgICBpZDogdG9vbENhbGwudG9vbENhbGxJZCxcbiAgICAgICAgICAgICAgICAgIGRlbHRhOiB2YWx1ZS5kZWx0YVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VDb2RlSW50ZXJwcmV0ZXJDYWxsQ29kZURlbHRhQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdO1xuICAgICAgICAgICAgICBpZiAodG9vbENhbGwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgLy8gVGhlIGRlbHRhIGlzIGNvZGUsIHdoaWNoIGlzIGVtYmVkZGluZyBpbiBhIEpTT04gc3RyaW5nLlxuICAgICAgICAgICAgICAgICAgLy8gVG8gZXNjYXBlIGl0LCB3ZSB1c2UgSlNPTi5zdHJpbmdpZnkgYW5kIHNsaWNlIHRvIHJlbW92ZSB0aGUgb3V0ZXIgcXVvdGVzLlxuICAgICAgICAgICAgICAgICAgZGVsdGE6IEpTT04uc3RyaW5naWZ5KHZhbHVlLmRlbHRhKS5zbGljZSgxLCAtMSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlQ29kZUludGVycHJldGVyQ2FsbENvZGVEb25lQ2h1bmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRvb2xDYWxsID0gb25nb2luZ1Rvb2xDYWxsc1t2YWx1ZS5vdXRwdXRfaW5kZXhdO1xuICAgICAgICAgICAgICBpZiAodG9vbENhbGwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInRvb2wtaW5wdXQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgZGVsdGE6ICdcIn0nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1pbnB1dC1lbmRcIixcbiAgICAgICAgICAgICAgICAgIGlkOiB0b29sQ2FsbC50b29sQ2FsbElkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG9vbC1jYWxsXCIsXG4gICAgICAgICAgICAgICAgICB0b29sQ2FsbElkOiB0b29sQ2FsbC50b29sQ2FsbElkLFxuICAgICAgICAgICAgICAgICAgdG9vbE5hbWU6IFwiY29kZV9pbnRlcnByZXRlclwiLFxuICAgICAgICAgICAgICAgICAgaW5wdXQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdmFsdWUuY29kZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IHRvb2xDYWxsLmNvZGVJbnRlcnByZXRlci5jb250YWluZXJJZFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICBwcm92aWRlckV4ZWN1dGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUNyZWF0ZWRDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgcmVzcG9uc2VJZCA9IHZhbHVlLnJlc3BvbnNlLmlkO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwicmVzcG9uc2UtbWV0YWRhdGFcIixcbiAgICAgICAgICAgICAgICBpZDogdmFsdWUucmVzcG9uc2UuaWQsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSh2YWx1ZS5yZXNwb25zZS5jcmVhdGVkX2F0ICogMWUzKSxcbiAgICAgICAgICAgICAgICBtb2RlbElkOiB2YWx1ZS5yZXNwb25zZS5tb2RlbFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNUZXh0RGVsdGFDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQtZGVsdGFcIixcbiAgICAgICAgICAgICAgICBpZDogdmFsdWUuaXRlbV9pZCxcbiAgICAgICAgICAgICAgICBkZWx0YTogdmFsdWUuZGVsdGFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGlmICgoKF9mID0gKF9lID0gb3B0aW9ucy5wcm92aWRlck9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfZS5vcGVuYWkpID09IG51bGwgPyB2b2lkIDAgOiBfZi5sb2dwcm9icykgJiYgdmFsdWUubG9ncHJvYnMpIHtcbiAgICAgICAgICAgICAgICBsb2dwcm9icy5wdXNoKHZhbHVlLmxvZ3Byb2JzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1Jlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVBhcnRBZGRlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBpZiAodmFsdWUuc3VtbWFyeV9pbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAoX2cgPSBhY3RpdmVSZWFzb25pbmdbdmFsdWUuaXRlbV9pZF0pID09IG51bGwgPyB2b2lkIDAgOiBfZy5zdW1tYXJ5UGFydHMucHVzaChcbiAgICAgICAgICAgICAgICAgIHZhbHVlLnN1bW1hcnlfaW5kZXhcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1zdGFydFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IGAke3ZhbHVlLml0ZW1faWR9OiR7dmFsdWUuc3VtbWFyeV9pbmRleH1gLFxuICAgICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHZhbHVlLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgICAgcmVhc29uaW5nRW5jcnlwdGVkQ29udGVudDogKF9pID0gKF9oID0gYWN0aXZlUmVhc29uaW5nW3ZhbHVlLml0ZW1faWRdKSA9PSBudWxsID8gdm9pZCAwIDogX2guZW5jcnlwdGVkQ29udGVudCkgIT0gbnVsbCA/IF9pIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlUZXh0RGVsdGFDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInJlYXNvbmluZy1kZWx0YVwiLFxuICAgICAgICAgICAgICAgIGlkOiBgJHt2YWx1ZS5pdGVtX2lkfToke3ZhbHVlLnN1bW1hcnlfaW5kZXh9YCxcbiAgICAgICAgICAgICAgICBkZWx0YTogdmFsdWUuZGVsdGEsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgb3BlbmFpOiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdmFsdWUuaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUmVzcG9uc2VGaW5pc2hlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBmaW5pc2hSZWFzb24gPSBtYXBPcGVuQUlSZXNwb25zZUZpbmlzaFJlYXNvbih7XG4gICAgICAgICAgICAgICAgZmluaXNoUmVhc29uOiAoX2ogPSB2YWx1ZS5yZXNwb25zZS5pbmNvbXBsZXRlX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfai5yZWFzb24sXG4gICAgICAgICAgICAgICAgaGFzRnVuY3Rpb25DYWxsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB1c2FnZS5pbnB1dFRva2VucyA9IHZhbHVlLnJlc3BvbnNlLnVzYWdlLmlucHV0X3Rva2VucztcbiAgICAgICAgICAgICAgdXNhZ2Uub3V0cHV0VG9rZW5zID0gdmFsdWUucmVzcG9uc2UudXNhZ2Uub3V0cHV0X3Rva2VucztcbiAgICAgICAgICAgICAgdXNhZ2UudG90YWxUb2tlbnMgPSB2YWx1ZS5yZXNwb25zZS51c2FnZS5pbnB1dF90b2tlbnMgKyB2YWx1ZS5yZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zO1xuICAgICAgICAgICAgICB1c2FnZS5yZWFzb25pbmdUb2tlbnMgPSAoX2wgPSAoX2sgPSB2YWx1ZS5yZXNwb25zZS51c2FnZS5vdXRwdXRfdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfay5yZWFzb25pbmdfdG9rZW5zKSAhPSBudWxsID8gX2wgOiB2b2lkIDA7XG4gICAgICAgICAgICAgIHVzYWdlLmNhY2hlZElucHV0VG9rZW5zID0gKF9uID0gKF9tID0gdmFsdWUucmVzcG9uc2UudXNhZ2UuaW5wdXRfdG9rZW5zX2RldGFpbHMpID09IG51bGwgPyB2b2lkIDAgOiBfbS5jYWNoZWRfdG9rZW5zKSAhPSBudWxsID8gX24gOiB2b2lkIDA7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUucmVzcG9uc2Uuc2VydmljZV90aWVyID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgc2VydmljZVRpZXIgPSB2YWx1ZS5yZXNwb25zZS5zZXJ2aWNlX3RpZXI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSZXNwb25zZUFubm90YXRpb25BZGRlZENodW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICBpZiAodmFsdWUuYW5ub3RhdGlvbi50eXBlID09PSBcInVybF9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcInVybFwiLFxuICAgICAgICAgICAgICAgICAgaWQ6IChfcSA9IChfcCA9IChfbyA9IHNlbGYuY29uZmlnKS5nZW5lcmF0ZUlkKSA9PSBudWxsID8gdm9pZCAwIDogX3AuY2FsbChfbykpICE9IG51bGwgPyBfcSA6IGdlbmVyYXRlSWQyKCksXG4gICAgICAgICAgICAgICAgICB1cmw6IHZhbHVlLmFubm90YXRpb24udXJsLFxuICAgICAgICAgICAgICAgICAgdGl0bGU6IHZhbHVlLmFubm90YXRpb24udGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5hbm5vdGF0aW9uLnR5cGUgPT09IFwiZmlsZV9jaXRhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwic291cmNlXCIsXG4gICAgICAgICAgICAgICAgICBzb3VyY2VUeXBlOiBcImRvY3VtZW50XCIsXG4gICAgICAgICAgICAgICAgICBpZDogKF90ID0gKF9zID0gKF9yID0gc2VsZi5jb25maWcpLmdlbmVyYXRlSWQpID09IG51bGwgPyB2b2lkIDAgOiBfcy5jYWxsKF9yKSkgIT0gbnVsbCA/IF90IDogZ2VuZXJhdGVJZDIoKSxcbiAgICAgICAgICAgICAgICAgIG1lZGlhVHlwZTogXCJ0ZXh0L3BsYWluXCIsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogKF92ID0gKF91ID0gdmFsdWUuYW5ub3RhdGlvbi5xdW90ZSkgIT0gbnVsbCA/IF91IDogdmFsdWUuYW5ub3RhdGlvbi5maWxlbmFtZSkgIT0gbnVsbCA/IF92IDogXCJEb2N1bWVudFwiLFxuICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IChfdyA9IHZhbHVlLmFubm90YXRpb24uZmlsZW5hbWUpICE9IG51bGwgPyBfdyA6IHZhbHVlLmFubm90YXRpb24uZmlsZV9pZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzRXJyb3JDaHVuayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHsgdHlwZTogXCJlcnJvclwiLCBlcnJvcjogdmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmbHVzaChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlck1ldGFkYXRhID0ge1xuICAgICAgICAgICAgICBvcGVuYWk6IHtcbiAgICAgICAgICAgICAgICByZXNwb25zZUlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAobG9ncHJvYnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBwcm92aWRlck1ldGFkYXRhLm9wZW5haS5sb2dwcm9icyA9IGxvZ3Byb2JzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcnZpY2VUaWVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXJNZXRhZGF0YS5vcGVuYWkuc2VydmljZVRpZXIgPSBzZXJ2aWNlVGllcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZmluaXNoXCIsXG4gICAgICAgICAgICAgIGZpbmlzaFJlYXNvbixcbiAgICAgICAgICAgICAgdXNhZ2UsXG4gICAgICAgICAgICAgIHByb3ZpZGVyTWV0YWRhdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgICByZXF1ZXN0OiB7IGJvZHkgfSxcbiAgICAgIHJlc3BvbnNlOiB7IGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyB9XG4gICAgfTtcbiAgfVxufTtcbnZhciB1c2FnZVNjaGVtYTIgPSB6MTYub2JqZWN0KHtcbiAgaW5wdXRfdG9rZW5zOiB6MTYubnVtYmVyKCksXG4gIGlucHV0X3Rva2Vuc19kZXRhaWxzOiB6MTYub2JqZWN0KHsgY2FjaGVkX3Rva2VuczogejE2Lm51bWJlcigpLm51bGxpc2goKSB9KS5udWxsaXNoKCksXG4gIG91dHB1dF90b2tlbnM6IHoxNi5udW1iZXIoKSxcbiAgb3V0cHV0X3Rva2Vuc19kZXRhaWxzOiB6MTYub2JqZWN0KHsgcmVhc29uaW5nX3Rva2VuczogejE2Lm51bWJlcigpLm51bGxpc2goKSB9KS5udWxsaXNoKClcbn0pO1xudmFyIHRleHREZWx0YUNodW5rU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwicmVzcG9uc2Uub3V0cHV0X3RleHQuZGVsdGFcIiksXG4gIGl0ZW1faWQ6IHoxNi5zdHJpbmcoKSxcbiAgZGVsdGE6IHoxNi5zdHJpbmcoKSxcbiAgbG9ncHJvYnM6IExPR1BST0JTX1NDSEVNQS5udWxsaXNoKClcbn0pO1xudmFyIGVycm9yQ2h1bmtTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJlcnJvclwiKSxcbiAgY29kZTogejE2LnN0cmluZygpLFxuICBtZXNzYWdlOiB6MTYuc3RyaW5nKCksXG4gIHBhcmFtOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICBzZXF1ZW5jZV9udW1iZXI6IHoxNi5udW1iZXIoKVxufSk7XG52YXIgcmVzcG9uc2VGaW5pc2hlZENodW5rU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5lbnVtKFtcInJlc3BvbnNlLmNvbXBsZXRlZFwiLCBcInJlc3BvbnNlLmluY29tcGxldGVcIl0pLFxuICByZXNwb25zZTogejE2Lm9iamVjdCh7XG4gICAgaW5jb21wbGV0ZV9kZXRhaWxzOiB6MTYub2JqZWN0KHsgcmVhc29uOiB6MTYuc3RyaW5nKCkgfSkubnVsbGlzaCgpLFxuICAgIHVzYWdlOiB1c2FnZVNjaGVtYTIsXG4gICAgc2VydmljZV90aWVyOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpXG4gIH0pXG59KTtcbnZhciByZXNwb25zZUNyZWF0ZWRDaHVua1NjaGVtYSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcInJlc3BvbnNlLmNyZWF0ZWRcIiksXG4gIHJlc3BvbnNlOiB6MTYub2JqZWN0KHtcbiAgICBpZDogejE2LnN0cmluZygpLFxuICAgIGNyZWF0ZWRfYXQ6IHoxNi5udW1iZXIoKSxcbiAgICBtb2RlbDogejE2LnN0cmluZygpLFxuICAgIHNlcnZpY2VfdGllcjogejE2LnN0cmluZygpLm51bGxpc2goKVxuICB9KVxufSk7XG52YXIgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZFwiKSxcbiAgb3V0cHV0X2luZGV4OiB6MTYubnVtYmVyKCksXG4gIGl0ZW06IHoxNi5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwibWVzc2FnZVwiKSxcbiAgICAgIGlkOiB6MTYuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwicmVhc29uaW5nXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIGVuY3J5cHRlZF9jb250ZW50OiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgfSksXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImZ1bmN0aW9uX2NhbGxcIiksXG4gICAgICBpZDogejE2LnN0cmluZygpLFxuICAgICAgY2FsbF9pZDogejE2LnN0cmluZygpLFxuICAgICAgbmFtZTogejE2LnN0cmluZygpLFxuICAgICAgYXJndW1lbnRzOiB6MTYuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwid2ViX3NlYXJjaF9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIHN0YXR1czogejE2LnN0cmluZygpLFxuICAgICAgYWN0aW9uOiB6MTYub2JqZWN0KHtcbiAgICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJzZWFyY2hcIiksXG4gICAgICAgIHF1ZXJ5OiB6MTYuc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgICAgfSkubnVsbGlzaCgpXG4gICAgfSksXG4gICAgejE2Lm9iamVjdCh7XG4gICAgICB0eXBlOiB6MTYubGl0ZXJhbChcImNvbXB1dGVyX2NhbGxcIiksXG4gICAgICBpZDogejE2LnN0cmluZygpLFxuICAgICAgc3RhdHVzOiB6MTYuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiZmlsZV9zZWFyY2hfY2FsbFwiKSxcbiAgICAgIGlkOiB6MTYuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiaW1hZ2VfZ2VuZXJhdGlvbl9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKVxuICAgIH0pLFxuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJjb2RlX2ludGVycHJldGVyX2NhbGxcIiksXG4gICAgICBpZDogejE2LnN0cmluZygpLFxuICAgICAgY29udGFpbmVyX2lkOiB6MTYuc3RyaW5nKCksXG4gICAgICBjb2RlOiB6MTYuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICAgIG91dHB1dHM6IHoxNi5hcnJheShcbiAgICAgICAgejE2LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgICAgICAgIHoxNi5vYmplY3QoeyB0eXBlOiB6MTYubGl0ZXJhbChcImxvZ3NcIiksIGxvZ3M6IHoxNi5zdHJpbmcoKSB9KSxcbiAgICAgICAgICB6MTYub2JqZWN0KHsgdHlwZTogejE2LmxpdGVyYWwoXCJpbWFnZVwiKSwgdXJsOiB6MTYuc3RyaW5nKCkgfSlcbiAgICAgICAgXSlcbiAgICAgICkubnVsbGFibGUoKSxcbiAgICAgIHN0YXR1czogejE2LnN0cmluZygpXG4gICAgfSlcbiAgXSlcbn0pO1xudmFyIHJlc3BvbnNlT3V0cHV0SXRlbURvbmVTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lXCIpLFxuICBvdXRwdXRfaW5kZXg6IHoxNi5udW1iZXIoKSxcbiAgaXRlbTogejE2LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJtZXNzYWdlXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKVxuICAgIH0pLFxuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJyZWFzb25pbmdcIiksXG4gICAgICBpZDogejE2LnN0cmluZygpLFxuICAgICAgZW5jcnlwdGVkX2NvbnRlbnQ6IHoxNi5zdHJpbmcoKS5udWxsaXNoKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiZnVuY3Rpb25fY2FsbFwiKSxcbiAgICAgIGlkOiB6MTYuc3RyaW5nKCksXG4gICAgICBjYWxsX2lkOiB6MTYuc3RyaW5nKCksXG4gICAgICBuYW1lOiB6MTYuc3RyaW5nKCksXG4gICAgICBhcmd1bWVudHM6IHoxNi5zdHJpbmcoKSxcbiAgICAgIHN0YXR1czogejE2LmxpdGVyYWwoXCJjb21wbGV0ZWRcIilcbiAgICB9KSxcbiAgICBjb2RlSW50ZXJwcmV0ZXJDYWxsSXRlbSxcbiAgICBpbWFnZUdlbmVyYXRpb25DYWxsSXRlbSxcbiAgICB3ZWJTZWFyY2hDYWxsSXRlbSxcbiAgICBmaWxlU2VhcmNoQ2FsbEl0ZW0sXG4gICAgbG9jYWxTaGVsbENhbGxJdGVtLFxuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJjb21wdXRlcl9jYWxsXCIpLFxuICAgICAgaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIHN0YXR1czogejE2LmxpdGVyYWwoXCJjb21wbGV0ZWRcIilcbiAgICB9KVxuICBdKVxufSk7XG52YXIgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YVNjaGVtYSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcInJlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhXCIpLFxuICBpdGVtX2lkOiB6MTYuc3RyaW5nKCksXG4gIG91dHB1dF9pbmRleDogejE2Lm51bWJlcigpLFxuICBkZWx0YTogejE2LnN0cmluZygpXG59KTtcbnZhciByZXNwb25zZUNvZGVJbnRlcnByZXRlckNhbGxDb2RlRGVsdGFTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJyZXNwb25zZS5jb2RlX2ludGVycHJldGVyX2NhbGxfY29kZS5kZWx0YVwiKSxcbiAgaXRlbV9pZDogejE2LnN0cmluZygpLFxuICBvdXRwdXRfaW5kZXg6IHoxNi5udW1iZXIoKSxcbiAgZGVsdGE6IHoxNi5zdHJpbmcoKVxufSk7XG52YXIgcmVzcG9uc2VDb2RlSW50ZXJwcmV0ZXJDYWxsQ29kZURvbmVTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJyZXNwb25zZS5jb2RlX2ludGVycHJldGVyX2NhbGxfY29kZS5kb25lXCIpLFxuICBpdGVtX2lkOiB6MTYuc3RyaW5nKCksXG4gIG91dHB1dF9pbmRleDogejE2Lm51bWJlcigpLFxuICBjb2RlOiB6MTYuc3RyaW5nKClcbn0pO1xudmFyIHJlc3BvbnNlQW5ub3RhdGlvbkFkZGVkU2NoZW1hID0gejE2Lm9iamVjdCh7XG4gIHR5cGU6IHoxNi5saXRlcmFsKFwicmVzcG9uc2Uub3V0cHV0X3RleHQuYW5ub3RhdGlvbi5hZGRlZFwiKSxcbiAgYW5ub3RhdGlvbjogejE2LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgIHoxNi5vYmplY3Qoe1xuICAgICAgdHlwZTogejE2LmxpdGVyYWwoXCJ1cmxfY2l0YXRpb25cIiksXG4gICAgICB1cmw6IHoxNi5zdHJpbmcoKSxcbiAgICAgIHRpdGxlOiB6MTYuc3RyaW5nKClcbiAgICB9KSxcbiAgICB6MTYub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoxNi5saXRlcmFsKFwiZmlsZV9jaXRhdGlvblwiKSxcbiAgICAgIGZpbGVfaWQ6IHoxNi5zdHJpbmcoKSxcbiAgICAgIGZpbGVuYW1lOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICAgICAgaW5kZXg6IHoxNi5udW1iZXIoKS5udWxsaXNoKCksXG4gICAgICBzdGFydF9pbmRleDogejE2Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgIGVuZF9pbmRleDogejE2Lm51bWJlcigpLm51bGxpc2goKSxcbiAgICAgIHF1b3RlOiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpXG4gICAgfSlcbiAgXSlcbn0pO1xudmFyIHJlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVBhcnRBZGRlZFNjaGVtYSA9IHoxNi5vYmplY3Qoe1xuICB0eXBlOiB6MTYubGl0ZXJhbChcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3BhcnQuYWRkZWRcIiksXG4gIGl0ZW1faWQ6IHoxNi5zdHJpbmcoKSxcbiAgc3VtbWFyeV9pbmRleDogejE2Lm51bWJlcigpXG59KTtcbnZhciByZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlUZXh0RGVsdGFTY2hlbWEgPSB6MTYub2JqZWN0KHtcbiAgdHlwZTogejE2LmxpdGVyYWwoXCJyZXNwb25zZS5yZWFzb25pbmdfc3VtbWFyeV90ZXh0LmRlbHRhXCIpLFxuICBpdGVtX2lkOiB6MTYuc3RyaW5nKCksXG4gIHN1bW1hcnlfaW5kZXg6IHoxNi5udW1iZXIoKSxcbiAgZGVsdGE6IHoxNi5zdHJpbmcoKVxufSk7XG52YXIgb3BlbmFpUmVzcG9uc2VzQ2h1bmtTY2hlbWEgPSB6MTYudW5pb24oW1xuICB0ZXh0RGVsdGFDaHVua1NjaGVtYSxcbiAgcmVzcG9uc2VGaW5pc2hlZENodW5rU2NoZW1hLFxuICByZXNwb25zZUNyZWF0ZWRDaHVua1NjaGVtYSxcbiAgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRTY2hlbWEsXG4gIHJlc3BvbnNlT3V0cHV0SXRlbURvbmVTY2hlbWEsXG4gIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFTY2hlbWEsXG4gIHJlc3BvbnNlQ29kZUludGVycHJldGVyQ2FsbENvZGVEZWx0YVNjaGVtYSxcbiAgcmVzcG9uc2VDb2RlSW50ZXJwcmV0ZXJDYWxsQ29kZURvbmVTY2hlbWEsXG4gIHJlc3BvbnNlQW5ub3RhdGlvbkFkZGVkU2NoZW1hLFxuICByZXNwb25zZVJlYXNvbmluZ1N1bW1hcnlQYXJ0QWRkZWRTY2hlbWEsXG4gIHJlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVRleHREZWx0YVNjaGVtYSxcbiAgZXJyb3JDaHVua1NjaGVtYSxcbiAgejE2Lm9iamVjdCh7IHR5cGU6IHoxNi5zdHJpbmcoKSB9KS5sb29zZSgpXG4gIC8vIGZhbGxiYWNrIGZvciB1bmtub3duIGNodW5rc1xuXSk7XG5mdW5jdGlvbiBpc1RleHREZWx0YUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLm91dHB1dF90ZXh0LmRlbHRhXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlT3V0cHV0SXRlbURvbmVDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlT3V0cHV0SXRlbURvbmVSZWFzb25pbmdDaHVuayhjaHVuaykge1xuICByZXR1cm4gaXNSZXNwb25zZU91dHB1dEl0ZW1Eb25lQ2h1bmsoY2h1bmspICYmIGNodW5rLml0ZW0udHlwZSA9PT0gXCJyZWFzb25pbmdcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VGaW5pc2hlZENodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmNvbXBsZXRlZFwiIHx8IGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UuaW5jb21wbGV0ZVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUNyZWF0ZWRDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5jcmVhdGVkXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUNvZGVJbnRlcnByZXRlckNhbGxDb2RlRGVsdGFDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5jb2RlX2ludGVycHJldGVyX2NhbGxfY29kZS5kZWx0YVwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZUNvZGVJbnRlcnByZXRlckNhbGxDb2RlRG9uZUNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLmNvZGVfaW50ZXJwcmV0ZXJfY2FsbF9jb2RlLmRvbmVcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZFwiO1xufVxuZnVuY3Rpb24gaXNSZXNwb25zZU91dHB1dEl0ZW1BZGRlZFJlYXNvbmluZ0NodW5rKGNodW5rKSB7XG4gIHJldHVybiBpc1Jlc3BvbnNlT3V0cHV0SXRlbUFkZGVkQ2h1bmsoY2h1bmspICYmIGNodW5rLml0ZW0udHlwZSA9PT0gXCJyZWFzb25pbmdcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VBbm5vdGF0aW9uQWRkZWRDaHVuayhjaHVuaykge1xuICByZXR1cm4gY2h1bmsudHlwZSA9PT0gXCJyZXNwb25zZS5vdXRwdXRfdGV4dC5hbm5vdGF0aW9uLmFkZGVkXCI7XG59XG5mdW5jdGlvbiBpc1Jlc3BvbnNlUmVhc29uaW5nU3VtbWFyeVBhcnRBZGRlZENodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcInJlc3BvbnNlLnJlYXNvbmluZ19zdW1tYXJ5X3BhcnQuYWRkZWRcIjtcbn1cbmZ1bmN0aW9uIGlzUmVzcG9uc2VSZWFzb25pbmdTdW1tYXJ5VGV4dERlbHRhQ2h1bmsoY2h1bmspIHtcbiAgcmV0dXJuIGNodW5rLnR5cGUgPT09IFwicmVzcG9uc2UucmVhc29uaW5nX3N1bW1hcnlfdGV4dC5kZWx0YVwiO1xufVxuZnVuY3Rpb24gaXNFcnJvckNodW5rKGNodW5rKSB7XG4gIHJldHVybiBjaHVuay50eXBlID09PSBcImVycm9yXCI7XG59XG5mdW5jdGlvbiBnZXRSZXNwb25zZXNNb2RlbENvbmZpZyhtb2RlbElkKSB7XG4gIGNvbnN0IHN1cHBvcnRzRmxleFByb2Nlc3NpbmcyID0gbW9kZWxJZC5zdGFydHNXaXRoKFwibzNcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwibzQtbWluaVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSAmJiAhbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtY2hhdFwiKTtcbiAgY29uc3Qgc3VwcG9ydHNQcmlvcml0eVByb2Nlc3NpbmcyID0gbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTRcIikgfHwgbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtbWluaVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNVwiKSAmJiAhbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtbmFub1wiKSAmJiAhbW9kZWxJZC5zdGFydHNXaXRoKFwiZ3B0LTUtY2hhdFwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJvM1wiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJvNC1taW5pXCIpO1xuICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICByZXF1aXJlZEF1dG9UcnVuY2F0aW9uOiBmYWxzZSxcbiAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJzeXN0ZW1cIixcbiAgICBzdXBwb3J0c0ZsZXhQcm9jZXNzaW5nOiBzdXBwb3J0c0ZsZXhQcm9jZXNzaW5nMixcbiAgICBzdXBwb3J0c1ByaW9yaXR5UHJvY2Vzc2luZzogc3VwcG9ydHNQcmlvcml0eVByb2Nlc3NpbmcyXG4gIH07XG4gIGlmIChtb2RlbElkLnN0YXJ0c1dpdGgoXCJncHQtNS1jaGF0XCIpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmRlZmF1bHRzLFxuICAgICAgaXNSZWFzb25pbmdNb2RlbDogZmFsc2VcbiAgICB9O1xuICB9XG4gIGlmIChtb2RlbElkLnN0YXJ0c1dpdGgoXCJvXCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImdwdC01XCIpIHx8IG1vZGVsSWQuc3RhcnRzV2l0aChcImNvZGV4LVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJjb21wdXRlci11c2VcIikpIHtcbiAgICBpZiAobW9kZWxJZC5zdGFydHNXaXRoKFwibzEtbWluaVwiKSB8fCBtb2RlbElkLnN0YXJ0c1dpdGgoXCJvMS1wcmV2aWV3XCIpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5kZWZhdWx0cyxcbiAgICAgICAgaXNSZWFzb25pbmdNb2RlbDogdHJ1ZSxcbiAgICAgICAgc3lzdGVtTWVzc2FnZU1vZGU6IFwicmVtb3ZlXCJcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5kZWZhdWx0cyxcbiAgICAgIGlzUmVhc29uaW5nTW9kZWw6IHRydWUsXG4gICAgICBzeXN0ZW1NZXNzYWdlTW9kZTogXCJkZXZlbG9wZXJcIlxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICAuLi5kZWZhdWx0cyxcbiAgICBpc1JlYXNvbmluZ01vZGVsOiBmYWxzZVxuICB9O1xufVxudmFyIG9wZW5haVJlc3BvbnNlc1Byb3ZpZGVyT3B0aW9uc1NjaGVtYSA9IHoxNi5vYmplY3Qoe1xuICBpbmNsdWRlOiB6MTYuYXJyYXkoXG4gICAgejE2LmVudW0oW1xuICAgICAgXCJyZWFzb25pbmcuZW5jcnlwdGVkX2NvbnRlbnRcIixcbiAgICAgIFwiZmlsZV9zZWFyY2hfY2FsbC5yZXN1bHRzXCIsXG4gICAgICBcIm1lc3NhZ2Uub3V0cHV0X3RleHQubG9ncHJvYnNcIlxuICAgIF0pXG4gICkubnVsbGlzaCgpLFxuICBpbnN0cnVjdGlvbnM6IHoxNi5zdHJpbmcoKS5udWxsaXNoKCksXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9mIHRoZSB0b2tlbnMuXG4gICAqXG4gICAqIFNldHRpbmcgdG8gdHJ1ZSB3aWxsIHJldHVybiB0aGUgbG9nIHByb2JhYmlsaXRpZXMgb2YgdGhlIHRva2VucyB0aGF0XG4gICAqIHdlcmUgZ2VuZXJhdGVkLlxuICAgKlxuICAgKiBTZXR0aW5nIHRvIGEgbnVtYmVyIHdpbGwgcmV0dXJuIHRoZSBsb2cgcHJvYmFiaWxpdGllcyBvZiB0aGUgdG9wIG5cbiAgICogdG9rZW5zIHRoYXQgd2VyZSBnZW5lcmF0ZWQuXG4gICAqXG4gICAqIEBzZWUgaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvYXBpLXJlZmVyZW5jZS9yZXNwb25zZXMvY3JlYXRlXG4gICAqIEBzZWUgaHR0cHM6Ly9jb29rYm9vay5vcGVuYWkuY29tL2V4YW1wbGVzL3VzaW5nX2xvZ3Byb2JzXG4gICAqL1xuICBsb2dwcm9iczogejE2LnVuaW9uKFt6MTYuYm9vbGVhbigpLCB6MTYubnVtYmVyKCkubWluKDEpLm1heChUT1BfTE9HUFJPQlNfTUFYKV0pLm9wdGlvbmFsKCksXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG90YWwgY2FsbHMgdG8gYnVpbHQtaW4gdG9vbHMgdGhhdCBjYW4gYmUgcHJvY2Vzc2VkIGluIGEgcmVzcG9uc2UuXG4gICAqIFRoaXMgbWF4aW11bSBudW1iZXIgYXBwbGllcyBhY3Jvc3MgYWxsIGJ1aWx0LWluIHRvb2wgY2FsbHMsIG5vdCBwZXIgaW5kaXZpZHVhbCB0b29sLlxuICAgKiBBbnkgZnVydGhlciBhdHRlbXB0cyB0byBjYWxsIGEgdG9vbCBieSB0aGUgbW9kZWwgd2lsbCBiZSBpZ25vcmVkLlxuICAgKi9cbiAgbWF4VG9vbENhbGxzOiB6MTYubnVtYmVyKCkubnVsbGlzaCgpLFxuICBtZXRhZGF0YTogejE2LmFueSgpLm51bGxpc2goKSxcbiAgcGFyYWxsZWxUb29sQ2FsbHM6IHoxNi5ib29sZWFuKCkubnVsbGlzaCgpLFxuICBwcmV2aW91c1Jlc3BvbnNlSWQ6IHoxNi5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHByb21wdENhY2hlS2V5OiB6MTYuc3RyaW5nKCkubnVsbGlzaCgpLFxuICByZWFzb25pbmdFZmZvcnQ6IHoxNi5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHJlYXNvbmluZ1N1bW1hcnk6IHoxNi5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHNhZmV0eUlkZW50aWZpZXI6IHoxNi5zdHJpbmcoKS5udWxsaXNoKCksXG4gIHNlcnZpY2VUaWVyOiB6MTYuZW51bShbXCJhdXRvXCIsIFwiZmxleFwiLCBcInByaW9yaXR5XCJdKS5udWxsaXNoKCksXG4gIHN0b3JlOiB6MTYuYm9vbGVhbigpLm51bGxpc2goKSxcbiAgc3RyaWN0SnNvblNjaGVtYTogejE2LmJvb2xlYW4oKS5udWxsaXNoKCksXG4gIHRleHRWZXJib3NpdHk6IHoxNi5lbnVtKFtcImxvd1wiLCBcIm1lZGl1bVwiLCBcImhpZ2hcIl0pLm51bGxpc2goKSxcbiAgdXNlcjogejE2LnN0cmluZygpLm51bGxpc2goKVxufSk7XG5cbi8vIHNyYy9zcGVlY2gvb3BlbmFpLXNwZWVjaC1tb2RlbC50c1xuaW1wb3J0IHtcbiAgY29tYmluZUhlYWRlcnMgYXMgY29tYmluZUhlYWRlcnM2LFxuICBjcmVhdGVCaW5hcnlSZXNwb25zZUhhbmRsZXIsXG4gIHBhcnNlUHJvdmlkZXJPcHRpb25zIGFzIHBhcnNlUHJvdmlkZXJPcHRpb25zNixcbiAgcG9zdEpzb25Ub0FwaSBhcyBwb3N0SnNvblRvQXBpNlxufSBmcm9tIFwiQGFpLXNkay9wcm92aWRlci11dGlsc1wiO1xuaW1wb3J0IHsgeiBhcyB6MTcgfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgT3BlbkFJUHJvdmlkZXJPcHRpb25zU2NoZW1hID0gejE3Lm9iamVjdCh7XG4gIGluc3RydWN0aW9uczogejE3LnN0cmluZygpLm51bGxpc2goKSxcbiAgc3BlZWQ6IHoxNy5udW1iZXIoKS5taW4oMC4yNSkubWF4KDQpLmRlZmF1bHQoMSkubnVsbGlzaCgpXG59KTtcbnZhciBPcGVuQUlTcGVlY2hNb2RlbCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IobW9kZWxJZCwgY29uZmlnKSB7XG4gICAgdGhpcy5tb2RlbElkID0gbW9kZWxJZDtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnNwZWNpZmljYXRpb25WZXJzaW9uID0gXCJ2MlwiO1xuICB9XG4gIGdldCBwcm92aWRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvdmlkZXI7XG4gIH1cbiAgYXN5bmMgZ2V0QXJncyh7XG4gICAgdGV4dCxcbiAgICB2b2ljZSA9IFwiYWxsb3lcIixcbiAgICBvdXRwdXRGb3JtYXQgPSBcIm1wM1wiLFxuICAgIHNwZWVkLFxuICAgIGluc3RydWN0aW9ucyxcbiAgICBsYW5ndWFnZSxcbiAgICBwcm92aWRlck9wdGlvbnNcbiAgfSkge1xuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgY29uc3Qgb3BlbkFJT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zNih7XG4gICAgICBwcm92aWRlcjogXCJvcGVuYWlcIixcbiAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgIHNjaGVtYTogT3BlbkFJUHJvdmlkZXJPcHRpb25zU2NoZW1hXG4gICAgfSk7XG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICBtb2RlbDogdGhpcy5tb2RlbElkLFxuICAgICAgaW5wdXQ6IHRleHQsXG4gICAgICB2b2ljZSxcbiAgICAgIHJlc3BvbnNlX2Zvcm1hdDogXCJtcDNcIixcbiAgICAgIHNwZWVkLFxuICAgICAgaW5zdHJ1Y3Rpb25zXG4gICAgfTtcbiAgICBpZiAob3V0cHV0Rm9ybWF0KSB7XG4gICAgICBpZiAoW1wibXAzXCIsIFwib3B1c1wiLCBcImFhY1wiLCBcImZsYWNcIiwgXCJ3YXZcIiwgXCJwY21cIl0uaW5jbHVkZXMob3V0cHV0Rm9ybWF0KSkge1xuICAgICAgICByZXF1ZXN0Qm9keS5yZXNwb25zZV9mb3JtYXQgPSBvdXRwdXRGb3JtYXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgICBzZXR0aW5nOiBcIm91dHB1dEZvcm1hdFwiLFxuICAgICAgICAgIGRldGFpbHM6IGBVbnN1cHBvcnRlZCBvdXRwdXQgZm9ybWF0OiAke291dHB1dEZvcm1hdH0uIFVzaW5nIG1wMyBpbnN0ZWFkLmBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcGVuQUlPcHRpb25zKSB7XG4gICAgICBjb25zdCBzcGVlY2hNb2RlbE9wdGlvbnMgPSB7fTtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHNwZWVjaE1vZGVsT3B0aW9ucykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHNwZWVjaE1vZGVsT3B0aW9uc1trZXldO1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHJlcXVlc3RCb2R5W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobGFuZ3VhZ2UpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goe1xuICAgICAgICB0eXBlOiBcInVuc3VwcG9ydGVkLXNldHRpbmdcIixcbiAgICAgICAgc2V0dGluZzogXCJsYW5ndWFnZVwiLFxuICAgICAgICBkZXRhaWxzOiBgT3BlbkFJIHNwZWVjaCBtb2RlbHMgZG8gbm90IHN1cHBvcnQgbGFuZ3VhZ2Ugc2VsZWN0aW9uLiBMYW5ndWFnZSBwYXJhbWV0ZXIgXCIke2xhbmd1YWdlfVwiIHdhcyBpZ25vcmVkLmBcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWVzdEJvZHksXG4gICAgICB3YXJuaW5nc1xuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSAoX2MgPSAoX2IgPSAoX2EgPSB0aGlzLmNvbmZpZy5faW50ZXJuYWwpID09IG51bGwgPyB2b2lkIDAgOiBfYS5jdXJyZW50RGF0ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EpKSAhPSBudWxsID8gX2MgOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgICBjb25zdCB7IHJlcXVlc3RCb2R5LCB3YXJuaW5ncyB9ID0gYXdhaXQgdGhpcy5nZXRBcmdzKG9wdGlvbnMpO1xuICAgIGNvbnN0IHtcbiAgICAgIHZhbHVlOiBhdWRpbyxcbiAgICAgIHJlc3BvbnNlSGVhZGVycyxcbiAgICAgIHJhd1ZhbHVlOiByYXdSZXNwb25zZVxuICAgIH0gPSBhd2FpdCBwb3N0SnNvblRvQXBpNih7XG4gICAgICB1cmw6IHRoaXMuY29uZmlnLnVybCh7XG4gICAgICAgIHBhdGg6IFwiL2F1ZGlvL3NwZWVjaFwiLFxuICAgICAgICBtb2RlbElkOiB0aGlzLm1vZGVsSWRcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogY29tYmluZUhlYWRlcnM2KHRoaXMuY29uZmlnLmhlYWRlcnMoKSwgb3B0aW9ucy5oZWFkZXJzKSxcbiAgICAgIGJvZHk6IHJlcXVlc3RCb2R5LFxuICAgICAgZmFpbGVkUmVzcG9uc2VIYW5kbGVyOiBvcGVuYWlGYWlsZWRSZXNwb25zZUhhbmRsZXIsXG4gICAgICBzdWNjZXNzZnVsUmVzcG9uc2VIYW5kbGVyOiBjcmVhdGVCaW5hcnlSZXNwb25zZUhhbmRsZXIoKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGF1ZGlvLFxuICAgICAgd2FybmluZ3MsXG4gICAgICByZXF1ZXN0OiB7XG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHRpbWVzdGFtcDogY3VycmVudERhdGUsXG4gICAgICAgIG1vZGVsSWQ6IHRoaXMubW9kZWxJZCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBib2R5OiByYXdSZXNwb25zZVxuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5cbi8vIHNyYy90cmFuc2NyaXB0aW9uL29wZW5haS10cmFuc2NyaXB0aW9uLW1vZGVsLnRzXG5pbXBvcnQge1xuICBjb21iaW5lSGVhZGVycyBhcyBjb21iaW5lSGVhZGVyczcsXG4gIGNvbnZlcnRCYXNlNjRUb1VpbnQ4QXJyYXksXG4gIGNyZWF0ZUpzb25SZXNwb25zZUhhbmRsZXIgYXMgY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjYsXG4gIG1lZGlhVHlwZVRvRXh0ZW5zaW9uLFxuICBwYXJzZVByb3ZpZGVyT3B0aW9ucyBhcyBwYXJzZVByb3ZpZGVyT3B0aW9uczcsXG4gIHBvc3RGb3JtRGF0YVRvQXBpXG59IGZyb20gXCJAYWktc2RrL3Byb3ZpZGVyLXV0aWxzXCI7XG5pbXBvcnQgeyB6IGFzIHoxOSB9IGZyb20gXCJ6b2QvdjRcIjtcblxuLy8gc3JjL3RyYW5zY3JpcHRpb24vb3BlbmFpLXRyYW5zY3JpcHRpb24tb3B0aW9ucy50c1xuaW1wb3J0IHsgeiBhcyB6MTggfSBmcm9tIFwiem9kL3Y0XCI7XG52YXIgb3BlbkFJVHJhbnNjcmlwdGlvblByb3ZpZGVyT3B0aW9ucyA9IHoxOC5vYmplY3Qoe1xuICAvKipcbiAgICogQWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byBpbmNsdWRlIGluIHRoZSB0cmFuc2NyaXB0aW9uIHJlc3BvbnNlLlxuICAgKi9cbiAgaW5jbHVkZTogejE4LmFycmF5KHoxOC5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFRoZSBsYW5ndWFnZSBvZiB0aGUgaW5wdXQgYXVkaW8gaW4gSVNPLTYzOS0xIGZvcm1hdC5cbiAgICovXG4gIGxhbmd1YWdlOiB6MTguc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsJ3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpbyBzZWdtZW50LlxuICAgKi9cbiAgcHJvbXB0OiB6MTguc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgLyoqXG4gICAqIFRoZSBzYW1wbGluZyB0ZW1wZXJhdHVyZSwgYmV0d2VlbiAwIGFuZCAxLlxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuICB0ZW1wZXJhdHVyZTogejE4Lm51bWJlcigpLm1pbigwKS5tYXgoMSkuZGVmYXVsdCgwKS5vcHRpb25hbCgpLFxuICAvKipcbiAgICogVGhlIHRpbWVzdGFtcCBncmFudWxhcml0aWVzIHRvIHBvcHVsYXRlIGZvciB0aGlzIHRyYW5zY3JpcHRpb24uXG4gICAqIEBkZWZhdWx0IFsnc2VnbWVudCddXG4gICAqL1xuICB0aW1lc3RhbXBHcmFudWxhcml0aWVzOiB6MTguYXJyYXkoejE4LmVudW0oW1wid29yZFwiLCBcInNlZ21lbnRcIl0pKS5kZWZhdWx0KFtcInNlZ21lbnRcIl0pLm9wdGlvbmFsKClcbn0pO1xuXG4vLyBzcmMvdHJhbnNjcmlwdGlvbi9vcGVuYWktdHJhbnNjcmlwdGlvbi1tb2RlbC50c1xudmFyIGxhbmd1YWdlTWFwID0ge1xuICBhZnJpa2FhbnM6IFwiYWZcIixcbiAgYXJhYmljOiBcImFyXCIsXG4gIGFybWVuaWFuOiBcImh5XCIsXG4gIGF6ZXJiYWlqYW5pOiBcImF6XCIsXG4gIGJlbGFydXNpYW46IFwiYmVcIixcbiAgYm9zbmlhbjogXCJic1wiLFxuICBidWxnYXJpYW46IFwiYmdcIixcbiAgY2F0YWxhbjogXCJjYVwiLFxuICBjaGluZXNlOiBcInpoXCIsXG4gIGNyb2F0aWFuOiBcImhyXCIsXG4gIGN6ZWNoOiBcImNzXCIsXG4gIGRhbmlzaDogXCJkYVwiLFxuICBkdXRjaDogXCJubFwiLFxuICBlbmdsaXNoOiBcImVuXCIsXG4gIGVzdG9uaWFuOiBcImV0XCIsXG4gIGZpbm5pc2g6IFwiZmlcIixcbiAgZnJlbmNoOiBcImZyXCIsXG4gIGdhbGljaWFuOiBcImdsXCIsXG4gIGdlcm1hbjogXCJkZVwiLFxuICBncmVlazogXCJlbFwiLFxuICBoZWJyZXc6IFwiaGVcIixcbiAgaGluZGk6IFwiaGlcIixcbiAgaHVuZ2FyaWFuOiBcImh1XCIsXG4gIGljZWxhbmRpYzogXCJpc1wiLFxuICBpbmRvbmVzaWFuOiBcImlkXCIsXG4gIGl0YWxpYW46IFwiaXRcIixcbiAgamFwYW5lc2U6IFwiamFcIixcbiAga2FubmFkYTogXCJrblwiLFxuICBrYXpha2g6IFwia2tcIixcbiAga29yZWFuOiBcImtvXCIsXG4gIGxhdHZpYW46IFwibHZcIixcbiAgbGl0aHVhbmlhbjogXCJsdFwiLFxuICBtYWNlZG9uaWFuOiBcIm1rXCIsXG4gIG1hbGF5OiBcIm1zXCIsXG4gIG1hcmF0aGk6IFwibXJcIixcbiAgbWFvcmk6IFwibWlcIixcbiAgbmVwYWxpOiBcIm5lXCIsXG4gIG5vcndlZ2lhbjogXCJub1wiLFxuICBwZXJzaWFuOiBcImZhXCIsXG4gIHBvbGlzaDogXCJwbFwiLFxuICBwb3J0dWd1ZXNlOiBcInB0XCIsXG4gIHJvbWFuaWFuOiBcInJvXCIsXG4gIHJ1c3NpYW46IFwicnVcIixcbiAgc2VyYmlhbjogXCJzclwiLFxuICBzbG92YWs6IFwic2tcIixcbiAgc2xvdmVuaWFuOiBcInNsXCIsXG4gIHNwYW5pc2g6IFwiZXNcIixcbiAgc3dhaGlsaTogXCJzd1wiLFxuICBzd2VkaXNoOiBcInN2XCIsXG4gIHRhZ2Fsb2c6IFwidGxcIixcbiAgdGFtaWw6IFwidGFcIixcbiAgdGhhaTogXCJ0aFwiLFxuICB0dXJraXNoOiBcInRyXCIsXG4gIHVrcmFpbmlhbjogXCJ1a1wiLFxuICB1cmR1OiBcInVyXCIsXG4gIHZpZXRuYW1lc2U6IFwidmlcIixcbiAgd2Vsc2g6IFwiY3lcIlxufTtcbnZhciBPcGVuQUlUcmFuc2NyaXB0aW9uTW9kZWwgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKG1vZGVsSWQsIGNvbmZpZykge1xuICAgIHRoaXMubW9kZWxJZCA9IG1vZGVsSWQ7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5zcGVjaWZpY2F0aW9uVmVyc2lvbiA9IFwidjJcIjtcbiAgfVxuICBnZXQgcHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLnByb3ZpZGVyO1xuICB9XG4gIGFzeW5jIGdldEFyZ3Moe1xuICAgIGF1ZGlvLFxuICAgIG1lZGlhVHlwZSxcbiAgICBwcm92aWRlck9wdGlvbnNcbiAgfSkge1xuICAgIGNvbnN0IHdhcm5pbmdzID0gW107XG4gICAgY29uc3Qgb3BlbkFJT3B0aW9ucyA9IGF3YWl0IHBhcnNlUHJvdmlkZXJPcHRpb25zNyh7XG4gICAgICBwcm92aWRlcjogXCJvcGVuYWlcIixcbiAgICAgIHByb3ZpZGVyT3B0aW9ucyxcbiAgICAgIHNjaGVtYTogb3BlbkFJVHJhbnNjcmlwdGlvblByb3ZpZGVyT3B0aW9uc1xuICAgIH0pO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgY29uc3QgYmxvYiA9IGF1ZGlvIGluc3RhbmNlb2YgVWludDhBcnJheSA/IG5ldyBCbG9iKFthdWRpb10pIDogbmV3IEJsb2IoW2NvbnZlcnRCYXNlNjRUb1VpbnQ4QXJyYXkoYXVkaW8pXSk7XG4gICAgZm9ybURhdGEuYXBwZW5kKFwibW9kZWxcIiwgdGhpcy5tb2RlbElkKTtcbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gbWVkaWFUeXBlVG9FeHRlbnNpb24obWVkaWFUeXBlKTtcbiAgICBmb3JtRGF0YS5hcHBlbmQoXG4gICAgICBcImZpbGVcIixcbiAgICAgIG5ldyBGaWxlKFtibG9iXSwgXCJhdWRpb1wiLCB7IHR5cGU6IG1lZGlhVHlwZSB9KSxcbiAgICAgIGBhdWRpby4ke2ZpbGVFeHRlbnNpb259YFxuICAgICk7XG4gICAgaWYgKG9wZW5BSU9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IHRyYW5zY3JpcHRpb25Nb2RlbE9wdGlvbnMgPSB7XG4gICAgICAgIGluY2x1ZGU6IG9wZW5BSU9wdGlvbnMuaW5jbHVkZSxcbiAgICAgICAgbGFuZ3VhZ2U6IG9wZW5BSU9wdGlvbnMubGFuZ3VhZ2UsXG4gICAgICAgIHByb21wdDogb3BlbkFJT3B0aW9ucy5wcm9tcHQsXG4gICAgICAgIC8vIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvYXVkaW8vY3JlYXRlVHJhbnNjcmlwdGlvbiNhdWRpb19jcmVhdGV0cmFuc2NyaXB0aW9uLXJlc3BvbnNlX2Zvcm1hdFxuICAgICAgICAvLyBwcmVmZXIgdmVyYm9zZV9qc29uIHRvIGdldCBzZWdtZW50cyBmb3IgbW9kZWxzIHRoYXQgc3VwcG9ydCBpdFxuICAgICAgICByZXNwb25zZV9mb3JtYXQ6IFtcbiAgICAgICAgICBcImdwdC00by10cmFuc2NyaWJlXCIsXG4gICAgICAgICAgXCJncHQtNG8tbWluaS10cmFuc2NyaWJlXCJcbiAgICAgICAgXS5pbmNsdWRlcyh0aGlzLm1vZGVsSWQpID8gXCJqc29uXCIgOiBcInZlcmJvc2VfanNvblwiLFxuICAgICAgICB0ZW1wZXJhdHVyZTogb3BlbkFJT3B0aW9ucy50ZW1wZXJhdHVyZSxcbiAgICAgICAgdGltZXN0YW1wX2dyYW51bGFyaXRpZXM6IG9wZW5BSU9wdGlvbnMudGltZXN0YW1wR3JhbnVsYXJpdGllc1xuICAgICAgfTtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRyYW5zY3JpcHRpb25Nb2RlbE9wdGlvbnMpKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGAke2tleX1bXWAsIFN0cmluZyhpdGVtKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZm9ybURhdGEsXG4gICAgICB3YXJuaW5nc1xuICAgIH07XG4gIH1cbiAgYXN5bmMgZG9HZW5lcmF0ZShvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IChfYyA9IChfYiA9IChfYSA9IHRoaXMuY29uZmlnLl9pbnRlcm5hbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmN1cnJlbnREYXRlKSA9PSBudWxsID8gdm9pZCAwIDogX2IuY2FsbChfYSkpICE9IG51bGwgPyBfYyA6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHsgZm9ybURhdGEsIHdhcm5pbmdzIH0gPSBhd2FpdCB0aGlzLmdldEFyZ3Mob3B0aW9ucyk7XG4gICAgY29uc3Qge1xuICAgICAgdmFsdWU6IHJlc3BvbnNlLFxuICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgcmF3VmFsdWU6IHJhd1Jlc3BvbnNlXG4gICAgfSA9IGF3YWl0IHBvc3RGb3JtRGF0YVRvQXBpKHtcbiAgICAgIHVybDogdGhpcy5jb25maWcudXJsKHtcbiAgICAgICAgcGF0aDogXCIvYXVkaW8vdHJhbnNjcmlwdGlvbnNcIixcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IGNvbWJpbmVIZWFkZXJzNyh0aGlzLmNvbmZpZy5oZWFkZXJzKCksIG9wdGlvbnMuaGVhZGVycyksXG4gICAgICBmb3JtRGF0YSxcbiAgICAgIGZhaWxlZFJlc3BvbnNlSGFuZGxlcjogb3BlbmFpRmFpbGVkUmVzcG9uc2VIYW5kbGVyLFxuICAgICAgc3VjY2Vzc2Z1bFJlc3BvbnNlSGFuZGxlcjogY3JlYXRlSnNvblJlc3BvbnNlSGFuZGxlcjYoXG4gICAgICAgIG9wZW5haVRyYW5zY3JpcHRpb25SZXNwb25zZVNjaGVtYVxuICAgICAgKSxcbiAgICAgIGFib3J0U2lnbmFsOiBvcHRpb25zLmFib3J0U2lnbmFsLFxuICAgICAgZmV0Y2g6IHRoaXMuY29uZmlnLmZldGNoXG4gICAgfSk7XG4gICAgY29uc3QgbGFuZ3VhZ2UgPSByZXNwb25zZS5sYW5ndWFnZSAhPSBudWxsICYmIHJlc3BvbnNlLmxhbmd1YWdlIGluIGxhbmd1YWdlTWFwID8gbGFuZ3VhZ2VNYXBbcmVzcG9uc2UubGFuZ3VhZ2VdIDogdm9pZCAwO1xuICAgIHJldHVybiB7XG4gICAgICB0ZXh0OiByZXNwb25zZS50ZXh0LFxuICAgICAgc2VnbWVudHM6IChfZyA9IChfZiA9IChfZCA9IHJlc3BvbnNlLnNlZ21lbnRzKSA9PSBudWxsID8gdm9pZCAwIDogX2QubWFwKChzZWdtZW50KSA9PiAoe1xuICAgICAgICB0ZXh0OiBzZWdtZW50LnRleHQsXG4gICAgICAgIHN0YXJ0U2Vjb25kOiBzZWdtZW50LnN0YXJ0LFxuICAgICAgICBlbmRTZWNvbmQ6IHNlZ21lbnQuZW5kXG4gICAgICB9KSkpICE9IG51bGwgPyBfZiA6IChfZSA9IHJlc3BvbnNlLndvcmRzKSA9PSBudWxsID8gdm9pZCAwIDogX2UubWFwKCh3b3JkKSA9PiAoe1xuICAgICAgICB0ZXh0OiB3b3JkLndvcmQsXG4gICAgICAgIHN0YXJ0U2Vjb25kOiB3b3JkLnN0YXJ0LFxuICAgICAgICBlbmRTZWNvbmQ6IHdvcmQuZW5kXG4gICAgICB9KSkpICE9IG51bGwgPyBfZyA6IFtdLFxuICAgICAgbGFuZ3VhZ2UsXG4gICAgICBkdXJhdGlvbkluU2Vjb25kczogKF9oID0gcmVzcG9uc2UuZHVyYXRpb24pICE9IG51bGwgPyBfaCA6IHZvaWQgMCxcbiAgICAgIHdhcm5pbmdzLFxuICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgdGltZXN0YW1wOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgbW9kZWxJZDogdGhpcy5tb2RlbElkLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGJvZHk6IHJhd1Jlc3BvbnNlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcbnZhciBvcGVuYWlUcmFuc2NyaXB0aW9uUmVzcG9uc2VTY2hlbWEgPSB6MTkub2JqZWN0KHtcbiAgdGV4dDogejE5LnN0cmluZygpLFxuICBsYW5ndWFnZTogejE5LnN0cmluZygpLm51bGxpc2goKSxcbiAgZHVyYXRpb246IHoxOS5udW1iZXIoKS5udWxsaXNoKCksXG4gIHdvcmRzOiB6MTkuYXJyYXkoXG4gICAgejE5Lm9iamVjdCh7XG4gICAgICB3b3JkOiB6MTkuc3RyaW5nKCksXG4gICAgICBzdGFydDogejE5Lm51bWJlcigpLFxuICAgICAgZW5kOiB6MTkubnVtYmVyKClcbiAgICB9KVxuICApLm51bGxpc2goKSxcbiAgc2VnbWVudHM6IHoxOS5hcnJheShcbiAgICB6MTkub2JqZWN0KHtcbiAgICAgIGlkOiB6MTkubnVtYmVyKCksXG4gICAgICBzZWVrOiB6MTkubnVtYmVyKCksXG4gICAgICBzdGFydDogejE5Lm51bWJlcigpLFxuICAgICAgZW5kOiB6MTkubnVtYmVyKCksXG4gICAgICB0ZXh0OiB6MTkuc3RyaW5nKCksXG4gICAgICB0b2tlbnM6IHoxOS5hcnJheSh6MTkubnVtYmVyKCkpLFxuICAgICAgdGVtcGVyYXR1cmU6IHoxOS5udW1iZXIoKSxcbiAgICAgIGF2Z19sb2dwcm9iOiB6MTkubnVtYmVyKCksXG4gICAgICBjb21wcmVzc2lvbl9yYXRpbzogejE5Lm51bWJlcigpLFxuICAgICAgbm9fc3BlZWNoX3Byb2I6IHoxOS5udW1iZXIoKVxuICAgIH0pXG4gICkubnVsbGlzaCgpXG59KTtcblxuLy8gc3JjL3ZlcnNpb24udHNcbnZhciBWRVJTSU9OID0gdHJ1ZSA/IFwiMi4wLjQ0XCIgOiBcIjAuMC4wLXRlc3RcIjtcblxuLy8gc3JjL29wZW5haS1wcm92aWRlci50c1xuZnVuY3Rpb24gY3JlYXRlT3BlbkFJKG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBiYXNlVVJMID0gKF9hID0gd2l0aG91dFRyYWlsaW5nU2xhc2goXG4gICAgbG9hZE9wdGlvbmFsU2V0dGluZyh7XG4gICAgICBzZXR0aW5nVmFsdWU6IG9wdGlvbnMuYmFzZVVSTCxcbiAgICAgIGVudmlyb25tZW50VmFyaWFibGVOYW1lOiBcIk9QRU5BSV9CQVNFX1VSTFwiXG4gICAgfSlcbiAgKSkgIT0gbnVsbCA/IF9hIDogXCJodHRwczovL2FwaS5vcGVuYWkuY29tL3YxXCI7XG4gIGNvbnN0IHByb3ZpZGVyTmFtZSA9IChfYiA9IG9wdGlvbnMubmFtZSkgIT0gbnVsbCA/IF9iIDogXCJvcGVuYWlcIjtcbiAgY29uc3QgZ2V0SGVhZGVycyA9ICgpID0+IHdpdGhVc2VyQWdlbnRTdWZmaXgoXG4gICAge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2xvYWRBcGlLZXkoe1xuICAgICAgICBhcGlLZXk6IG9wdGlvbnMuYXBpS2V5LFxuICAgICAgICBlbnZpcm9ubWVudFZhcmlhYmxlTmFtZTogXCJPUEVOQUlfQVBJX0tFWVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJPcGVuQUlcIlxuICAgICAgfSl9YCxcbiAgICAgIFwiT3BlbkFJLU9yZ2FuaXphdGlvblwiOiBvcHRpb25zLm9yZ2FuaXphdGlvbixcbiAgICAgIFwiT3BlbkFJLVByb2plY3RcIjogb3B0aW9ucy5wcm9qZWN0LFxuICAgICAgLi4ub3B0aW9ucy5oZWFkZXJzXG4gICAgfSxcbiAgICBgYWktc2RrL29wZW5haS8ke1ZFUlNJT059YFxuICApO1xuICBjb25zdCBjcmVhdGVDaGF0TW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSUNoYXRMYW5ndWFnZU1vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5jaGF0YCxcbiAgICB1cmw6ICh7IHBhdGggfSkgPT4gYCR7YmFzZVVSTH0ke3BhdGh9YCxcbiAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoXG4gIH0pO1xuICBjb25zdCBjcmVhdGVDb21wbGV0aW9uTW9kZWwgPSAobW9kZWxJZCkgPT4gbmV3IE9wZW5BSUNvbXBsZXRpb25MYW5ndWFnZU1vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5jb21wbGV0aW9uYCxcbiAgICB1cmw6ICh7IHBhdGggfSkgPT4gYCR7YmFzZVVSTH0ke3BhdGh9YCxcbiAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoXG4gIH0pO1xuICBjb25zdCBjcmVhdGVFbWJlZGRpbmdNb2RlbCA9IChtb2RlbElkKSA9PiBuZXcgT3BlbkFJRW1iZWRkaW5nTW9kZWwobW9kZWxJZCwge1xuICAgIHByb3ZpZGVyOiBgJHtwcm92aWRlck5hbWV9LmVtYmVkZGluZ2AsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlSW1hZ2VNb2RlbCA9IChtb2RlbElkKSA9PiBuZXcgT3BlbkFJSW1hZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgcHJvdmlkZXI6IGAke3Byb3ZpZGVyTmFtZX0uaW1hZ2VgLFxuICAgIHVybDogKHsgcGF0aCB9KSA9PiBgJHtiYXNlVVJMfSR7cGF0aH1gLFxuICAgIGhlYWRlcnM6IGdldEhlYWRlcnMsXG4gICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2hcbiAgfSk7XG4gIGNvbnN0IGNyZWF0ZVRyYW5zY3JpcHRpb25Nb2RlbCA9IChtb2RlbElkKSA9PiBuZXcgT3BlbkFJVHJhbnNjcmlwdGlvbk1vZGVsKG1vZGVsSWQsIHtcbiAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS50cmFuc2NyaXB0aW9uYCxcbiAgICB1cmw6ICh7IHBhdGggfSkgPT4gYCR7YmFzZVVSTH0ke3BhdGh9YCxcbiAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgIGZldGNoOiBvcHRpb25zLmZldGNoXG4gIH0pO1xuICBjb25zdCBjcmVhdGVTcGVlY2hNb2RlbCA9IChtb2RlbElkKSA9PiBuZXcgT3BlbkFJU3BlZWNoTW9kZWwobW9kZWxJZCwge1xuICAgIHByb3ZpZGVyOiBgJHtwcm92aWRlck5hbWV9LnNwZWVjaGAsXG4gICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgaGVhZGVyczogZ2V0SGVhZGVycyxcbiAgICBmZXRjaDogb3B0aW9ucy5mZXRjaFxuICB9KTtcbiAgY29uc3QgY3JlYXRlTGFuZ3VhZ2VNb2RlbCA9IChtb2RlbElkKSA9PiB7XG4gICAgaWYgKG5ldy50YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGUgT3BlbkFJIG1vZGVsIGZ1bmN0aW9uIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCB0aGUgbmV3IGtleXdvcmQuXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVSZXNwb25zZXNNb2RlbChtb2RlbElkKTtcbiAgfTtcbiAgY29uc3QgY3JlYXRlUmVzcG9uc2VzTW9kZWwgPSAobW9kZWxJZCkgPT4ge1xuICAgIHJldHVybiBuZXcgT3BlbkFJUmVzcG9uc2VzTGFuZ3VhZ2VNb2RlbChtb2RlbElkLCB7XG4gICAgICBwcm92aWRlcjogYCR7cHJvdmlkZXJOYW1lfS5yZXNwb25zZXNgLFxuICAgICAgdXJsOiAoeyBwYXRoIH0pID0+IGAke2Jhc2VVUkx9JHtwYXRofWAsXG4gICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzLFxuICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgICBmaWxlSWRQcmVmaXhlczogW1wiZmlsZS1cIl1cbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcHJvdmlkZXIgPSBmdW5jdGlvbihtb2RlbElkKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUxhbmd1YWdlTW9kZWwobW9kZWxJZCk7XG4gIH07XG4gIHByb3ZpZGVyLmxhbmd1YWdlTW9kZWwgPSBjcmVhdGVMYW5ndWFnZU1vZGVsO1xuICBwcm92aWRlci5jaGF0ID0gY3JlYXRlQ2hhdE1vZGVsO1xuICBwcm92aWRlci5jb21wbGV0aW9uID0gY3JlYXRlQ29tcGxldGlvbk1vZGVsO1xuICBwcm92aWRlci5yZXNwb25zZXMgPSBjcmVhdGVSZXNwb25zZXNNb2RlbDtcbiAgcHJvdmlkZXIuZW1iZWRkaW5nID0gY3JlYXRlRW1iZWRkaW5nTW9kZWw7XG4gIHByb3ZpZGVyLnRleHRFbWJlZGRpbmcgPSBjcmVhdGVFbWJlZGRpbmdNb2RlbDtcbiAgcHJvdmlkZXIudGV4dEVtYmVkZGluZ01vZGVsID0gY3JlYXRlRW1iZWRkaW5nTW9kZWw7XG4gIHByb3ZpZGVyLmltYWdlID0gY3JlYXRlSW1hZ2VNb2RlbDtcbiAgcHJvdmlkZXIuaW1hZ2VNb2RlbCA9IGNyZWF0ZUltYWdlTW9kZWw7XG4gIHByb3ZpZGVyLnRyYW5zY3JpcHRpb24gPSBjcmVhdGVUcmFuc2NyaXB0aW9uTW9kZWw7XG4gIHByb3ZpZGVyLnRyYW5zY3JpcHRpb25Nb2RlbCA9IGNyZWF0ZVRyYW5zY3JpcHRpb25Nb2RlbDtcbiAgcHJvdmlkZXIuc3BlZWNoID0gY3JlYXRlU3BlZWNoTW9kZWw7XG4gIHByb3ZpZGVyLnNwZWVjaE1vZGVsID0gY3JlYXRlU3BlZWNoTW9kZWw7XG4gIHByb3ZpZGVyLnRvb2xzID0gb3BlbmFpVG9vbHM7XG4gIHJldHVybiBwcm92aWRlcjtcbn1cbnZhciBvcGVuYWkgPSBjcmVhdGVPcGVuQUkoKTtcbmV4cG9ydCB7XG4gIFZFUlNJT04sXG4gIGNyZWF0ZU9wZW5BSSxcbiAgb3BlbmFpXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@ai-sdk+openai@2.0.44_zod@3.25.76/node_modules/@ai-sdk/openai/dist/index.mjs\n");

/***/ })

};
;